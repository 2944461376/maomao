{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/klona/+esm\"","webpack://tavern_helper_template/src/_with_worldbook/components/SettingsTab.vue?0c26","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/pinia/+esm\"","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js","webpack://tavern_helper_template/src/_with_worldbook/components/SettingsTab.vue?e8a3","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js","webpack://tavern_helper_template/src/_with_worldbook/components/AIModifyDialog.vue?f208","src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/src/_with_worldbook/components/MvuBetaTab.vue?4d7e","src://tavern_helper_template/src/_with_worldbook/.ts","webpack://tavern_helper_template/src/_with_worldbook/components/ProgressDialog.vue?46b9","webpack://tavern_helper_template/src/_with_worldbook/components/HelpTab.vue?34f8","webpack://tavern_helper_template/src/_with_worldbook/components/ProgressDialog.vue?7deb","src://tavern_helper_template/src/_with_worldbook/utils.ts","webpack://tavern_helper_template/src/_with_worldbook/components/MainPanel.vue?9152","webpack://tavern_helper_template/src/_with_worldbook/components/ProjectManager.vue?4d66","webpack://tavern_helper_template/src/_with_worldbook/components/StatusBarGenerator.vue?2989","webpack://tavern_helper_template/src/_with_worldbook/components/MvuBetaTab.vue?4bc0","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","webpack://tavern_helper_template/src/_with_worldbook/components/ProjectManager.vue?ca4b","webpack://tavern_helper_template/src/_with_worldbook/components/ToolsTab.vue?76e8","webpack://tavern_helper_template/src/_with_worldbook/components/GreetingsTab.vue?db4f","src://tavern_helper_template/src/_with_worldbook/settings.ts","webpack://tavern_helper_template/src/_with_worldbook/components/HelpTab.vue?0019","webpack://tavern_helper_template/src/_with_worldbook/components/AIModifyDialog.vue?ebd9","webpack://tavern_helper_template/src/_with_worldbook/components/TableTab.vue?01d1","webpack://tavern_helper_template/src/_with_worldbook/components/StatusBarGenerator.vue?f37b","src://tavern_helper_template/src/_with_worldbook/.ts","webpack://tavern_helper_template/src/_with_worldbook/components/RegexUIGenerator.vue?4d93","webpack://tavern_helper_template/src/_with_worldbook/components/MainPanel.vue?a14a","webpack://tavern_helper_template/src/_with_worldbook/components/AIGenerateDialog.vue?c090","src://tavern_helper_template/external var \"z\"","webpack://tavern_helper_template/src/_with_worldbook/components/ToolsTab.vue?5a87","webpack://tavern_helper_template/src/_with_worldbook/components/RegexUIGenerator.vue?8822","webpack://tavern_helper_template/src/_with_worldbook/components/GreetingsTab.vue?98ee","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src/_with_worldbook/components/SummaryTab.vue?6a15","webpack://tavern_helper_template/src/_with_worldbook/components/TableTab.vue?73bf","webpack://tavern_helper_template/src/_with_worldbook/components/AIGenerateDialog.vue?1417","webpack://tavern_helper_template/src/_with_worldbook/components/SummaryTab.vue?8f7b","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/external var \"toastr\"","src://tavern_helper_template/src/_with_worldbook/utils/api.ts","src://tavern_helper_template/src/_with_worldbook/components/AIGenerateDialog.vue","webpack://tavern_helper_template/src/_with_worldbook/components/AIGenerateDialog.vue?8444","src://tavern_helper_template/src/_with_worldbook/components/AIModifyDialog.vue","webpack://tavern_helper_template/src/_with_worldbook/components/AIModifyDialog.vue?5996","src://tavern_helper_template/src/_with_worldbook/components/GreetingsTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/GreetingsTab.vue?d386","src://tavern_helper_template/src/_with_worldbook/components/HelpTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/HelpTab.vue?2885","src://tavern_helper_template/src/_with_worldbook/components/MvuBetaTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/MvuBetaTab.vue?0f63","src://tavern_helper_template/src/_with_worldbook/components/ProgressDialog.vue","webpack://tavern_helper_template/src/_with_worldbook/components/ProgressDialog.vue?c6e1","src://tavern_helper_template/src/_with_worldbook/components/ProjectManager.vue","webpack://tavern_helper_template/src/_with_worldbook/components/ProjectManager.vue?948a","src://tavern_helper_template/src/_with_worldbook/components/RegexUIGenerator.vue","webpack://tavern_helper_template/src/_with_worldbook/components/RegexUIGenerator.vue?0c30","src://tavern_helper_template/src/_with_worldbook/components/SettingsTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/SettingsTab.vue?cd93","src://tavern_helper_template/src/_with_worldbook/components/StatusBarGenerator.vue","webpack://tavern_helper_template/src/_with_worldbook/components/StatusBarGenerator.vue?504c","src://tavern_helper_template/src/_with_worldbook/components/SummaryTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/SummaryTab.vue?069e","src://tavern_helper_template/src/_with_worldbook/components/TableTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/TableTab.vue?0e36","src://tavern_helper_template/external var \"_\"","src://tavern_helper_template/src/_with_worldbook/components/ToolsTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/ToolsTab.vue?6517","src://tavern_helper_template/src/_with_worldbook/components/MainPanel.vue","src://tavern_helper_template/src/_with_worldbook/.ts","webpack://tavern_helper_template/src/_with_worldbook/components/MainPanel.vue?0c83","webpack://tavern_helper_template/src/_with_worldbook/.vue?f987","src://tavern_helper_template/src/_with_worldbook/.vue","src://tavern_helper_template/src/_with_worldbook/index.ts"],"sourcesContent":["var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"klona\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_klona_esm_74666e88__.klona) });","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=bb81dbda&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"a8bef5aa\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=bb81dbda&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=bb81dbda&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"createPinia\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.createPinia), [\"defineStore\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.defineStore), [\"storeToRefs\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.storeToRefs) });","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.settings-tab{height:100%;overflow-y:auto;padding:25px !important;background:#1a1a1a !important;border:2px solid red !important}.config-section{padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.config-section:last-child{border-bottom:none;margin-bottom:0}.config-section h3{margin:0 0 20px 0 !important;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.form-group{margin-bottom:18px !important}.form-group label{display:block;margin-bottom:6px;color:#ccc;font-size:13px}.checkbox-label{display:flex;align-items:center;gap:8px}.flex-label{display:flex;justify-content:space-between;align-items:center}.form-group input[type='text'],.form-group input[type='password'],.form-group input[type='number'],.form-group select{width:100%;padding:10px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;color:#e0e0e0;font-size:13px;transition:border-color 0.2s}.form-group input:focus,.form-group select:focus{outline:none;border-color:#4a9eff}.model-controls{display:flex;flex-direction:column;gap:10px}.button-group{display:flex;gap:12px;flex-wrap:wrap;margin-top:5px}.action-button{flex:1;min-width:120px;padding:12px 16px;border:none;border-radius:6px;cursor:pointer;font-weight:500;font-size:13px;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:6px;background:#3a3a3a;color:#e0e0e0;border:1px solid #4a4a4a}.action-button:hover{background:#4a4a4a;border-color:#5a5a5a}.test-button{background:#3a3a3a;color:#e0e0e0;border:1px solid #4a4a4a}.test-button:hover{background:#4a4a4a;border-color:#5a5a5a}.fetch-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.fetch-button:hover{background:#5aaeff;border-color:#6abeff}.summarize-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.summarize-button:hover{background:#5aaeff;border-color:#6abeff}.create-button{background:#51cf66;color:white;border:1px solid #40c057}.create-button:hover{background:#40c057;border-color:#37b24d}.table-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.table-button:hover{background:#5aaeff;border-color:#6abeff}.hide-button{background:#ff6b6b;color:white;border:1px solid #ff5252}.hide-button:hover{background:#ff5252;border-color:#ff4444}.unhide-button{background:#51cf66;color:white;border:1px solid #40c057}.unhide-button:hover{background:#40c057;border-color:#37b24d}.refresh-button{background:#ffd43b;color:#333;border:1px solid #ffcc02}.refresh-button:hover{background:#ffcc02;border-color:#ffb700}.action-button:disabled{opacity:0.5;cursor:not-allowed}.model-select{margin-top:8px}.hidden-messages-section{margin-top:20px}.hidden-messages-list{max-height:300px;overflow-y:auto;border-radius:6px;border:1px solid #3a3a3a;background:#1a1a1a}.hidden-message-item{padding:10px 12px;display:flex;align-items:center;gap:12px;border-bottom:1px solid #2a2a2a;transition:background 0.2s}.hidden-message-item:last-child{border-bottom:none}.hidden-message-item:hover{background:#2a2a2a}.message-info{display:flex;align-items:center;gap:10px;flex:1}.message-id{font-weight:bold;color:#4a9eff;font-size:13px;min-width:50px}.message-role{font-size:12px;padding:2px 8px;border-radius:4px;white-space:nowrap}.message-role.role-user{background:#3a5a3a;color:#90ee90}.message-role.role-assistant{background:#3a3a5a;color:#90a0ee}.message-role.role-system{background:#5a5a3a;color:#eea090}.message-preview{flex:1;color:#888;font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.show-button{background:#4a9eff !important;color:white !important;padding:6px 12px;border:1px solid #5aaeff !important;border-radius:4px;cursor:pointer;font-size:12px;transition:all 0.2s;min-width:60px;text-align:center}.show-button:hover{background:#5aaeff !important;border-color:#6abeff !important}.mini-button{background:#666;color:white;border:1px solid #777;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;transition:all 0.2s}.mini-button:hover{background:#777;border-color:#888}.empty-state{margin-top:20px;padding:20px;background:#2a2a2a;border-radius:6px;text-align:center;color:#888;border:1px solid #3a3a3a}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/SettingsTab.vue\"],\"names\":[],\"mappings\":\"AAmgFA,cACE,WAAY,CACZ,eAAgB,CAChB,uBAAwB,CACxB,6BAA8B,CAC9B,+BACF,CAEA,gBACE,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,2BACE,kBAAmB,CACnB,eACF,CAEA,mBACE,4BAA6B,CAC7B,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,YACE,6BACF,CAEA,kBACE,aAAc,CACd,iBAAkB,CAClB,UAAW,CACX,cACF,CAEA,gBACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,YACE,YAAa,CACb,6BAA8B,CAC9B,kBACF,CAEA,sHAIE,UAAW,CACX,iBAAkB,CAClB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,4BACF,CAEA,iDAEE,YAAa,CACb,oBACF,CAEA,gBACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,cACE,YAAa,CACb,QAAS,CACT,cAAe,CACf,cACF,CAEA,eACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,cAAe,CACf,mBAAoB,CACpB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,kBAAmB,CACnB,aAAc,CACd,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,aACE,kBAAmB,CACnB,aAAc,CACd,wBACF,CAEA,mBACE,kBAAmB,CACnB,oBACF,CAEA,cACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,oBACE,kBAAmB,CACnB,oBACF,CAEA,kBACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,wBACE,kBAAmB,CACnB,oBACF,CAEA,eACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,cACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,oBACE,kBAAmB,CACnB,oBACF,CAEA,aACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,mBACE,kBAAmB,CACnB,oBACF,CAEA,eACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,gBACE,kBAAmB,CACnB,UAAW,CACX,wBACF,CAEA,sBACE,kBAAmB,CACnB,oBACF,CAEA,wBACE,WAAY,CACZ,kBACF,CAEA,cACE,cACF,CAEA,yBACE,eACF,CAEA,sBACE,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,wBAAyB,CACzB,kBACF,CAEA,qBACE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,+BAAgC,CAChC,0BACF,CAEA,gCACE,kBACF,CAEA,2BACE,kBACF,CAEA,cACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,YACE,gBAAiB,CACjB,aAAc,CACd,cAAe,CACf,cACF,CAEA,cACE,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,kBACF,CAEA,wBACE,kBAAmB,CACnB,aACF,CAEA,6BACE,kBAAmB,CACnB,aACF,CAEA,0BACE,kBAAmB,CACnB,aACF,CAEA,iBACE,MAAO,CACP,UAAW,CACX,cAAe,CACf,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAEA,aACE,6BAA8B,CAC9B,sBAAuB,CACvB,gBAAiB,CACjB,mCAAoC,CACpC,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,mBAAoB,CACpB,cAAe,CACf,iBACF,CAEA,mBACE,6BAA8B,CAC9B,+BACF,CAEA,aACE,eAAgB,CAChB,WAAY,CACZ,qBAAsB,CACtB,gBAAiB,CACjB,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,mBACF,CAEA,mBACE,eAAgB,CAChB,iBACF,CAEA,aACE,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,iBAAkB,CAClB,iBAAkB,CAClB,UAAW,CACX,wBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"settings-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!-- API  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%);\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('api')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-cog\\\" style=\\\"color: #17a2b8; font-size: 18px\\\"></i>\\n          API \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['api'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['api']\\\">\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">API </label>\\n        <select\\n          v-model=\\\"settings.api_provider\\\"\\n          @change=\\\"handleProviderChange\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n            cursor: pointer;\\n          \\\"\\n        >\\n          <option value=\\\"openai\\\">OpenAI</option>\\n          <option value=\\\"gemini\\\">Gemini AI Studio</option>\\n        </select>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n          API \\n          <span style=\\\"color: #888; font-size: 11px; margin-left: 8px\\\">\\n            ( base URL )\\n          </span>\\n        </label>\\n        <input\\n          v-model=\\\"settings.api_endpoint\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"https:///v1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <div style=\\\"margin-top: 8px; padding: 8px 12px; background: rgba(74, 158, 255, 0.1); border-radius: 4px; border-left: 3px solid #4a9eff;\\\">\\n          <div style=\\\"color: #4a9eff; font-size: 12px; font-weight: bold; margin-bottom: 4px;\\\"> </div>\\n          <div style=\\\"color: #999; font-size: 11px; line-height: 1.6;\\\">\\n             <strong>OpenAI :</strong> https://api.openai.com/v1<br>\\n             <strong>Gemini AI Studio:</strong> https://generativelanguage.googleapis.com/v1beta/openai/<br>\\n             <strong>NewAPI / One API:</strong> https:///v1<br>\\n             <strong> (Ollama):</strong> http://localhost:11434/v1<br>\\n             <strong></strong> /chat/completions\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">API Key</label>\\n        <input\\n          v-model=\\\"settings.api_key\\\"\\n          type=\\\"password\\\"\\n          placeholder=\\\"sk-...\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <div class=\\\"model-controls\\\" style=\\\"display: flex; flex-direction: column; gap: 10px\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n            \\n            <span v-if=\\\"available_models.length === 0\\\" style=\\\"color: #888; font-size: 11px; margin-left: 8px\\\">\\n              ( gpt-4o-mini)\\n            </span>\\n          </label>\\n          <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n            <button\\n              :disabled=\\\"loading_models\\\"\\n              class=\\\"fetch-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                min-width: 120px;\\n                padding: 12px 16px;\\n                border: 1px solid #5aaeff;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-weight: 500;\\n                font-size: 13px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n                background: linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%);\\n                box-shadow: 0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n                color: white;\\n              \\\"\\n              onmouseover=\\\"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(74, 158, 255, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\\\"\\n              onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\\\"\\n              @click=\\\"handle_fetch_models\\\"\\n            >\\n              {{ loading_models ? '...' : ' ' }}\\n            </button>\\n            <button\\n              class=\\\"save-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                min-width: 120px;\\n                padding: 12px 16px;\\n                border: 1px solid #28a745;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-weight: 500;\\n                font-size: 13px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n                background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);\\n                box-shadow: 0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n                color: white;\\n              \\\"\\n              onmouseover=\\\"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(81, 207, 102, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\\\"\\n              onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\\\"\\n              @click=\\\"handleSaveApiConfig\\\"\\n            >\\n               \\n            </button>\\n          </div>\\n        </div>\\n        <input\\n          v-if=\\\"available_models.length === 0\\\"\\n          v-model=\\\"settings.model\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"gpt-4o-mini  deepseek-chat \\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <select\\n          v-else\\n          v-model=\\\"settings.model\\\"\\n          class=\\\"model-select\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        >\\n          <option v-for=\\\"model in available_models\\\" :key=\\\"model\\\" :value=\\\"model\\\">{{ model }}</option>\\n        </select>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"\\n          > Token 4000</label\\n        >\\n        <input\\n          v-model.number=\\\"settings.max_tokens\\\"\\n          type=\\\"number\\\"\\n          min=\\\"100\\\"\\n          max=\\\"16000\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n          Temperature () <span style=\\\"color: #888; font-size: 11px\\\">(0-2 0.7)</span>\\n        </label>\\n        <input\\n          v-model.number=\\\"settings.temperature\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          max=\\\"2\\\"\\n          step=\\\"0.1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <div style=\\\"margin-top: 4px; color: #888; font-size: 11px;\\\">\\n           0.8 0.2\\n        </div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n          Top P () <span style=\\\"color: #888; font-size: 11px\\\">(0-1 1.0)</span>\\n        </label>\\n        <input\\n          v-model.number=\\\"settings.top_p\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          max=\\\"1\\\"\\n          step=\\\"0.01\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <div style=\\\"margin-top: 4px; color: #888; font-size: 11px;\\\">\\n            Temperature  Top P\\n        </div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n          Presence Penalty () <span style=\\\"color: #888; font-size: 11px\\\">(-2.0 to 2.0 0)</span>\\n        </label>\\n        <input\\n          v-model.number=\\\"settings.presence_penalty\\\"\\n          type=\\\"number\\\"\\n          min=\\\"-2\\\"\\n          max=\\\"2\\\"\\n          step=\\\"0.1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <div style=\\\"margin-top: 4px; color: #888; font-size: 11px;\\\">\\n          \\n        </div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n          Frequency Penalty () <span style=\\\"color: #888; font-size: 11px\\\">(-2.0 to 2.0 0)</span>\\n        </label>\\n        <input\\n          v-model.number=\\\"settings.frequency_penalty\\\"\\n          type=\\\"number\\\"\\n          min=\\\"-2\\\"\\n          max=\\\"2\\\"\\n          step=\\\"0.1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <div style=\\\"margin-top: 4px; color: #888; font-size: 11px;\\\">\\n          \\n        </div>\\n      </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%);\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('autoSummary')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-bolt\\\" style=\\\"color: #ffc107; font-size: 18px\\\"></i>\\n          \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['autoSummary'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['autoSummary']\\\">\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label\\n          class=\\\"checkbox-label\\\"\\n          style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px\\\"\\n        >\\n          <input v-model=\\\"settings.auto_summarize_enabled\\\" type=\\\"checkbox\\\" style=\\\"width: 16px; height: 16px\\\" />\\n          \\n        </label>\\n      </div>\\n      <div v-if=\\\"settings.auto_summarize_enabled\\\" class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.summarize_interval\\\"\\n          type=\\\"number\\\"\\n          min=\\\"1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <div style=\\\"margin-top: 10px; display: flex; gap: 10px\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleSaveSettings\\\"\\n          >\\n             \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleReloadSettings\\\"\\n          >\\n             \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleResetAutoSummaryStart\\\"\\n          >\\n             \\n          </button>\\n        </div>\\n      </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%);\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('manualSummary')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-pen-to-square\\\" style=\\\"color: #28a745; font-size: 18px\\\"></i>\\n          \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['manualSummary'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['manualSummary']\\\">\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.start_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.end_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button test-button\\\"\\n          :disabled=\\\"is_summarizing\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #4a4a4a;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #3a3a3a;\\n            color: #e0e0e0;\\n          \\\"\\n          @click=\\\"handle_test_connection\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plug\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button summarize-button\\\"\\n          :disabled=\\\"is_summarizing || !settings.api_key\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #5aaeff;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%);\\n            box-shadow: 0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_summarize\\\"\\n        >\\n          <i v-if=\\\"!is_summarizing\\\" class=\\\"fa-solid fa-magic\\\"></i>\\n          <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\"></i>\\n          {{ is_summarizing ? '...' : '' }}\\n        </button>\\n      </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%);\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('tableGeneration')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-table\\\" style=\\\"color: #6f42c1; font-size: 18px\\\"></i>\\n          \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['tableGeneration'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['tableGeneration']\\\">\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.table_start_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.table_end_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <div style=\\\"display: flex; gap: 8px; margin-bottom: 8px\\\">\\n          <select\\n            v-model=\\\"selectedTemplate\\\"\\n            style=\\\"\\n              flex: 1;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n            @change=\\\"loadTemplate\\\"\\n          >\\n            <option value=\\\"\\\">...</option>\\n            <option v-for=\\\"(template, index) in headerTemplates\\\" :key=\\\"index\\\" :value=\\\"index\\\">\\n              {{ template.name }}\\n            </option>\\n          </select>\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #4a9eff;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"showAddTemplateDialog\\\"\\n          >\\n            <i class=\\\"fa-solid fa-plus\\\"></i> \\n          </button>\\n        </div>\\n        <div v-if=\\\"selectedTemplate !== ''\\\" style=\\\"display: flex; gap: 8px\\\">\\n          <input\\n            v-model=\\\"currentTemplate.name\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              flex: 1;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n          />\\n          <input\\n            v-model=\\\"currentTemplate.headers\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              flex: 2;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n          />\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #28a745;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"saveTemplate\\\"\\n          >\\n            <i class=\\\"fa-solid fa-save\\\"></i> \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #dc3545;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"deleteTemplate\\\"\\n          >\\n            <i class=\\\"fa-solid fa-trash\\\"></i> \\n          </button>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <div style=\\\"display: flex; gap: 12px; align-items: center\\\">\\n          <div style=\\\"display: flex; align-items: center; gap: 6px\\\">\\n            <div\\n              :style=\\\"{\\n                width: '8px',\\n                height: '8px',\\n                borderRadius: '50%',\\n                backgroundColor: is_summarizing ? '#ff6b6b' : '#4caf50',\\n                transition: 'background-color 0.3s',\\n              }\\\"\\n            ></div>\\n            <span style=\\\"color: #ccc; font-size: 12px\\\"></span>\\n          </div>\\n          <div style=\\\"display: flex; align-items: center; gap: 6px\\\">\\n            <div\\n              :style=\\\"{\\n                width: '8px',\\n                height: '8px',\\n                borderRadius: '50%',\\n                backgroundColor: is_generating_table ? '#ff6b6b' : '#4caf50',\\n                transition: 'background-color 0.3s',\\n              }\\\"\\n            ></div>\\n            <span style=\\\"color: #ccc; font-size: 12px\\\"></span>\\n          </div>\\n          <div v-if=\\\"is_summarizing || is_generating_table\\\" style=\\\"margin-left: auto\\\">\\n            <button\\n              style=\\\"\\n                padding: 4px 8px;\\n                background: #dc3545;\\n                border: none;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 11px;\\n              \\\"\\n              @click=\\\"stopGeneration\\\"\\n            >\\n              <i class=\\\"fa-solid fa-stop\\\"></i> \\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button summarize-button\\\"\\n          :disabled=\\\"is_generating_table || !settings.api_key\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #5aaeff;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%);\\n            box-shadow: 0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_generate_table\\\"\\n        >\\n          <i v-if=\\\"!is_generating_table\\\" class=\\\"fa-solid fa-robot\\\"></i>\\n          <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\"></i>\\n          {{ is_generating_table ? 'AI...' : 'AI' }}\\n        </button>\\n        <button\\n          class=\\\"action-button create-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #40c057;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);\\n            box-shadow: 0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_create_table\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\"></i> \\n        </button>\\n      </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%);\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('messageManagement')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-layer-group\\\" style=\\\"color: #dc3545; font-size: 18px\\\"></i>\\n          \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['messageManagement'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['messageManagement']\\\">\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"\\n          >1-10 5</label\\n        >\\n        <input\\n          v-model=\\\"hide_range\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"1-10\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #ff5252;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #ff6b6b;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_hide_messages\\\"\\n        >\\n          <i class=\\\"fa-solid fa-eye-slash\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #40c057;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);\\n            box-shadow: 0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n            color: white;\\n          \\\"\\n          :disabled=\\\"!hide_range.trim()\\\"\\n          @click=\\\"handle_show_messages\\\"\\n        >\\n          <i class=\\\"fa-solid fa-eye\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #ffcc02;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #ffd43b;\\n            color: #333;\\n          \\\"\\n          @click=\\\"() => handle_refresh_hidden(true)\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n      </div>\\n\\n      <!--  -->\\n      <div v-if=\\\"hidden_messages.length > 0\\\" class=\\\"hidden-messages-section\\\">\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"flex-label\\\">\\n            <span> ({{ hidden_messages.length }} )</span>\\n            <button class=\\\"mini-button\\\" @click=\\\"hidden_display_expanded = !hidden_display_expanded\\\">\\n              {{ hidden_display_expanded ? '' : '' }}\\n            </button>\\n          </label>\\n        </div>\\n        <div v-if=\\\"hidden_display_expanded\\\" class=\\\"hidden-messages-list\\\">\\n          <div v-for=\\\"msg in hidden_messages\\\" :key=\\\"msg.message_id\\\" class=\\\"hidden-message-item\\\">\\n            <div class=\\\"message-info\\\">\\n              <span class=\\\"message-id\\\">#{{ msg.message_id }}</span>\\n              <span class=\\\"message-role\\\" :class=\\\"'role-' + msg.role\\\">\\n                {{ msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '' }}\\n                {{ msg.name }}\\n              </span>\\n              <span class=\\\"message-preview\\\">\\n                {{ msg.message.substring(0, 50) }}{{ msg.message.length > 50 ? '...' : '' }}\\n              </span>\\n            </div>\\n            <button class=\\\"show-button\\\" @click=\\\"() => handle_unhide_single(msg.message_id)\\\"></button>\\n          </div>\\n        </div>\\n      </div>\\n      <div v-else class=\\\"empty-state\\\"></div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <ProgressDialog ref=\\\"progressDialogRef\\\" :show=\\\"showProgress\\\" title=\\\"AI \\\" />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { onMounted, ref } from 'vue';\\nimport { useSettingsStore, useSummaryHistoryStore } from '../settings';\\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\\nimport ProgressDialog from './ProgressDialog.vue';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\nconst summaryHistoryStore = useSummaryHistoryStore();\\n\\n// \\nconst expandedSections = ref<Record<string, boolean>>({\\n  api: true,\\n  autoSummary: true,\\n  manualSummary: true,\\n  tableGeneration: true,\\n  messageManagement: true,\\n});\\n\\n// /\\nconst toggleSection = (section: string) => {\\n  expandedSections.value[section] = !expandedSections.value[section];\\n};\\n\\n// API\\n// setChatMessages \\n\\n// \\nconst parseMessageRange = (range: string): number[] => {\\n  if (!range.trim()) return [];\\n\\n  const messageIds: number[] = [];\\n  const parts = range.split(',');\\n\\n  for (const part of parts) {\\n    const trimmed = part.trim();\\n    if (!trimmed) continue;\\n\\n    if (trimmed.includes('-')) {\\n      //  \\\"1-10\\\"\\n      const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\\n      if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\\n        for (let i = start; i <= end; i++) {\\n          messageIds.push(i);\\n        }\\n      }\\n    } else {\\n      //  \\\"5\\\"  \\\"0\\\"\\n      const id = parseInt(trimmed);\\n      if (!isNaN(id) && id >= 0) {\\n        messageIds.push(id);\\n      }\\n    }\\n  }\\n\\n  return messageIds;\\n};\\n\\n// \\nconst available_models = ref<string[]>([]);\\nconst loading_models = ref(false);\\nconst hide_range = ref<string>('');\\nconst hidden_messages = ref<Array<{ message_id: number; name: string; role: string; message: string }>>([]);\\nconst hidden_display_expanded = ref(false);\\n\\n// \\nconst is_summarizing = ref(false);\\nconst is_generating_table = ref(false);\\n\\n// \\nconst showProgress = ref(false);\\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\\n\\n// \\nconst headerTemplates = ref<Array<{ name: string; headers: string }>>([]);\\nconst selectedTemplate = ref<string>('');\\nconst currentTemplate = ref<{ name: string; headers: string }>({ name: '', headers: '' });\\n\\n// \\nconst loadGenerationStatus = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    is_summarizing.value = scriptVars.is_summarizing || false;\\n    is_generating_table.value = scriptVars.is_generating_table || false;\\n    console.log(':', { summarizing: is_summarizing.value, generating_table: is_generating_table.value });\\n  } catch (error) {\\n    console.error(':', error);\\n    is_summarizing.value = false;\\n    is_generating_table.value = false;\\n  }\\n};\\n\\nconst saveGenerationStatus = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    insertOrAssignVariables(\\n      {\\n        is_summarizing: is_summarizing.value,\\n        is_generating_table: is_generating_table.value,\\n      },\\n      { type: 'script', script_id: scriptId },\\n    );\\n    console.log('');\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\nconst stopGeneration = () => {\\n  if (is_summarizing.value || is_generating_table.value) {\\n    is_summarizing.value = false;\\n    is_generating_table.value = false;\\n    saveGenerationStatus();\\n    window.toastr.info('');\\n  }\\n};\\n\\n// \\nconst loadHeaderTemplates = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    //  header_templates  nullundefined\\n    let templates = scriptVars.header_templates;\\n    //  nullundefined  []\\n    if (!Array.isArray(templates)) {\\n      templates = [];\\n    }\\n    headerTemplates.value = templates;\\n    console.log(':', headerTemplates.value.length, '');\\n  } catch (error) {\\n    console.error(':', error);\\n    headerTemplates.value = [];\\n  }\\n};\\n\\nconst saveHeaderTemplates = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    insertOrAssignVariables(klona({ header_templates: headerTemplates.value }), { type: 'script', script_id: scriptId });\\n    console.log('');\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\nconst loadTemplate = () => {\\n  if (selectedTemplate.value !== '') {\\n    const index = parseInt(selectedTemplate.value);\\n    if (index >= 0 && index < headerTemplates.value.length) {\\n      currentTemplate.value = { ...headerTemplates.value[index] };\\n    }\\n  }\\n};\\n\\nconst showAddTemplateDialog = () => {\\n  const name = window.prompt('');\\n  if (name && name.trim()) {\\n    const headers = window.prompt('');\\n    if (headers && headers.trim()) {\\n      headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\\n      saveHeaderTemplates();\\n      selectedTemplate.value = (headerTemplates.value.length - 1).toString();\\n      loadTemplate();\\n      window.toastr.success('');\\n    }\\n  }\\n};\\n\\nconst saveTemplate = () => {\\n  if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\\n    const index = parseInt(selectedTemplate.value);\\n    if (index >= 0 && index < headerTemplates.value.length) {\\n      headerTemplates.value[index] = { ...currentTemplate.value };\\n      saveHeaderTemplates();\\n      window.toastr.success('');\\n    }\\n  } else {\\n    window.toastr.warning('');\\n  }\\n};\\n\\nconst deleteTemplate = () => {\\n  if (selectedTemplate.value !== '') {\\n    if (confirm('')) {\\n      const index = parseInt(selectedTemplate.value);\\n      if (index >= 0 && index < headerTemplates.value.length) {\\n        headerTemplates.value.splice(index, 1);\\n        saveHeaderTemplates();\\n        selectedTemplate.value = '';\\n        currentTemplate.value = { name: '', headers: '' };\\n        window.toastr.success('');\\n      }\\n    }\\n  }\\n};\\n\\n// \\nconst loadHiddenMessages = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    console.log('ID:', scriptId);\\n\\n    const saved = getVariables({ type: 'script', script_id: scriptId });\\n    console.log(':', saved);\\n    console.log(' hidden_messages :', saved?.hidden_messages);\\n\\n    if (saved && saved.hidden_messages) {\\n      hidden_messages.value = saved.hidden_messages;\\n      console.log(':', hidden_messages.value.length, '');\\n    } else {\\n      console.log('...');\\n      // \\n      const possibleFields = ['hiddenMessages', 'hidden_floors', 'hiddenFloors', 'floor_data'];\\n      for (const field of possibleFields) {\\n        if (saved && saved[field]) {\\n          console.log(` ${field}:`, saved[field]);\\n          hidden_messages.value = saved[field];\\n          break;\\n        }\\n      }\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\n// \\nconst saveHiddenMessages = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    console.log('ID:', scriptId);\\n    console.log(':', klona(hidden_messages.value));\\n\\n    const dataToSave = {\\n      hidden_messages: hidden_messages.value,\\n    };\\n    console.log(':', klona(dataToSave));\\n\\n    insertOrAssignVariables(klona(dataToSave), { type: 'script', script_id: scriptId });\\n    console.log(':', hidden_messages.value.length, '');\\n\\n    // \\n    setTimeout(() => {\\n      const saved = getVariables({ type: 'script', script_id: scriptId });\\n      console.log(':', saved);\\n      console.log(' hidden_messages :', saved?.hidden_messages);\\n    }, 100);\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\n//  API \\nconst initApiProvider = () => {\\n  if (!settings.value.api_provider || settings.value.api_provider === '') {\\n    const endpoint = settings.value.api_endpoint || '';\\n    if (endpoint.includes('generativelanguage.googleapis.com')) {\\n      settings.value.api_provider = 'gemini';\\n    } else if (endpoint.includes('open.bigmodel.cn')) {\\n      settings.value.api_provider = 'zhipu';\\n    } else {\\n      settings.value.api_provider = 'openai';\\n    }\\n  }\\n};\\n\\n// \\nonMounted(() => {\\n  console.log('SettingsTab ');\\n  initApiProvider(); //  API \\n  loadHiddenMessages();\\n  loadHeaderTemplates();\\n  loadGenerationStatus();\\n});\\n\\n// \\nconst handleTestButton = () => {\\n  console.log(' - Vue');\\n  window.toastr.success('Vue');\\n};\\n\\n// \\nconst handleSaveSettings = () => {\\n  console.log(' ...');\\n  const success = settingsStore.saveSettings();\\n  if (success) {\\n    console.log(' ');\\n  } else {\\n    console.error(' ');\\n  }\\n};\\n\\nconst handleReloadSettings = () => {\\n  console.log(' ...');\\n  const success = settingsStore.reloadSettings();\\n  if (success) {\\n    console.log(' ');\\n  } else {\\n    console.error(' ');\\n  }\\n};\\n\\nconst handleResetAutoSummaryStart = () => {\\n  console.log(' ...');\\n  try {\\n    // \\n    if (typeof (window as any).resetAutoSummaryStart === 'function') {\\n      (window as any).resetAutoSummaryStart();\\n    } else {\\n      window.toastr.error('');\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// API \\nconst handleProviderChange = () => {\\n  const provider = settings.value.api_provider;\\n  const providerEndpoints: Record<string, string> = {\\n    openai: 'https://api.openai.com/v1',\\n    gemini: 'https://generativelanguage.googleapis.com/v1beta/openai',\\n  };\\n\\n  if (providerEndpoints[provider]) {\\n    settings.value.api_endpoint = providerEndpoints[provider];\\n    window.toastr.success(` ${provider === 'openai' ? 'OpenAI' : 'Gemini AI Studio'}`);\\n  }\\n};\\n\\n// \\n// API\\nconst handleSaveApiConfig = () => {\\n  try {\\n    // \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    const success = settingsStore.saveSettings();\\n    if (success) {\\n    console.log('API :', {\\n      endpoint: settings.value.api_endpoint,\\n      model: settings.value.model,\\n        provider: settings.value.api_provider,\\n      //  API Key\\n      api_key: settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '',\\n    });\\n    }\\n  } catch (error) {\\n    console.error(' API :', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst handleImportFromTavern = async () => {\\n  try {\\n    console.log(' ...');\\n\\n    // \\n    if (typeof triggerSlash === 'undefined') {\\n      window.toastr.error('');\\n      return;\\n    }\\n\\n    console.log(' ...');\\n\\n    //  1: \\n    console.log('1  /profile ...');\\n    const currentProfileResult = await triggerSlash('/profile', '');\\n    console.log(':', currentProfileResult);\\n\\n    // \\n    if (!currentProfileResult || currentProfileResult === 'No connection profile selected.' || currentProfileResult.includes('')) {\\n      console.log(' ...');\\n      \\n      // \\n      const parentWin = window.parent || window.top || window;\\n      const powerUser = (parentWin as any).power_user;\\n      const secretState = (parentWin as any).secret_state;\\n      \\n      let endpoint = '';\\n      let apiKey = '';\\n      let model = '';\\n      \\n      if (powerUser) {\\n        endpoint = powerUser.custom_chat_url || powerUser.reverse_proxy || '';\\n        model = powerUser.custom_model || powerUser.openai_model || '';\\n      }\\n      \\n      if (secretState) {\\n        apiKey = secretState.api_key_custom || secretState.custom || secretState.openai || '';\\n      }\\n      \\n      if (!endpoint && !apiKey && !model) {\\n        window.toastr.warning(\\n          ' API \\\\n\\\\n' +\\n          ' \\\\n' +\\n          'API     '\\n        );\\n        return;\\n      }\\n      \\n      // \\n      if (endpoint) settings.value.api_endpoint = endpoint;\\n      if (apiKey) settings.value.api_key = apiKey;\\n      if (model) settings.value.model = model;\\n      \\n      await settingsStore.saveSettings();\\n      \\n      window.toastr.success(\\n        ` \\\\n\\\\n` +\\n        (endpoint ? ` : ${endpoint}\\\\n` : '') +\\n        (apiKey ? ` Key: ***${apiKey.slice(-4)}\\\\n` : '') +\\n        (model ? ` : ${model}` : '')\\n      );\\n      \\n      return;\\n    }\\n\\n    //  2: \\n    const profileName = currentProfileResult.trim();\\n    console.log(`2 : ${profileName}`);\\n    \\n    const profileDetailsResult = await triggerSlash('/profile-get', profileName);\\n    console.log(':', profileDetailsResult);\\n\\n    //  JSON\\n    let profileData: any;\\n    try {\\n      profileData = JSON.parse(profileDetailsResult);\\n      console.log(' :', profileData);\\n    } catch (parseError) {\\n      console.error('  JSON :', parseError);\\n      window.toastr.error('');\\n      return;\\n    }\\n\\n    // \\n    let endpoint = '';\\n    let apiKey = '';\\n    let model = '';\\n    \\n    // API  api-url  server_url\\n    if (profileData['api-url']) {\\n      endpoint = profileData['api-url'];\\n      console.log('  API  (api-url):', endpoint);\\n    } else if (profileData.server_url) {\\n      endpoint = profileData.server_url;\\n      console.log('  API  (server_url):', endpoint);\\n    }\\n    \\n    // API Key - \\n    if (profileData['secret-id']) {\\n      const secretId = profileData['secret-id'];\\n      console.log('  secret-id:', secretId);\\n      console.log(' API Key ');\\n    } else if (profileData.key) {\\n      apiKey = profileData.key;\\n      console.log('  API Key (key)');\\n    }\\n    \\n    // model\\n    if (profileData.model) {\\n      model = profileData.model;\\n      console.log(' :', model);\\n    }\\n\\n    // \\n    if (!endpoint && !model) {\\n      window.toastr.warning(\\n        ' API \\\\n\\\\n' +\\n        '\\\\n' +\\n        ' \\\\n' +\\n        ' \\\\n\\\\n' +\\n        ' '\\n      );\\n      console.warn(' :', profileData);\\n      return;\\n    }\\n    \\n    //  API Key\\n    if (!apiKey) {\\n      console.log(' API Key ');\\n    }\\n\\n    // \\n    let importedCount = 0;\\n    const importDetails: string[] = [];\\n    \\n    if (endpoint) {\\n      settings.value.api_endpoint = endpoint;\\n      importedCount++;\\n      importDetails.push(` API : ${endpoint}`);\\n    }\\n    \\n    if (apiKey) {\\n      settings.value.api_key = apiKey;\\n      importedCount++;\\n      importDetails.push(` API Key: ***${apiKey.slice(-4)}`);\\n    }\\n    \\n    if (model) {\\n      settings.value.model = model;\\n      importedCount++;\\n      importDetails.push(` : ${model}`);\\n    }\\n\\n    // \\n    await settingsStore.saveSettings();\\n\\n    // \\n    let successMessage = `  ${importedCount} \\\\n\\\\n` +\\n      ` : ${profileName}\\\\n\\\\n` +\\n      `${importDetails.join('\\\\n')}`;\\n    \\n    //  API Key\\n    if (!apiKey) {\\n      successMessage += `\\\\n\\\\n API Key \\\\n API Key`;\\n    }\\n\\n    window.toastr.success(successMessage);\\n\\n    console.log(' :', {\\n      profileName,\\n      endpoint,\\n      apiKey: apiKey ? '***' + apiKey.slice(-4) : '',\\n      model,\\n    });\\n\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_fetch_models = async () => {\\n  if (loading_models.value) return;\\n\\n  try {\\n    loading_models.value = true;\\n    console.log(' ...');\\n    console.log(' API :', settings.value.api_endpoint);\\n    console.log(' API Key:', settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '');\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    window.toastr.info('...');\\n\\n    // \\n    const { fetchAvailableModels } = await import('../');\\n    const models = await fetchAvailableModels();\\n\\n    console.log(' :', models);\\n\\n    if (models.length > 0) {\\n      // \\n      available_models.value = models;\\n      window.toastr.success(\\n        `  ${models.length} \\\\n` +\\n        `: ${models.slice(0, 3).join(', ')}${models.length > 3 ? '...' : ''}`\\n      );\\n\\n      // \\n      if (!settings.value.model && models[0]) {\\n        settings.value.model = models[0];\\n        console.log(' :', models[0]);\\n      }\\n    } else {\\n      window.toastr.warning('');\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n    \\n    // \\n    const errorMessage = (error as Error).message;\\n    \\n    // \\n    if (errorMessage.length > 200) {\\n      window.toastr.error(\\n        ' \\\\n\\\\n' +\\n        'F12\\\\n\\\\n' +\\n        '\\\\n' +\\n        ' API  /v1/models \\\\n' +\\n        ' API Key \\\\n' +\\n        '  CORS '\\n      );\\n    } else {\\n      window.toastr.error(` \\\\n\\\\n${errorMessage}`);\\n    }\\n    \\n    console.error(' :', errorMessage);\\n  } finally {\\n    loading_models.value = false;\\n  }\\n};\\n\\nconst handle_test_connection = async () => {\\n  try {\\n    console.log('...');\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    window.toastr.info('...');\\n\\n    // \\n    const { normalizeApiEndpoint } = await import('../settings');\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    console.log(' :', apiUrl);\\n\\n    //  OpenAI \\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model || 'gpt-3.5-turbo',\\n        messages: [{ role: 'user', content: 'Hello' }],\\n        max_tokens: 5,\\n        temperature: settings.value.temperature,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (response.ok) {\\n      const data = await response.json();\\n      console.log('API :', data);\\n      \\n      // \\n      const reply = data.choices?.[0]?.message?.content || '()';\\n      const modelUsed = data.model || settings.value.model;\\n      \\n      window.toastr.success(\\n        ` \\\\n` +\\n        ` : ${modelUsed}\\\\n` +\\n        ` : ${reply.substring(0, 50)}...`\\n      );\\n    } else {\\n      const errorText = await response.text();\\n      console.error('API :', errorText);\\n      window.toastr.error(\\n        `  (${response.status})\\\\n` +\\n        `: ${errorText.substring(0, 100)}`\\n      );\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_summarize = async () => {\\n  try {\\n    if (is_summarizing.value) return;\\n\\n    console.log('...');\\n    is_summarizing.value = true;\\n    saveGenerationStatus();\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    if (settings.value.start_message_id === undefined || settings.value.end_message_id === undefined) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    if (settings.value.start_message_id < 0 || settings.value.end_message_id < settings.value.start_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    console.log(`: ${settings.value.start_message_id} - ${settings.value.end_message_id}`);\\n\\n    // \\n    showProgress.value = true;\\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(`: ${settings.value.start_message_id} - ${settings.value.end_message_id}`);\\n\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(' 10-30 ');\\n\\n    // \\n    const { summarizeMessages } = await import('../');\\n    const summary = await summarizeMessages(settings.value.start_message_id, settings.value.end_message_id);\\n\\n    progressDialogRef.value?.setProgress(90);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    console.log(':', summary);\\n\\n    // \\n    const scriptId = getScriptIdSafe();\\n    if (scriptId) {\\n      insertOrAssignVariables(klona({ last_summary: summary }), { type: 'script', script_id: scriptId });\\n    }\\n\\n    // \\n    summaryHistoryStore.addSummary(\\n      settings.value.start_message_id ?? 0,\\n      settings.value.end_message_id ?? settings.value.start_message_id ?? 0,\\n      summary,\\n    );\\n\\n    // \\n    window.dispatchEvent(new CustomEvent('summary-history-updated'));\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail('');\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n    window.toastr.success('');\\n    }, 800);\\n  } catch (error) {\\n    console.error(':', error);\\n    showProgress.value = false;\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    is_summarizing.value = false;\\n    saveGenerationStatus();\\n  }\\n};\\n\\nconst handle_generate_table = async () => {\\n  try {\\n    if (is_generating_table.value) return;\\n\\n    console.log('...');\\n    is_generating_table.value = true;\\n    saveGenerationStatus();\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    showProgress.value = true;\\n    progressDialogRef.value?.setProgress(5);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    // \\n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let headersInput: string | null = null;\\n\\n    if (currentTemplate.value.headers.trim()) {\\n      // \\n      const useTemplate = confirm(\\n        `\\\"${currentTemplate.value.name}\\\"\\\\n${currentTemplate.value.headers}`,\\n      );\\n      if (useTemplate) {\\n        headersInput = currentTemplate.value.headers;\\n      }\\n    }\\n\\n    if (!headersInput) {\\n      // \\n      headersInput = window.prompt(',,,');\\n    }\\n\\n    if (!headersInput || !headersInput.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    const headers: string[] = headersInput\\n      .split(',')\\n      .map((h: string) => h.trim())\\n      .filter((h: string) => h);\\n\\n    if (headers.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    progressDialogRef.value?.setProgress(15);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(`: ${settings.value.table_start_message_id} - ${settings.value.table_end_message_id}`);\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\\n      console.log(':', messageRange);\\n      chatMessages = getChatMessages(messageRange, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n      \\n      progressDialogRef.value?.addDetail(` ${chatMessages.length} `);\\n    } catch (error) {\\n      console.error(':', error);\\n      showProgress.value = false;\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // AI\\n    const messagesText = chatMessages\\n      .map(msg => {\\n        const role = msg.role === 'user' ? '' : 'AI';\\n        return `${role}: ${msg.message}`;\\n      })\\n      .join('\\\\n\\\\n');\\n\\n    const aiPrompt = `${headers.join(', ')}\\n\\n\\n${messagesText}\\n\\n****\\n1. \\n2. ${headers.join(', ')}\\n3. \\n4. \\\"\\\"\\\"-\\\"\\n5. JSONmarkdown\\n6. dataheaders\\n\\n**JSON**\\n{\\n  \\\"data\\\": [\\n    [\\\"1\\\", \\\"2\\\", \\\"3\\\"],\\n    [\\\"4\\\", \\\"5\\\", \\\"6\\\"]\\n  ]\\n}\\n\\ndata${headers.length}${headers.join(', ')}`;\\n\\n    console.log('AI...');\\n    \\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${headers.join(', ')}`);\\n\\n    // \\n    const { normalizeApiEndpoint } = await import('../settings');\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n\\n    progressDialogRef.value?.setProgress(40);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(' 10-30 ');\\n\\n    // AI\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'user',\\n            content: aiPrompt,\\n          },\\n        ],\\n        max_tokens: settings.value.max_tokens,\\n        temperature: settings.value.temperature,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API: ${response.status} ${response.statusText}`);\\n    }\\n\\n    progressDialogRef.value?.setProgress(70);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const result = await response.json();\\n    console.log('AI:', result);\\n\\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\\n      throw new Error('AI');\\n    }\\n\\n    const aiResponse = result.choices[0].message.content;\\n    console.log('AI:', aiResponse);\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    // AIJSON\\n    let aiTableData;\\n    try {\\n      // JSONmarkdown\\n      let jsonText = aiResponse.trim();\\n\\n      // markdown\\n      jsonText = jsonText\\n        .replace(/^```json\\\\s*/i, '')\\n        .replace(/^```\\\\s*/, '')\\n        .replace(/```\\\\s*$/, '');\\n\\n      // JSON\\n      const jsonMatch = jsonText.match(/\\\\{[\\\\s\\\\S]*\\\\}/);\\n      if (jsonMatch) {\\n        aiTableData = JSON.parse(jsonMatch[0]);\\n      } else {\\n        throw new Error('JSON');\\n      }\\n    } catch (parseError) {\\n      console.error('AI:', parseError);\\n      console.log('AI:', aiResponse);\\n      window.toastr.error('AI');\\n      return;\\n    }\\n\\n    // \\n    if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\\n      window.toastr.error('AIdata');\\n      return;\\n    }\\n\\n    // \\n    for (let i = 0; i < aiTableData.data.length; i++) {\\n      if (!Array.isArray(aiTableData.data[i])) {\\n        window.toastr.error(`${i + 1}`);\\n        return;\\n      }\\n      if (aiTableData.data[i].length !== headers.length) {\\n        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\\n        console.log(`:`, headers);\\n        console.log(`:`, aiTableData.data[i]);\\n        return;\\n      }\\n    }\\n\\n    // headers\\n    const tableData = {\\n      headers: headers,\\n      data: aiTableData.data,\\n    };\\n\\n    // \\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      const chat_vars = getVariables({ type: 'chat' });\\n      const table_history = chat_vars.table_history || [];\\n\\n      table_history.push({\\n        start_id: settings.value.table_start_message_id,\\n        end_id: settings.value.table_end_message_id,\\n        headers: tableData.headers,\\n        data: tableData.data,\\n      });\\n\\n      insertOrAssignVariables(klona({ table_history }), { type: 'chat' });\\n\\n      progressDialogRef.value?.setProgress(100);\\n      progressDialogRef.value?.setMessage(' ');\\n      progressDialogRef.value?.addDetail(` ${tableData.data.length} `);\\n\\n      setTimeout(() => {\\n        showProgress.value = false;\\n      window.toastr.success(`${tableData.data.length}`);\\n      }, 800);\\n\\n      console.log(':', table_history);\\n    } else {\\n      showProgress.value = false;\\n      window.toastr.warning('ID');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    showProgress.value = false;\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    is_generating_table.value = false;\\n    saveGenerationStatus();\\n  }\\n};\\n\\nconst handle_create_table = () => {\\n  try {\\n    // \\n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const headersInput: string | null = window.prompt(',,,');\\n    if (!headersInput || !headersInput.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const headers: string[] = headersInput\\n      .split(',')\\n      .map((h: string) => h.trim())\\n      .filter((h: string) => h);\\n\\n    if (headers.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const emptyTableData = {\\n      start_id: settings.value.table_start_message_id,\\n      end_id: settings.value.table_end_message_id,\\n      headers: headers,\\n      data: [], // \\n    };\\n\\n    // \\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      const chat_vars = getVariables({ type: 'chat' });\\n      const table_history = chat_vars.table_history || [];\\n\\n      table_history.push(emptyTableData);\\n      insertOrAssignVariables(klona({ table_history }), { type: 'chat' });\\n\\n      window.toastr.success(`${headers.join(', ')}`);\\n      console.log(':', emptyTableData);\\n    } else {\\n      window.toastr.warning('ID');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_hide_messages = async () => {\\n  try {\\n    console.log('...');\\n\\n    if (!hide_range.value.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const ranges = hide_range.value.split(',').map(range => range.trim());\\n    const messageIds: number[] = [];\\n\\n    for (const range of ranges) {\\n      if (range.includes('-')) {\\n        // 1-10\\n        const [start, end] = range.split('-').map(Number);\\n        if (start && end && start <= end) {\\n          for (let i = start; i <= end; i++) {\\n            messageIds.push(i);\\n          }\\n        }\\n      } else {\\n        // 5\\n        const id = Number(range);\\n        if (id) {\\n          messageIds.push(id);\\n        }\\n      }\\n    }\\n\\n    if (messageIds.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let hiddenCount = 0;\\n    const messagesToHide = [];\\n\\n    for (const messageId of messageIds) {\\n      // \\n      const alreadyHidden = hidden_messages.value.some(msg => msg.message_id === messageId);\\n      if (alreadyHidden) {\\n        console.log(` ${messageId} `);\\n        continue;\\n      }\\n\\n      const message = chatMessages.find(msg => msg.message_id === messageId);\\n      if (message) {\\n        // \\n        messagesToHide.push({\\n          message_id: messageId,\\n          is_hidden: true,\\n        });\\n\\n        // \\n        hidden_messages.value.push({\\n          message_id: messageId,\\n          name: message.name || 'Unknown',\\n          role: message.role || 'user',\\n          message: message.message || '',\\n        });\\n        hiddenCount++;\\n      }\\n    }\\n\\n    // API\\n    if (messagesToHide.length > 0) {\\n      try {\\n        console.log(' slash :', messageIds);\\n\\n        //  slash \\n        for (const messageId of messageIds) {\\n          try {\\n            await triggerSlash(`/hide ${messageId}`);\\n            console.log(` ${messageId}`);\\n          } catch (error) {\\n            console.error(` ${messageId} :`, error);\\n          }\\n        }\\n\\n        window.toastr.success('');\\n      } catch (error) {\\n        console.error('API:', error);\\n        window.toastr.error('API: ' + (error as Error).message);\\n      }\\n    }\\n\\n    if (hiddenCount > 0) {\\n      // \\n      saveHiddenMessages();\\n      window.toastr.success(` ${hiddenCount} `);\\n      hide_range.value = ''; // \\n    } else {\\n      window.toastr.warning('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_show_messages = async () => {\\n  try {\\n    console.log('...');\\n\\n    if (!hide_range.value.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const messageIds = parseMessageRange(hide_range.value.trim());\\n    if (messageIds.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const messagesToShow = [];\\n    let shownCount = 0;\\n\\n    for (const messageId of messageIds) {\\n      const message = chatMessages.find(msg => msg.message_id === messageId);\\n      if (message) {\\n        messagesToShow.push({\\n          message_id: messageId,\\n          is_hidden: false,\\n        });\\n        shownCount++;\\n      }\\n    }\\n\\n    if (messagesToShow.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // API\\n    try {\\n      //  slash \\n      for (const messageId of messageIds) {\\n        try {\\n          await triggerSlash(`/unhide ${messageId}`);\\n          console.log(` ${messageId}`);\\n        } catch (error) {\\n          console.error(` ${messageId} :`, error);\\n        }\\n      }\\n    } catch (error) {\\n      console.error('API:', error);\\n      window.toastr.error('API: ' + (error as Error).message);\\n      return;\\n    }\\n\\n    // \\n    hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\\n\\n    // \\n    saveHiddenMessages();\\n\\n    window.toastr.success(` ${shownCount} `);\\n    hide_range.value = ''; // \\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_refresh_hidden = async (showToast: boolean = false) => {\\n  try {\\n    console.log('', showToast);\\n\\n    // \\n    if (hidden_messages.value.length === 0) {\\n      console.log('...');\\n      loadHiddenMessages();\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      if (showToast) {\\n        window.toastr.error(': ' + (error as Error).message);\\n      }\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      if (showToast) {\\n        window.toastr.warning('');\\n      }\\n      return;\\n    }\\n\\n    // \\n    const validHiddenMessages = [];\\n    let removedCount = 0;\\n\\n    for (const hiddenMsg of hidden_messages.value) {\\n      const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\\n      if (message) {\\n        // \\n        validHiddenMessages.push({\\n          message_id: hiddenMsg.message_id,\\n          name: message.name || hiddenMsg.name,\\n          role: message.role || hiddenMsg.role,\\n          message: message.message || hiddenMsg.message,\\n        });\\n      } else {\\n        // \\n        removedCount++;\\n      }\\n    }\\n\\n    // \\n    hidden_messages.value = validHiddenMessages;\\n\\n    // \\n    saveHiddenMessages();\\n\\n    if (showToast) {\\n      if (removedCount > 0) {\\n        window.toastr.success(` ${removedCount} `);\\n      } else {\\n        window.toastr.success('');\\n      }\\n    }\\n\\n    console.log(`${validHiddenMessages.length} ${removedCount} `);\\n  } catch (error) {\\n    console.error(':', error);\\n    if (showToast) {\\n      window.toastr.error(': ' + (error as Error).message);\\n    }\\n  }\\n};\\n\\nconst handle_unhide_single = async (messageId: number) => {\\n  try {\\n    console.log('', messageId);\\n\\n    // \\n    const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\\n    if (index === -1) {\\n      window.toastr.warning(` #${messageId} `);\\n      return;\\n    }\\n\\n    // API\\n    try {\\n      //  slash \\n      await triggerSlash(`/unhide ${messageId}`);\\n      console.log(':', messageId);\\n    } catch (error) {\\n      console.error('API:', error);\\n      window.toastr.warning('API');\\n      return;\\n    }\\n\\n    // \\n    hidden_messages.value.splice(index, 1);\\n\\n    // \\n    saveHiddenMessages();\\n\\n    window.toastr.success(` #${messageId}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n</script>\\n\\n<style>\\n.settings-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n  background: #1a1a1a !important;\\n  border: 2px solid red !important;\\n}\\n\\n.config-section {\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.config-section:last-child {\\n  border-bottom: none;\\n  margin-bottom: 0;\\n}\\n\\n.config-section h3 {\\n  margin: 0 0 20px 0 !important;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.form-group {\\n  margin-bottom: 18px !important;\\n}\\n\\n.form-group label {\\n  display: block;\\n  margin-bottom: 6px;\\n  color: #ccc;\\n  font-size: 13px;\\n}\\n\\n.checkbox-label {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.flex-label {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.form-group input[type='text'],\\n.form-group input[type='password'],\\n.form-group input[type='number'],\\n.form-group select {\\n  width: 100%;\\n  padding: 10px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  color: #e0e0e0;\\n  font-size: 13px;\\n  transition: border-color 0.2s;\\n}\\n\\n.form-group input:focus,\\n.form-group select:focus {\\n  outline: none;\\n  border-color: #4a9eff;\\n}\\n\\n.model-controls {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.button-group {\\n  display: flex;\\n  gap: 12px;\\n  flex-wrap: wrap;\\n  margin-top: 5px;\\n}\\n\\n.action-button {\\n  flex: 1;\\n  min-width: 120px;\\n  padding: 12px 16px;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  font-weight: 500;\\n  font-size: 13px;\\n  transition: all 0.2s;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 6px;\\n  background: #3a3a3a;\\n  color: #e0e0e0;\\n  border: 1px solid #4a4a4a;\\n}\\n\\n.action-button:hover {\\n  background: #4a4a4a;\\n  border-color: #5a5a5a;\\n}\\n\\n.test-button {\\n  background: #3a3a3a;\\n  color: #e0e0e0;\\n  border: 1px solid #4a4a4a;\\n}\\n\\n.test-button:hover {\\n  background: #4a4a4a;\\n  border-color: #5a5a5a;\\n}\\n\\n.fetch-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.fetch-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.summarize-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.summarize-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.create-button {\\n  background: #51cf66;\\n  color: white;\\n  border: 1px solid #40c057;\\n}\\n\\n.create-button:hover {\\n  background: #40c057;\\n  border-color: #37b24d;\\n}\\n\\n.table-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.table-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.hide-button {\\n  background: #ff6b6b;\\n  color: white;\\n  border: 1px solid #ff5252;\\n}\\n\\n.hide-button:hover {\\n  background: #ff5252;\\n  border-color: #ff4444;\\n}\\n\\n.unhide-button {\\n  background: #51cf66;\\n  color: white;\\n  border: 1px solid #40c057;\\n}\\n\\n.unhide-button:hover {\\n  background: #40c057;\\n  border-color: #37b24d;\\n}\\n\\n.refresh-button {\\n  background: #ffd43b;\\n  color: #333;\\n  border: 1px solid #ffcc02;\\n}\\n\\n.refresh-button:hover {\\n  background: #ffcc02;\\n  border-color: #ffb700;\\n}\\n\\n.action-button:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.model-select {\\n  margin-top: 8px;\\n}\\n\\n.hidden-messages-section {\\n  margin-top: 20px;\\n}\\n\\n.hidden-messages-list {\\n  max-height: 300px;\\n  overflow-y: auto;\\n  border-radius: 6px;\\n  border: 1px solid #3a3a3a;\\n  background: #1a1a1a;\\n}\\n\\n.hidden-message-item {\\n  padding: 10px 12px;\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  border-bottom: 1px solid #2a2a2a;\\n  transition: background 0.2s;\\n}\\n\\n.hidden-message-item:last-child {\\n  border-bottom: none;\\n}\\n\\n.hidden-message-item:hover {\\n  background: #2a2a2a;\\n}\\n\\n.message-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.message-id {\\n  font-weight: bold;\\n  color: #4a9eff;\\n  font-size: 13px;\\n  min-width: 50px;\\n}\\n\\n.message-role {\\n  font-size: 12px;\\n  padding: 2px 8px;\\n  border-radius: 4px;\\n  white-space: nowrap;\\n}\\n\\n.message-role.role-user {\\n  background: #3a5a3a;\\n  color: #90ee90;\\n}\\n\\n.message-role.role-assistant {\\n  background: #3a3a5a;\\n  color: #90a0ee;\\n}\\n\\n.message-role.role-system {\\n  background: #5a5a3a;\\n  color: #eea090;\\n}\\n\\n.message-preview {\\n  flex: 1;\\n  color: #888;\\n  font-size: 12px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.show-button {\\n  background: #4a9eff !important;\\n  color: white !important;\\n  padding: 6px 12px;\\n  border: 1px solid #5aaeff !important;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n  min-width: 60px;\\n  text-align: center;\\n}\\n\\n.show-button:hover {\\n  background: #5aaeff !important;\\n  border-color: #6abeff !important;\\n}\\n\\n.mini-button {\\n  background: #666;\\n  color: white;\\n  border: 1px solid #777;\\n  padding: 6px 12px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #777;\\n  border-color: #888;\\n}\\n\\n.empty-state {\\n  margin-top: 20px;\\n  padding: 20px;\\n  background: #2a2a2a;\\n  border-radius: 6px;\\n  text-align: center;\\n  color: #888;\\n  border: 1px solid #3a3a3a;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIModifyDialog.vue?vue&type=style&index=0&id=9bd7a892&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"02b5fbfc\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIModifyDialog.vue?vue&type=style&index=0&id=9bd7a892&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIModifyDialog.vue?vue&type=style&index=0&id=9bd7a892&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","module.exports = Vue;","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MvuBetaTab.vue?vue&type=style&index=0&id=1cb40cd0&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"322060ce\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MvuBetaTab.vue?vue&type=style&index=0&id=1cb40cd0&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MvuBetaTab.vue?vue&type=style&index=0&id=1cb40cd0&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import { useSettingsStore, normalizeApiEndpoint } from './settings';\n\n/**\n *  CORS\n */\nasync function proxyFetch(url: string, options: RequestInit = {}): Promise<Response> {\n  try {\n    //  1: \n    const tavernOrigin = window.location.origin; //  http://localhost:8000\n    \n    console.log(' :', tavernOrigin);\n    \n    const proxyResponse = await fetch(`${tavernOrigin}/api/proxy`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(typeof SillyTavern !== 'undefined' && SillyTavern.getRequestHeaders ? SillyTavern.getRequestHeaders() : {}),\n      },\n      body: JSON.stringify({\n        url: url,\n        method: options.method || 'GET',\n        headers: options.headers || {},\n      }),\n    });\n\n    if (proxyResponse.ok) {\n      console.log(' ');\n      return proxyResponse;\n    }\n    \n    console.log(' ');\n  } catch (proxyError) {\n    console.log(' :', proxyError);\n  }\n\n  //  2:  CORS\n  return fetch(url, options);\n}\n\n/**\n * \n */\nexport async function fetchAvailableModels(): Promise<string[]> {\n  const settings = useSettingsStore().settings;\n\n  //  API endpoint\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  //  normalizeApiEndpoint  models \n  const baseUrl = settings.api_endpoint.trim();\n  console.log(' :', baseUrl);\n\n  //  /models \n  let modelsUrl: string;\n  try {\n    modelsUrl = normalizeApiEndpoint(baseUrl, '/models');\n    console.log('  models :', modelsUrl);\n  } catch (e) {\n    throw new Error(`API : ${baseUrl}`);\n  }\n\n  //  URL\n  try {\n    new URL(modelsUrl);\n  } catch (e) {\n    throw new Error(`API : ${modelsUrl}`);\n  }\n\n  //  models API \n  const possibleEndpoints = [\n    modelsUrl, //  /models\n    // \n    baseUrl + (baseUrl.endsWith('/') ? 'models' : '/models'),\n    new URL(modelsUrl).origin + '/v1/models',\n    new URL(modelsUrl).origin + '/models',\n  ];\n\n  console.log(' :', possibleEndpoints);\n\n  const errors: string[] = [];\n  let hasCorsError = false;\n\n  for (const modelsUrl of possibleEndpoints) {\n    try {\n      console.log(` : ${modelsUrl}`);\n\n      // \n      const response = await proxyFetch(modelsUrl, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.api_key}`,\n        },\n      });\n\n      console.log(` : ${response.status} ${response.statusText}`);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        errors.push(`${modelsUrl}: ${response.status} - ${errorText.substring(0, 100)}`);\n        console.log(` : ${response.status}`);\n        console.log(`: ${errorText.substring(0, 200)}`);\n        continue;\n      }\n\n      const contentType = response.headers.get('content-type');\n      console.log(` : ${contentType}`);\n\n      if (!contentType || !contentType.includes('application/json')) {\n        const text = await response.text();\n        errors.push(`${modelsUrl}:  JSON  - ${text.substring(0, 100)}`);\n        console.log(`  JSON :`, text.substring(0, 200));\n        continue;\n      }\n\n      const data = await response.json();\n      console.log(' API :', JSON.stringify(data, null, 2));\n\n      // OpenAI  API : { data: [...] }\n      if (data.data && Array.isArray(data.data)) {\n        const models = data.data.map((model: any) => model.id || model.name || model).filter(Boolean);\n        console.log(`  ${models.length} :`, models);\n        if (models.length > 0) {\n        return models;\n        }\n      }\n\n      // \n      if (Array.isArray(data)) {\n        const models = data.map((model: any) => model.id || model.name || model).filter(Boolean);\n        console.log(`  ${models.length} :`, models);\n        if (models.length > 0) {\n          return models;\n        }\n      }\n\n      //  API  { models: [...] }\n      if (data.models && Array.isArray(data.models)) {\n        const models = data.models.map((model: any) => model.id || model.name || model).filter(Boolean);\n        console.log(`  ${models.length} :`, models);\n        if (models.length > 0) {\n        return models;\n        }\n      }\n\n      errors.push(`${modelsUrl}:  - ${JSON.stringify(data).substring(0, 100)}`);\n      console.log(' ');\n    } catch (e) {\n      const errMsg = (e as Error).message;\n      if (errMsg.includes('Failed to fetch') || errMsg.includes('CORS')) {\n        hasCorsError = true;\n      }\n      errors.push(`${modelsUrl}: ${errMsg}`);\n      console.log(` :`, e);\n      continue;\n    }\n  }\n\n  console.error(' :');\n  errors.forEach((err, i) => console.error(`  ${i + 1}. ${err}`));\n\n  let errorMessage = ` API  ${possibleEndpoints.length} \\n\\n` +\n    `\\n${errors.join('\\n\\n')}\\n\\n` +\n    `\\n` +\n    `1. API ${baseUrl}\\n` +\n    `2. API Key \\n` +\n    `3.  API  /v1/models \\n`;\n\n  if (hasCorsError) {\n    errorMessage += `\\n  CORS \\n` +\n      ` API ${new URL(baseUrl).origin} CORS \\n` +\n      `\\n` +\n      `  Zeabur  CORS\\n` +\n      `  API  CORS \\n` +\n      `  API\\n\\n`;\n  }\n\n  errorMessage += ` API `;\n\n  throw new Error(errorMessage);\n}\n\n/**\n * \n * @param start_id \n * @param end_id \n * @returns \n */\nexport async function summarizeMessages(start_id: number, end_id: number): Promise<string> {\n  const settings = useSettingsStore().settings;\n\n  //  API endpoint\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  //  API  /chat/completions\n  const baseUrl = settings.api_endpoint.trim();\n  let apiUrl: string;\n  try {\n    apiUrl = normalizeApiEndpoint(baseUrl);\n    console.log(' :', baseUrl);\n    console.log('  API URL:', apiUrl);\n  } catch (e) {\n    throw new Error(`API : ${baseUrl}`);\n  }\n\n  //  URL\n  try {\n    new URL(apiUrl);\n  } catch (e) {\n    throw new Error(`API : ${apiUrl}`);\n  }\n\n  // \n  // \n  const messages: Array<{ role: string; message: string }> = [];\n  for (let i = start_id; i <= end_id; i++) {\n    const msg = getChatMessages(i);\n    if (msg.length > 0) {\n      messages.push(...msg);\n    }\n  }\n\n  if (messages.length === 0) {\n    throw new Error('');\n  }\n\n  //  - \n  const summaryPrompt = `****\n\n\n- \n- \n- \n- \n- \n- XML\n- \n-  ${settings.max_tokens / 4} \n- ****\n\n\n\n\n: []\n: []\n\n 1: \n 2: \n 3: \n...\n\n\n${messages.map(msg => `[${msg.role}]: ${msg.message}`).join('\\n\\n')}\n\n`;\n\n  console.log(' APIURL:', apiUrl);\n  console.log(':', {\n    model: settings.model,\n    messages: [{ role: 'user', content: summaryPrompt }],\n    max_tokens: settings.max_tokens,\n    temperature: settings.temperature,\n  });\n\n  //  OpenAI  API\n  let response;\n  try {\n    response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.model,\n        messages: [\n          {\n            role: 'user',\n            content: summaryPrompt,\n          },\n        ],\n        max_tokens: settings.max_tokens,\n        temperature: settings.temperature,\n        top_p: settings.top_p,\n        presence_penalty: settings.presence_penalty,\n        frequency_penalty: settings.frequency_penalty,\n      }),\n    });\n  } catch (e) {\n    console.error('fetch :', e);\n    throw new Error(` API: ${(e as Error).message}`);\n  }\n\n  if (!response.ok) {\n    let errorMessage = `API : ${response.status}`;\n    let errorDetails = '';\n    \n    try {\n      const error = await response.json();\n      errorMessage = error.error?.message || error.message || errorMessage;\n      errorDetails = JSON.stringify(error, null, 2);\n    } catch (e) {\n      //  JSON\n      try {\n        errorDetails = await response.text();\n      } catch {}\n    }\n    \n    // \n    let userFriendlyMessage = errorMessage;\n    if (response.status === 500) {\n      userFriendlyMessage = `API  (500)${errorMessage}\\n\\n\\n API \\n \\n `;\n    } else if (response.status === 429) {\n      userFriendlyMessage = `API  (429)`;\n    } else if (response.status === 401) {\n      userFriendlyMessage = `API  (401) API `;\n    } else if (response.status === 400) {\n      userFriendlyMessage = `API  (400)${errorMessage}`;\n    }\n    \n    console.error(' API :', {\n      status: response.status,\n      statusText: response.statusText,\n      errorMessage,\n      errorDetails: errorDetails.substring(0, 500)\n    });\n    \n    throw new Error(userFriendlyMessage);\n  }\n\n  const data = await response.json();\n  if (!data.choices || !data.choices[0] || !data.choices[0].message?.content) {\n    throw new Error('API ');\n  }\n  return data.choices[0].message.content;\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes fadeIn-0fa52109{from{opacity:0}to{opacity:1}}@keyframes slideUp-0fa52109{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes spin-0fa52109{to{transform:rotate(360deg)}}.details-area[data-v-0fa52109]::-webkit-scrollbar{width:6px}.details-area[data-v-0fa52109]::-webkit-scrollbar-track{background:rgba(30,30,30,0.5);border-radius:3px}.details-area[data-v-0fa52109]::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:3px}.details-area[data-v-0fa52109]::-webkit-scrollbar-thumb:hover{background:#5ab0ff}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/ProgressDialog.vue\"],\"names\":[],\"mappings\":\"AAyRA,2BACE,KACE,SACF,CACA,GACE,SACF,CACF,CAEA,4BACE,KACE,0BAA2B,CAC3B,SACF,CACA,GACE,uBAAwB,CACxB,SACF,CACF,CAEA,yBACE,GACE,wBACF,CACF,CAGA,kDACE,SACF,CAEA,wDACE,6BAAiC,CACjC,iBACF,CAEA,wDACE,kBAAmB,CACnB,iBACF,CAEA,8DACE,kBACF\",\"sourcesContent\":[\"<template>\\r\\n  <div\\r\\n    v-if=\\\"show\\\"\\r\\n    class=\\\"progress-overlay\\\"\\r\\n    style=\\\"\\r\\n      position: fixed;\\r\\n      top: 0;\\r\\n      left: 0;\\r\\n      right: 0;\\r\\n      bottom: 0;\\r\\n      background: rgba(0, 0, 0, 0.85);\\r\\n      display: flex;\\r\\n      align-items: center;\\r\\n      justify-content: center;\\r\\n      z-index: 999999;\\r\\n      animation: fadeIn 0.2s ease;\\r\\n    \\\"\\r\\n  >\\r\\n    <div\\r\\n      class=\\\"progress-card\\\"\\r\\n      style=\\\"\\r\\n        background: linear-gradient(145deg, #2a2a2a, #1e1e1e);\\r\\n        border-radius: 16px;\\r\\n        padding: 35px;\\r\\n        width: 520px;\\r\\n        max-width: 90vw;\\r\\n        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\r\\n        border: 1px solid #3a3a3a;\\r\\n        animation: slideUp 0.3s ease;\\r\\n      \\\"\\r\\n    >\\r\\n      <!--  -->\\r\\n      <div\\r\\n        style=\\\"\\r\\n          display: flex;\\r\\n          align-items: center;\\r\\n          gap: 12px;\\r\\n          margin-bottom: 24px;\\r\\n        \\\"\\r\\n      >\\r\\n        <div\\r\\n          class=\\\"spinner\\\"\\r\\n          style=\\\"\\r\\n            width: 28px;\\r\\n            height: 28px;\\r\\n            border: 3px solid #3a3a3a;\\r\\n            border-top-color: #4a9eff;\\r\\n            border-radius: 50%;\\r\\n            animation: spin 0.8s linear infinite;\\r\\n          \\\"\\r\\n        ></div>\\r\\n        <h3\\r\\n          style=\\\"\\r\\n            margin: 0;\\r\\n            color: #fff;\\r\\n            font-size: 18px;\\r\\n            font-weight: 600;\\r\\n          \\\"\\r\\n        >\\r\\n          {{ title }}\\r\\n        </h3>\\r\\n      </div>\\r\\n\\r\\n      <!--  -->\\r\\n      <div\\r\\n        class=\\\"progress-bar-container\\\"\\r\\n        style=\\\"\\r\\n          width: 100%;\\r\\n          height: 10px;\\r\\n          background: rgba(30, 30, 30, 0.8);\\r\\n          border-radius: 5px;\\r\\n          overflow: hidden;\\r\\n          margin-bottom: 20px;\\r\\n          box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);\\r\\n        \\\"\\r\\n      >\\r\\n        <div\\r\\n          class=\\\"progress-bar\\\"\\r\\n          :style=\\\"{\\r\\n            width: progress + '%',\\r\\n            height: '100%',\\r\\n            background: 'linear-gradient(90deg, #4a9eff 0%, #7c3aed 50%, #10b981 100%)',\\r\\n            transition: 'width 0.3s ease',\\r\\n            boxShadow: '0 0 10px rgba(74, 158, 255, 0.5)',\\r\\n          }\\\"\\r\\n        ></div>\\r\\n      </div>\\r\\n\\r\\n      <!--  -->\\r\\n      <div\\r\\n        class=\\\"current-stage\\\"\\r\\n        style=\\\"\\r\\n          color: #e0e0e0;\\r\\n          font-size: 14px;\\r\\n          margin-bottom: 12px;\\r\\n          min-height: 20px;\\r\\n        \\\"\\r\\n      >\\r\\n        {{ currentMessage }}\\r\\n      </div>\\r\\n\\r\\n      <!--  -->\\r\\n      <div\\r\\n        v-if=\\\"details.length > 0\\\"\\r\\n        class=\\\"details-area\\\"\\r\\n        style=\\\"\\r\\n          max-height: 150px;\\r\\n          overflow-y: auto;\\r\\n          background: rgba(10, 10, 10, 0.5);\\r\\n          border-radius: 8px;\\r\\n          padding: 12px;\\r\\n          margin-bottom: 16px;\\r\\n          font-family: 'Consolas', 'Monaco', monospace;\\r\\n          font-size: 11px;\\r\\n          color: #a0a0a0;\\r\\n          line-height: 1.6;\\r\\n        \\\"\\r\\n      >\\r\\n        <div v-for=\\\"(detail, i) in details\\\" :key=\\\"i\\\" style=\\\"margin-bottom: 4px\\\">\\r\\n          <span style=\\\"color: #4a9eff\\\"></span> {{ detail }}\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!--  -->\\r\\n      <div\\r\\n        style=\\\"\\r\\n          display: flex;\\r\\n          justify-content: space-between;\\r\\n          align-items: center;\\r\\n        \\\"\\r\\n      >\\r\\n        <div\\r\\n          class=\\\"progress-percent\\\"\\r\\n          style=\\\"\\r\\n            color: #4a9eff;\\r\\n            font-size: 16px;\\r\\n            font-weight: 600;\\r\\n          \\\"\\r\\n        >\\r\\n          {{ Math.round(progress) }}%\\r\\n        </div>\\r\\n\\r\\n        <div\\r\\n          class=\\\"elapsed-time\\\"\\r\\n          style=\\\"\\r\\n            color: #888;\\r\\n            font-size: 12px;\\r\\n          \\\"\\r\\n        >\\r\\n          : {{ elapsedSeconds }}\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!--  -->\\r\\n      <button\\r\\n        v-if=\\\"cancellable\\\"\\r\\n        style=\\\"\\r\\n          width: 100%;\\r\\n          margin-top: 20px;\\r\\n          padding: 10px;\\r\\n          background: #3a3a3a;\\r\\n          border: 1px solid #4a4a4a;\\r\\n          border-radius: 8px;\\r\\n          color: #e0e0e0;\\r\\n          font-size: 13px;\\r\\n          cursor: pointer;\\r\\n          transition: all 0.2s;\\r\\n        \\\"\\r\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\\\"\\r\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\r\\n        @click=\\\"$emit('cancel')\\\"\\r\\n      >\\r\\n        \\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</template>\\r\\n\\r\\n<script setup lang=\\\"ts\\\">\\r\\nimport { ref, computed, watch, onUnmounted } from 'vue';\\r\\n\\r\\ninterface Props {\\r\\n  show: boolean;\\r\\n  title?: string;\\r\\n  initialMessage?: string;\\r\\n  cancellable?: boolean;\\r\\n}\\r\\n\\r\\nconst props = withDefaults(defineProps<Props>(), {\\r\\n  title: 'AI ',\\r\\n  initialMessage: '...',\\r\\n  cancellable: false,\\r\\n});\\r\\n\\r\\ndefineEmits<{\\r\\n  (e: 'cancel'): void;\\r\\n}>();\\r\\n\\r\\n// \\r\\nconst progress = ref(0);\\r\\nconst currentMessage = ref(props.initialMessage);\\r\\nconst details = ref<string[]>([]);\\r\\nconst startTime = ref(0);\\r\\nconst elapsedSeconds = ref(0);\\r\\n\\r\\nlet elapsedInterval: number | null = null;\\r\\n\\r\\n// \\r\\nwatch(\\r\\n  () => props.show,\\r\\n  newVal => {\\r\\n    if (newVal) {\\r\\n      // \\r\\n      progress.value = 0;\\r\\n      currentMessage.value = props.initialMessage;\\r\\n      details.value = [];\\r\\n      startTime.value = Date.now();\\r\\n      elapsedSeconds.value = 0;\\r\\n\\r\\n      // \\r\\n      if (elapsedInterval) {\\r\\n        clearInterval(elapsedInterval);\\r\\n      }\\r\\n      elapsedInterval = window.setInterval(() => {\\r\\n        elapsedSeconds.value = Math.floor((Date.now() - startTime.value) / 1000);\\r\\n      }, 1000);\\r\\n    } else {\\r\\n      // \\r\\n      if (elapsedInterval) {\\r\\n        clearInterval(elapsedInterval);\\r\\n        elapsedInterval = null;\\r\\n      }\\r\\n    }\\r\\n  },\\r\\n);\\r\\n\\r\\nonUnmounted(() => {\\r\\n  if (elapsedInterval) {\\r\\n    clearInterval(elapsedInterval);\\r\\n  }\\r\\n});\\r\\n\\r\\n// \\r\\nfunction setProgress(percent: number) {\\r\\n  progress.value = Math.min(100, Math.max(0, percent));\\r\\n}\\r\\n\\r\\nfunction setMessage(message: string) {\\r\\n  currentMessage.value = message;\\r\\n}\\r\\n\\r\\nfunction addDetail(detail: string) {\\r\\n  details.value.push(detail);\\r\\n  // \\r\\n  setTimeout(() => {\\r\\n    const detailsArea = document.querySelector('.details-area');\\r\\n    if (detailsArea) {\\r\\n      detailsArea.scrollTop = detailsArea.scrollHeight;\\r\\n    }\\r\\n  }, 50);\\r\\n}\\r\\n\\r\\nfunction clearDetails() {\\r\\n  details.value = [];\\r\\n}\\r\\n\\r\\nfunction complete() {\\r\\n  progress.value = 100;\\r\\n  currentMessage.value = '';\\r\\n}\\r\\n\\r\\ndefineExpose({\\r\\n  setProgress,\\r\\n  setMessage,\\r\\n  addDetail,\\r\\n  clearDetails,\\r\\n  complete,\\r\\n});\\r\\n</script>\\r\\n\\r\\n<style scoped>\\r\\n@keyframes fadeIn {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n@keyframes slideUp {\\r\\n  from {\\r\\n    transform: translateY(20px);\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    transform: translateY(0);\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n@keyframes spin {\\r\\n  to {\\r\\n    transform: rotate(360deg);\\r\\n  }\\r\\n}\\r\\n\\r\\n/*  */\\r\\n.details-area::-webkit-scrollbar {\\r\\n  width: 6px;\\r\\n}\\r\\n\\r\\n.details-area::-webkit-scrollbar-track {\\r\\n  background: rgba(30, 30, 30, 0.5);\\r\\n  border-radius: 3px;\\r\\n}\\r\\n\\r\\n.details-area::-webkit-scrollbar-thumb {\\r\\n  background: #4a9eff;\\r\\n  border-radius: 3px;\\r\\n}\\r\\n\\r\\n.details-area::-webkit-scrollbar-thumb:hover {\\r\\n  background: #5ab0ff;\\r\\n}\\r\\n</style>\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.help-tab[data-v-ae7cd18e] ::-webkit-scrollbar{width:8px}.help-tab[data-v-ae7cd18e] ::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.help-tab[data-v-ae7cd18e] ::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:4px}.help-tab[data-v-ae7cd18e] ::-webkit-scrollbar-thumb:hover{background:#3a8edf}.help-tab ul[data-v-ae7cd18e]{list-style-type:none;position:relative}.help-tab ul li[data-v-ae7cd18e]{position:relative;padding-left:20px;margin-bottom:8px}.help-tab ul li[data-v-ae7cd18e]::before{content:'';position:absolute;left:0;color:#4a9eff;font-weight:bold}.help-tab a[data-v-ae7cd18e]{transition:color 0.2s}.help-tab a[data-v-ae7cd18e]:hover{color:#3a8edf !important}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/HelpTab.vue\"],\"names\":[],\"mappings\":\"AA0pBA,+CACE,SACF,CAEA,qDACE,kBAAmB,CACnB,iBACF,CAEA,qDACE,kBAAmB,CACnB,iBACF,CAEA,2DACE,kBACF,CAEA,8BACE,oBAAqB,CACrB,iBACF,CAEA,iCACE,iBAAkB,CAClB,iBAAkB,CAClB,iBACF,CAEA,yCACE,WAAY,CACZ,iBAAkB,CAClB,MAAO,CACP,aAAc,CACd,gBACF,CAEA,6BACE,qBACF,CAEA,mCACE,wBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"help-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        padding: 20px 28px;\\n        background: linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(255, 255, 255, 0.06);\\n        box-shadow:\\n          0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n        text-align: center;\\n      \\\"\\n    >\\n      <div style=\\\"font-size: 48px; margin-bottom: 10px\\\"></div>\\n      <h2 style=\\\"margin: 0 0 10px 0; color: #4a9eff; font-size: 24px; font-weight: 600\\\">mzrodyu</h2>\\n      <div style=\\\"color: #888; font-size: 14px; margin-bottom: 15px\\\"> v1.33</div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          margin-top: 20px;\\n          padding: 15px 20px;\\n          background: rgba(220, 53, 69, 0.1);\\n          border: 1px solid rgba(220, 53, 69, 0.3);\\n          border-radius: 8px;\\n          text-align: left;\\n        \\\"\\n      >\\n        <div style=\\\"display: flex; align-items: center; gap: 8px; margin-bottom: 10px\\\">\\n          <i class=\\\"fa-solid fa-shield-halved\\\" style=\\\"color: #dc3545; font-size: 16px\\\"></i>\\n          <span style=\\\"color: #dc3545; font-weight: 600; font-size: 14px\\\"></span>\\n        </div>\\n        <div style=\\\"color: #e0e0e0; font-size: 13px; line-height: 1.6\\\">\\n          <div style=\\\"margin-bottom: 5px\\\"> <strong style=\\\"color: #ffc107\\\">/</strong></div>\\n          <div style=\\\"margin-bottom: 5px\\\"> <strong style=\\\"color: #dc3545\\\"></strong></div>\\n          <div style=\\\"margin-bottom: 5px\\\"> </div>\\n          <div> <strong style=\\\"color: #dc3545\\\"></strong></div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        cursor: pointer;\\n        user-select: none;\\n        display: flex;\\n        align-items: center;\\n        justify-content: space-between;\\n        padding: 20px 28px;\\n        background: linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(255, 255, 255, 0.06);\\n        box-shadow:\\n          0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n        position: relative;\\n        overflow: hidden;\\n        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n      \\\"\\n      @click=\\\"expandedSections.usage = !expandedSections.usage\\\"\\n      @mouseenter=\\\"\\n        ($event.currentTarget as HTMLElement).style.background =\\n          'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n        ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n        ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n      \\\"\\n      @mouseleave=\\\"\\n        ($event.currentTarget as HTMLElement).style.background =\\n          'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n        ($event.currentTarget as HTMLElement).style.transform = 'none';\\n        ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          position: relative;\\n          z-index: 1;\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n          margin: 0;\\n          color: #fff;\\n          font-size: 16px;\\n          font-weight: 600;\\n          letter-spacing: 0.5px;\\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-book-open\\\" style=\\\"color: #4a9eff; font-size: 18px\\\"></i>\\n        \\n      </h3>\\n      <i\\n        :class=\\\"expandedSections.usage ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n        class=\\\"fa-solid\\\"\\n        style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n      ></i>\\n    </div>\\n\\n    <div v-show=\\\"expandedSections.usage\\\" style=\\\"padding: 0 10px 20px 10px\\\">\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #3a3a3a;\\n          border-radius: 8px;\\n          padding: 20px;\\n          color: #e0e0e0;\\n          line-height: 1.8;\\n        \\\"\\n      >\\n        <h4 style=\\\"color: #4a9eff; margin-top: 0; margin-bottom: 15px; font-size: 16px\\\"> </h4>\\n          <ul style=\\\"margin: 5px 0; padding-left: 20px\\\">\\n          <li><strong></strong>/</li>\\n          <li><strong></strong> AI </li>\\n          <li><strong></strong> JSON </li>\\n          <li><strong>MVU Beta</strong>$meta </li>\\n          <li><strong></strong></li>\\n          </ul>\\n\\n        <h4 style=\\\"color: #4a9eff; margin-top: 25px; margin-bottom: 15px; font-size: 16px\\\"> </h4>\\n        <div\\n          style=\\\"\\n            margin-bottom: 15px;\\n            padding: 12px 15px;\\n            background: rgba(220, 53, 69, 0.1);\\n            border-left: 3px solid #dc3545;\\n            border-radius: 4px;\\n          \\\"\\n        >\\n          <div style=\\\"color: #dc3545; font-weight: 600; margin-bottom: 8px\\\"> API </div>\\n          <div style=\\\"font-size: 13px; color: #e0e0e0; line-height: 1.6\\\">\\n            <div style=\\\"margin-bottom: 8px\\\">\\n              <strong></strong>\\n              <ul style=\\\"margin: 5px 0; padding-left: 20px\\\">\\n                <li><code>https://api.openai.com</code>   <code>/v1</code></li>\\n                <li><code>https://api.openai.com/v1</code>  </li>\\n                <li><code>https://your-proxy.com/v1/chat/completions</code>  </li>\\n              </ul>\\n          </div>\\n            <div style=\\\"margin-bottom: 5px\\\">\\n              <strong>OpenAI </strong\\n              ><code style=\\\"background: rgba(220, 53, 69, 0.2); padding: 2px 6px; border-radius: 4px\\\"\\n                >https://api.openai.com</code\\n              >\\n        </div>\\n            <div>\\n              <strong>Gemini AI Studio</strong\\n              ><code style=\\\"background: rgba(220, 53, 69, 0.2); padding: 2px 6px; border-radius: 4px\\\"\\n                >https://generativelanguage.googleapis.com/v1beta/openai/</code\\n              >\\n          </div>\\n        </div>\\n        </div>\\n        <ul style=\\\"margin: 5px 0; padding-left: 20px\\\">\\n          <li><strong></strong>      </li>\\n          <li><strong></strong>\\\"\\\" API</li>\\n          <li><strong></strong> 20-30 </li>\\n        </ul>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        cursor: pointer;\\n        user-select: none;\\n        display: flex;\\n        align-items: center;\\n        justify-content: space-between;\\n        padding: 20px 28px;\\n        background: linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(255, 255, 255, 0.06);\\n        box-shadow:\\n          0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n        position: relative;\\n        overflow: hidden;\\n        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n      \\\"\\n      @click=\\\"expandedSections.changelog = !expandedSections.changelog\\\"\\n      @mouseenter=\\\"\\n        ($event.currentTarget as HTMLElement).style.background =\\n          'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n        ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n        ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n      \\\"\\n      @mouseleave=\\\"\\n        ($event.currentTarget as HTMLElement).style.background =\\n          'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n        ($event.currentTarget as HTMLElement).style.transform = 'none';\\n        ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          position: relative;\\n          z-index: 1;\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n          margin: 0;\\n          color: #fff;\\n          font-size: 16px;\\n          font-weight: 600;\\n          letter-spacing: 0.5px;\\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-clock-rotate-left\\\" style=\\\"color: #28a745; font-size: 18px\\\"></i>\\n        \\n      </h3>\\n      <i\\n        :class=\\\"expandedSections.changelog ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n        class=\\\"fa-solid\\\"\\n        style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n      ></i>\\n    </div>\\n\\n    <div v-show=\\\"expandedSections.changelog\\\" style=\\\"padding: 0 10px 20px 10px\\\">\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #3a3a3a;\\n          border-radius: 8px;\\n          padding: 20px;\\n          color: #e0e0e0;\\n          line-height: 1.8;\\n        \\\"\\n      >\\n        <!-- v1.33 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.33</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-06</span>\\n          </div>\\n          <ul class=\\\"update-list\\\">\\n            <li class=\\\"update-item\\\"></li>\\n            <li class=\\\"update-item\\\"></li>\\n            <li class=\\\"update-item\\\"></li>\\n            <li class=\\\"update-item\\\">AI </li>\\n            <li class=\\\"update-item\\\">AI </li>\\n            <li class=\\\"update-item\\\"> AI AIHTML</li>\\n            <li class=\\\"update-item\\\"></li>\\n            <li class=\\\"update-item\\\"> STScript JSON </li>\\n            <li class=\\\"update-item\\\"></li>\\n          </ul>\\n        </div>\\n\\n        <!-- v1.32 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.32</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-06</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #6366f1; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.31 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #64748b 0%, #475569 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.31</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-05</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #10b981; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li>AI </li>\\n              <li> AI  XML </li>\\n            </ul>\\n          </div>\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #6366f1; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li></li>\\n              <li> AI  API </li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.27 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #64748b 0%, #475569 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.27</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-05</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #10b981; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li> MVU Beta $meta </li>\\n              <li> JSON </li>\\n              <li> ABO </li>\\n            </ul>\\n          </div>\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #6366f1; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li> AI  max_tokens  temperature</li>\\n              <li>MVU Beta </li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.26 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #64748b 0%, #475569 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.26</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-02</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #10b981; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.23 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.23</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-02</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #10b981; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li> AI </li>\\n              <li> 50 </li>\\n              <li></li>\\n            </ul>\\n          </div>\\n          </div>\\n\\n        <!-- v1.15 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.15</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-10-31</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #28a745; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li> AI </li>\\n              <li></li>\\n              <li> AI </li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.2 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.2</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-10-30</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #28a745; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li>AI </li>\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.05 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: #4a9eff;\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.05</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-10-30</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #28a745; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.00 -->\\n        <div>\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: #888;\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.00</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-10-29</span>\\n          </div>\\n\\n          <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n            <li> </li>\\n            <li>//</li>\\n          </ul>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        padding: 15px 20px;\\n        background: rgba(30, 30, 30, 0.5);\\n        border: 1px solid #3a3a3a;\\n        border-radius: 8px;\\n        text-align: center;\\n        color: #888;\\n        font-size: 13px;\\n      \\\"\\n    >\\n      <div style=\\\"margin-bottom: 8px\\\">Made with <span style=\\\"color: #dc3545\\\"></span> by mzrodyu</div>\\n      <div style=\\\"font-size: 12px\\\">\\n        \\n        <a\\n          href=\\\"https://github.com/SillyTavern/SillyTavern\\\"\\n          target=\\\"_blank\\\"\\n          style=\\\"color: #4a9eff; text-decoration: none\\\"\\n          >SillyTavern</a\\n        >\\n        \\n        <a\\n          href=\\\"https://n0vi028.github.io/JS-Slash-Runner-Doc/\\\"\\n          target=\\\"_blank\\\"\\n          style=\\\"color: #4a9eff; text-decoration: none\\\"\\n          >Tavern Helper</a\\n        >\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\n\\n// \\nconst expandedSections = ref({\\n  usage: false,\\n  changelog: false,\\n});\\n</script>\\n\\n<style scoped>\\n.help-tab ::-webkit-scrollbar {\\n  width: 8px;\\n}\\n\\n.help-tab ::-webkit-scrollbar-track {\\n  background: #2a2a2a;\\n  border-radius: 4px;\\n}\\n\\n.help-tab ::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 4px;\\n}\\n\\n.help-tab ::-webkit-scrollbar-thumb:hover {\\n  background: #3a8edf;\\n}\\n\\n.help-tab ul {\\n  list-style-type: none;\\n  position: relative;\\n}\\n\\n.help-tab ul li {\\n  position: relative;\\n  padding-left: 20px;\\n  margin-bottom: 8px;\\n}\\n\\n.help-tab ul li::before {\\n  content: '';\\n  position: absolute;\\n  left: 0;\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.help-tab a {\\n  transition: color 0.2s;\\n}\\n\\n.help-tab a:hover {\\n  color: #3a8edf !important;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProgressDialog.vue?vue&type=style&index=0&id=0fa52109&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f3a326b0\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProgressDialog.vue?vue&type=style&index=0&id=0fa52109&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProgressDialog.vue?vue&type=style&index=0&id=0fa52109&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/**\r\n * \r\n */\r\n\r\n/**\r\n *  iframe \r\n * @param text \r\n * @param successMessage \r\n * @returns Promise<boolean> \r\n */\r\nexport async function copyToClipboard(text: string, successMessage?: string): Promise<boolean> {\r\n  try {\r\n    // 1:  execCommand\r\n    if (window.parent && window.parent.document) {\r\n      try {\r\n        const textarea = window.parent.document.createElement('textarea');\r\n        textarea.value = text;\r\n        textarea.style.position = 'fixed';\r\n        textarea.style.opacity = '0';\r\n        window.parent.document.body.appendChild(textarea);\r\n        textarea.select();\r\n        const success = window.parent.document.execCommand('copy');\r\n        window.parent.document.body.removeChild(textarea);\r\n\r\n        if (success) {\r\n          if (successMessage) {\r\n            toastr.success(successMessage);\r\n          }\r\n          return true;\r\n        }\r\n      } catch (e) {\r\n        console.warn('', e);\r\n      }\r\n    }\r\n\r\n    // 2:  execCommand\r\n    try {\r\n      const textarea = document.createElement('textarea');\r\n      textarea.value = text;\r\n      textarea.style.position = 'fixed';\r\n      textarea.style.opacity = '0';\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n      const success = document.execCommand('copy');\r\n      document.body.removeChild(textarea);\r\n\r\n      if (success) {\r\n        if (successMessage) {\r\n          toastr.success(successMessage);\r\n        }\r\n        return true;\r\n      }\r\n    } catch (e) {\r\n      console.warn(' Clipboard API', e);\r\n    }\r\n\r\n    // 3:  Clipboard API\r\n    if (navigator.clipboard && navigator.clipboard.writeText) {\r\n      await navigator.clipboard.writeText(text);\r\n      if (successMessage) {\r\n        toastr.success(successMessage);\r\n      }\r\n      return true;\r\n    }\r\n\r\n    throw new Error('');\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    toastr.error('');\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *  ID\r\n */\r\nexport function getScriptIdSafe(): string {\r\n  try {\r\n    return getScriptId();\r\n  } catch (error) {\r\n    console.error(' ID :', error);\r\n    return 'unknown';\r\n  }\r\n}\r\n\r\n/**\r\n *  ID\r\n */\r\nexport function getChatIdSafe(): string {\r\n  try {\r\n    return SillyTavern.getCurrentChatId();\r\n  } catch (error) {\r\n    console.error(' ID :', error);\r\n    return '';\r\n  }\r\n}\r\n\r\n//  ID iframe \r\nlet globalScriptId: string | null = null;\r\n\r\n/**\r\n *  ID\r\n */\r\nexport function setGlobalScriptId(id: string): void {\r\n  globalScriptId = id;\r\n}\r\n\r\n/**\r\n *  ID\r\n */\r\nexport function getGlobalScriptId(): string | null {\r\n  return globalScriptId;\r\n}\r\n\r\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=13cb6ed0&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ecc564c0\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=13cb6ed0&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=13cb6ed0&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes blink-434cf372{0%,50%{opacity:1}51%,100%{opacity:0}}.project-tab[data-v-434cf372]{padding:25px !important;background:#1a1a1a !important}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/ProjectManager.vue\"],\"names\":[],\"mappings\":\"AAqhMA,0BACE,OAEE,SACF,CACA,SAEE,SACF,CACF,CAEA,8BACE,uBAAwB,CACxB,6BACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"project-tab\\\">\\n    <!--  -->\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 28px;\\n        background: #2a2a2a;\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid #333;\\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 16px !important;\\n          font-weight: 600;\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n          letter-spacing: 0.5px;\\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-laptop-code\\\" style=\\\"color: #4a9eff; font-size: 18px\\\"></i>\\n        \\n      </h3>\\n      <div class=\\\"project-action-buttons\\\" style=\\\"display: flex; gap: 10px\\\">\\n        <button\\n          v-if=\\\"currentId\\\"\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #444;\\n            border: none;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"exportToRegex\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-download\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n        <button\\n          v-if=\\\"currentId\\\"\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #444;\\n            border: none;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"showHistoryDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-history\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n        <button\\n          v-if=\\\"currentId\\\"\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #8b5cf6;\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"showAIDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#7c3aed')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#8b5cf6')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n          AI \\n        </button>\\n        <button\\n          v-if=\\\"currentId\\\"\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #ef4444;\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"showBugFixDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#dc2626')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#ef4444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-bug\\\" style=\\\"margin-right: 6px\\\"></i>\\n          Bug \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #444;\\n            border: none;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"showProjectTemplateDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-file-lines\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #444;\\n            border: none;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"triggerFolderImport\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-folder-open\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #10b981;\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"createProject\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#059669')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#10b981')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <input\\n      ref=\\\"folderInputRef\\\"\\n      type=\\\"file\\\"\\n      webkitdirectory\\n      directory\\n      multiple\\n      style=\\\"display: none\\\"\\n      @change=\\\"handleFolderImport\\\"\\n    />\\n\\n    <!--  -->\\n    <div style=\\\"display: grid; grid-template-columns: 220px 1fr 650px; gap: 20px; min-height: 500px\\\">\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <h4 style=\\\"margin: 0 0 15px 0; color: #fff; font-size: 14px; font-weight: 600\\\"></h4>\\n        <div v-if=\\\"projects.length === 0\\\" style=\\\"text-align: center; color: #666; font-size: 12px; padding: 20px 10px\\\">\\n          <br />\\n          \\\"\\\"\\n        </div>\\n        <div\\n          v-for=\\\"proj in projects\\\"\\n          :key=\\\"proj.id\\\"\\n          :style=\\\"{\\n            padding: '10px 12px',\\n            marginBottom: '8px',\\n            background: currentId === proj.id ? '#4a9eff' : '#1e1e1e',\\n            borderRadius: '8px',\\n            cursor: 'pointer',\\n            transition: 'all 0.2s ease',\\n            display: 'flex',\\n            justifyContent: 'space-between',\\n            alignItems: 'center',\\n            color: currentId === proj.id ? '#fff' : '#e0e0e0',\\n          }\\\"\\n          @click=\\\"selectProject(proj.id)\\\"\\n          @mouseenter=\\\"(e: any) => currentId !== proj.id && (e.currentTarget.style.background = '#3a3a3a')\\\"\\n          @mouseleave=\\\"(e: any) => currentId !== proj.id && (e.currentTarget.style.background = '#1e1e1e')\\\"\\n        >\\n          <span style=\\\"font-size: 13px; flex: 1\\\">{{ proj.name }}</span>\\n          <button\\n            style=\\\"\\n              width: 20px;\\n              height: 20px;\\n              background: rgba(239, 68, 68, 0.2);\\n              border: none;\\n              border-radius: 4px;\\n              color: #ff4444;\\n              font-size: 14px;\\n              line-height: 1;\\n              cursor: pointer;\\n              opacity: 0.6;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @click.stop=\\\"deleteProject(proj.id)\\\"\\n            @mouseenter=\\\"\\n              (e: any) => (\\n                (e.currentTarget.style.opacity = '1'),\\n                (e.currentTarget.style.background = '#ef4444'),\\n                (e.currentTarget.style.color = '#fff')\\n              )\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => (\\n                (e.currentTarget.style.opacity = '0.6'),\\n                (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\\n                (e.currentTarget.style.color = '#ff4444')\\n              )\\n            \\\"\\n          >\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"currentId && currentProject\\\"\\n          style=\\\"margin-top: 20px; border-top: 1px solid #3a3a3a; padding-top: 15px\\\"\\n        >\\n          <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px\\\">\\n            <h4 style=\\\"margin: 0; color: #fff; font-size: 13px; font-weight: 600\\\"></h4>\\n            <div style=\\\"display: flex; gap: 5px\\\">\\n              <button\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: #444;\\n                  border: none;\\n                  border-radius: 5px;\\n                  color: #e0e0e0;\\n                  font-size: 11px;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 4px;\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"createNewFolder\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n              >\\n                <i class=\\\"fa-solid fa-folder-plus\\\" style=\\\"font-size: 10px\\\"></i>\\n              </button>\\n              <button\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: #10b981;\\n                  border: none;\\n                  border-radius: 5px;\\n                  color: white;\\n                  font-size: 11px;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 4px;\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"showNewFileDialog\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#059669')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#10b981')\\\"\\n              >\\n                <i class=\\\"fa-solid fa-plus\\\" style=\\\"font-size: 10px\\\"></i>\\n              </button>\\n            </div>\\n          </div>\\n          <div\\n            v-for=\\\"file in currentProject.files\\\"\\n            :key=\\\"file.path\\\"\\n            :style=\\\"{\\n              padding: '8px 10px',\\n              marginBottom: '5px',\\n              background: currentFile === file.path ? '#10b981' : '#1e1e1e',\\n              borderRadius: '6px',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s ease',\\n              color: currentFile === file.path ? '#fff' : '#e0e0e0',\\n              fontSize: '12px',\\n              display: 'flex',\\n              justifyContent: 'space-between',\\n              alignItems: 'center',\\n            }\\\"\\n            @click=\\\"selectFile(file.path)\\\"\\n            @mouseenter=\\\"(e: any) => currentFile !== file.path && (e.currentTarget.style.background = '#3a3a3a')\\\"\\n            @mouseleave=\\\"(e: any) => currentFile !== file.path && (e.currentTarget.style.background = '#1e1e1e')\\\"\\n          >\\n            <span>\\n              <i :class=\\\"getFileIcon(file.path)\\\" style=\\\"margin-right: 6px\\\"></i>\\n              {{ file.name }}\\n            </span>\\n            <button\\n              style=\\\"\\n                width: 18px;\\n                height: 18px;\\n                background: rgba(239, 68, 68, 0.2);\\n                border: none;\\n                border-radius: 3px;\\n                color: #ff4444;\\n                font-size: 12px;\\n                line-height: 1;\\n                cursor: pointer;\\n                opacity: 0;\\n                transition: all 0.2s ease;\\n              \\\"\\n              title=\\\"\\\"\\n              @click.stop=\\\"deleteFile(file.path)\\\"\\n              @mouseenter=\\\"\\n                (e: any) => (\\n                  (e.currentTarget.style.opacity = '1'),\\n                  (e.currentTarget.style.background = '#ef4444'),\\n                  (e.currentTarget.style.color = '#fff')\\n                )\\n              \\\"\\n              @mouseleave=\\\"\\n                (e: any) => (\\n                  (e.currentTarget.style.opacity = '0.6'),\\n                  (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\\n                  (e.currentTarget.style.color = '#ff4444')\\n                )\\n              \\\"\\n            >\\n              \\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <div\\n          v-if=\\\"!currentId\\\"\\n          style=\\\"flex: 1; display: flex; align-items: center; justify-content: center; color: #666; font-size: 14px\\\"\\n        >\\n           \\n        </div>\\n        <div\\n          v-else-if=\\\"!currentFile\\\"\\n          style=\\\"flex: 1; display: flex; align-items: center; justify-content: center; color: #666; font-size: 14px\\\"\\n        >\\n           \\n        </div>\\n        <div v-else style=\\\"display: flex; flex-direction: column; height: 100%\\\">\\n          <div style=\\\"margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center\\\">\\n            <div style=\\\"display: flex; align-items: center; gap: 8px\\\">\\n              <i :class=\\\"getFileIcon(currentFile)\\\" style=\\\"color: #4a9eff\\\"></i>\\n              <span style=\\\"color: #fff; font-size: 14px; font-weight: 500\\\">{{ currentFile }}</span>\\n            </div>\\n            <div style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n              <span style=\\\"color: #888; font-size: 11px\\\">\\n                <i class=\\\"fa-solid fa-circle-check\\\" style=\\\"color: #10b981; margin-right: 4px\\\"></i>\\n                \\n              </span>\\n              <button\\n                style=\\\"\\n                  padding: 6px 12px;\\n                  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 12px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.2s ease;\\n                \\\"\\n                @click=\\\"saveCode\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n              >\\n                <i class=\\\"fa-solid fa-floppy-disk\\\" style=\\\"margin-right: 4px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n          <textarea\\n            v-model=\\\"code\\\"\\n            :placeholder=\\\"` ${currentFile.split('.').pop()?.toUpperCase()} ...`\\\"\\n            style=\\\"\\n              flex: 1;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-family: 'Consolas', 'Monaco', monospace;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              padding: 15px;\\n              resize: none;\\n              outline: none;\\n              min-height: 400px;\\n            \\\"\\n          ></textarea>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\\\">\\n          <h4 style=\\\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-eye\\\" style=\\\"margin-right: 8px; color: #4a9eff\\\"></i>\\n            \\n          </h4>\\n          <div style=\\\"display: flex; gap: 8px\\\">\\n            <button\\n              v-if=\\\"previewHtml\\\"\\n              title=\\\"\\\"\\n              style=\\\"\\n                width: 28px;\\n                height: 28px;\\n                padding: 0;\\n                background: #3a3a3a;\\n                border: none;\\n                border-radius: 6px;\\n                color: #e0e0e0;\\n                cursor: pointer;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                transition: all 0.2s ease;\\n              \\\"\\n              @click=\\\"openInNewWindow\\\"\\n              @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a9eff')\\\"\\n              @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n            >\\n              <i class=\\\"fa-solid fa-external-link-alt\\\" style=\\\"font-size: 12px\\\"></i>\\n            </button>\\n          </div>\\n        </div>\\n        <div\\n          style=\\\"\\n            flex: 1;\\n            background: #1e1e1e;\\n            border-radius: 8px;\\n            overflow: auto;\\n            position: relative;\\n            min-height: 400px;\\n          \\\"\\n        >\\n          <iframe\\n            v-if=\\\"previewHtml\\\"\\n            :srcdoc=\\\"previewHtml\\\"\\n            sandbox=\\\"allow-scripts allow-same-origin allow-modals allow-forms\\\"\\n            style=\\\"width: 100%; height: 100%; border: none; background: white\\\"\\n          ></iframe>\\n          <div\\n            v-else\\n            style=\\\"\\n              position: absolute;\\n              top: 50%;\\n              left: 50%;\\n              transform: translate(-50%, -50%);\\n              color: #666;\\n              font-size: 12px;\\n              text-align: center;\\n            \\\"\\n          >\\n            \\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showAI\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"closeAIDialog\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 25px;\\n          width: 90%;\\n          max-width: 600px;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            margin: 0 0 20px 0;\\n            color: #fff;\\n            font-size: 18px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"color: #8b5cf6\\\"></i>\\n          AI \\n        </h3>\\n\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px\\\">\\n            <i class=\\\"fa-solid fa-pencil\\\" style=\\\"color: #8b5cf6; margin-right: 6px\\\"></i>\\n            \\n          </label>\\n          <div\\n            style=\\\"\\n              margin-bottom: 10px;\\n              padding: 10px 12px;\\n              background: rgba(139, 92, 246, 0.1);\\n              border-left: 3px solid #8b5cf6;\\n              border-radius: 4px;\\n              font-size: 12px;\\n              color: #ccc;\\n              line-height: 1.6;\\n            \\\"\\n          >\\n            <strong style=\\\"color: #8b5cf6\\\"> </strong>\\n            \\\"\\\"\\\"\\\"\\n          </div>\\n          <textarea\\n            v-model=\\\"aiPrompt\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              padding: 12px;\\n              resize: none;\\n              outline: none;\\n            \\\"\\n          ></textarea>\\n\\n          <!--  -->\\n          <div style=\\\"margin-top: 12px\\\">\\n            <div style=\\\"color: #888; font-size: 12px; margin-bottom: 8px\\\">\\n              <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"color: #fbbf24; margin-right: 4px\\\"></i>\\n              \\n            </div>\\n            <div style=\\\"display: flex; flex-wrap: wrap; gap: 8px\\\">\\n              <button\\n                v-for=\\\"suggestion in quickSuggestions\\\"\\n                :key=\\\"suggestion\\\"\\n                style=\\\"\\n                  padding: 6px 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #ccc;\\n                  font-size: 12px;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                \\\"\\n                @click=\\\"aiPrompt = suggestion\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#2a2a2a')\\\"\\n              >\\n                {{ suggestion }}\\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n            margin-bottom: 15px;\\n            padding: 10px;\\n            background: #252525;\\n            border-radius: 6px;\\n          \\\"\\n        >\\n          <label\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 8px;\\n              cursor: pointer;\\n              color: #ccc;\\n              font-size: 13px;\\n              user-select: none;\\n            \\\"\\n          >\\n            <input v-model=\\\"enableStream\\\" type=\\\"checkbox\\\" style=\\\"width: 16px; height: 16px; cursor: pointer\\\" />\\n            <i class=\\\"fa-solid fa-water\\\" style=\\\"color: #4a9eff\\\"></i>\\n            \\n          </label>\\n          <span style=\\\"color: #888; font-size: 12px\\\">  </span>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"aiGenerating && enableStream && streamingText\\\"\\n          style=\\\"\\n            margin-bottom: 15px;\\n            padding: 15px;\\n            background: #1e1e1e;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            max-height: 200px;\\n            overflow-y: auto;\\n            font-family: 'Consolas', monospace;\\n            font-size: 12px;\\n            color: #e0e0e0;\\n            line-height: 1.5;\\n            white-space: pre-wrap;\\n          \\\"\\n        >\\n          {{ streamingText }}\\n          <span style=\\\"animation: blink 1s infinite\\\"></span>\\n        </div>\\n\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @click=\\\"closeAIDialog\\\"\\n            @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\\\"\\n            @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            :disabled=\\\"aiGenerating || !aiPrompt.trim()\\\"\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            :style=\\\"{\\n              opacity: aiGenerating || !aiPrompt.trim() ? 0.5 : 1,\\n              cursor: aiGenerating || !aiPrompt.trim() ? 'not-allowed' : 'pointer',\\n            }\\\"\\n            @click=\\\"generateWithAI\\\"\\n          >\\n            <i v-if=\\\"!aiGenerating\\\" class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ aiGenerating ? '...' : '' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- Bug  -->\\n    <div\\n      v-if=\\\"showBugFix\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"closeBugFixDialog\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 25px;\\n          width: 90%;\\n          max-width: 650px;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            margin: 0 0 20px 0;\\n            color: #fff;\\n            font-size: 18px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-bug\\\" style=\\\"color: #ef4444\\\"></i>\\n          Bug \\n        </h3>\\n\\n        <!--  -->\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-circle-exclamation\\\" style=\\\"color: #f59e0b; margin-right: 6px\\\"></i>\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"bugDescription\\\"\\n            placeholder=\\\"&#10;&#10;\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 90px;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              padding: 12px;\\n              resize: none;\\n              outline: none;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!-- Console  -->\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-terminal\\\" style=\\\"color: #ef4444; margin-right: 6px\\\"></i>\\n             Console  F12 \\n          </label>\\n          <textarea\\n            v-model=\\\"consoleError\\\"\\n            placeholder=\\\" Console &#10;Uncaught TypeError: xxx is not a function&#10;&#10;\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 80px;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #ff6b6b;\\n              font-size: 12px;\\n              font-family: 'Consolas', monospace;\\n              line-height: 1.5;\\n              padding: 12px;\\n              resize: none;\\n              outline: none;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-file-code\\\" style=\\\"color: #4a9eff; margin-right: 6px\\\"></i>\\n            \\n          </label>\\n          <select\\n            v-model=\\\"bugFile\\\"\\n            style=\\\"\\n              width: 100%;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              padding: 10px 12px;\\n              outline: none;\\n              cursor: pointer;\\n            \\\"\\n          >\\n            <option value=\\\"\\\"> AI </option>\\n            <option value=\\\"index.html\\\">HTML index.html</option>\\n            <option value=\\\"style.css\\\">CSS style.css</option>\\n            <option value=\\\"script.js\\\">JavaScript script.js</option>\\n          </select>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            padding: 12px;\\n            background: rgba(74, 158, 255, 0.1);\\n            border: 1px solid rgba(74, 158, 255, 0.3);\\n            border-radius: 6px;\\n            margin-bottom: 15px;\\n          \\\"\\n        >\\n          <p style=\\\"margin: 0; color: #4a9eff; font-size: 12px; line-height: 1.6\\\">\\n            <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <strong></strong>AI  bug Console\\n            \\n          </p>\\n        </div>\\n\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @click=\\\"closeBugFixDialog\\\"\\n            @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\\\"\\n            @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            :disabled=\\\"aiGenerating || !bugDescription.trim()\\\"\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            :style=\\\"{\\n              opacity: aiGenerating || !bugDescription.trim() ? 0.5 : 1,\\n              cursor: aiGenerating || !bugDescription.trim() ? 'not-allowed' : 'pointer',\\n            }\\\"\\n            @click=\\\"fixBugWithAI\\\"\\n          >\\n            <i v-if=\\\"!aiGenerating\\\" class=\\\"fa-solid fa-wrench\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ aiGenerating ? '...' : '' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showComparison\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.9);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10001;\\n        padding: 20px;\\n      \\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          width: 95%;\\n          height: 90%;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            padding: 20px 25px;\\n            border-bottom: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h3\\n            style=\\\"\\n              margin: 0;\\n              color: #fff;\\n              font-size: 18px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-code-compare\\\" style=\\\"color: #8b5cf6\\\"></i>\\n            AI \\n          </h3>\\n          <div style=\\\"display: flex; gap: 10px\\\">\\n            <button\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: #ef4444;\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                cursor: pointer;\\n                transition: all 0.2s ease;\\n              \\\"\\n              @click=\\\"rejectChanges\\\"\\n              @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#dc2626')\\\"\\n              @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#ef4444')\\\"\\n            >\\n              <i class=\\\"fa-solid fa-xmark\\\" style=\\\"margin-right: 6px\\\"></i>\\n              \\n            </button>\\n            <button\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: #10b981;\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 500;\\n                cursor: pointer;\\n                transition: all 0.2s;\\n              \\\"\\n              @click=\\\"acceptChanges\\\"\\n              @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#059669')\\\"\\n              @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#10b981')\\\"\\n            >\\n              <i class=\\\"fa-solid fa-check\\\" style=\\\"margin-right: 6px\\\"></i>\\n              \\n            </button>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            flex: 1;\\n            display: grid;\\n            grid-template-columns: 1fr 1fr 1.5fr;\\n            gap: 15px;\\n            padding: 20px;\\n            overflow: hidden;\\n          \\\"\\n        >\\n          <!--  -->\\n          <div style=\\\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\\\">\\n            <div style=\\\"padding: 12px 15px; background: #2a2a2a; border-bottom: 1px solid #3a3a3a\\\">\\n              <h4 style=\\\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n                <i class=\\\"fa-solid fa-file-code\\\" style=\\\"margin-right: 8px; color: #ef4444\\\"></i>\\n                \\n              </h4>\\n            </div>\\n            <div style=\\\"flex: 1; overflow-y: auto; padding: 15px\\\">\\n              <div v-for=\\\"change in aiChanges\\\" :key=\\\"change.path\\\" style=\\\"margin-bottom: 20px\\\">\\n                <div\\n                  style=\\\"\\n                    color: #4a9eff;\\n                    font-size: 12px;\\n                    font-weight: 600;\\n                    margin-bottom: 8px;\\n                    display: flex;\\n                    align-items: center;\\n                    gap: 6px;\\n                  \\\"\\n                >\\n                  <i :class=\\\"getFileIcon(change.path)\\\"></i>\\n                  {{ change.path }}\\n                </div>\\n                <pre\\n                  style=\\\"\\n                    margin: 0;\\n                    padding: 12px;\\n                    background: #1a1a1a;\\n                    border-radius: 6px;\\n                    color: #e0e0e0;\\n                    font-family: 'Consolas', 'Monaco', monospace;\\n                    font-size: 12px;\\n                    line-height: 1.5;\\n                    overflow-x: auto;\\n                    border: 1px solid #3a3a3a;\\n                  \\\"\\n                  >{{ change.oldContent }}</pre\\n                >\\n              </div>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\\\">\\n            <div style=\\\"padding: 12px 15px; background: #2a2a2a; border-bottom: 1px solid #3a3a3a\\\">\\n              <h4 style=\\\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n                <i class=\\\"fa-solid fa-file-code\\\" style=\\\"margin-right: 8px; color: #10b981\\\"></i>\\n                \\n              </h4>\\n            </div>\\n            <div style=\\\"flex: 1; overflow-y: auto; padding: 15px\\\">\\n              <div v-for=\\\"change in aiChanges\\\" :key=\\\"change.path\\\" style=\\\"margin-bottom: 20px\\\">\\n                <div\\n                  style=\\\"\\n                    color: #4a9eff;\\n                    font-size: 12px;\\n                    font-weight: 600;\\n                    margin-bottom: 8px;\\n                    display: flex;\\n                    align-items: center;\\n                    gap: 6px;\\n                  \\\"\\n                >\\n                  <i :class=\\\"getFileIcon(change.path)\\\"></i>\\n                  {{ change.path }}\\n                </div>\\n                <pre\\n                  style=\\\"\\n                    margin: 0;\\n                    padding: 12px;\\n                    background: #1a1a1a;\\n                    border-radius: 6px;\\n                    color: #e0e0e0;\\n                    font-family: 'Consolas', 'Monaco', monospace;\\n                    font-size: 12px;\\n                    line-height: 1.5;\\n                    overflow-x: auto;\\n                    border: 1px solid #3a3a3a;\\n                  \\\"\\n                  >{{ change.newContent }}</pre\\n                >\\n              </div>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\\\">\\n            <div\\n              style=\\\"\\n                padding: 12px 15px;\\n                background: #2a2a2a;\\n                border-bottom: 1px solid #3a3a3a;\\n                display: flex;\\n                justify-content: space-between;\\n                align-items: center;\\n              \\\"\\n            >\\n              <h4 style=\\\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n                <i class=\\\"fa-solid fa-eye\\\" style=\\\"margin-right: 8px; color: #4a9eff\\\"></i>\\n                \\n              </h4>\\n              <div style=\\\"display: flex; gap: 8px\\\">\\n                <button\\n                  :style=\\\"{\\n                    padding: '4px 10px',\\n                    background: previewMode === 'before' ? '#ef4444' : '#3a3a3a',\\n                    border: 'none',\\n                    borderRadius: '4px',\\n                    color: 'white',\\n                    fontSize: '11px',\\n                    cursor: 'pointer',\\n                    transition: 'all 0.2s ease',\\n                  }\\\"\\n                  @click=\\\"previewMode = 'before'\\\"\\n                >\\n                  \\n                </button>\\n                <button\\n                  :style=\\\"{\\n                    padding: '4px 10px',\\n                    background: previewMode === 'after' ? '#10b981' : '#3a3a3a',\\n                    border: 'none',\\n                    borderRadius: '4px',\\n                    color: 'white',\\n                    fontSize: '11px',\\n                    cursor: 'pointer',\\n                    transition: 'all 0.2s ease',\\n                  }\\\"\\n                  @click=\\\"previewMode = 'after'\\\"\\n                >\\n                  \\n                </button>\\n              </div>\\n            </div>\\n            <div style=\\\"flex: 1; background: white; overflow: hidden\\\">\\n              <iframe\\n                :srcdoc=\\\"comparisonPreviewHtml\\\"\\n                sandbox=\\\"allow-scripts allow-same-origin allow-modals allow-forms\\\"\\n                style=\\\"width: 100%; height: 100%; border: none\\\"\\n              ></iframe>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showHistory\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        padding: 20px;\\n      \\\"\\n      @click.self=\\\"closeHistoryDialog\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          width: 90%;\\n          max-width: 900px;\\n          max-height: 80%;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <div\\n          style=\\\"\\n            padding: 20px 25px;\\n            border-bottom: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h3\\n            style=\\\"\\n              margin: 0;\\n              color: #fff;\\n              font-size: 18px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-history\\\" style=\\\"color: #f59e0b\\\"></i>\\n            AI \\n          </h3>\\n          <button\\n            style=\\\"\\n              width: 28px;\\n              height: 28px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @click=\\\"closeHistoryDialog\\\"\\n            @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\\\"\\n            @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n          >\\n            \\n          </button>\\n        </div>\\n        <div style=\\\"flex: 1; overflow-y: auto; padding: 20px\\\">\\n          <div v-if=\\\"currentProjectHistory.length === 0\\\" style=\\\"text-align: center; color: #666; padding: 40px 20px\\\">\\n            <i class=\\\"fa-solid fa-inbox\\\" style=\\\"font-size: 48px; margin-bottom: 15px; opacity: 0.3\\\"></i>\\n            <p></p>\\n          </div>\\n          <div\\n            v-for=\\\"(record, index) in currentProjectHistory\\\"\\n            :key=\\\"index\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border-radius: 8px;\\n              padding: 15px;\\n              margin-bottom: 15px;\\n              border: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <div style=\\\"display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px\\\">\\n              <div>\\n                <div style=\\\"color: #fff; font-size: 14px; font-weight: 600; margin-bottom: 5px\\\">\\n                  {{ record.prompt }}\\n                </div>\\n                <div style=\\\"color: #888; font-size: 12px\\\">\\n                  {{ new Date(record.timestamp).toLocaleString('zh-CN') }}\\n                </div>\\n              </div>\\n              <button\\n                style=\\\"\\n                  padding: 6px 12px;\\n                  background: #4a9eff;\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 12px;\\n                  font-weight: 500;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                \\\"\\n                @click=\\\"restoreHistory(record)\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#3b82f6')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#4a9eff')\\\"\\n              >\\n                <i class=\\\"fa-solid fa-undo\\\" style=\\\"margin-right: 4px\\\"></i>\\n                \\n              </button>\\n            </div>\\n            <div style=\\\"color: #ccc; font-size: 13px; margin-top: 10px\\\">\\n              <strong></strong>\\n              <div style=\\\"margin-top: 5px; display: flex; flex-wrap: wrap; gap: 8px\\\">\\n                <span\\n                  v-for=\\\"change in record.changes\\\"\\n                  :key=\\\"change.path\\\"\\n                  style=\\\"\\n                    background: #2a2a2a;\\n                    padding: 4px 10px;\\n                    border-radius: 4px;\\n                    font-size: 12px;\\n                    display: inline-flex;\\n                    align-items: center;\\n                    gap: 6px;\\n                  \\\"\\n                >\\n                  <i :class=\\\"getFileIcon(change.path)\\\"></i>\\n                  {{ change.path }}\\n                </span>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showProjectTemplate\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        padding: 20px;\\n      \\\"\\n      @click.self=\\\"showProjectTemplate = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #1e1e1e;\\n          border-radius: 16px;\\n          max-width: 850px;\\n          width: 100%;\\n          max-height: 90vh;\\n          overflow-y: auto;\\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);\\n          border: 1px solid #333;\\n        \\\"\\n      >\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            padding: 24px 28px;\\n            border-bottom: 1px solid #2a2a2a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h3\\n            style=\\\"\\n              margin: 0;\\n              color: #fff;\\n              font-size: 20px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 12px;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                width: 40px;\\n                height: 40px;\\n                background: #2a2a2a;\\n                border-radius: 10px;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                font-size: 20px;\\n              \\\"\\n            >\\n              \\n            </span>\\n            \\n          </h3>\\n          <button\\n            style=\\\"\\n              width: 36px;\\n              height: 36px;\\n              background: #2a2a2a;\\n              border: none;\\n              border-radius: 8px;\\n              color: #888;\\n              font-size: 18px;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n            \\\"\\n            @click=\\\"showProjectTemplate = false\\\"\\n            @mouseenter=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background = '#333';\\n                e.currentTarget.style.color = '#fff';\\n              }\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background = '#2a2a2a';\\n                e.currentTarget.style.color = '#888';\\n              }\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-times\\\"></i>\\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"padding: 28px\\\">\\n          <div style=\\\"display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px\\\">\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                background: #252525;\\n                border: 1px solid transparent;\\n                border-radius: 12px;\\n                padding: 24px;\\n                cursor: pointer;\\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\\n              \\\"\\n              @click=\\\"createProjectFromTemplate('')\\\"\\n              @mouseenter=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(-4px)';\\n                  e.currentTarget.style.borderColor = '#555';\\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\\n                }\\n              \\\"\\n              @mouseleave=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(0)';\\n                  e.currentTarget.style.borderColor = 'transparent';\\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\\n                }\\n              \\\"\\n            >\\n              <div\\n                style=\\\"\\n                  width: 56px;\\n                  height: 56px;\\n                  background: #2a2a2a;\\n                  border-radius: 12px;\\n                  display: flex;\\n                  align-items: center;\\n                  justify-content: center;\\n                  font-size: 28px;\\n                  margin-bottom: 16px;\\n                \\\"\\n              >\\n                \\n              </div>\\n              <h4 style=\\\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\\\"></h4>\\n              <p style=\\\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\\\"></p>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                background: #252525;\\n                border: 1px solid transparent;\\n                border-radius: 12px;\\n                padding: 24px;\\n                cursor: pointer;\\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\\n              \\\"\\n              @click=\\\"createProjectFromTemplate('')\\\"\\n              @mouseenter=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(-4px)';\\n                  e.currentTarget.style.borderColor = '#555';\\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\\n                }\\n              \\\"\\n              @mouseleave=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(0)';\\n                  e.currentTarget.style.borderColor = 'transparent';\\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\\n                }\\n              \\\"\\n            >\\n              <div\\n                style=\\\"\\n                  width: 56px;\\n                  height: 56px;\\n                  background: #2a2a2a;\\n                  border-radius: 12px;\\n                  display: flex;\\n                  align-items: center;\\n                  justify-content: center;\\n                  font-size: 28px;\\n                  margin-bottom: 16px;\\n                \\\"\\n              >\\n                \\n              </div>\\n              <h4 style=\\\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\\\"></h4>\\n              <p style=\\\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\\\">HP/MP/</p>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                background: #252525;\\n                border: 1px solid transparent;\\n                border-radius: 12px;\\n                padding: 24px;\\n                cursor: pointer;\\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\\n              \\\"\\n              @click=\\\"createProjectFromTemplate('')\\\"\\n              @mouseenter=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(-4px)';\\n                  e.currentTarget.style.borderColor = '#555';\\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\\n                }\\n              \\\"\\n              @mouseleave=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(0)';\\n                  e.currentTarget.style.borderColor = 'transparent';\\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\\n                }\\n              \\\"\\n            >\\n              <div\\n                style=\\\"\\n                  width: 56px;\\n                  height: 56px;\\n                  background: #2a2a2a;\\n                  border-radius: 12px;\\n                  display: flex;\\n                  align-items: center;\\n                  justify-content: center;\\n                  font-size: 28px;\\n                  margin-bottom: 16px;\\n                \\\"\\n              >\\n                \\n              </div>\\n              <h4 style=\\\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\\\"></h4>\\n              <p style=\\\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\\\"></p>\\n            </div>\\n          </div>\\n\\n          <div\\n            style=\\\"\\n              margin-top: 24px;\\n              padding: 16px 18px;\\n              background: #252525;\\n              border: 1px solid #333;\\n              border-radius: 10px;\\n            \\\"\\n          >\\n            <div\\n              style=\\\"\\n                color: #ccc;\\n                font-weight: 500;\\n                margin-bottom: 6px;\\n                font-size: 13px;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n              \\\"\\n            >\\n              <span style=\\\"color: #fbbf24; font-size: 16px\\\"></span>\\n              \\n            </div>\\n            <p style=\\\"margin: 0; color: #888; font-size: 13px; line-height: 1.7\\\">\\n              \\n            </p>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <ProgressDialog ref=\\\"progressDialogRef\\\" :show=\\\"showProgress\\\" title=\\\"AI \\\" />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { computed, onBeforeUnmount, ref, watch, watchEffect } from 'vue';\\nimport { normalizeApiEndpoint } from '../settings';\\nimport { getScriptIdSafe } from '../utils';\\nimport ProgressDialog from './ProgressDialog.vue';\\n\\ninterface ProjectFile {\\n  path: string;\\n  name: string;\\n  content: string;\\n}\\n\\ninterface Project {\\n  id: string;\\n  name: string;\\n  files: ProjectFile[];\\n}\\n\\ninterface AIChange {\\n  path: string;\\n  oldContent: string;\\n  newContent: string;\\n}\\n\\ninterface AIHistoryRecord {\\n  timestamp: string;\\n  prompt: string;\\n  changes: AIChange[];\\n}\\n\\nconst projects = ref<Project[]>([]);\\nconst currentId = ref('');\\nconst currentFile = ref('');\\nconst code = ref('');\\nconst previewHtml = ref('');\\nconst showAI = ref(false);\\nconst aiPrompt = ref('');\\nconst aiGenerating = ref(false);\\nconst enableStream = ref(false); // \\nconst streamingText = ref(''); // \\nconst showComparison = ref(false);\\nconst aiChanges = ref<AIChange[]>([]);\\nconst previewMode = ref<'before' | 'after'>('after');\\nconst showHistory = ref(false);\\nconst aiHistory = ref<Record<string, AIHistoryRecord[]>>({});\\n\\n// AI \\nconst quickSuggestions = [\\n  '',\\n  '/',\\n  '',\\n  '',\\n  '',\\n  '',\\n  '',\\n  'ARIA',\\n];\\n\\n// \\nconst showProgress = ref(false);\\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\\n\\n// \\nconst showProjectTemplate = ref(false);\\n\\n// Bug \\nconst showBugFix = ref(false);\\nconst bugDescription = ref('');\\nconst consoleError = ref('');\\nconst bugFile = ref('');\\n\\n// \\nconst folderInputRef = ref<HTMLInputElement | null>(null);\\n\\nconst currentProject = computed(() => {\\n  return projects.value.find(p => p.id === currentId.value);\\n});\\n\\nconst currentProjectHistory = computed(() => {\\n  return aiHistory.value[currentId.value] || [];\\n});\\n\\nconst comparisonPreviewHtml = computed(() => {\\n  if (aiChanges.value.length === 0) return '';\\n\\n  const proj = currentProject.value;\\n  if (!proj) return '';\\n\\n  // \\n  const tempFiles: ProjectFile[] = proj.files.map(f => {\\n    const change = aiChanges.value.find(c => c.path === f.path);\\n    return {\\n      ...f,\\n      content: change ? (previewMode.value === 'after' ? change.newContent : change.oldContent) : f.content,\\n    };\\n  });\\n\\n  return buildPreviewFromFiles(tempFiles);\\n});\\n\\n// \\nconst projectTemplates = {\\n  : {\\n    name: '',\\n    description: '',\\n    icon: '',\\n    color: '#4a9eff',\\n    files: {\\n      'index.html': `<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title></title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\n</head>\\n<body>\\n  <div id=\\\"app\\\">\\n    <div class=\\\"chat-container\\\">\\n      <div class=\\\"message-list\\\" id=\\\"messageList\\\"></div>\\n      <div class=\\\"input-area\\\">\\n        <textarea id=\\\"userInput\\\" placeholder=\\\"...\\\"></textarea>\\n        <button id=\\\"sendBtn\\\"></button>\\n      </div>\\n    </div>\\n  </div>\\n  <${'script'} src=\\\"https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js\\\"></${'script'}>\\n  <${'script'} src=\\\"script.js\\\"></${'script'}>\\n</body>\\n</html>`,\\n      'style.css': `* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: 'Segoe UI', sans-serif;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n}\\n\\n.chat-container {\\n  max-width: 800px;\\n  margin: 20px auto;\\n  height: calc(100vh - 40px);\\n  display: flex;\\n  flex-direction: column;\\n  background: #2a2a2a;\\n  border-radius: 12px;\\n  overflow: hidden;\\n}\\n\\n.message-list {\\n  flex: 1;\\n  padding: 20px;\\n  overflow-y: auto;\\n}\\n\\n.message {\\n  margin-bottom: 15px;\\n  padding: 10px 15px;\\n  border-radius: 8px;\\n  max-width: 70%;\\n}\\n\\n.message.user {\\n  background: #4a9eff;\\n  margin-left: auto;\\n  text-align: right;\\n}\\n\\n.message.assistant {\\n  background: #3a3a3a;\\n}\\n\\n.input-area {\\n  padding: 15px;\\n  background: #2a2a2a;\\n  border-top: 1px solid #3a3a3a;\\n  display: flex;\\n  gap: 10px;\\n}\\n\\n#userInput {\\n  flex: 1;\\n  padding: 10px;\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  color: #e0e0e0;\\n  resize: none;\\n  height: 60px;\\n}\\n\\n#sendBtn {\\n  padding: 10px 20px;\\n  background: #4a9eff;\\n  border: none;\\n  border-radius: 6px;\\n  color: white;\\n  cursor: pointer;\\n  font-weight: 600;\\n}\\n\\n#sendBtn:hover {\\n  background: #357abd;\\n}`,\\n      'script.js': `// \\nlet chatHistory = [];\\n\\n// \\nfunction loadHistory() {\\n  const saved = getVariables({ type: 'chat' });\\n  chatHistory = saved.chatHistory || [];\\n  renderMessages();\\n}\\n\\n// \\nfunction saveHistory() {\\n  insertOrAssignVariables({ chatHistory }, { type: 'chat' });\\n}\\n\\n// \\nfunction renderMessages() {\\n  const list = document.getElementById('messageList');\\n  list.innerHTML = '';\\n  chatHistory.forEach(msg => {\\n    const div = document.createElement('div');\\n    div.className = 'message ' + msg.sender;\\n    div.textContent = msg.content;\\n    list.appendChild(div);\\n  });\\n  list.scrollTop = list.scrollHeight;\\n}\\n\\n// \\nasync function sendMessage() {\\n  const input = document.getElementById('userInput');\\n  const text = input.value.trim();\\n  if (!text) return;\\n\\n  // \\n  chatHistory.push({\\n    id: Date.now(),\\n    sender: 'user',\\n    content: text,\\n    timestamp: new Date().toLocaleTimeString()\\n  });\\n  input.value = '';\\n  renderMessages();\\n  saveHistory();\\n\\n  //  AI\\n  const prompt = '\\\\\\\\n' + chatHistory.map(m => m.sender + ': ' + m.content).join('\\\\\\\\n');\\n\\n  let aiText = '';\\n  await generate({\\n    should_stream: true,\\n    prompt: prompt,\\n    on_stream_chunk: (chunk) => {\\n      aiText += chunk;\\n      // \\n      const tempMsg = { id: 'temp', sender: 'assistant', content: aiText };\\n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\\n      if (tempIndex >= 0) {\\n        chatHistory[tempIndex] = tempMsg;\\n      } else {\\n        chatHistory.push(tempMsg);\\n      }\\n      renderMessages();\\n    },\\n    on_stream_end: () => {\\n      // \\n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\\n      if (tempIndex >= 0) {\\n        chatHistory[tempIndex] = {\\n          id: Date.now(),\\n          sender: 'assistant',\\n          content: aiText,\\n          timestamp: new Date().toLocaleTimeString()\\n        };\\n      }\\n      renderMessages();\\n      saveHistory();\\n    }\\n  });\\n}\\n\\n// \\n$(() => {\\n  loadHistory();\\n  document.getElementById('sendBtn').addEventListener('click', sendMessage);\\n  document.getElementById('userInput').addEventListener('keydown', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      sendMessage();\\n    }\\n  });\\n});`,\\n    },\\n  },\\n  : {\\n    name: '',\\n    description: 'HP/MP/',\\n    icon: '',\\n    color: '#10b981',\\n    files: {\\n      'index.html': `<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title></title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\n</head>\\n<body>\\n  <div id=\\\"app\\\">\\n    <div class=\\\"status-panel\\\">\\n      <h2></h2>\\n      <div class=\\\"stat-item\\\">\\n        <label> (HP)</label>\\n        <div class=\\\"progress-bar\\\">\\n          <div class=\\\"progress-fill hp\\\" id=\\\"hpBar\\\"></div>\\n        </div>\\n        <span id=\\\"hpText\\\">0/0</span>\\n      </div>\\n      <div class=\\\"stat-item\\\">\\n        <label> (MP)</label>\\n        <div class=\\\"progress-bar\\\">\\n          <div class=\\\"progress-fill mp\\\" id=\\\"mpBar\\\"></div>\\n        </div>\\n        <span id=\\\"mpText\\\">0/0</span>\\n      </div>\\n      <div class=\\\"stat-item\\\">\\n        <label> (EXP)</label>\\n        <div class=\\\"progress-bar\\\">\\n          <div class=\\\"progress-fill exp\\\" id=\\\"expBar\\\"></div>\\n        </div>\\n        <span id=\\\"expText\\\">0/0</span>\\n      </div>\\n    </div>\\n  </div>\\n  <${'script'} src=\\\"script.js\\\"></${'script'}>\\n</body>\\n</html>`,\\n      'style.css': `* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: 'Segoe UI', sans-serif;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n  padding: 20px;\\n}\\n\\n.status-panel {\\n  max-width: 500px;\\n  margin: 0 auto;\\n  background: #2a2a2a;\\n  border-radius: 12px;\\n  padding: 25px;\\n  border: 1px solid #3a3a3a;\\n}\\n\\nh2 {\\n  margin-bottom: 20px;\\n  color: #4a9eff;\\n}\\n\\n.stat-item {\\n  margin-bottom: 20px;\\n}\\n\\n.stat-item label {\\n  display: block;\\n  margin-bottom: 8px;\\n  font-weight: 600;\\n  font-size: 14px;\\n}\\n\\n.progress-bar {\\n  width: 100%;\\n  height: 24px;\\n  background: #1a1a1a;\\n  border-radius: 12px;\\n  overflow: hidden;\\n  margin-bottom: 5px;\\n}\\n\\n.progress-fill {\\n  height: 100%;\\n  transition: width 0.5s ease;\\n  border-radius: 12px;\\n}\\n\\n.progress-fill.hp {\\n  background: linear-gradient(90deg, #ef4444, #10b981);\\n}\\n\\n.progress-fill.mp {\\n  background: linear-gradient(90deg, #3b82f6, #06b6d4);\\n}\\n\\n.progress-fill.exp {\\n  background: linear-gradient(90deg, #fbbf24, #f59e0b);\\n}\\n\\n.stat-item span {\\n  font-size: 13px;\\n  color: #94a3b8;\\n}`,\\n      'script.js': `// \\nfunction loadStats() {\\n  const data = getVariables({ type: 'chat' });\\n\\n  const hp = data.hp || 850;\\n  const maxHp = data.maxHp || 1000;\\n  const mp = data.mp || 340;\\n  const maxMp = data.maxMp || 500;\\n  const exp = data.exp || 1250;\\n  const maxExp = data.maxExp || 2000;\\n\\n  // \\n  updateBar('hp', hp, maxHp);\\n  updateBar('mp', mp, maxMp);\\n  updateBar('exp', exp, maxExp);\\n}\\n\\nfunction updateBar(type, current, max) {\\n  const percent = (current / max) * 100;\\n  document.getElementById(type + 'Bar').style.width = percent + '%';\\n  document.getElementById(type + 'Text').textContent = current + '/' + max;\\n}\\n\\n// \\ndocument.addEventListener('DOMContentLoaded', loadStats);`,\\n    },\\n  },\\n  : {\\n    name: '',\\n    description: '',\\n    icon: '',\\n    color: '#ec4899',\\n    files: {\\n      'index.html': `<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title></title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\n</head>\\n<body>\\n  <div id=\\\"app\\\">\\n    <div class=\\\"affection-container\\\">\\n      <h2></h2>\\n      <div class=\\\"character-grid\\\" id=\\\"characterGrid\\\"></div>\\n    </div>\\n  </div>\\n  <${'script'} src=\\\"script.js\\\"></${'script'}>\\n</body>\\n</html>`,\\n      'style.css': `* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: 'Segoe UI', sans-serif;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n  padding: 20px;\\n}\\n\\n.affection-container {\\n  max-width: 900px;\\n  margin: 0 auto;\\n}\\n\\nh2 {\\n  margin-bottom: 25px;\\n  color: #ec4899;\\n  text-align: center;\\n}\\n\\n.character-grid {\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\\n  gap: 20px;\\n}\\n\\n.character-card {\\n  background: #2a2a2a;\\n  border-radius: 12px;\\n  padding: 20px;\\n  border: 2px solid #3a3a3a;\\n  transition: all 0.3s ease;\\n}\\n\\n.character-card:hover {\\n  transform: translateY(-5px);\\n  border-color: #ec4899;\\n  box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);\\n}\\n\\n.character-name {\\n  font-size: 18px;\\n  font-weight: 600;\\n  margin-bottom: 15px;\\n  color: #e0e0e0;\\n}\\n\\n.affection-bar {\\n  width: 100%;\\n  height: 20px;\\n  background: #1a1a1a;\\n  border-radius: 10px;\\n  overflow: hidden;\\n  margin-bottom: 8px;\\n}\\n\\n.affection-fill {\\n  height: 100%;\\n  background: linear-gradient(90deg, #ec4899, #f472b6);\\n  transition: width 0.5s ease;\\n  border-radius: 10px;\\n}\\n\\n.affection-text {\\n  font-size: 13px;\\n  color: #94a3b8;\\n}`,\\n      'script.js': `// \\nfunction loadCharacters() {\\n  const data = getVariables({ type: 'chat' });\\n  const characters = data.characters || [\\n    { name: ' A', affection: 75 },\\n    { name: ' B', affection: 50 },\\n    { name: ' C', affection: 90 }\\n  ];\\n\\n  const grid = document.getElementById('characterGrid');\\n  grid.innerHTML = '';\\n\\n  characters.forEach(char => {\\n    const card = document.createElement('div');\\n    card.className = 'character-card';\\n    card.innerHTML = \\\\`\\n      <div class=\\\"character-name\\\">\\\\${char.name}</div>\\n      <div class=\\\"affection-bar\\\">\\n        <div class=\\\"affection-fill\\\" style=\\\"width: \\\\${char.affection}%\\\"></div>\\n      </div>\\n      <div class=\\\"affection-text\\\">: \\\\${char.affection}/100</div>\\n    \\\\`;\\n    grid.appendChild(card);\\n  });\\n}\\n\\n// \\ndocument.addEventListener('DOMContentLoaded', loadCharacters);`,\\n    },\\n  },\\n};\\n\\n// \\nfunction showProjectTemplateDialog() {\\n  showProjectTemplate.value = true;\\n}\\n\\n// \\nfunction createProjectFromTemplate(templateKey: string) {\\n  const template = projectTemplates[templateKey as keyof typeof projectTemplates];\\n  if (!template) return;\\n\\n  const name = prompt(':', template.name);\\n  if (!name || !name.trim()) return;\\n\\n  const newProj: Project = {\\n    id: Date.now().toString(),\\n    name: name.trim(),\\n    files: Object.entries(template.files).map(([filename, content]) => ({\\n      path: filename,\\n      name: filename,\\n      content: content,\\n    })),\\n  };\\n\\n  projects.value.push(newProj);\\n  currentId.value = newProj.id;\\n  currentFile.value = newProj.files[0]?.name || '';\\n  code.value = newProj.files[0]?.content || '';\\n  saveToChatVar();\\n\\n  showProjectTemplate.value = false;\\n  window.toastr.success(' \\\"' + name.trim() + '\\\"');\\n}\\n\\n// \\nfunction triggerFolderImport() {\\n  if (folderInputRef.value) {\\n    folderInputRef.value.value = ''; // \\n    folderInputRef.value.click();\\n  }\\n}\\n\\nasync function handleFolderImport(event: Event) {\\n  const input = event.target as HTMLInputElement;\\n  const files = input.files;\\n\\n  if (!files || files.length === 0) {\\n    return;\\n  }\\n\\n  try {\\n    // \\n    const firstFile = files[0];\\n    const pathParts = firstFile.webkitRelativePath.split('/');\\n    const folderName = pathParts[0] || '';\\n\\n    // \\n    const projectName = prompt(':', folderName);\\n    if (!projectName || !projectName.trim()) {\\n      return;\\n    }\\n\\n    // \\n    const supportedExtensions = ['.html', '.css', '.js', '.ts', '.scss', '.sass', '.json', '.txt', '.md'];\\n\\n    // \\n    const projectFiles: ProjectFile[] = [];\\n    const fileReadPromises: Promise<void>[] = [];\\n\\n    for (let i = 0; i < files.length; i++) {\\n      const file = files[i];\\n      const relativePath = file.webkitRelativePath.split('/').slice(1).join('/'); // \\n\\n      // /\\n      if (!relativePath || relativePath.startsWith('.') || relativePath.includes('/.')) {\\n        continue;\\n      }\\n\\n      //  node_modulesdist \\n      if (\\n        relativePath.includes('node_modules/') ||\\n        relativePath.includes('dist/') ||\\n        relativePath.includes('.git/') ||\\n        relativePath.includes('build/')\\n      ) {\\n        continue;\\n      }\\n\\n      // \\n      const extension = '.' + relativePath.split('.').pop()?.toLowerCase();\\n      if (!supportedExtensions.includes(extension)) {\\n        continue;\\n      }\\n\\n      // \\n      const readPromise = new Promise<void>((resolve, reject) => {\\n        const reader = new FileReader();\\n        reader.onload = e => {\\n          const content = e.target?.result as string;\\n          const fileName = relativePath.split('/').pop() || relativePath;\\n          projectFiles.push({\\n            path: relativePath,\\n            name: fileName,\\n            content: content || '',\\n          });\\n          resolve();\\n        };\\n        reader.onerror = () => reject(new Error(`: ${relativePath}`));\\n        reader.readAsText(file);\\n      });\\n\\n      fileReadPromises.push(readPromise);\\n    }\\n\\n    // \\n    await Promise.all(fileReadPromises);\\n\\n    if (projectFiles.length === 0) {\\n      window.toastr.warning('HTMLCSSJSTSSCSS ');\\n      return;\\n    }\\n\\n    // \\n    const newProj: Project = {\\n      id: Date.now().toString(),\\n      name: projectName.trim(),\\n      files: projectFiles,\\n    };\\n\\n    projects.value.push(newProj);\\n    currentId.value = newProj.id;\\n    currentFile.value = newProj.files[0]?.path || '';\\n    code.value = newProj.files[0]?.content || '';\\n\\n    saveToChatVar();\\n    updatePreview();\\n\\n    window.toastr.success(`\\\"${projectName}\\\" ${projectFiles.length} `);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\nfunction createProject() {\\n  const name = prompt(':');\\n  if (!name || !name.trim()) return;\\n\\n  const htmlContent = `<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title>${name.trim()}</title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\n</head>\\n<body>\\n  <div class=\\\"container\\\">\\n    <h1> ${name.trim()}!</h1>\\n    <p></p>\\n  </div>\\n  <${'script'} src=\\\"script.js\\\"></${'script'}>\\n</body>\\n</html>`;\\n\\n  const cssContent = `* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: #333;\\n  min-height: 100vh;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.container {\\n  background: white;\\n  padding: 60px 40px;\\n  border-radius: 20px;\\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\\n  text-align: center;\\n  max-width: 600px;\\n}\\n\\nh1 {\\n  font-size: 2.5em;\\n  color: #667eea;\\n  margin-bottom: 20px;\\n}\\n\\np {\\n  font-size: 1.2em;\\n  color: #666;\\n  line-height: 1.6;\\n}`;\\n\\n  const jsContent = `console.log('');\\n\\n//  jQuery  DOM \\n$(function() {\\n  console.log('');\\n\\n  // ==========  ==========\\n  const isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\\n\\n  if (!isInTavern) {\\n    console.log(' API ');\\n    //  localStorage \\n  }\\n\\n  // ========== ==========\\n  const storageKey = 'my_project_data'; // \\n\\n  // \\n  function loadData() {\\n    if (isInTavern) {\\n      const data = getVariables({ type: 'chat' });\\n      return data[storageKey] || { count: 0 };\\n    } else {\\n      //  localStorage\\n      const stored = localStorage.getItem(storageKey);\\n      return stored ? JSON.parse(stored) : { count: 0 };\\n    }\\n  }\\n\\n  // \\n  function saveData(data) {\\n    if (isInTavern) {\\n      insertOrAssignVariables({ [storageKey]: data }, { type: 'chat' });\\n      console.log(':', data);\\n    } else {\\n      //  localStorage\\n      localStorage.setItem(storageKey, JSON.stringify(data));\\n      console.log(' localStorage:', data);\\n    }\\n  }\\n\\n  // \\n  let myData = loadData();\\n  console.log(':', myData);\\n\\n  // ==========  ==========\\n  const container = $('.container');\\n  if (container.length) {\\n    container.on('click', function() {\\n      myData.count++;\\n      saveData(myData);\\n      if (typeof toastr !== 'undefined') {\\n        toastr.success(\\\\`: \\\\${myData.count}\\\\`);\\n      } else {\\n        alert(\\\\`: \\\\${myData.count}\\\\`);\\n      }\\n    });\\n  }\\n\\n  // \\n  $(window).on('pagehide', function() {\\n    saveData(myData);\\n  });\\n});`;\\n\\n  const newProj: Project = {\\n    id: Date.now().toString(),\\n    name: name.trim(),\\n    files: [\\n      { path: 'index.html', name: 'index.html', content: htmlContent },\\n      { path: 'style.css', name: 'style.css', content: cssContent },\\n      { path: 'script.js', name: 'script.js', content: jsContent },\\n    ],\\n  };\\n\\n  projects.value.push(newProj);\\n  console.log(':', newProj.name, ':', projects.value.length);\\n\\n  // \\n  saveToChatVar();\\n\\n  currentId.value = newProj.id;\\n  currentFile.value = 'index.html';\\n  code.value = htmlContent;\\n  updatePreview();\\n  toastr.success(` \\\"${newProj.name}\\\" `);\\n}\\n\\nfunction selectProject(id: string) {\\n  currentId.value = id;\\n  const proj = currentProject.value;\\n  if (proj && proj.files.length > 0) {\\n    currentFile.value = proj.files[0].path;\\n    code.value = proj.files[0].content;\\n    updatePreview();\\n  } else {\\n    currentFile.value = '';\\n    code.value = '';\\n    previewHtml.value = '';\\n  }\\n}\\n\\nfunction selectFile(path: string) {\\n  currentFile.value = path;\\n  const proj = currentProject.value;\\n  if (proj) {\\n    const file = proj.files.find(f => f.path === path);\\n    if (file) {\\n      code.value = file.content;\\n    }\\n  }\\n}\\n\\nfunction saveCode() {\\n  const proj = currentProject.value;\\n  if (!proj || !currentFile.value) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  const file = proj.files.find(f => f.path === currentFile.value);\\n  if (file) {\\n    file.content = code.value;\\n\\n    // \\n    if (autoSaveTimer) {\\n      clearTimeout(autoSaveTimer);\\n      autoSaveTimer = null;\\n    }\\n\\n    saveToChatVar();\\n    updatePreview();\\n    toastr.success('');\\n  }\\n}\\n\\nfunction deleteProject(id: string) {\\n  const proj = projects.value.find(p => p.id === id);\\n  if (!proj) return;\\n\\n  if (!confirm(` \\\"${proj.name}\\\" `)) return;\\n\\n  projects.value = projects.value.filter(p => p.id !== id);\\n  console.log(':', projects.value.length);\\n\\n  if (currentId.value === id) {\\n    currentId.value = '';\\n    currentFile.value = '';\\n    code.value = '';\\n    previewHtml.value = '';\\n  }\\n\\n  // \\n  saveToChatVar();\\n  toastr.success(` \\\"${proj.name}\\\" `);\\n}\\n\\n// \\nfunction createNewFolder() {\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  const folderPath = prompt('\\\\ncss  js/utils', '');\\n  if (!folderPath || !folderPath.trim()) return;\\n\\n  const trimmedPath = folderPath.trim().replace(/\\\\/$/, ''); // \\n\\n  //  .gitkeep \\n  const gitkeepPath = `${trimmedPath}/.gitkeep`;\\n\\n  // \\n  if (proj.files.some(f => f.path.startsWith(`${trimmedPath}/`))) {\\n    window.toastr.warning(` \\\"${trimmedPath}\\\" `);\\n    return;\\n  }\\n\\n  // \\n  const newFile: ProjectFile = {\\n    path: gitkeepPath,\\n    name: '.gitkeep',\\n    content: '# \\\\n',\\n  };\\n\\n  proj.files.push(newFile);\\n  saveToChatVar();\\n\\n  window.toastr.success(` \\\"${trimmedPath}\\\" `);\\n}\\n\\n// \\nfunction showNewFileDialog() {\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  // \\n  const folders = new Set<string>();\\n  folders.add(''); // \\n\\n  proj.files.forEach(file => {\\n    const parts = file.path.split('/');\\n    if (parts.length > 1) {\\n      // \\n      for (let i = 1; i < parts.length; i++) {\\n        const folderPath = parts.slice(0, i).join('/');\\n        if (folderPath) folders.add(folderPath);\\n      }\\n    }\\n  });\\n\\n  const folderList = Array.from(folders).sort();\\n\\n  // 1. \\n  const fileTypes = [\\n    { name: 'HTML ', ext: '.html', icon: '' },\\n    { name: 'CSS ', ext: '.css', icon: '' },\\n    { name: 'JavaScript ', ext: '.js', icon: '' },\\n    { name: 'TypeScript ', ext: '.ts', icon: '' },\\n    { name: 'JSON ', ext: '.json', icon: '' },\\n    { name: 'Markdown ', ext: '.md', icon: '' },\\n    { name: '', ext: '', icon: '' },\\n  ];\\n\\n  const typeOptions = fileTypes.map((t, i) => `${i + 1}. ${t.icon} ${t.name} (${t.ext || ''})`).join('\\\\n');\\n  const typeChoice = prompt(` 1-${fileTypes.length}\\\\n\\\\n${typeOptions}`, '1');\\n\\n  if (!typeChoice) return;\\n\\n  const typeIndex = parseInt(typeChoice) - 1;\\n  if (typeIndex < 0 || typeIndex >= fileTypes.length) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  const selectedType = fileTypes[typeIndex];\\n\\n  // 2. \\n  let targetFolder = '';\\n  if (folderList.length > 1) {\\n    const folderOptions =\\n      folderList.length > 5\\n        ? ''\\n        : `\\\\n\\\\n${folderList.map((f, i) => `${i + 1}. ${f || ''}`).join('\\\\n')}\\\\n\\\\n`;\\n\\n    const folderChoice = prompt(folderOptions, '1');\\n    if (!folderChoice) return;\\n\\n    // \\n    const folderIndex = parseInt(folderChoice) - 1;\\n    if (folderIndex >= 0 && folderIndex < folderList.length) {\\n      targetFolder = folderList[folderIndex];\\n    } else {\\n      // \\n      targetFolder = folderChoice.trim().replace(/\\\\/$/, '');\\n    }\\n  }\\n\\n  // 3. \\n  const fileName = prompt(\\n    `${selectedType.ext ? ` ${selectedType.ext}` : ''}`,\\n    selectedType.ext ? `new-file` : 'newfile.txt',\\n  );\\n\\n  if (!fileName || !fileName.trim()) return;\\n\\n  let trimmedName = fileName.trim();\\n\\n  // \\n  if (selectedType.ext && !trimmedName.endsWith(selectedType.ext)) {\\n    trimmedName += selectedType.ext;\\n  }\\n\\n  // \\n  const fullPath = targetFolder ? `${targetFolder}/${trimmedName}` : trimmedName;\\n\\n  // \\n  if (proj.files.some(f => f.path === fullPath)) {\\n    window.toastr.error(` \\\"${fullPath}\\\" `);\\n    return;\\n  }\\n\\n  // \\n  const extension = trimmedName.split('.').pop()?.toLowerCase();\\n  let defaultContent = '';\\n\\n  switch (extension) {\\n    case 'html':\\n      defaultContent =\\n        '<!DOCTYPE html>\\\\n' +\\n        '<html lang=\\\"zh-CN\\\">\\\\n' +\\n        '<head>\\\\n' +\\n        '  <meta charset=\\\"UTF-8\\\">\\\\n' +\\n        '  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\\\n' +\\n        '  <title>' +\\n        trimmedName.replace('.html', '') +\\n        '</title>\\\\n' +\\n        '  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\\\n' +\\n        '</head>\\\\n' +\\n        '<body>\\\\n' +\\n        '  <div class=\\\"container\\\">\\\\n' +\\n        '    <h1></h1>\\\\n' +\\n        '  </div>\\\\n' +\\n        '  <' +\\n        'script src=\\\"script.js\\\"></' +\\n        'script>\\\\n' +\\n        '</body>\\\\n' +\\n        '</html>';\\n      break;\\n    case 'css':\\n    case 'scss':\\n    case 'sass':\\n      defaultContent = `/* ${trimmedName} */\\\\n\\\\n* {\\\\n  margin: 0;\\\\n  padding: 0;\\\\n  box-sizing: border-box;\\\\n}\\\\n`;\\n      break;\\n    case 'js':\\n    case 'ts':\\n      defaultContent =\\n        `// ${trimmedName}\\\\n\\\\nconsole.log('${trimmedName} ');\\\\n\\\\n$` + `(function() {\\\\n  // \\\\n});\\\\n`;\\n      break;\\n    case 'json':\\n      defaultContent = `{\\\\n  \\\"name\\\": \\\"${trimmedName.replace('.json', '')}\\\",\\\\n  \\\"version\\\": \\\"1.0.0\\\"\\\\n}`;\\n      break;\\n    case 'md':\\n      defaultContent = `# ${trimmedName.replace(/\\\\.md$/, '')}\\\\n\\\\n`;\\n      break;\\n    default:\\n      defaultContent = '';\\n  }\\n\\n  // \\n  const newFile: ProjectFile = {\\n    path: fullPath,\\n    name: trimmedName,\\n    content: defaultContent,\\n  };\\n\\n  proj.files.push(newFile);\\n  currentFile.value = fullPath;\\n  code.value = defaultContent;\\n\\n  saveToChatVar();\\n  updatePreview();\\n\\n  window.toastr.success(` \\\"${fullPath}\\\" `);\\n}\\n\\n// \\nfunction deleteFile(filePath: string) {\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  const file = proj.files.find(f => f.path === filePath);\\n  if (!file) return;\\n\\n  if (!confirm(` \\\"${file.path}\\\" `)) return;\\n\\n  proj.files = proj.files.filter(f => f.path !== filePath);\\n\\n  // \\n  if (currentFile.value === filePath) {\\n    if (proj.files.length > 0) {\\n      currentFile.value = proj.files[0].path;\\n      code.value = proj.files[0].content;\\n    } else {\\n      currentFile.value = '';\\n      code.value = '';\\n    }\\n  }\\n\\n  saveToChatVar();\\n  updatePreview();\\n\\n  window.toastr.success(` \\\"${file.path}\\\" `);\\n}\\n\\nfunction getFileIcon(path: string): string {\\n  const ext = path.split('.').pop()?.toLowerCase();\\n  if (ext === 'html') return 'fa-brands fa-html5';\\n  if (ext === 'css') return 'fa-brands fa-css3-alt';\\n  if (ext === 'js') return 'fa-brands fa-js';\\n  return 'fa-solid fa-file-code';\\n}\\n\\nfunction buildPreviewFromFiles(files: ProjectFile[]): string {\\n  const htmlFile = files.find(f => f.path.endsWith('.html'));\\n  const cssFile = files.find(f => f.path.endsWith('.css'));\\n  const jsFile = files.find(f => f.path.endsWith('.js'));\\n\\n  if (!htmlFile) return '';\\n\\n  const html = htmlFile.content;\\n  const headTag = 'head';\\n  const bodyTag = 'body';\\n  const headMatch = html.match(new RegExp(`<${headTag}[^>]*>([\\\\\\\\s\\\\\\\\S]*?)</${headTag}>`, 'i'));\\n  const bodyMatch = html.match(new RegExp(`<${bodyTag}[^>]*>([\\\\\\\\s\\\\\\\\S]*?)</${bodyTag}>`, 'i'));\\n\\n  let headContent = headMatch ? headMatch[1] : '';\\n  let bodyContent = bodyMatch ? bodyMatch[1] : html;\\n\\n  const linkTagRegex = /<link[^>]*rel=[\\\"']stylesheet[\\\"'][^>]*>/gi;\\n  const scriptTagRegex = new RegExp('<' + 'script[^>]*></' + 'script>', 'gi');\\n  headContent = headContent.replace(linkTagRegex, '');\\n  bodyContent = bodyContent.replace(scriptTagRegex, '');\\n\\n  const scriptTag = 'script';\\n  const styleTag = 'style';\\n  return `<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  ${headContent}\\n  <${styleTag}>\\n    html, body {\\n      margin: 0 !important;\\n      padding: 0 !important;\\n      width: 100% !important;\\n      height: auto !important;\\n      min-height: 800px !important;\\n      overflow: visible !important;\\n    }\\n    ${cssFile?.content || ''}\\n  </${styleTag}>\\n  <${scriptTag} src=\\\"https://code.jquery.com/jquery-3.7.1.min.js\\\"></${scriptTag}>\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\\\">\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\\\"></${scriptTag}>\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\\\"></${scriptTag}>\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\\\"></${scriptTag}>\\n</head>\\n<body>\\n  ${bodyContent}\\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\\n</body>\\n</html>`;\\n}\\n\\nfunction updatePreview() {\\n  const proj = currentProject.value;\\n  if (!proj) {\\n    previewHtml.value = '';\\n    return;\\n  }\\n  previewHtml.value = buildPreviewFromFiles(proj.files);\\n}\\n\\nfunction saveToChatVar() {\\n  try {\\n    const chatId = SillyTavern.getCurrentChatId();\\n    console.log(' ID:', chatId);\\n\\n    const dataToSave = {\\n      frontend_projects_files: projects.value,\\n      frontend_ai_history: aiHistory.value,\\n    };\\n\\n    if (chatId) {\\n      console.log(':', dataToSave.frontend_projects_files.length, '');\\n      insertOrAssignVariables(dataToSave, { type: 'chat' });\\n      console.log('');\\n\\n      // \\n      const verify = getVariables({ type: 'chat' });\\n      if (verify?.frontend_projects_files) {\\n        console.log('', verify.frontend_projects_files.length, '');\\n      } else {\\n        console.error('');\\n      }\\n    } else {\\n      // \\n      console.log(' ID:', dataToSave.frontend_projects_files.length, '');\\n      insertOrAssignVariables(dataToSave, { type: 'global' });\\n      console.log('');\\n      toastr.info('');\\n    }\\n  } catch (e) {\\n    console.error(':', e);\\n  }\\n}\\n\\nfunction loadFromChatVar() {\\n  try {\\n    const chatId = SillyTavern.getCurrentChatId();\\n    console.log(' ID:', chatId);\\n\\n    let data;\\n    if (chatId) {\\n      data = getVariables({ type: 'chat' });\\n      console.log(':', data);\\n    } else {\\n      data = getVariables({ type: 'global' });\\n      console.log(' ID:', data);\\n    }\\n\\n    if (data?.frontend_projects_files && Array.isArray(data.frontend_projects_files)) {\\n      projects.value = data.frontend_projects_files;\\n      console.log(':', projects.value.length, '');\\n    } else {\\n      console.log('');\\n      projects.value = [];\\n    }\\n\\n    if (data?.frontend_ai_history) {\\n      aiHistory.value = data.frontend_ai_history;\\n      console.log('');\\n    } else {\\n      aiHistory.value = {};\\n    }\\n  } catch (e) {\\n    console.error(':', e);\\n  }\\n}\\n\\n// \\nloadFromChatVar();\\n\\nwatch(\\n  () => SillyTavern.getCurrentChatId(),\\n  () => {\\n    loadFromChatVar();\\n    currentId.value = '';\\n    currentFile.value = '';\\n    code.value = '';\\n    previewHtml.value = '';\\n  },\\n);\\n\\n// \\nlet autoSaveTimer: ReturnType<typeof setTimeout> | null = null;\\nwatchEffect(() => {\\n  // \\n  if (currentFile.value && code.value !== undefined) {\\n    const proj = currentProject.value;\\n    if (proj) {\\n      const file = proj.files.find(f => f.path === currentFile.value);\\n      if (file && file.content !== code.value) {\\n        // \\n        file.content = code.value;\\n\\n        // \\n        if (autoSaveTimer) {\\n          clearTimeout(autoSaveTimer);\\n        }\\n\\n        //  1 \\n        autoSaveTimer = setTimeout(() => {\\n          saveToChatVar();\\n          console.log(':', currentFile.value);\\n        }, 1000);\\n      }\\n    }\\n  }\\n});\\n\\n// \\nlet previewTimer: ReturnType<typeof setTimeout> | null = null;\\nwatch(\\n  () => [currentFile.value, code.value],\\n  () => {\\n    if (previewTimer) {\\n      clearTimeout(previewTimer);\\n    }\\n    previewTimer = setTimeout(updatePreview, 500);\\n  },\\n  { deep: true },\\n);\\n\\n// \\nonBeforeUnmount(() => {\\n  console.log('...');\\n\\n  // \\n  if (autoSaveTimer) {\\n    clearTimeout(autoSaveTimer);\\n  }\\n  if (previewTimer) {\\n    clearTimeout(previewTimer);\\n  }\\n\\n  // \\n  if (currentFile.value && code.value !== undefined) {\\n    const proj = currentProject.value;\\n    if (proj) {\\n      const file = proj.files.find(f => f.path === currentFile.value);\\n      if (file) {\\n        file.content = code.value;\\n      }\\n    }\\n  }\\n\\n  // \\n  saveToChatVar();\\n  console.log('');\\n});\\n\\nfunction showAIDialog() {\\n  showAI.value = true;\\n  aiPrompt.value = '';\\n}\\n\\nfunction closeAIDialog() {\\n  showAI.value = false;\\n  aiPrompt.value = '';\\n}\\n\\n// Bug \\nfunction showBugFixDialog() {\\n  showBugFix.value = true;\\n  bugDescription.value = '';\\n  consoleError.value = '';\\n  bugFile.value = '';\\n}\\n\\nfunction closeBugFixDialog() {\\n  showBugFix.value = false;\\n  bugDescription.value = '';\\n  consoleError.value = '';\\n  bugFile.value = '';\\n}\\n\\nasync function fixBugWithAI() {\\n  const proj = currentProject.value;\\n  if (!proj) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  if (!bugDescription.value.trim()) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  aiGenerating.value = true;\\n  showProgress.value = true;\\n  let normalizedEndpoint = '';\\n\\n  try {\\n    //  1: \\n    progressDialogRef.value?.setProgress(5);\\n    progressDialogRef.value?.setMessage(' Bug ...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    //  API \\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      throw new Error(' ID');\\n    }\\n\\n    const vars = getVariables({ type: 'script', script_id: scriptId });\\n    const apiEndpoint = vars?.api_endpoint;\\n    const apiKey = vars?.api_key;\\n    const model = vars?.model || 'gpt-4o-mini';\\n\\n    if (!apiEndpoint || !apiKey) {\\n      throw new Error('\\\"\\\" API');\\n    }\\n\\n    normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\\n\\n    progressDialogRef.value?.setProgress(15);\\n    progressDialogRef.value?.setMessage(' Bug ...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    //  Bug \\n    const systemPrompt = ` Bug \\n\\n# \\n\\n1. ****\\n2. ****\\n3. **** Console \\n4. ****\\n\\n#  Bug \\n\\n****\\n- ID \\n-  \\\\`$(function() {})\\\\` \\n-  JavaScript \\n\\n****\\n-  CSS displayvisibilityz-index\\n-  DOM \\n- \\n\\n****\\n-  insertOrAssignVariables \\n- \\n- \\n\\n****\\n- \\n- \\n- \\n\\n# \\n\\n\\n\\n\\\\`\\\\`\\\\`\\nFILE_START: \\n[]\\nFILE_END\\n\\\\`\\\\`\\\\`\\n\\n`;\\n\\n    const currentFiles = proj.files.map(f => `=== ${f.path} ===\\\\n${f.content}`).join('\\\\n\\\\n');\\n\\n    const userPrompt = `# \\n${currentFiles}\\n\\n# Bug \\n${bugDescription.value}\\n\\n${\\n  consoleError.value.trim()\\n    ? `# Console \\n\\\\`\\\\`\\\\`\\n${consoleError.value}\\n\\\\`\\\\`\\\\`\\n`\\n    : ''\\n}\\n\\n${\\n  bugFile.value\\n    ? `# \\n${bugFile.value}\\n`\\n    : ''\\n}\\n\\n# \\n1.  bug\\n2. \\n3. \\n4. \\n\\n system `;\\n\\n    progressDialogRef.value?.setProgress(25);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    // \\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI  bug...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    const response = await fetch(normalizedEndpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${apiKey}`,\\n      },\\n      body: JSON.stringify({\\n        model: model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: 0.3, // \\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API  (${response.status}): ${errorText}`);\\n    }\\n\\n    progressDialogRef.value?.setProgress(60);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    const data = await response.json();\\n    const resultText = data.choices?.[0]?.message?.content || '';\\n\\n    if (!resultText) {\\n      throw new Error('AI ');\\n    }\\n\\n    progressDialogRef.value?.setProgress(75);\\n    progressDialogRef.value?.setMessage('...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    //  AI \\n    const fileRegex = /FILE_START:\\\\s*(.+?)\\\\s*\\\\n([\\\\s\\\\S]*?)\\\\nFILE_END/g;\\n    const changes: AIChange[] = [];\\n    let match;\\n\\n    while ((match = fileRegex.exec(resultText)) !== null) {\\n      const path = match[1].trim();\\n      const newContent = match[2].trim();\\n      const existingFile = proj.files.find(f => f.path === path);\\n\\n      if (existingFile) {\\n        changes.push({\\n          path,\\n          oldContent: existingFile.content,\\n          newContent,\\n        });\\n      }\\n    }\\n\\n    if (changes.length === 0) {\\n      throw new Error('AI ');\\n    }\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    // \\n    if (!aiHistory.value[proj.id]) {\\n      aiHistory.value[proj.id] = [];\\n    }\\n    aiHistory.value[proj.id].unshift({\\n      timestamp: new Date().toISOString(),\\n      prompt: `Bug : ${bugDescription.value}`,\\n      changes: klona(changes),\\n    });\\n\\n    // \\n    aiChanges.value = changes;\\n    showComparison.value = true;\\n    previewMode.value = 'after';\\n\\n    progressDialogRef.value?.setProgress(95);\\n    progressDialogRef.value?.setMessage(`Bug  (${changes.length} )`);\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    // \\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage('Bug ');\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showBugFix.value = false;\\n      window.toastr.success(`AI `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('Bug :', error);\\n    window.toastr.error(`Bug : ${error?.message || String(error)}`);\\n    showProgress.value = false;\\n  } finally {\\n    aiGenerating.value = false;\\n  }\\n}\\n\\nasync function generateWithAI() {\\n  if (!aiPrompt.value.trim() || aiGenerating.value) return;\\n\\n  const proj = currentProject.value;\\n  if (!proj) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  // \\n  const vaguePhrases = ['', '', '', '', '', '', ''];\\n  const prompt = aiPrompt.value.trim();\\n  const isVague = vaguePhrases.some(phrase => {\\n    const regex = new RegExp(`^${phrase}[\\\\\\\\s]*$`, 'i');\\n    return regex.test(prompt);\\n  });\\n\\n  if (isVague) {\\n    toastr.warning(\\n      '\\\\n\\\\n\\\\n' +\\n        ' \\\"\\\"\\\\n' +\\n        ' \\\"\\\"\\\\n\\\\n' +\\n        ' \\\"\\\"\\\\n' +\\n        ' \\\"\\\"',\\n      '',\\n      { timeOut: 6000 },\\n    );\\n    return;\\n  }\\n\\n  aiGenerating.value = true;\\n  showProgress.value = true;\\n  let normalizedEndpoint = ''; // \\n\\n  try {\\n    // 1: \\n    progressDialogRef.value?.setProgress(5);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      toastr.error(' ID');\\n      aiGenerating.value = false;\\n      showProgress.value = false;\\n      return;\\n    }\\n\\n    const vars = getVariables({ type: 'script', script_id: scriptId });\\n    const apiEndpoint = vars?.api_endpoint;\\n    const apiKey = vars?.api_key;\\n    const model = vars?.model || 'gpt-4o-mini';\\n    const temperature = vars?.temperature || 0.7;\\n    const maxTokens = vars?.max_tokens || 4000;\\n\\n    if (!apiEndpoint || !apiKey) {\\n      toastr.error('\\\"\\\" API');\\n      aiGenerating.value = false;\\n      showProgress.value = false;\\n      return;\\n    }\\n\\n    //  API \\n    try {\\n      normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\\n      console.log(' :', apiEndpoint);\\n      console.log(' :', normalizedEndpoint);\\n    } catch (e) {\\n      toastr.error('API ' + (e as Error).message);\\n      aiGenerating.value = false;\\n      showProgress.value = false;\\n      return;\\n    }\\n\\n    //  max_tokens \\n    if (maxTokens < 2000) {\\n      toastr.warning(` max_tokens  ${maxTokens} AI  4000 `);\\n    }\\n\\n    progressDialogRef.value?.setProgress(15);\\n    progressDialogRef.value?.setMessage('...');\\n    await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n    const systemPrompt = ` SillyTavern\\n\\n# \\n${proj.files.map(f => `- ${f.path}`).join('\\\\n')}\\n\\n#  API \\n## \\n- jQuery ($): DOM \\n- toastr: \\n- gsap: \\n- lodash (_): \\n- zod (z): \\n\\n##  API\\n****\\n- \\\\`getVariables({ type: 'chat' })\\\\`: \\n- \\\\`insertOrAssignVariables(data, { type: 'chat' })\\\\`: \\n- \\\\`replaceVariables(data, { type: 'chat' })\\\\`: \\n\\n****\\n\\\\`\\\\`\\\\`javascript\\n//   API \\nconst isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\\n\\n// \\nfunction loadData() {\\n  if (isInTavern) {\\n    const data = getVariables({ type: 'chat' });\\n    return data.my_key || { count: 0 };\\n  } else {\\n    //  localStorage\\n    const stored = localStorage.getItem('my_key');\\n    return stored ? JSON.parse(stored) : { count: 0 };\\n  }\\n}\\n\\n// \\nfunction saveData(data) {\\n  if (isInTavern) {\\n    insertOrAssignVariables({ my_key: data }, { type: 'chat' });\\n  } else {\\n    localStorage.setItem('my_key', JSON.stringify(data));\\n  }\\n}\\n\\n// \\nlet myData = loadData();\\nmyData.count++;\\nsaveData(myData);\\n\\\\`\\\\`\\\\`\\n\\n** API**\\n- getChatMessages(): \\n- getCurrentCharacter(): \\n- getWorldbook(): \\n- replaceWorldbook(data): \\n- eventOn(event, callback): \\n- getIframeName():  iframe \\n- triggerSlash(command):  STScript \\n- SillyTavern.getCurrentChatId():  ID\\n\\n## \\n\\n****  AI \\n\\n****\\n\\n\\\\`\\\\`\\\\`javascript\\n// 1. \\nasync function updateStatusFromMessages() {\\n  if (typeof getChatMessages !== 'function') return; // \\n\\n  const messages = await getChatMessages();\\n  if (!messages || messages.length === 0) return;\\n\\n  //  AI  is_user: false\\n  const latestAIMessage = messages.slice().reverse().find(m => !m.is_user);\\n  if (!latestAIMessage) return;\\n\\n  const content = latestAIMessage.mes; // \\n\\n  // 2. \\n  const statusMatch = content.match(/\\\\`\\\\`\\\\`json([\\\\\\\\s\\\\\\\\S]*?)\\\\`\\\\`\\\\`/);\\n  if (statusMatch) {\\n    try {\\n      const status = JSON.parse(statusMatch[1]);\\n      // 3. \\n      $('#health').text(status.health || 100);\\n      $('#level').text(status.level || 1);\\n    } catch (e) {\\n      console.error(':', e);\\n    }\\n  }\\n\\n  // 80\\n  const healthMatch = content.match(/[:](\\\\\\\\d+)/);\\n  if (healthMatch) {\\n    $('#health').text(healthMatch[1]);\\n  }\\n}\\n\\n// 4. \\n$(function() {\\n  updateStatusFromMessages();\\n});\\n\\n// 5. \\nif (typeof eventOn === 'function') {\\n  eventOn('MESSAGE_RECEIVED', () => {\\n    updateStatusFromMessages();\\n  });\\n}\\n\\\\`\\\\`\\\\`\\n\\n---\\n\\n##   XML \\n\\n**** AI  XML  \\\\`<state_bar><i></i></state_bar>\\\\`\\n\\n****\\n1.  \\\\`<state_bar>\\\\` \\n2.  XML  HTML\\n3. \\n\\n****\\n\\n\\\\`\\\\`\\\\`typescript\\n// ===== 1.  =====\\nfunction extractStateBar(text: string): string | null {\\n  const match = text.match(/<state_bar>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/state_bar>/i);\\n  return match ? match[1].trim() : null;\\n}\\n\\n// ===== 2. XML  HTML=====\\nfunction convertXmlToHtml(xml: string): string {\\n  let html = xml;\\n\\n  // <i><2i><3i> \\n  html = html.replace(/<i>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/i>/g, '<div class=\\\"state-item indent-1\\\">$1</div>');\\n  html = html.replace(/<2i>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/2i>/g, '<div class=\\\"state-item indent-2\\\">$1</div>');\\n  html = html.replace(/<3i>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/3i>/g, '<div class=\\\"state-item indent-3\\\">$1</div>');\\n\\n  // \\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-date\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-time\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-location\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-physical\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-mental\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-current\\\"> $1</div>');\\n\\n  //  <></>\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g,\\n    '<div class=\\\"state-colored\\\" style=\\\"border-left: 3px solid #ff6b6b; background: rgba(255,107,107,0.1);\\\">$1</div>');\\n\\n  // \\n  html = html.replace(/<([^>\\\\\\\\/\\\\\\\\s]+)>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/\\\\\\\\1>/g, '<div class=\\\"state-generic\\\">$2</div>');\\n\\n  return html;\\n}\\n\\n// ===== 3.  =====\\nasync function updateStateBar() {\\n  if (typeof getChatMessages !== 'function') return;\\n\\n  const messages = await getChatMessages();\\n  if (!messages || messages.length === 0) return;\\n\\n  //  AI \\n  const latestAI = messages.slice().reverse().find(m => !m.is_user);\\n  if (!latestAI) return;\\n\\n  // \\n  const stateBarXml = extractStateBar(latestAI.mes);\\n  if (stateBarXml) {\\n    const stateBarHtml = convertXmlToHtml(stateBarXml);\\n\\n    // \\n    const container = $('#state-bar-container');\\n    container.fadeOut(200, () => {\\n      container.html(stateBarHtml);\\n      container.fadeIn(200);\\n    });\\n  }\\n}\\n\\n// ===== 4.  =====\\n$(function() {\\n  updateStateBar(); // \\n\\n  // \\n  if (typeof eventOn === 'function') {\\n    eventOn('MESSAGE_RECEIVED', updateStateBar);\\n  }\\n});\\n\\\\`\\\\`\\\\`\\n\\n** CSS **\\n\\n\\\\`\\\\`\\\\`scss\\n#state-bar-container {\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  border-radius: 12px;\\n  padding: 16px;\\n  color: white;\\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\\n  margin-bottom: 16px;\\n}\\n\\n.state-item {\\n  padding: 8px 12px;\\n  margin: 6px 0;\\n  background: rgba(255, 255, 255, 0.1);\\n  border-radius: 6px;\\n  backdrop-filter: blur(10px);\\n  transition: all 0.3s ease;\\n\\n  &:hover {\\n    background: rgba(255, 255, 255, 0.15);\\n    transform: translateX(4px);\\n  }\\n}\\n\\n// \\n.indent-1 { margin-left: 20px; }\\n.indent-2 { margin-left: 40px; }\\n.indent-3 { margin-left: 60px; }\\n\\n// \\n.state-date, .state-time, .state-location {\\n  font-weight: 600;\\n  font-size: 14px;\\n  padding: 8px 12px;\\n  margin: 8px 0;\\n  border-radius: 6px;\\n}\\n\\n.state-date { background: rgba(100, 181, 246, 0.2); }\\n.state-time { background: rgba(129, 199, 132, 0.2); }\\n.state-location { background: rgba(255, 167, 38, 0.2); }\\n\\n.state-physical {\\n  padding: 10px 14px;\\n  margin: 8px 0;\\n  background: rgba(255, 107, 107, 0.15);\\n  border-left: 4px solid #ff6b6b;\\n  border-radius: 4px;\\n}\\n\\n.state-mental {\\n  padding: 10px 14px;\\n  margin: 8px 0;\\n  background: rgba(149, 117, 205, 0.15);\\n  border-left: 4px solid #9575cd;\\n  border-radius: 4px;\\n}\\n\\n.state-colored {\\n  padding: 10px 14px;\\n  margin: 8px 0;\\n  border-radius: 4px;\\n  backdrop-filter: blur(5px);\\n}\\n\\n.state-generic {\\n  padding: 6px 10px;\\n  margin: 4px 0;\\n  opacity: 0.9;\\n}\\n\\\\`\\\\`\\\\`\\n\\n** GSAP **\\n\\n\\\\`\\\\`\\\\`typescript\\n//  GSAP \\nfunction updateStateBarWithAnimation(stateBarHtml: string) {\\n  const container = $('#state-bar-container');\\n\\n  // \\n  gsap.to(container, {\\n    opacity: 0,\\n    y: -10,\\n    duration: 0.2,\\n    onComplete: () => {\\n      container.html(stateBarHtml);\\n\\n      // \\n      gsap.to(container, {\\n        opacity: 1,\\n        y: 0,\\n        duration: 0.3,\\n        ease: 'power2.out'\\n      });\\n\\n      // \\n      gsap.from('.state-item', {\\n        opacity: 0,\\n        x: -20,\\n        duration: 0.4,\\n        stagger: 0.05,\\n        ease: 'back.out(1.2)'\\n      });\\n    }\\n  });\\n}\\n\\\\`\\\\`\\\\`\\n\\\\`\\\\`\\\\`\\n\\n****\\n-  \\\\`getChatMessages()\\\\` \\n- \\n-  jQuery  DOM \\n-  MESSAGE_RECEIVED \\n\\n## \\n\\n****\\n**** index.html\\n\\n** **\\n\\n\\\\`\\\\`\\\\`javascript\\n//  \\n$(function() {\\n  let chatHistory = [];           //  \\n  function renderMessages() {}    //  \\n  function handleSend() {}        //  \\n\\n  //  \\n});\\n\\n//  \\nlet chatHistory = [];              //  \\nfunction renderMessages() {}       //  \\nfunction handleSend() {}           //  \\n\\n$(function() {\\n  // \\n  loadChatHistory();\\n  setupStreamListeners();\\n});\\n\\\\`\\\\`\\\\`\\n\\n****\\n1. let/const\\n2. function\\n3. \\\\`$(function() {})\\\\` - \\n4. \\\\`$(window).on('pagehide', ...)\\\\` - \\n\\n** generation_id **\\n****** generation_id **\\n-  AI \\n- \\n- \\n\\n****\\n1. ****index.html + index.ts\\n2. \\n3.  \\\\`generate(text)\\\\`** generation_id**\\n4. **** \\\\`id === currentGenerationId\\\\`\\n   - \\\\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\\\`:  token \\n   - \\\\`iframe_events.STREAM_TOKEN_RECEIVED_FULLY\\\\`: \\n   - \\\\`iframe_events.GENERATION_ENDED\\\\`: \\n5.  \\\\`setChatMessages\\\\`\\\\`createChatMessages\\\\`  \\\\`{ refresh: 'none' }\\\\` \\n\\n**  API generate()**\\n- **\\\\`triggerSlashWithResult(command)\\\\`**:  STScript \\n  - \\\\`Promise<string>\\\\`AI \\n  - \\\\`const result = await triggerSlashWithResult('/gen lock=on \\\"\\\"');\\\\`\\n  - **** \\\\`/gen\\\\` \\n  - **** generation_id\\n- **\\\\`getRegexScripts()\\\\`**: \\n  - \\n  - ** AI **\\n- **** API \\n- **\\\\`triggerSlash(command)\\\\`**:  STScript \\n\\n** AI **\\nAI \\\\`<guide>\\\\`\\\\`<dream>\\\\`\\\\`<plot>\\\\`\\\\`<status>\\\\`\\\\`<think>\\\\` \\n****\\n\\n****\\n1. **** AI  \\\\`<gametxt>\\\\`\\n2. ****\\n3. ****\\n\\n****\\n\\\\`\\\\`\\\\`typescript\\n// \\nfunction extractLastTagContent(tagName: string, text: string, ignoreCase = false): string | null {\\n  if (!text || typeof text !== 'string') return null;\\n\\n  const endTag = \\\\`</\\\\${tagName}>\\\\`;\\n  let searchPool = text;\\n  let endTagPattern = endTag;\\n\\n  if (ignoreCase) {\\n    searchPool = text.toLowerCase();\\n    endTagPattern = endTag.toLowerCase();\\n  }\\n\\n  const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\\n  if (lastEndIndex !== -1) {\\n    const startTag = \\\\`<\\\\${tagName}>\\\\`;\\n    let startTagPattern = startTag;\\n    if (ignoreCase) startTagPattern = startTag.toLowerCase();\\n\\n    const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\\n    if (lastStartIndex !== -1) {\\n      const startIndex = lastStartIndex + startTag.length;\\n      return text.substring(startIndex, lastEndIndex).trim();\\n    }\\n  }\\n  return null;\\n}\\n\\n// \\nfunction applyRegexFilters(text: string): string {\\n  console.log(' :', text.length);\\n\\n  if (!text || typeof text !== 'string') return '';\\n\\n  // =====  0: =====\\n  // \\\"\\\"\\\"\\\"\\n  // \\n  //  dream  gametxt \\n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\\n  criticalTags.forEach(tag => {\\n    const openTagRegex = new RegExp(\\\\`<\\\\${tag}([^>]*)>\\\\`, 'gi');\\n    const closeTagRegex = new RegExp(\\\\`</\\\\${tag}>\\\\`, 'gi');\\n\\n    const openMatches = text.match(openTagRegex);\\n    const closeMatches = text.match(closeTagRegex);\\n\\n    const openCount = openMatches ? openMatches.length : 0;\\n    const closeCount = closeMatches ? closeMatches.length : 0;\\n\\n    if (openCount > closeCount) {\\n      // \\n      const missing = openCount - closeCount;\\n      console.log(\\\\`  \\\\${missing}  <\\\\${tag}> \\\\`);\\n      text = text + \\\\`</\\\\${tag}>\\\\`.repeat(missing);\\n    }\\n  });\\n\\n  // =====  1: =====\\n  //  AI \\n  //  dream \\n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\\n  for (const tag of gameTextTags) {\\n    const extracted = extractLastTagContent(tag, text);\\n    if (extracted !== null) {\\n      console.log(\\\\`  <\\\\${tag}> :\\\\`, extracted.length);\\n      return extracted; // \\n    }\\n  }\\n\\n  // =====  2:  -  =====\\n  let cleanedText = text;\\n\\n  // dream/gametxt \\n  const tagsToRemove = [\\n    'guide', 'plot', 'status',\\n    'UpdateVariable', '', '', ''\\n  ];\\n\\n  tagsToRemove.forEach(tag => {\\n    //  <tag>...</tag> \\n    const regexWithContent = new RegExp(\\\\`<\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?</\\\\${tag}>\\\\`, 'gi');\\n    const before = cleanedText;\\n    cleanedText = cleanedText.replace(regexWithContent, '');\\n\\n    //  <tag/> \\n    const regexSelfClosing = new RegExp(\\\\`<\\\\${tag}\\\\\\\\\\\\\\\\s*\\\\\\\\\\\\\\\\/>\\\\`, 'gi');\\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\\n\\n    if (before !== cleanedText) {\\n      console.log(\\\\`    <\\\\${tag}> \\\\`);\\n    }\\n  });\\n\\n  //   think/thinking \\n  //  <xxx_think><thinking_xxx><think><thinking> \\n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?<\\\\\\\\/[^>]*think[^>]*>/gi;\\n  const beforeThinking = cleanedText;\\n  cleanedText = cleanedText.replace(thinkingRegex, '');\\n  if (beforeThinking !== cleanedText) {\\n    console.log('    think/thinking ');\\n  }\\n\\n  //  think \\n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\\\\\\\\\/>/gi;\\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\\n\\n  //  HTML \\n  cleanedText = cleanedText.replace(/<!--[\\\\\\\\s\\\\\\\\S]*?-->/g, '');\\n\\n  if (cleanedText !== text) {\\n    console.log(' :', cleanedText.length);\\n    text = cleanedText;\\n  }\\n\\n  // =====  2-3: =====\\n  let allRegexScripts: any[] = [];\\n\\n  //  1: \\n  if (typeof getRegexScripts === 'function') {\\n    try {\\n      const globalRegexes = getRegexScripts();\\n      if (globalRegexes && globalRegexes.length > 0) {\\n        console.log(' ', globalRegexes.length, '');\\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\\n      }\\n    } catch (e) {\\n      console.warn(' :', e);\\n    }\\n  }\\n\\n  //  2:  SoliUmbra \\n  try {\\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\\n    if (parentST && typeof parentST.getContext === 'function') {\\n      const context = parentST.getContext();\\n      const prompts = context?.chatCompletionSettings?.prompts;\\n\\n      if (prompts && Array.isArray(prompts)) {\\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\\n\\n        for (const identifier of possibleIdentifiers) {\\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\\n          if (regexPrompt?.content) {\\n            try {\\n              const data = JSON.parse(regexPrompt.content);\\n              let presetRegexes: any = null;\\n\\n              if (Array.isArray(data)) {\\n                presetRegexes = data;\\n              } else if (data && typeof data === 'object') {\\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\\n                  presetRegexes = data.RegexBinding.regexes;\\n                } else if (data.regexes && Array.isArray(data.regexes)) {\\n                  presetRegexes = data.regexes;\\n                }\\n              }\\n\\n              if (presetRegexes && presetRegexes.length > 0) {\\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\\n                break;\\n              }\\n            } catch (parseError) {\\n              console.warn('  identifier', identifier, ':', parseError);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  } catch (e) {\\n    console.warn(' :', e);\\n  }\\n\\n  if (allRegexScripts.length > 0) {\\n    console.log(' ', allRegexScripts.length, '');\\n\\n    //  AI placement  2\\n    //   disabled  placement promptOnly\\n    //  promptOnly \\n    const activeScripts = allRegexScripts.filter((script: any) => {\\n      if (script.disabled) return false;\\n      if (!script.placement || !Array.isArray(script.placement)) return false;\\n      if (!script.placement.includes(2)) return false;\\n      return true;\\n    });\\n\\n    console.log(' ', activeScripts.length, '');\\n\\n    let result = text;\\n    activeScripts.forEach((script: any, index: number) => {\\n      try {\\n        const regex = new RegExp(script.findRegex, 'gim');\\n        const beforeLength = result.length;\\n        result = result.replace(regex, script.replaceString || '');\\n\\n        if (beforeLength !== result.length) {\\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\\n        }\\n      } catch (e) {\\n        console.error(' ', index + 1, ':', e);\\n      }\\n    });\\n\\n    text = result;\\n  }\\n\\n  console.log(' :', text.length);\\n  return text;\\n}\\n\\\\`\\\\`\\\\`\\n\\n****\\n\\\\`\\\\`\\\\`typescript\\n// \\nlet chatHistory: Array<{ role: string; content: string }> = [];\\nlet isGenerating = false;\\n\\n// \\nasync function handleSend() {\\n  const input = $('#user-input');\\n  const userInput = input.val().trim();\\n  if (!userInput || isGenerating) return;\\n\\n  // 1. \\n  chatHistory.push({ role: 'user', content: userInput });\\n  input.val('');\\n  renderMessages();\\n\\n  // 2. \\n  isGenerating = true;\\n  $('#send-btn').prop('disabled', true).text('...');\\n\\n  try {\\n    // 3. \\n    let prompt = '';\\n    chatHistory.slice(-10).forEach(msg => {\\n      prompt += (msg.role === 'user' ? '' : 'AI') + ': ' + msg.content + '\\\\\\\\n';\\n    });\\n\\n    // 4.  AI\\n    const rawResult = await triggerSlashWithResult('/gen lock=on \\\"' + prompt.replace(/\\\"/g, '\\\\\\\\\\\\\\\\\\\"') + '\\\"');\\n\\n    // 5.  \\n    const cleanedResult = applyRegexFilters(rawResult);\\n\\n    // 6. \\n    chatHistory.push({ role: 'assistant', content: cleanedResult });\\n    renderMessages();\\n    saveChatHistory(); // \\n\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error?.message || String(error)));\\n  } finally {\\n    isGenerating = false;\\n    $('#send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// \\nfunction renderMessages() {\\n  const container = $('#messages');\\n  container.empty();\\n\\n  chatHistory.forEach(msg => {\\n    const div = $('<div>')\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .text(msg.content); //  text()  XSS\\n    container.append(div);\\n  });\\n\\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// \\nfunction saveChatHistory() {\\n  if (typeof insertOrAssignVariables === 'function') {\\n    insertOrAssignVariables({ chat_history: chatHistory }, { type: 'chat' });\\n  } else {\\n    localStorage.setItem('chat_history', JSON.stringify(chatHistory));\\n  }\\n}\\n\\\\`\\\\`\\\\`\\n\\n** **\\n\\n** **\\n\\n###  \\n-  \\\\`generate({ should_stream: true, generation_id })\\\\` \\n-  \\\\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\\\` \\n- \\n-   AI \\n-   AI \\n\\n###  \\n-  \\\\`triggerSlashWithResult\\\\`\\n-  \\n-  \\\\`generateRaw\\\\`\\n\\n** **\\n\\n\\\\`\\\\`\\\\`typescript\\n// =====  =====\\nlet chatHistory: Array<{ role: string; content: string }> = [];\\nlet isGenerating = false;\\nlet currentGenerationId: string | null = null;\\n\\n// ===== =====\\nfunction setupStreamListeners() {\\n  //  \\n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\\n    if (!isGenerating || id !== currentGenerationId) return;\\n\\n    //  \\n    const cleanedText = applyRegexFilters(text);\\n\\n    //  DOM\\n    const container = $('#inner-messages');  //  ID \\n    const charName = SillyTavern?.name2 || 'AI';\\n    const lastMsg = container.find('.message:last-child');\\n\\n    if (lastMsg.length && !lastMsg.hasClass('user-message')) {\\n      //  AI \\n      lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\\n    } else {\\n      //  AI \\n      const msgDiv = $('<div>')\\n        .addClass('message ai-message')\\n        .html('<strong>' + charName + ':</strong> ' + cleanedText);\\n      container.append(msgDiv);\\n    }\\n\\n    // \\n    container.scrollTop(container[0].scrollHeight);\\n  });\\n\\n  //  \\n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\\n    if (id === currentGenerationId) {\\n      console.log(' ');\\n\\n      //  \\n      const cleanedText = applyRegexFilters(text);\\n\\n      // \\n      chatHistory.push({ role: 'assistant', content: cleanedText });\\n      saveChatHistory();\\n\\n      // \\n      renderMessages();\\n\\n      // \\n      isGenerating = false;\\n      currentGenerationId = null;\\n      $('#inner-send-btn').prop('disabled', false).text('');  //  ID \\n    }\\n  });\\n}\\n\\n// ===== =====\\nasync function handleSend() {\\n  const input = $('#inner-input');  //  ID \\n  const userInput = input.val().trim();\\n  if (!userInput || isGenerating) return;\\n\\n  // 1. \\n  chatHistory.push({ role: 'user', content: userInput });\\n  input.val('');\\n  saveChatHistory();\\n  renderMessages();\\n\\n  // 2.  ID\\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\\n\\n  // 3. \\n  isGenerating = true;\\n  $('#inner-send-btn').prop('disabled', true).text('...');  //  ID \\n\\n  try {\\n    // 4.   generate \\n    await generate({\\n      user_input: userInput,\\n      should_stream: true,           //  \\n      generation_id: currentGenerationId,  //   ID \\n      overrides: {\\n        chat_history: {\\n          prompts: chatHistory.map(msg => ({\\n            role: msg.role === 'user' ? 'user' : 'assistant',\\n            content: msg.content\\n          }))\\n        }\\n      }\\n    });\\n\\n    // \\n    // GENERATION_ENDED  AI \\n\\n  } catch (error) {\\n    console.error(' :', error);\\n    toastr.error(': ' + error.message);\\n\\n    // \\n    isGenerating = false;\\n    currentGenerationId = null;\\n    $('#inner-send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// =====  =====\\nfunction renderMessages() {\\n  const container = $('#messages');\\n  container.empty();\\n\\n  chatHistory.forEach((msg, index) => {\\n    const div = $('<div>')\\n      .attr('id', \\\\\\\\\\\\`message-\\\\\\\\\\\\${index}\\\\\\\\\\\\`)  //   id\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .text(msg.content);\\n    container.append(div);\\n  });\\n\\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// =====  =====\\n$(() => {\\n  loadChatHistory();\\n  setupStreamListeners();  //  \\n\\n  $('#send-btn').on('click', handleSend);\\n  $('#user-input').on('keypress', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      handleSend();\\n    }\\n  });\\n});\\n\\\\\\\\\\\\`\\\\\\\\\\\\`\\\\\\\\\\\\`\\n\\n** CSS **\\n\\\\\\\\\\\\`\\\\\\\\\\\\`\\\\\\\\\\\\`css\\n.streaming {\\n  border-right: 2px solid #165DFF;\\n  animation: blink 1s infinite;\\n}\\n\\n@keyframes blink {\\n  0%, 50% { border-right-color: transparent; }\\n  51%, 100% { border-right-color: #165DFF; }\\n}\\n\\\\\\\\\\\\`\\\\\\\\\\\\`\\\\\\\\\\\\`\\n\\n** **\\n- **** 3\\n- **** triggerSlashWithResult\\n- **** AI \\n- **** \\n\\n** **\\n1.   \\\\`generate({ should_stream: true, generation_id: uniqueId })\\\\`\\n2.  \\\\`setupStreamListeners()\\\\`\\n3.  \\\\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\\\`\\n4.   ID \\\\`generation_id\\\\`\\n5.   \\\\`overrides.chat_history.prompts\\\\` \\n\\n**  \\\\`applyRegexFilters\\\\`**\\n1.  **STREAM_TOKEN_RECEIVED_INCREMENTALLY **\\n   \\\\`\\\\`\\\\`typescript\\n   const cleanedText = applyRegexFilters(text);  // \\n   lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\\n   \\\\`\\\\`\\\\`\\n\\n2.  **GENERATION_ENDED **\\n   \\\\`\\\\`\\\\`typescript\\n   const cleanedText = applyRegexFilters(text);  // \\n   chatHistory.push({ role: 'assistant', content: cleanedText });\\n   \\\\`\\\\`\\\\`\\n\\n** \\\\`applyRegexFilters\\\\` **\\n1.  ****\\\"\\\"\\\"\\\"\\n2.  **** \\\\`<dream>\\\\`\\\\`<gametxt>\\\\` \\n3.  **** \\\\`think\\\\` \\n4.  ****\\n\\n** **\\n- ****\\\\`<dream>\\\\`\\\\`<gametxt>\\\\`\\\\`<output>\\\\` \\n- ****\\\\`['dream', 'gametxt', 'output', 'display', 'text', 'content']\\\\`\\n- ****\\n- ****\\n  \\\\`\\\\`\\\\`\\n  <guide></guide><dream></dream><plot></plot>\\n      <dream> \\n  \\\\`\\\\`\\\\`\\n\\n** **\\n-  \\\\`think\\\\`  \\\\`thinking\\\\`\\n- \\\\`/<[^>]*think[^>]*>[\\\\\\\\s\\\\\\\\S]*?<\\\\\\\\/[^>]*think[^>]*>/gi\\\\`\\n- \\\\`<think>\\\\`\\\\`<thinking>\\\\`\\\\`<xxx_think>\\\\`\\\\`<thinking_xxx>\\\\` \\n- \\n\\n****\\n-    \\\\`<thinking>\\\\`    + \\n-    \\\\`<UpdateVariable>\\\\`    + \\n-     \\\\`<UpdateVariable>\\\\`   \\\\`<UpdateVariable>\\\\` \\n\\n** **\\n-  / text \\\\`applyRegexFilters\\\\`\\n-   text\\n-   text\\n-   \\\\`should_stream: true\\\\`\\n-   \\\\`generation_id\\\\`\\n-   ID\\n-  \\n\\n** **\\n**** \\\\`$(function() {})\\\\` \\n\\n\\\\`\\\\`\\\\`javascript\\n//  \\n$(function() {\\n  let chatHistory = [];  //  \\n  function renderMessages() {}  //  \\n});\\n\\n//  \\nlet chatHistory = [];  //  \\nfunction renderMessages() {}  //  \\n\\n$(function() {\\n  // \\n  loadChatHistory();\\n});\\n\\\\`\\\\`\\\\`\\n\\n** **\\n\\n\\\\`\\\\`\\\\`javascript\\n// index.ts \\n//\\n// 1  1-10 \\n//    let chatHistory = [];\\n//    let isGenerating = false;\\n//    ...\\n//\\n// 2  10-250 \\n//    function loadChatHistory() { ... }\\n//    function saveChatHistory() { ... }\\n//    function renderMessages() { ... }\\n//    function applyRegexFilters(text) { ... }  //  \\n//    function handleSend() { ... }\\n//\\n// 3 jQuery  250-270 \\n//    $(function() {\\n//      // \\n//      loadChatHistory();\\n//      $('#btn').on('click', handleSend);\\n//    });\\n//\\n// 4  270-275 \\n//    $(window).on('pagehide', () => { ... });\\n\\\\`\\\\`\\\\`\\n\\n** 100% **\\n\\n\\\\`\\\\`\\\\`javascript\\n// =====================================================\\n//   $(function() {}) \\n// =====================================================\\n\\n// ===== 1. =====\\nlet chatHistory = []; // { role: 'user'|'assistant', content: string }\\nlet isGenerating = false;\\n\\n// ===== 2.  =====\\nfunction loadChatHistory() {\\n  const isInTavern = typeof getVariables === 'function';\\n  if (!isInTavern) {\\n    // \\n    const saved = localStorage.getItem('inner_chat_history');\\n    chatHistory = saved ? JSON.parse(saved) : [];\\n  } else {\\n    // \\n    const data = getVariables({ type: 'chat' });\\n    chatHistory = data?.inner_chat_history || [];\\n  }\\n  renderMessages();\\n}\\n\\nfunction saveChatHistory() {\\n  const isInTavern = typeof insertOrAssignVariables === 'function';\\n  if (!isInTavern) {\\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\\n  } else {\\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\\n  }\\n}\\n\\n// ===== 3.  =====\\nfunction renderMessages() {\\n  console.log(' renderMessages :', chatHistory.length, '');\\n\\n  const container = $('#inner-messages');\\n  console.log(' :', container.length > 0 ? ' ' : ' ');\\n\\n  container.empty();\\n\\n  chatHistory.forEach((msg, index) => {\\n    // \\n    const name = msg.role === 'user'\\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\\n\\n    console.log(' ', index + 1, ':', msg.role, '-', name, '- :', msg.content.length);\\n\\n    const msgDiv = $('<div>')\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .html('<strong>' + name + ':</strong> ' + msg.content);\\n    container.append(msgDiv);\\n  });\\n\\n  console.log(' renderMessages :', container.find('.message').length);\\n\\n  // \\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// ===== 4.  =====\\n/**\\n *  AI \\n * \\n * 1.  getRegexScripts\\n * 2.  SoliUmbra \\n * 3. \\n */\\nfunction applyRegexFilters(text) {\\n  console.log(' :', text.length);\\n\\n  // =====  0: =====\\n  // <guide><dream><plot><status><think> \\n  let cleanedText = text;\\n  const commonTags = [\\n    'guide', 'dream', 'plot', 'status', 'think', 'thinking',\\n    'thought', 'reasoning', 'analysis', 'plan', 'reflection',\\n    'meta', 'ooc', 'system', 'debug'\\n  ];\\n\\n  commonTags.forEach(tag => {\\n    //  <tag>...</tag> \\n    const regex = new RegExp(\\\\`<\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?</\\\\${tag}>\\\\`, 'gi');\\n    const before = cleanedText;\\n    cleanedText = cleanedText.replace(regex, '');\\n    if (before !== cleanedText) {\\n      console.log(\\\\`   :  <\\\\${tag}> \\\\`);\\n    }\\n  });\\n\\n  //  HTML \\n  cleanedText = cleanedText.replace(/<!--[\\\\\\\\s\\\\\\\\S]*?-->/g, '');\\n\\n  // \\n  if (cleanedText !== text) {\\n    console.log(' :', cleanedText.length);\\n    text = cleanedText;\\n  }\\n\\n  // =====  1-2:  =====\\n  let allRegexScripts = [];\\n\\n  //  1: \\n  if (typeof getRegexScripts === 'function') {\\n    try {\\n      const globalRegex = getRegexScripts();\\n      console.log(' ', globalRegex.length, '');\\n      allRegexScripts = allRegexScripts.concat(globalRegex);\\n    } catch (e) {\\n      console.warn(' :', e);\\n    }\\n  }\\n\\n  //  2: SoliUmbra \\n  //   iframe  window.parent.SillyTavern.getContext() \\n  try {\\n    const parentST = window.parent?.SillyTavern || window.SillyTavern;\\n    if (parentST && typeof parentST.getContext === 'function') {\\n      const context = parentST.getContext();\\n      const prompts = context?.chatCompletionSettings?.prompts;\\n\\n      if (prompts && Array.isArray(prompts)) {\\n        //  identifier\\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\\n\\n        for (const identifier of possibleIdentifiers) {\\n          const regexPrompt = prompts.find(p => p.identifier === identifier);\\n          if (regexPrompt?.content) {\\n            try {\\n              const data = JSON.parse(regexPrompt.content);\\n              let presetRegexes = null;\\n\\n              // \\n              if (Array.isArray(data)) {\\n                //  regexes-bindings\\n                presetRegexes = data;\\n              } else if (data && typeof data === 'object') {\\n                //  SPresetSettings.RegexBinding.regexes\\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\\n                  presetRegexes = data.RegexBinding.regexes;\\n                } else if (data.regexes && Array.isArray(data.regexes)) {\\n                  presetRegexes = data.regexes;\\n                }\\n              }\\n\\n              if (presetRegexes && presetRegexes.length > 0) {\\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\\n                break; // \\n              }\\n            } catch (parseError) {\\n              console.warn('  identifier', identifier, ':', parseError);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  } catch (e) {\\n    console.warn(' :', e);\\n  }\\n\\n  if (allRegexScripts.length === 0) {\\n    console.log(' ');\\n    return text;\\n  }\\n\\n  console.log(' ', allRegexScripts.length, '');\\n\\n  //  AI \\n  // placement :\\n  //   0 = \\n  //   1 =  AI \\n  //   2 = AI  \\n  // promptOnly: true = \\n  // promptOnly: false =   \\n  const activeScripts = allRegexScripts.filter(script => {\\n    return !script.disabled &&\\n           !script.promptOnly &&  //  promptOnly  false \\n           script.placement &&\\n           script.placement.includes(2);  //  placement  2 AI \\n  });\\n\\n  console.log(' ', activeScripts.length, '');\\n\\n  let result = text;\\n\\n  // \\n  activeScripts.forEach((script, index) => {\\n    try {\\n      const regex = new RegExp(script.findRegex, 'gim');\\n      const beforeLength = result.length;\\n      result = result.replace(regex, script.replaceString || '');\\n\\n      if (beforeLength !== result.length) {\\n        console.log(' ', index + 1, '(', script.scriptName, ') ', beforeLength - result.length, '');\\n      }\\n    } catch (e) {\\n      console.error(' ', index + 1, '(', script.scriptName, ') :', e);\\n    }\\n  });\\n\\n  console.log(' :', text.length, ':', result.length);\\n\\n  return result;\\n}\\n\\n// ===== 5.  =====\\n//   sendChatMessage\\n//  \\nasync function handleSend() {\\n  const input = $('#inner-user-input');\\n  const text = input.val().trim();\\n\\n  if (!text || isGenerating) return;\\n\\n  // \\n  chatHistory.push({ role: 'user', content: text });\\n  input.val('');\\n  renderMessages();\\n  saveChatHistory();\\n\\n  // \\n  isGenerating = true;\\n  $('#inner-send-btn').prop('disabled', true).text('...');\\n\\n  try {\\n    //   STScript API \\n    if (typeof triggerSlashWithResult !== 'function') {\\n      throw new Error('');\\n    }\\n\\n    // \\n    const userName = SillyTavern?.name1 || 'You';\\n    const charName = SillyTavern?.name2 || 'AI';\\n\\n    // \\n    let fullPrompt = '';\\n    if (chatHistory.length > 0) {\\n      fullPrompt += '\\\\\\\\n';\\n      chatHistory.forEach((msg) => {\\n        const name = msg.role === 'user' ? userName : charName;\\n        fullPrompt += name + ': ' + msg.content + '\\\\\\\\n';\\n      });\\n      fullPrompt += '\\\\\\\\n';\\n    }\\n    fullPrompt += userName + ': ' + text;\\n\\n    console.log(' :', fullPrompt.length);\\n\\n    //   /gen \\n    const command = '/gen lock=on \\\"' + fullPrompt.replace(/\\\"/g, '\\\\\\\\\\\\\\\\\\\"') + '\\\"';\\n    const result = await triggerSlashWithResult(command);\\n\\n    console.log(' AI :', result ? result.length : 0);\\n\\n    if (result && result.length > 0) {\\n      //  \\n      const cleanedResult = applyRegexFilters(result);\\n      console.log(' :', cleanedResult.length);\\n\\n      //  AI \\n      chatHistory.push({ role: 'assistant', content: cleanedResult });\\n      saveChatHistory();\\n      renderMessages();\\n      toastr.success('');\\n    } else {\\n      toastr.warning('AI ');\\n    }\\n\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error?.message || String(error)));\\n  } finally {\\n    // \\n    isGenerating = false;\\n    $('#inner-send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// =====================================================\\n//   $(function() {})\\n// =====================================================\\n\\n// ===== 6.  =====\\n//  \\n$(function() {\\n  // \\n  console.log(' ');\\n  console.log(' chatHistory :', typeof chatHistory !== 'undefined');\\n  console.log(' renderMessages :', typeof renderMessages === 'function');\\n  console.log(' handleSend :', typeof handleSend === 'function');\\n\\n  //   false $(function() {}) \\n  if (typeof chatHistory === 'undefined' || typeof renderMessages !== 'function') {\\n    console.error(' /');\\n    console.error(' $(function() {}) ');\\n    toastr.error('');\\n    return;\\n  }\\n\\n  loadChatHistory();\\n\\n  // \\n  $('#inner-send-btn').on('click', handleSend);\\n  $('#inner-user-input').on('keypress', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      handleSend();\\n    }\\n  });\\n\\n  // \\n  $('#inner-clear-btn').on('click', () => {\\n    if (confirm('')) {\\n      chatHistory = [];\\n      renderMessages();\\n      saveChatHistory();\\n    }\\n  });\\n\\n  console.log(' ');\\n  console.log(' :', $('#inner-messages').length > 0 ? ' ' : ' ');\\n});\\n\\n// ===== 7.  =====\\n$(window).on('pagehide', () => {\\n  saveChatHistory();\\n});\\n\\\\`\\\\`\\\\`\\n\\n**HTML **\\n\\\\`\\\\`\\\\`html\\n<div class=\\\"inner-chat-container\\\">\\n  <div class=\\\"inner-chat-header\\\">\\n    <h3></h3>\\n    <button id=\\\"inner-clear-btn\\\"></button>\\n  </div>\\n\\n  <!--  ID  inner-messages -->\\n  <div id=\\\"inner-messages\\\" class=\\\"inner-messages\\\"></div>\\n\\n  <div class=\\\"inner-input-area\\\">\\n    <!--  ID  inner-user-input -->\\n    <textarea id=\\\"inner-user-input\\\" placeholder=\\\"...\\\"></textarea>\\n    <!--  ID  inner-send-btn -->\\n    <button id=\\\"inner-send-btn\\\"></button>\\n  </div>\\n</div>\\n\\\\`\\\\`\\\\`\\n\\n** HTML **\\n- [ ]  \\\\`id=\\\"inner-messages\\\"\\\\` \\n- [ ]  \\\\`id=\\\"inner-user-input\\\"\\\\` \\n- [ ]  \\\\`id=\\\"inner-send-btn\\\"\\\\` \\n- [ ]  \\\\`id=\\\"inner-clear-btn\\\"\\\\` \\n- [ ] ID  JS \\n\\n**CSS **\\n\\\\`\\\\`\\\\`css\\n/*  */\\n.inner-messages {\\n  height: 400px;\\n  overflow-y: auto;\\n  padding: 15px;\\n  display: flex;  /*   flex */\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n/*  */\\n.message {\\n  max-width: 70%;\\n  padding: 10px 15px;\\n  border-radius: 12px;\\n  word-wrap: break-word;\\n}\\n\\n/*   */\\n.user-message {\\n  align-self: flex-end;  /*  */\\n  background: #4a9eff;\\n  color: white;\\n}\\n\\n/*  AI  */\\n.ai-message {\\n  align-self: flex-start;  /*  */\\n  background: #2a2a2a;\\n  color: #e0e0e0;\\n}\\n\\\\`\\\\`\\\\`\\n\\n** **\\n- ID \\\\`inner-\\\\`\\n-  \\\\`display: flex; flex-direction: column\\\\`\\n-  \\\\`align-self: flex-end\\\\` \\n- AI  \\\\`align-self: flex-start\\\\` \\n\\n** API**\\n- **\\\\`generate(prompt)\\\\`**: ** AI **\\n- \\\\`generateRaw(prompt)\\\\`:  AI \\n- \\\\`getVariables({ type: 'message', message_id })\\\\`: \\n- \\\\`insertOrAssignVariables(data, { type: 'message', message_id })\\\\`: \\n- \\\\`getChatMessages()\\\\`: \\n\\n****\\n- **\\\\`generate\\\\`**: \\n- **\\\\`generateRaw\\\\`**: \\n\\n** **\\n1. **80% **\\n   -  **** \\\\`$(function() {})\\\\`  \\\\`let\\\\`/\\\\`const\\\\`/\\\\`function\\\\` \\n   -  ********\\\\`$(function() {})\\\\` \\n   - **** \\\\`console.log(typeof chatHistory)\\\\` \\\\`'object'\\\\`  \\\\`'undefined'\\\\`\\n\\n1.5. **/**\\n   -  ****\\\\`chatHistory.push({ role: 'assistant', content: '' });\\\\`\\n   -  ****\\\\`chatHistory.push({ role: 'assistant', content: ' AI ' });\\\\`\\n   -  **** AI \\n   -  **** \\\\`generate()\\\\`AI  \\\\`STREAM_TOKEN_RECEIVED_FULLY\\\\` \\n   - ****\\\\`generate()\\\\`  AI API\\n\\n2. **generation_id **\\n   -  \\\\`const result = await generate(...); const id = result.generation_id;\\\\`\\n   -  \\n     \\\\`\\\\`\\\\`javascript\\n     const myId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\\n     await generate({ user_input: text, generation_id: myId });\\n     //  id  myId\\n     \\\\`\\\\`\\\\`\\n   - \\\\`generate()\\\\`  \\\\`Promise<string>\\\\`\\n   -  ID \\n\\n3. ****\\n   -  \\\\`index.html\\\\` + \\\\`index.ts\\\\`\\n   - \\n   -  \\\\`setChatMessages(..., { refresh: 'none' })\\\\` \\n\\n4. ****\\n   -   \\\\`sendChatMessage\\\\`\\n   -   \\\\`generate\\\\`\\\\`getChatMessages\\\\`  API \\n   -  \\\\`handleSend\\\\`\\\\`innerSendMessage\\\\`\\\\`sendInnerMessage\\\\`\\n   - **** \\\\`sk()\\\\` \\n\\n5. ** ID **\\n   -  \\\\`inner-\\\\` \\n   -  \\\\`send-button\\\\`\\\\`user-input\\\\` \\n   - **** \\\\`$('#inner-messages').length\\\\`  1 0\\n\\n6. ****\\n   -  ** \\\\`iframe_events.XXX\\\\` \\\\`'iframe_events.XXX'\\\\`**\\n   -  ** \\\\`(text, id)\\\\` \\\\`(data)\\\\` \\\\`text\\\\`  \\\\`data.text\\\\`**\\n   -  **\\\\`generate({ user_input: text, should_stream: true, generation_id: myId })\\\\`**\\n   -  \\\\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => ...)\\\\` \\n   -  \\\\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\\\` \\n\\n7. **API **\\n   -  \\\\`generate(prompt)\\\\`\\n   -  \\\\`generateRaw(prompt)\\\\`\\n   - \\n\\n8. ****\\n   -  \\\\`getVariables({ type: 'chat' })\\\\`  \\\\`insertOrAssignVariables(data, { type: 'chat' })\\\\`\\n   - \\\\`{ type: 'message', message_id }\\\\`\\n   - \\n\\n****\\n\\\\`\\\\`\\\\`javascript\\n// ==========  ==========\\n\\n//  \\n// eventOn('iframe_events.STREAM_TOKEN_RECEIVED_FULLY', (data) => { ... })\\n//   'iframe_events.XXX'\\n//   (data)\\n\\n//  \\neventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => {\\n  // text \\n  $('#ai-reply').text(text); //   text text.text  data.text\\n  console.log(':', text);\\n});\\n\\neventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => {\\n  // text \\n  console.log(' :', text); //   text\\n  chatHistory.push({ role: 'assistant', content: text });\\n  saveChatHistory();\\n  isGenerating = false;\\n  $('#send-btn').prop('disabled', false).text('');\\n});\\n\\n//  GENERATION_ENDED\\neventOn(iframe_events.GENERATION_ENDED, (text, id) => {\\n  console.log(' :', text);\\n  chatHistory.push({ role: 'assistant', content: text });\\n  saveChatHistory();\\n  isGenerating = false;\\n  $('#send-btn').prop('disabled', false).text('');\\n});\\n\\n// ==========  ==========\\nasync function handleSend() {\\n  const userInput = $('#user-input').val();\\n  chatHistory.push({ role: 'user', content: userInput });\\n\\n  isGenerating = true;\\n  $('#send-btn').prop('disabled', true).text('...');\\n\\n  //   STScript \\n  const command = '/gen lock=on \\\"' + userInput.replace(/\\\"/g, '\\\\\\\\\\\\\\\\\\\"') + '\\\"';\\n  const result = await triggerSlashWithResult(command);\\n\\n  if (result) {\\n    chatHistory.push({ role: 'assistant', content: result });\\n    renderMessages();\\n  }\\n\\n  //   generate API\\n  // await generate({ user_input: userInput });  //  \\n}\\n\\\\`\\\\`\\\\`\\n\\n** triggerSlashWithResult**\\n-  \\\\`/gen\\\\` \\n- \\n-  generation_id \\n\\n**\\\\`/gen\\\\` **\\n- \\\\`/gen lock=on \\\"\\\"\\\\`\\n- \\n-  AI \\n\\n---\\n\\n#  AI \\n\\n**\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"******B\\n****A\\n\\n##  \\n\\n### 1. \\n-  **** \\\\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\\\`\\n-  **** \\\\`$(function() {})\\\\`  \\\\`loadChatHistory()\\\\`\\n-  **** \\\\`SillyTavern.getCurrentChatId()\\\\` \\n-  **** \\\\`$(window).on('pagehide', ...)\\\\` \\n-  ****/ \\\\`saveChatHistory()\\\\`\\n\\n### 2. \\n-  ****\\\\`display: none\\\\`iframe \\n-  ****\\n-  **** \\\\`chatHistory\\\\`\\n\\n### 3. \\n-  **** \\\\`{ type: 'chat' }\\\\`\\n-  **** \\\\`getCurrentChatId()\\\\` \\n\\n##  triggerSlashWithResult\\n\\n**** \\n\\n****\\n\\n\\\\`\\\\`\\\\`typescript\\n// ===== 1. =====\\nlet chatHistory: Array<{ role: string; content: string }> = [];\\nlet isGenerating = false;\\n\\n// ===== 2.  =====\\nfunction loadChatHistory() {\\n  const isInTavern = typeof getVariables === 'function';\\n  if (!isInTavern) {\\n    const saved = localStorage.getItem('inner_chat_history');\\n    chatHistory = saved ? JSON.parse(saved) : [];\\n  } else {\\n    const data = getVariables({ type: 'chat' });\\n    chatHistory = data?.inner_chat_history || [];\\n  }\\n  renderMessages();\\n}\\n\\nfunction saveChatHistory() {\\n  const isInTavern = typeof insertOrAssignVariables === 'function';\\n  if (!isInTavern) {\\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\\n  } else {\\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\\n  }\\n}\\n\\n// ===== 3. =====\\nfunction applyRegexFilters(text: string): string {\\n  console.log(' :', text.length);\\n\\n  if (!text || typeof text !== 'string') return '';\\n\\n  // =====  0:  =====\\n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\\n  criticalTags.forEach(tag => {\\n    const openTagRegex = new RegExp(\\\\\\\\\\\\`<\\\\\\\\\\\\${tag}([^>]*)>\\\\\\\\\\\\`, 'gi');\\n    const closeTagRegex = new RegExp(\\\\\\\\\\\\`</\\\\\\\\\\\\${tag}>\\\\\\\\\\\\`, 'gi');\\n\\n    const openMatches = text.match(openTagRegex);\\n    const closeMatches = text.match(closeTagRegex);\\n\\n    const openCount = openMatches ? openMatches.length : 0;\\n    const closeCount = closeMatches ? closeMatches.length : 0;\\n\\n    if (openCount > closeCount) {\\n      const missing = openCount - closeCount;\\n      console.log(\\\\\\\\\\\\`  \\\\\\\\\\\\${missing}  <\\\\\\\\\\\\${tag}> \\\\\\\\\\\\`);\\n      text = text + \\\\\\\\\\\\`</\\\\\\\\\\\\${tag}>\\\\\\\\\\\\`.repeat(missing);\\n    }\\n  });\\n\\n  // =====  1: =====\\n  function extractLastTagContent(tagName: string, text: string): string | null {\\n    if (!text || typeof text !== 'string') return null;\\n\\n    const endTag = \\\\\\\\\\\\`</\\\\\\\\\\\\${tagName}>\\\\\\\\\\\\`;\\n    const searchPool = text.toLowerCase();\\n    const endTagPattern = endTag.toLowerCase();\\n\\n    const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\\n    if (lastEndIndex !== -1) {\\n      const startTag = \\\\\\\\\\\\`<\\\\\\\\\\\\${tagName}>\\\\\\\\\\\\`;\\n      const startTagPattern = startTag.toLowerCase();\\n\\n      const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\\n      if (lastStartIndex !== -1) {\\n        const startIndex = lastStartIndex + startTag.length;\\n        return text.substring(startIndex, lastEndIndex).trim();\\n      }\\n    }\\n    return null;\\n  }\\n\\n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\\n  for (const tag of gameTextTags) {\\n    const extracted = extractLastTagContent(tag, text);\\n    if (extracted !== null) {\\n      console.log(\\\\\\\\\\\\`  <\\\\\\\\\\\\${tag}> :\\\\\\\\\\\\`, extracted.length);\\n      return extracted;\\n    }\\n  }\\n\\n  // =====  2:  =====\\n  let cleanedText = text;\\n\\n  const tagsToRemove = [\\n    'guide', 'plot', 'status',\\n    'UpdateVariable', '', '', ''\\n  ];\\n\\n  tagsToRemove.forEach(tag => {\\n    const regexWithContent = new RegExp(\\\\\\\\\\\\`<\\\\\\\\\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\S]*?</\\\\\\\\\\\\${tag}>\\\\\\\\\\\\`, 'gi');\\n    const before = cleanedText;\\n    cleanedText = cleanedText.replace(regexWithContent, '');\\n\\n    const regexSelfClosing = new RegExp(\\\\\\\\\\\\`<\\\\\\\\\\\\${tag}\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\s*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\/>\\\\\\\\\\\\`, 'gi');\\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\\n\\n    if (before !== cleanedText) {\\n      console.log(\\\\\\\\\\\\`    <\\\\\\\\\\\\${tag}> \\\\\\\\\\\\`);\\n    }\\n  });\\n\\n  //  think/thinking \\n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?<\\\\\\\\\\\\\\\\/[^>]*think[^>]*>/gi;\\n  const beforeThinking = cleanedText;\\n  cleanedText = cleanedText.replace(thinkingRegex, '');\\n  if (beforeThinking !== cleanedText) {\\n    console.log('    think/thinking ');\\n  }\\n\\n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\\\\\\\\\/>/gi;\\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\\n\\n  cleanedText = cleanedText.replace(/<!--[\\\\\\\\s\\\\\\\\S]*?-->/g, '');\\n\\n  if (cleanedText !== text) {\\n    console.log(' :', cleanedText.length);\\n    text = cleanedText;\\n  }\\n\\n  // =====  3: =====\\n  let allRegexScripts: any[] = [];\\n\\n  if (typeof getRegexScripts === 'function') {\\n    try {\\n      const globalRegexes = getRegexScripts();\\n      if (globalRegexes && globalRegexes.length > 0) {\\n        console.log(' ', globalRegexes.length, '');\\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\\n      }\\n    } catch (e) {\\n      console.warn(' :', e);\\n    }\\n  }\\n\\n  try {\\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\\n    if (parentST && typeof parentST.getContext === 'function') {\\n      const context = parentST.getContext();\\n      const prompts = context?.chatCompletionSettings?.prompts;\\n\\n      if (prompts && Array.isArray(prompts)) {\\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\\n\\n        for (const identifier of possibleIdentifiers) {\\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\\n          if (regexPrompt?.content) {\\n            try {\\n              const data = JSON.parse(regexPrompt.content);\\n              let presetRegexes: any = null;\\n\\n              if (Array.isArray(data)) {\\n                presetRegexes = data;\\n              } else if (data && typeof data === 'object') {\\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\\n                  presetRegexes = data.RegexBinding.regexes;\\n                } else if (data.regexes && Array.isArray(data.regexes)) {\\n                  presetRegexes = data.regexes;\\n                }\\n              }\\n\\n              if (presetRegexes && presetRegexes.length > 0) {\\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\\n                break;\\n              }\\n            } catch (parseError) {\\n              console.warn('  identifier', identifier, ':', parseError);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  } catch (e) {\\n    console.warn(' :', e);\\n  }\\n\\n  if (allRegexScripts.length > 0) {\\n    console.log(' ', allRegexScripts.length, '');\\n\\n    const activeScripts = allRegexScripts.filter((script: any) => {\\n      if (script.disabled) return false;\\n      if (!script.placement || !Array.isArray(script.placement)) return false;\\n      if (!script.placement.includes(2)) return false;\\n      return true;\\n    });\\n\\n    console.log(' ', activeScripts.length, '');\\n\\n    let result = text;\\n    activeScripts.forEach((script: any, index: number) => {\\n      try {\\n        const regex = new RegExp(script.findRegex, 'gim');\\n        const beforeLength = result.length;\\n        result = result.replace(regex, script.replaceString || '');\\n\\n        if (beforeLength !== result.length) {\\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\\n        }\\n      } catch (e) {\\n        console.error(' ', index + 1, ':', e);\\n      }\\n    });\\n\\n    text = result;\\n  }\\n\\n  console.log(' :', text.length);\\n  return text;\\n}\\n\\n// ===== 4.  =====\\nasync function handleSend() {\\n  const input = $('#inner-input');\\n  const userInput = input.val().trim();\\n  if (!userInput || isGenerating) return;\\n\\n  chatHistory.push({ role: 'user', content: userInput });\\n  input.val('');\\n  saveChatHistory();\\n  renderMessages();\\n\\n  isGenerating = true;\\n  $('#inner-send-btn').prop('disabled', true).text('...');\\n\\n  try {\\n    if (typeof triggerSlashWithResult !== 'function') {\\n      throw new Error('');\\n    }\\n\\n    const userName = SillyTavern?.name1 || 'You';\\n    const charName = SillyTavern?.name2 || 'AI';\\n\\n    let fullPrompt = '';\\n    if (chatHistory.length > 1) {\\n      fullPrompt += '\\\\\\\\n';\\n      chatHistory.slice(0, -1).forEach((msg) => {\\n        const name = msg.role === 'user' ? userName : charName;\\n        fullPrompt += name + ': ' + msg.content + '\\\\\\\\n';\\n      });\\n      fullPrompt += '\\\\\\\\n';\\n    }\\n    fullPrompt += userName + ': ' + userInput;\\n\\n    console.log(' :', fullPrompt.length);\\n\\n    const command = '/gen lock=on \\\"' + fullPrompt.replace(/\\\"/g, '\\\\\\\\\\\\\\\\\\\"') + '\\\"';\\n    const result = await triggerSlashWithResult(command);\\n\\n    console.log(' AI :', result ? result.length : 0);\\n\\n    if (result && result.length > 0) {\\n      const cleanedResult = applyRegexFilters(result);\\n      console.log(' :', cleanedResult.length);\\n\\n      chatHistory.push({ role: 'assistant', content: cleanedResult });\\n      saveChatHistory();\\n      renderMessages();\\n      toastr.success('');\\n    } else {\\n      toastr.warning('AI ');\\n    }\\n\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error?.message || String(error)));\\n  } finally {\\n    isGenerating = false;\\n    $('#inner-send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// ===== 5.  =====\\nfunction renderMessages() {\\n  const container = $('#inner-messages');\\n  container.empty();\\n\\n  chatHistory.forEach((msg, index) => {\\n    const name = msg.role === 'user'\\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\\n\\n    const msgDiv = $('<div>')\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .html('<strong>' + name + ':</strong> ' + msg.content);\\n    container.append(msgDiv);\\n  });\\n\\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// ===== 6. =====\\nlet currentChatId = SillyTavern.getCurrentChatId();\\nif (typeof eventOn === 'function') {\\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\\n    if (currentChatId !== newChatId) {\\n      console.log(' :', currentChatId, '->', newChatId);\\n      currentChatId = newChatId;\\n\\n      // \\n      loadChatHistory();\\n\\n      // \\n      if (isGenerating) {\\n        isGenerating = false;\\n        $('#inner-send-btn').prop('disabled', false).text('');\\n        console.log(' ');\\n      }\\n    }\\n  });\\n}\\n\\n// ===== 7.  =====\\n$(function() {\\n  console.log(' A');\\n  console.log('  ID:', currentChatId);\\n\\n  // \\n  loadChatHistory();\\n\\n  $('#inner-send-btn').on('click', handleSend);\\n  $('#inner-input').on('keypress', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      handleSend();\\n    }\\n  });\\n\\n  $('#inner-clear-btn').on('click', () => {\\n    if (confirm('')) {\\n      chatHistory = [];\\n      renderMessages();\\n      saveChatHistory();\\n    }\\n  });\\n\\n  console.log(' A');\\n  console.log(' ', chatHistory.length, '');\\n});\\n\\n// ===== 8.  =====\\n$(window).on('pagehide', () => {\\n  console.log(' ');\\n  saveChatHistory();\\n});\\n\\\\`\\\\`\\\\`\\n\\n---\\n\\n##  generate + \\n\\n****  AI \\n\\n****\\n\\n\\\\`\\\\`\\\\`typescript\\n// ===== 1. =====\\nlet chatHistory: Array<{ role: string; content: string }> = [];\\nlet isGenerating = false;\\nlet currentGenerationId: string | null = null;\\n\\n// ===== 2. A=====\\nfunction loadChatHistory() {\\n  const isInTavern = typeof getVariables === 'function';\\n  if (!isInTavern) {\\n    const saved = localStorage.getItem('inner_chat_history');\\n    chatHistory = saved ? JSON.parse(saved) : [];\\n  } else {\\n    const data = getVariables({ type: 'chat' });\\n    chatHistory = data?.inner_chat_history || [];\\n  }\\n  renderMessages();\\n}\\n\\nfunction saveChatHistory() {\\n  const isInTavern = typeof insertOrAssignVariables === 'function';\\n  if (!isInTavern) {\\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\\n  } else {\\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\\n  }\\n}\\n\\n// ===== 3. A=====\\nfunction applyRegexFilters(text: string): string {\\n  // ... A ...\\n  // A applyRegexFilters \\n  return text;\\n}\\n\\n// ===== 4. =====\\nfunction setupStreamListeners() {\\n  //  \\n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\\n    if (!isGenerating || id !== currentGenerationId) return;\\n\\n    console.log(' :', text.length);\\n\\n    //  \\n    const cleanedText = applyRegexFilters(text);\\n\\n    //  DOM\\n    const container = $('#inner-messages');\\n    const charName = (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\\n    const lastMsg = container.find('.message:last-child');\\n\\n    if (lastMsg.length && lastMsg.hasClass('ai-message')) {\\n      //  AI \\n      lastMsg.html('<strong>' + charName + ':</strong> <span class=\\\"streaming\\\">' + cleanedText + '</span>');\\n    } else {\\n      //  AI \\n      const msgDiv = $('<div>')\\n        .addClass('message ai-message')\\n        .html('<strong>' + charName + ':</strong> <span class=\\\"streaming\\\">' + cleanedText + '</span>');\\n      container.append(msgDiv);\\n    }\\n\\n    // \\n    container.scrollTop(container[0].scrollHeight);\\n  });\\n\\n  //  \\n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\\n    if (id === currentGenerationId) {\\n      console.log(' :', text.length);\\n\\n      //  \\n      const cleanedText = applyRegexFilters(text);\\n\\n      // \\n      chatHistory.push({ role: 'assistant', content: cleanedText });\\n      saveChatHistory();\\n\\n      // \\n      renderMessages();\\n\\n      // \\n      isGenerating = false;\\n      currentGenerationId = null;\\n      $('#inner-send-btn').prop('disabled', false).text('');\\n\\n      toastr.success('');\\n    }\\n  });\\n}\\n\\n// ===== 5. =====\\nasync function handleSend() {\\n  const input = $('#inner-input');\\n  const userInput = input.val().trim();\\n  if (!userInput || isGenerating) return;\\n\\n  // \\n  chatHistory.push({ role: 'user', content: userInput });\\n  input.val('');\\n  saveChatHistory();\\n  renderMessages();\\n\\n  //  ID\\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\\n\\n  // \\n  isGenerating = true;\\n  $('#inner-send-btn').prop('disabled', true).text('...');\\n\\n  try {\\n    if (typeof generate !== 'function') {\\n      throw new Error('');\\n    }\\n\\n    console.log(' generation_id:', currentGenerationId);\\n\\n    //   generate \\n    await generate({\\n      user_input: userInput,\\n      should_stream: true,           //  \\n      generation_id: currentGenerationId,  //   ID\\n      overrides: {\\n        chat_history: {\\n          prompts: chatHistory.map(msg => ({\\n            role: msg.role === 'user' ? 'user' : 'assistant',\\n            content: msg.content\\n          }))\\n        }\\n      }\\n    });\\n\\n    // \\n    // GENERATION_ENDED  AI \\n\\n  } catch (error) {\\n    console.error(' :', error);\\n    toastr.error(': ' + (error?.message || String(error)));\\n\\n    // \\n    isGenerating = false;\\n    currentGenerationId = null;\\n    $('#inner-send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// ===== 6. A=====\\nfunction renderMessages() {\\n  const container = $('#inner-messages');\\n  container.empty();\\n\\n  chatHistory.forEach((msg, index) => {\\n    const name = msg.role === 'user'\\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\\n\\n    const msgDiv = $('<div>')\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .html('<strong>' + name + ':</strong> ' + msg.content);\\n    container.append(msgDiv);\\n  });\\n\\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// ===== 7. =====\\nlet currentChatId = SillyTavern.getCurrentChatId();\\nif (typeof eventOn === 'function') {\\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\\n    if (currentChatId !== newChatId) {\\n      console.log(' :', currentChatId, '->', newChatId);\\n      currentChatId = newChatId;\\n\\n      // \\n      loadChatHistory();\\n\\n      // \\n      if (isGenerating) {\\n        isGenerating = false;\\n        currentGenerationId = null;\\n        $('#inner-send-btn').prop('disabled', false).text('');\\n        console.log(' ');\\n      }\\n    }\\n  });\\n}\\n\\n// ===== 8.  =====\\n$(function() {\\n  console.log(' B - ');\\n  console.log('  ID:', currentChatId);\\n\\n  // \\n  loadChatHistory();\\n\\n  //  \\n  setupStreamListeners();\\n\\n  $('#inner-send-btn').on('click', handleSend);\\n  $('#inner-input').on('keypress', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      handleSend();\\n    }\\n  });\\n\\n  $('#inner-clear-btn').on('click', () => {\\n    if (confirm('')) {\\n      chatHistory = [];\\n      renderMessages();\\n      saveChatHistory();\\n    }\\n  });\\n\\n  console.log(' B');\\n  console.log(' ', chatHistory.length, '');\\n});\\n\\n// ===== 9.  =====\\n$(window).on('pagehide', () => {\\n  console.log(' ');\\n  saveChatHistory();\\n});\\n\\\\`\\\\`\\\\`\\n\\n**CSS B**\\n\\n\\\\`\\\\`\\\\`css\\n.streaming {\\n  border-right: 2px solid #165DFF;\\n  padding-right: 4px;\\n  animation: blink 1s infinite;\\n}\\n\\n@keyframes blink {\\n  0%, 50% { border-right-color: #165DFF; }\\n  51%, 100% { border-right-color: transparent; }\\n}\\n\\\\`\\\\`\\\\`\\n\\n---\\n\\n##  AI \\n\\n****\\n\\n1. ****\\n   - \\\"\\\"\\\"\\\"\\n   - \\\"\\\"\\\"\\\"\\n   - \\\"\\\"\\\"\\\"\\n   - \\n\\n2. ****\\n   - \\n   - \\\"\\\"\\n\\n** ** \\\"\\\"****\\n\\n## \\n\\n****\\n\\n### AI \\n\\n**1**\\n\\n\\n- \\n- /\\n- \\n- \\n\\n**2**\\n\\n### A\\\"\\\"\\\"\\\"\\n\\n****\\n\\n\\n\\\\`\\\\`\\\\`\\nFILE_START: NEED_MORE_INFO\\n\\n\\n-  AI \\n- \\n- \\n\\n\\n\\n**1. **\\n- \\n- \\n- \\n- \\n\\n**2. **\\n- \\n- \\n-  AI \\n\\n**3. **\\n- \\n- \\n- \\n\\n**4. **\\n- \\n- \\n- /\\n- \\n- \\n\\n---\\n\\n****\\n\\n### \\n\\n\\n\\n1. ****\\n2. ****\\n3. ****\\n\\n### \\n\\n****\\n1.    \\\\`generate({ should_stream: true, generation_id })\\\\`\\n2.  \\\\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\\\` \\n3.     \\n4.    \\\\`chatHistory\\\\`  \\n\\n****\\n-  \\\\`generation_id\\\\` \\n- \\\\`applyRegexFilters\\\\`\\n- \\n\\n### \\n\\n****\\n\\\\`\\\\`\\\\`javascript\\nlet chatHistory = [\\n  { role: 'user', content: '', timestamp: '...' },\\n  { role: 'assistant', content: 'AI', timestamp: '...' }\\n];\\n\\\\`\\\\`\\\\`\\n\\n****\\n- \\n- AI \\n\\n****\\n \\\\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\\\` \\n\\n### \\n\\n**\\\\`applyRegexFilters\\\\` **\\n1. \\\"\\\"\\n2. \\\\`<dream>\\\\`\\\\`<gametxt>\\\\` \\n3. \\\\`<think>\\\\`\\\\`<guide>\\\\`\\\\`<plot>\\\\` \\n4. \\n\\n****\\n- \\n- \\n\\n---\\n\\n****\\n\\n\\\"\\\"\\n-  #1a1a1a\\n- #4a9eff\\n- AI #3a3a3a\\n-  + \\n- \\n\\nFILE_END\\n\\\\`\\\\`\\\\`\\n\\n### B\\n\\n****\\n\\n\\n\\\\`\\\\`\\\\`\\nFILE_START: index.html\\n[ HTML ]\\nFILE_END\\n\\nFILE_START: style.css\\n[ CSS ]\\nFILE_END\\n\\nFILE_START: script.js\\n[ JavaScript ]\\nFILE_END\\n\\\\`\\\\`\\\\`\\n\\n### C\\\"\\\"\\\"\\\"\\n\\n****\\n\\n****\\n-  #1a1a1a #2a2a2a\\n- #4a9eff\\n- AI #3a3a3a\\n- border-radius: 12px\\n- fadeIn/fadeOut\\n- \\n- \\n- \\n\\n---\\n\\n### \\n\\n\\n\\n\\\\`\\\\`\\\\`typescript\\n// \\nconst regexPresets = {\\n  \\\"\\\": [\\n    { pattern: /<tag1>/g, replacement: \\\"\\\" },\\n    { pattern: /\\\\\\\\[tag2\\\\\\\\]/g, replacement: \\\"\\\" },\\n  ],\\n  \\\"\\\": [\\n    { pattern: /\\\\\\\\{\\\\\\\\{some_meta_data\\\\\\\\}\\\\\\\\}/g, replacement: \\\"\\\" },\\n  ]\\n};\\n\\nlet currentPreset = \\\"\\\";\\n\\nfunction applyRegexFilters(text: string, presetName?: string): string {\\n  const preset = presetName || currentPreset;\\n  const rules = regexPresets[preset] || regexPresets[\\\"\\\"];\\n\\n  let cleanedText = text;\\n  rules.forEach(rule => {\\n    cleanedText = cleanedText.replace(rule.pattern, rule.replacement);\\n  });\\n\\n  // \\n  // ...  ...\\n\\n  return cleanedText;\\n}\\n\\nfunction switchPreset(presetName: string) {\\n  currentPreset = presetName;\\n  renderMessages(); // \\n}\\n\\\\`\\\\`\\\\`\\n\\n****\\n\\n---\\n\\n# \\n FILE_START  FILE_END \\n\\n****\\n\\nFILE_START: index.html\\n[ HTML  headbody CSS  JS]\\nFILE_END\\n\\nFILE_START: style.css\\n[ CSS ]\\nFILE_END\\n\\nFILE_START: script.js\\n[ JavaScript  jQuery]\\nFILE_END\\n\\n** **\\n1. **** \\\\`inner\\\\`\\\\`my\\\\`\\n   -  \\\\`sendChatMessage\\\\`\\\\`generate\\\\`\\\\`getChatMessages\\\\`\\n   -  \\\\`innerSendMessage\\\\`\\\\`handleSendMessage\\\\`\\\\`sendInnerMessage\\\\`\\n2. ** ID** \\\\`inner-\\\\`\\\\`my-\\\\`\\n   -  \\\\`#send-button\\\\`\\\\`#user-input\\\\`\\n   -  \\\\`#inner-send-btn\\\\`\\\\`#inner-user-input\\\\`\\n3. ****\\n\\n#  \\n**\\\"\\\"\\\"\\\"\\\"\\\"**\\n\\n-  \\\"\\\"  ** style.css**\\n-  \\\"\\\"  ** script.js**\\n-  \\\"\\\"  ** script.js**\\n-  \\n\\n# \\n## \\n- ///  ** style.css**\\n- / bug  ** script.js**\\n- /  ** index.html**\\n- /  ** index.html**\\n\\n## \\n- /  ** index.htmlstyle.cssscript.js**\\n- /  ****\\n-   ****\\n\\n# \\n1. **  getVariables/insertOrAssignVariables**\\n2. **  \\\\`typeof SillyTavern !== 'undefined'\\\\` localStorage  API**\\n3. \\n4. \\n5. CSS \\n6. JavaScript  \\\\`$(function() { ... })\\\\`  DOM \\n7. \\\\`{ type: 'chat' }\\\\` \\\\`{ type: 'global' }\\\\` \\n8. `;\\n\\n    const currentFiles = proj.files.map(f => `=== ${f.path} ===\\\\n${f.content}`).join('\\\\n\\\\n');\\n    const userPrompt = `# \\n${currentFiles}\\n\\n# \\n${aiPrompt.value}\\n\\n#  \\n1. ****\\n2. **** 1 \\n3. ****\\n4. **** getVariables/insertOrAssignVariables\\n\\n system `;\\n\\n    // \\n    streamingText.value = ''; // \\n    let resultText = '';\\n\\n    progressDialogRef.value?.setProgress(25);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n    if (enableStream.value) {\\n      // \\n      progressDialogRef.value?.setProgress(30);\\n      progressDialogRef.value?.setMessage(' AI ...');\\n      await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n      const response = await fetch(normalizedEndpoint, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${apiKey}`,\\n        },\\n        body: JSON.stringify({\\n          model: model,\\n          messages: [\\n            { role: 'system', content: systemPrompt },\\n            { role: 'user', content: userPrompt },\\n          ],\\n          temperature: temperature,\\n          max_tokens: maxTokens,\\n          stream: true, // \\n        }),\\n      });\\n\\n      if (!response.ok) {\\n        let errorMsg = `API : ${response.status} ${response.statusText}`;\\n        try {\\n          const errorData = await response.json();\\n          console.error('API :', errorData);\\n          errorMsg += `\\\\n${JSON.stringify(errorData, null, 2)}`;\\n        } catch (e) {\\n          console.error('');\\n        }\\n        throw new Error(errorMsg);\\n      }\\n\\n      // \\n      const reader = response.body?.getReader();\\n      const decoder = new TextDecoder();\\n\\n      if (!reader) {\\n        throw new Error('');\\n      }\\n\\n      let chunkCount = 0;\\n      while (true) {\\n        const { done, value } = await reader.read();\\n        if (done) break;\\n\\n        const chunk = decoder.decode(value, { stream: true });\\n        const lines = chunk.split('\\\\n');\\n\\n        for (const line of lines) {\\n          if (line.startsWith('data: ')) {\\n            const data = line.slice(6);\\n            if (data === '[DONE]') continue;\\n\\n            try {\\n              const json = JSON.parse(data);\\n              const content = json.choices?.[0]?.delta?.content || '';\\n              if (content) {\\n                resultText += content;\\n                streamingText.value += content;\\n                chunkCount++;\\n\\n                // 30%  60%\\n                const progress = Math.min(60, 30 + chunkCount / 10);\\n                progressDialogRef.value?.setProgress(progress);\\n\\n                // 10chunk\\n                if (chunkCount % 10 === 0) {\\n                  progressDialogRef.value?.setMessage(` AI ... (${resultText.length} )`);\\n                }\\n              }\\n            } catch (e) {\\n              // \\n            }\\n          }\\n        }\\n      }\\n    } else {\\n      // \\n      progressDialogRef.value?.setProgress(30);\\n      progressDialogRef.value?.setMessage(' AI ...');\\n      await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n      const response = await fetch(normalizedEndpoint, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${apiKey}`,\\n        },\\n        body: JSON.stringify({\\n          model: model,\\n          messages: [\\n            { role: 'system', content: systemPrompt },\\n            { role: 'user', content: userPrompt },\\n          ],\\n          temperature: temperature,\\n          max_tokens: maxTokens,\\n        }),\\n      });\\n\\n      if (!response.ok) {\\n        let errorMsg = `API : ${response.status} ${response.statusText}`;\\n        try {\\n          const errorData = await response.json();\\n          console.error('API :', errorData);\\n          errorMsg += `\\\\n${JSON.stringify(errorData, null, 2)}`;\\n        } catch (e) {\\n          console.error('');\\n        }\\n        throw new Error(errorMsg);\\n      }\\n\\n      progressDialogRef.value?.setProgress(60);\\n      progressDialogRef.value?.setMessage(' AI ...');\\n\\n      const data = await response.json();\\n      resultText = data.choices?.[0]?.message?.content || '';\\n    }\\n\\n    progressDialogRef.value?.setProgress(75);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    console.log('AI :', resultText);\\n    console.log('AI :', resultText.length);\\n\\n    if (!resultText || resultText.trim().length === 0) {\\n      throw new Error('AI  API ');\\n    }\\n\\n    // \\n    const changes: AIChange[] = [];\\n    // FILE_START: filename\\\\n...FILE_END  FILE_START:filename\\\\n...FILE_END\\n    const fileRegex = /FILE_START:\\\\s*(.+?)[\\\\r\\\\n]+([\\\\s\\\\S]*?)FILE_END/gi;\\n    let match;\\n\\n    console.log(' AI ...');\\n\\n    // \\n    const needMoreInfoMatch = resultText.match(/FILE_START:\\\\s*NEED_MORE_INFO\\\\s*[\\\\r\\\\n]+([\\\\s\\\\S]*?)FILE_END/i);\\n    if (needMoreInfoMatch) {\\n      const guideContent = needMoreInfoMatch[1].trim();\\n      console.log(' AI ');\\n\\n      //  AI \\n      closeAIDialog();\\n\\n      // \\n      toastr.info('AI ', '', { timeOut: 3000 });\\n\\n      // alert\\n      alert(guideContent);\\n\\n      // \\n      aiGenerating.value = false;\\n      return;\\n    }\\n\\n    while ((match = fileRegex.exec(resultText)) !== null) {\\n      const path = match[1].trim();\\n      const content = match[2].trim();\\n\\n      console.log(`: ${path}, : ${content.length}`);\\n\\n      const file = proj.files.find(f => f.path === path);\\n      if (file) {\\n        changes.push({\\n          path: path,\\n          oldContent: file.content,\\n          newContent: content,\\n        });\\n      } else {\\n        console.warn(` ${path} `);\\n      }\\n    }\\n\\n    if (changes.length === 0) {\\n      console.error(' AI ');\\n      console.error('AI :', resultText.substring(0, 500));\\n\\n      // \\n      if (resultText.length < 500 || !resultText.includes('FILE_END')) {\\n        throw new Error(\\n          `AI  ${resultText.length} \\\"\\\" max_tokens 4000 `,\\n        );\\n      }\\n\\n      throw new Error('AI  AI  FILE_START  FILE_END ');\\n    }\\n\\n    console.log(':', changes.length, '');\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    // \\n    if (changes.length === 1 && changes[0].path === 'index.html') {\\n      toastr.warning('AI  HTML CSS/JS');\\n    }\\n\\n    //  FILE_END\\n    const lastFile = resultText.trim().split('FILE_START').pop() || '';\\n    if (!lastFile.includes('FILE_END')) {\\n      toastr.error('AI ');\\n    }\\n\\n    const result = { changes };\\n\\n    if (!result.changes || !Array.isArray(result.changes)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    aiChanges.value = result.changes;\\n\\n    progressDialogRef.value?.setProgress(95);\\n    progressDialogRef.value?.setMessage(`... (${changes.length} )`);\\n\\n    closeAIDialog();\\n    showComparison.value = true;\\n    previewMode.value = 'after';\\n\\n    // \\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' AI ');\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      toastr.success(` AI  ${changes.length} `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n\\n    //  CORS \\n    const errorMessage = error.message || String(error);\\n    if (\\n      errorMessage.includes('CORS') ||\\n      errorMessage.includes('Failed to fetch') ||\\n      errorMessage.includes('Access-Control-Allow-Origin')\\n    ) {\\n      toastr.error(\\n        ` CORS  API\\\\n\\\\n` +\\n          `API ${new URL(normalizedEndpoint).origin} CORS \\\\n\\\\n` +\\n          `\\\\n` +\\n          `1.  API  CORS\\\\n` +\\n          `2.  CORS  API \\\\n` +\\n          `3.  API `,\\n      );\\n    } else if (errorMessage.includes('307') || errorMessage.includes('Temporary Redirect')) {\\n      toastr.error(\\n        ` URL \\\\n\\\\n` +\\n          `${normalizedEndpoint}\\\\n\\\\n` +\\n          `URL \\\\n` +\\n          `https:///v1`,\\n      );\\n    } else {\\n      toastr.error(`AI : ${errorMessage}`);\\n    }\\n  } finally {\\n    aiGenerating.value = false;\\n  }\\n}\\n\\nfunction acceptChanges() {\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  // \\n  const historyRecord: AIHistoryRecord = {\\n    timestamp: new Date().toISOString(),\\n    prompt: aiPrompt.value,\\n    changes: aiChanges.value,\\n  };\\n\\n  if (!aiHistory.value[currentId.value]) {\\n    aiHistory.value[currentId.value] = [];\\n  }\\n  aiHistory.value[currentId.value].unshift(historyRecord);\\n  console.log(' AI :', aiHistory.value[currentId.value].length);\\n\\n  // \\n  aiChanges.value.forEach(change => {\\n    const file = proj.files.find(f => f.path === change.path);\\n    if (file) {\\n      file.content = change.newContent;\\n    }\\n  });\\n\\n  // \\n  saveToChatVar();\\n  updatePreview();\\n\\n  // \\n  if (currentFile.value) {\\n    const file = proj.files.find(f => f.path === currentFile.value);\\n    if (file) {\\n      code.value = file.content;\\n    }\\n  }\\n\\n  showComparison.value = false;\\n  aiChanges.value = [];\\n  toastr.success('');\\n}\\n\\nfunction rejectChanges() {\\n  showComparison.value = false;\\n  aiChanges.value = [];\\n  toastr.info('');\\n}\\n\\nfunction showHistoryDialog() {\\n  showHistory.value = true;\\n}\\n\\nfunction closeHistoryDialog() {\\n  showHistory.value = false;\\n}\\n\\nfunction restoreHistory(record: AIHistoryRecord) {\\n  if (!confirm(`\\\\n\\\\n\\\"${record.prompt}\\\"\\\\n\\\\n`)) {\\n    return;\\n  }\\n\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  // \\n  record.changes.forEach(change => {\\n    const file = proj.files.find(f => f.path === change.path);\\n    if (file) {\\n      file.content = change.newContent;\\n    }\\n  });\\n\\n  console.log(':', record.prompt);\\n\\n  // \\n  saveToChatVar();\\n  updatePreview();\\n\\n  // \\n  if (currentFile.value) {\\n    const file = proj.files.find(f => f.path === currentFile.value);\\n    if (file) {\\n      code.value = file.content;\\n    }\\n  }\\n\\n  closeHistoryDialog();\\n  toastr.success('');\\n}\\n\\nfunction exportToRegex() {\\n  const proj = currentProject.value;\\n  if (!proj) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  // \\n  const fileObj = proj.files.find(f => f.name === currentFile.value);\\n  if (fileObj && code.value !== fileObj.content) {\\n    const shouldContinue = confirm('\\\\n\\\\n');\\n    if (!shouldContinue) {\\n      return;\\n    }\\n  }\\n\\n  // \\n  const triggerWord = prompt(\\n    `${proj.name}\\\\n\\\\n\\\\n  //g`,\\n    `${proj.name}`,\\n  );\\n  if (!triggerWord) {\\n    toastr.info('');\\n    return;\\n  }\\n\\n  try {\\n    //  HTML proj.files \\n    const fullHtml = buildPreviewFromFiles(proj.files);\\n\\n    //  UUID\\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\\n      const r = (Math.random() * 16) | 0;\\n      const v = c === 'x' ? r : (r & 0x3) | 0x8;\\n      return v.toString(16);\\n    });\\n\\n    //  JSON\\n    // 1.  Windows  \\\\r\\n    // 2.  <!DOCTYPE html>\\\\n <html> \\n    // 3. ```html\\\\n\\\\n<html>...</html>\\\\n```\\n    let cleanHtml = fullHtml.replace(/\\\\r/g, '');\\n    cleanHtml = cleanHtml.replace(/^<!DOCTYPE html>\\\\n/, '');\\n\\n    const regexJson = {\\n      id: uuid,\\n      scriptName: proj.name,\\n      findRegex: triggerWord.startsWith('/') ? triggerWord : `/${triggerWord}/g`,\\n      replaceString: '```html\\\\n\\\\n' + cleanHtml + '\\\\n```',\\n      trimStrings: [],\\n      placement: [1, 2],\\n      disabled: false,\\n      markdownOnly: true,\\n      promptOnly: false,\\n      runOnEdit: true,\\n      substituteRegex: 0,\\n      minDepth: null,\\n      maxDepth: null,\\n    };\\n\\n    // \\n    const dataStr = JSON.stringify(regexJson, null, 4);\\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\\n    const url = URL.createObjectURL(dataBlob);\\n\\n    const link = document.createElement('a');\\n    link.href = url;\\n    link.download = `${proj.name}_regex.json`;\\n    document.body.appendChild(link);\\n    link.click();\\n    document.body.removeChild(link);\\n    URL.revokeObjectURL(url);\\n\\n    console.log(' JSON:', regexJson);\\n    toastr.success(` \\\"${proj.name}\\\"  JSON`);\\n  } catch (error: any) {\\n    console.error(':', error);\\n    toastr.error(`: ${error.message}`);\\n  }\\n}\\n\\nfunction openInNewWindow() {\\n  if (!previewHtml.value) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  const proj = currentProject.value;\\n  const windowTitle = proj ? proj.name : '';\\n\\n  // \\n  const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\\n\\n  if (newWindow) {\\n    newWindow.document.write(previewHtml.value);\\n    newWindow.document.close();\\n    newWindow.document.title = windowTitle;\\n    toastr.success('');\\n  } else {\\n    toastr.error('');\\n  }\\n}\\n</script>\\n\\n<style scoped>\\n/*  */\\n@keyframes blink {\\n  0%,\\n  50% {\\n    opacity: 1;\\n  }\\n  51%,\\n  100% {\\n    opacity: 0;\\n  }\\n}\\n\\n.project-tab {\\n  padding: 25px !important;\\n  background: #1a1a1a !important;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.statusbar-generator[data-v-bbbf3552]{padding:20px;height:100%;display:flex;flex-direction:column;gap:20px;background:#1a1a1a}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/StatusBarGenerator.vue\"],\"names\":[],\"mappings\":\"AAy2FA,sCACE,YAAa,CACb,WAAY,CACZ,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,kBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"statusbar-generator\\\">\\n    <!--  -->\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 28px;\\n        background: linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(255, 255, 255, 0.06);\\n        box-shadow:\\n          0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 16px !important;\\n          font-weight: 600;\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n          letter-spacing: 0.5px;\\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-chart-bar\\\" style=\\\"color: #4a9eff; font-size: 18px\\\"></i>\\n        \\n      </h3>\\n      <div style=\\\"display: flex; gap: 10px; flex-wrap: wrap\\\">\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 600;\\n            cursor: pointer;\\n            transition: all 0.3s ease;\\n          \\\"\\n          @click=\\\"loadTemplate('abo')\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-magic\\\" style=\\\"margin-right: 6px\\\"></i>\\n           ABO \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 600;\\n            cursor: pointer;\\n            transition: all 0.3s ease;\\n          \\\"\\n          @click=\\\"showAIDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n          AI \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 600;\\n            cursor: pointer;\\n            transition: all 0.3s ease;\\n          \\\"\\n          @click=\\\"exportRegex\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-download\\\" style=\\\"margin-right: 6px\\\"></i>\\n           JSON\\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div style=\\\"display: grid; grid-template-columns: 280px 1fr 500px; gap: 20px; min-height: 600px\\\">\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n          overflow-y: auto;\\n        \\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0 0 15px 0;\\n            color: #fff;\\n            font-size: 14px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 8px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-cog\\\" style=\\\"color: #4a9eff\\\"></i>\\n          \\n        </h4>\\n\\n        <!--  -->\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #c0c0c0; font-size: 12px; font-weight: 600\\\"\\n            ></label\\n          >\\n          <input\\n            v-model=\\\"config.findRegex\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"<-CHARACTER_STATUS->\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 8px 12px;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 12px;\\n            \\\"\\n          />\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"flex: 1; display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px\\\">\\n          <div\\n            v-for=\\\"(field, index) in config.fields\\\"\\n            :key=\\\"index\\\"\\n            style=\\\"padding: 10px; background: #1e1e1e; border-radius: 6px; border: 1px solid #3a3a3a\\\"\\n          >\\n            <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px\\\">\\n              <span style=\\\"color: #4a9eff; font-size: 11px; font-weight: 600\\\"> {{ index + 1 }}</span>\\n              <button\\n                :disabled=\\\"config.fields.length <= 1\\\"\\n                :style=\\\"{\\n                  padding: '4px 8px',\\n                  background: '#ef4444',\\n                  border: 'none',\\n                  borderRadius: '4px',\\n                  color: 'white',\\n                  fontSize: '10px',\\n                  cursor: 'pointer',\\n                  opacity: config.fields.length <= 1 ? 0.4 : 1,\\n                }\\\"\\n                @click=\\\"removeField(index)\\\"\\n              >\\n                \\n              </button>\\n            </div>\\n            <input\\n              v-model=\\\"field.name\\\"\\n              type=\\\"text\\\"\\n              placeholder=\\\"\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 6px 10px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 4px;\\n                color: #e0e0e0;\\n                font-size: 11px;\\n                margin-bottom: 6px;\\n              \\\"\\n            />\\n            <input\\n              v-model=\\\"field.label\\\"\\n              type=\\\"text\\\"\\n              placeholder=\\\"\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 6px 10px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 4px;\\n                color: #e0e0e0;\\n                font-size: 11px;\\n                margin-bottom: 6px;\\n              \\\"\\n            />\\n            <div style=\\\"display: flex; gap: 6px; align-items: center\\\">\\n              <input\\n                v-model=\\\"field.icon\\\"\\n                type=\\\"text\\\"\\n                placeholder=\\\"fa-solid fa-user\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  padding: 6px 10px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 4px;\\n                  color: #e0e0e0;\\n                  font-size: 11px;\\n                  font-family: monospace;\\n                \\\"\\n              />\\n              <button\\n                style=\\\"\\n                  padding: 6px 10px;\\n                  background: #3a3a3a;\\n                  border: 1px solid #4a4a4a;\\n                  border-radius: 4px;\\n                  color: #fff;\\n                  font-size: 12px;\\n                  cursor: pointer;\\n                  min-width: 36px;\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"showIconPicker(index)\\\"\\n              >\\n                <i v-if=\\\"field.icon\\\" :class=\\\"field.icon\\\"></i>\\n                <i v-else class=\\\"fa-solid fa-icons\\\"></i>\\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <button\\n          style=\\\"\\n            width: 100%;\\n            padding: 8px;\\n            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n            border: none;\\n            border-radius: 6px;\\n            color: white;\\n            font-size: 12px;\\n            font-weight: 600;\\n            cursor: pointer;\\n          \\\"\\n          @click=\\\"addField\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n\\n        <button\\n          style=\\\"\\n            width: 100%;\\n            padding: 8px;\\n            margin-top: 10px;\\n            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\\n            border: none;\\n            border-radius: 6px;\\n            color: white;\\n            font-size: 12px;\\n            font-weight: 600;\\n            cursor: pointer;\\n          \\\"\\n          @click=\\\"showXmlParseDialog\\\"\\n        >\\n          <i class=\\\"fa-solid fa-code\\\" style=\\\"margin-right: 6px\\\"></i>\\n          AI  XML \\n        </button>\\n\\n        <button\\n          style=\\\"\\n            width: 100%;\\n            padding: 8px;\\n            margin-top: 10px;\\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n            border: none;\\n            border-radius: 6px;\\n            color: white;\\n            font-size: 12px;\\n            font-weight: 600;\\n            cursor: pointer;\\n          \\\"\\n          @click=\\\"showAiFieldGeneratorDialog\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n          AI \\n        </button>\\n\\n        <button\\n          style=\\\"\\n            width: 100%;\\n            padding: 8px;\\n            margin-top: 10px;\\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n            border: none;\\n            border-radius: 6px;\\n            color: white;\\n            font-size: 12px;\\n            font-weight: 600;\\n            cursor: pointer;\\n          \\\"\\n          @click=\\\"generateFromFields\\\"\\n        >\\n          <i class=\\\"fa-solid fa-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <!--  -->\\n        <div\\n          style=\\\"display: flex; gap: 8px; margin-bottom: 12px; border-bottom: 1px solid #3a3a3a; padding-bottom: 8px\\\"\\n        >\\n          <div\\n            v-for=\\\"file in files\\\"\\n            :key=\\\"file.path\\\"\\n            :style=\\\"{\\n              padding: '6px 14px',\\n              background: currentFile?.path === file.path ? '#4a9eff' : '#1e1e1e',\\n              color: currentFile?.path === file.path ? '#fff' : '#c0c0c0',\\n              borderRadius: '6px',\\n              fontSize: '12px',\\n              fontWeight: '600',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s ease',\\n            }\\\"\\n            @click=\\\"currentFile = file\\\"\\n          >\\n            {{ file.path }}\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <textarea\\n          v-if=\\\"currentFile\\\"\\n          v-model=\\\"currentFile.content\\\"\\n          style=\\\"\\n            flex: 1;\\n            width: 100%;\\n            padding: 12px;\\n            background: #1e1e1e;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-family: 'Consolas', 'Monaco', monospace;\\n            line-height: 1.6;\\n            resize: none;\\n            min-height: 400px;\\n          \\\"\\n          @input=\\\"updatePreview\\\"\\n        ></textarea>\\n      </div>\\n\\n      <!--  -->\\n      <div style=\\\"display: flex; flex-direction: column; gap: 15px; overflow-y: auto\\\">\\n        <!--  -->\\n        <div style=\\\"background: #2a2a2a; border-radius: 12px; padding: 15px; border: 1px solid #3a3a3a\\\">\\n          <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px\\\">\\n            <h4\\n              style=\\\"\\n                margin: 0;\\n                color: #fff;\\n                font-size: 14px;\\n                font-weight: 600;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n              \\\"\\n            >\\n              <i class=\\\"fa-solid fa-book\\\" style=\\\"color: #4a9eff\\\"></i>\\n              \\n            </h4>\\n            <button\\n              style=\\\"\\n                padding: 6px 12px;\\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 12px;\\n                font-weight: 600;\\n                cursor: pointer;\\n              \\\"\\n              @click=\\\"copyWorldbook\\\"\\n            >\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"margin-right: 4px\\\"></i>\\n              \\n            </button>\\n          </div>\\n          <div\\n            style=\\\"\\n              background: #1e1e1e;\\n              border-radius: 8px;\\n              padding: 12px;\\n              border: 1px solid #3a3a3a;\\n              overflow: auto;\\n              max-height: 200px;\\n            \\\"\\n          >\\n            <pre\\n              style=\\\"\\n                margin: 0;\\n                color: #e0e0e0;\\n                font-size: 11px;\\n                line-height: 1.6;\\n                white-space: pre-wrap;\\n                word-wrap: break-word;\\n                font-family: 'Consolas', 'Monaco', monospace;\\n              \\\"\\n              >{{ worldbookContent }}</pre\\n            >\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"background: #2a2a2a; border-radius: 12px; padding: 15px; border: 1px solid #3a3a3a; flex: 1\\\">\\n          <h4\\n            style=\\\"\\n              margin: 0 0 12px 0;\\n              color: #fff;\\n              font-size: 14px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 8px;\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-eye\\\" style=\\\"color: #4a9eff\\\"></i>\\n            \\n          </h4>\\n          <div\\n            style=\\\"\\n              background: #1e1e1e;\\n              border-radius: 8px;\\n              padding: 20px;\\n              min-height: 400px;\\n              border: 1px solid #3a3a3a;\\n              overflow: auto;\\n            \\\"\\n            v-html=\\\"previewHtml\\\"\\n          ></div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showIconPickerFor !== null\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"showIconPickerFor = null\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 20px;\\n          width: 600px;\\n          max-width: 90vw;\\n          border: 1px solid #3a3a3a;\\n        \\\"\\n      >\\n        <h3 style=\\\"margin: 0 0 16px 0; color: #fff; font-size: 15px; font-weight: 600\\\"></h3>\\n        <div\\n          style=\\\"\\n            display: grid;\\n            grid-template-columns: repeat(8, 1fr);\\n            gap: 8px;\\n            margin-bottom: 16px;\\n            max-height: 400px;\\n            overflow-y: auto;\\n          \\\"\\n        >\\n          <div\\n            v-for=\\\"(iconClass, idx) in iconList\\\"\\n            :key=\\\"idx\\\"\\n            :style=\\\"{\\n              padding: '14px',\\n              background: '#1e1e1e',\\n              borderRadius: '8px',\\n              cursor: 'pointer',\\n              textAlign: 'center',\\n              border: '1px solid #3a3a3a',\\n              transition: 'all 0.2s ease',\\n              display: 'flex',\\n              alignItems: 'center',\\n              justifyContent: 'center',\\n            }\\\"\\n            :title=\\\"iconClass\\\"\\n            @click=\\\"selectIcon(iconClass)\\\"\\n            @mouseenter=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background = '#3a3a3a';\\n                e.currentTarget.style.borderColor = '#4a9eff';\\n                e.currentTarget.style.transform = 'scale(1.1)';\\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(74, 158, 255, 0.3)';\\n              }\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background = '#1e1e1e';\\n                e.currentTarget.style.borderColor = '#3a3a3a';\\n                e.currentTarget.style.transform = 'scale(1)';\\n                e.currentTarget.style.boxShadow = 'none';\\n              }\\n            \\\"\\n          >\\n            <i :class=\\\"iconClass\\\" style=\\\"font-size: 20px; color: #4a9eff\\\"></i>\\n          </div>\\n        </div>\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #fff;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"showIconPickerFor = null\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #ef4444;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"\\n              config.fields[showIconPickerFor!].icon = '';\\n              showIconPickerFor = null;\\n            \\\"\\n          >\\n            \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showAI\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"showAI = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 24px;\\n          width: 600px;\\n          max-width: 90vw;\\n          max-height: 90vh;\\n          overflow-y: auto;\\n          border: 1px solid #3a3a3a;\\n        \\\"\\n      >\\n        <h3 style=\\\"margin: 0 0 16px 0; color: #fff; font-size: 16px; font-weight: 600\\\">AI </h3>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.1) 100%);\\n            border: 1px solid rgba(59, 130, 246, 0.3);\\n            border-radius: 8px;\\n            padding: 12px 16px;\\n            margin-bottom: 16px;\\n          \\\"\\n        >\\n          <div style=\\\"display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px\\\">\\n            <div style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n              <i class=\\\"fa-solid fa-cog\\\" style=\\\"color: #60a5fa; font-size: 16px\\\"></i>\\n              <div style=\\\"color: #93c5fd; font-size: 13px; font-weight: 600\\\">\\n                 {{ config.fields.length }} \\n              </div>\\n            </div>\\n            <button\\n              style=\\\"\\n                padding: 4px 10px;\\n                background: rgba(16, 185, 129, 0.2);\\n                border: 1px solid rgba(16, 185, 129, 0.4);\\n                border-radius: 4px;\\n                color: #10b981;\\n                font-size: 11px;\\n                cursor: pointer;\\n              \\\"\\n              @click=\\\"addFieldInDialog\\\"\\n            >\\n              <i class=\\\"fa-solid fa-plus\\\"></i> \\n            </button>\\n          </div>\\n\\n          <div v-if=\\\"config.fields.length > 0\\\" style=\\\"display: flex; flex-direction: column; gap: 8px\\\">\\n            <div\\n              v-for=\\\"(field, i) in config.fields\\\"\\n              :key=\\\"i\\\"\\n              style=\\\"\\n                background: rgba(15, 23, 42, 0.6);\\n                border: 1px solid rgba(148, 163, 184, 0.15);\\n                border-radius: 6px;\\n                padding: 8px 10px;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n              \\\"\\n            >\\n              <span style=\\\"color: #60a5fa; font-weight: 600; font-size: 11px; min-width: 50px\\\">{{ i + 1 }}:</span>\\n              <input\\n                v-model=\\\"field.label\\\"\\n                type=\\\"text\\\"\\n                placeholder=\\\"\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  padding: 4px 8px;\\n                  background: #1e1e1e;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 4px;\\n                  color: #e0e0e0;\\n                  font-size: 11px;\\n                \\\"\\n              />\\n              <input\\n                v-model=\\\"field.name\\\"\\n                type=\\\"text\\\"\\n                placeholder=\\\"\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  padding: 4px 8px;\\n                  background: #1e1e1e;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 4px;\\n                  color: #e0e0e0;\\n                  font-size: 11px;\\n                \\\"\\n              />\\n              <button\\n                v-if=\\\"field.icon\\\"\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: rgba(139, 92, 246, 0.2);\\n                  border: 1px solid rgba(139, 92, 246, 0.3);\\n                  border-radius: 4px;\\n                  color: #a78bfa;\\n                  font-size: 11px;\\n                  cursor: pointer;\\n                  min-width: 30px;\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"field.icon = ''\\\"\\n              >\\n                <i :class=\\\"field.icon\\\"></i>\\n              </button>\\n              <button\\n                :disabled=\\\"config.fields.length <= 1\\\"\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: rgba(239, 68, 68, 0.2);\\n                  border: 1px solid rgba(239, 68, 68, 0.3);\\n                  border-radius: 4px;\\n                  color: #ef4444;\\n                  font-size: 11px;\\n                  cursor: pointer;\\n                \\\"\\n                :style=\\\"{\\n                  opacity: config.fields.length <= 1 ? 0.4 : 1,\\n                  cursor: config.fields.length <= 1 ? 'not-allowed' : 'pointer',\\n                }\\\"\\n                title=\\\"\\\"\\n                @click=\\\"removeFieldInDialog(i)\\\"\\n              >\\n                <i class=\\\"fa-solid fa-trash\\\"></i>\\n              </button>\\n            </div>\\n          </div>\\n          <div v-else style=\\\"color: #fbbf24; font-size: 12px; padding: 8px 0\\\"> \\\"\\\"</div>\\n        </div>\\n\\n        <textarea\\n          v-model=\\\"aiPrompt\\\"\\n          placeholder=\\\"&#10; &#10; &#10; &#10; &#10;&#10; &#10; AI &#10; \\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 12px;\\n            background: #1e1e1e;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            min-height: 120px;\\n            margin-bottom: 16px;\\n            resize: vertical;\\n          \\\"\\n        ></textarea>\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #fff;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"showAI = false\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"generateWithAI\\\"\\n          >\\n            <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n        <div v-if=\\\"originalAiPrompt\\\" style=\\\"margin-top: 16px; display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #ffc107;\\n              border: none;\\n              border-radius: 6px;\\n              color: #000;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            :disabled=\\\"isModifyingAi\\\"\\n            @click=\\\"showAiModifyDialog = true\\\"\\n          >\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isModifyingAi ? '...' : 'AI ' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <AIModifyDialog\\n      :show=\\\"showAiModifyDialog\\\"\\n      :is-modifying=\\\"isModifyingAi\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI \\\"\\n      :examples=\\\"[\\n        '',\\n        '',\\n        '',\\n        ''\\n      ]\\\"\\n      @close=\\\"showAiModifyDialog = false\\\"\\n      @confirm=\\\"modifyWithAI\\\"\\n    />\\n\\n    <!-- XML  -->\\n    <div\\n      v-if=\\\"showXmlDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"showXmlDialog = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 24px;\\n          width: 90%;\\n          max-width: 700px;\\n          max-height: 80vh;\\n          overflow-y: auto;\\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <h3 style=\\\"margin: 0 0 16px 0; color: #f59e0b; font-size: 18px; font-weight: 600\\\">\\n          <i class=\\\"fa-solid fa-robot\\\" style=\\\"margin-right: 8px\\\"></i>\\n          AI  XML \\n        </h3>\\n\\n        <div\\n          style=\\\"\\n            background: rgba(251, 191, 36, 0.1);\\n            border: 1px solid rgba(251, 191, 36, 0.3);\\n            border-radius: 6px;\\n            padding: 12px;\\n            margin-bottom: 16px;\\n          \\\"\\n        >\\n          <p style=\\\"margin: 0; color: #fbbf24; font-size: 12px; line-height: 1.6\\\">\\n            <i class=\\\"fa-solid fa-circle-info\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <strong></strong> AI\\n            <i class=\\\"fa-solid fa-cog\\\"></i>  API \\n          </p>\\n        </div>\\n\\n        <div style=\\\"margin-bottom: 16px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px\\\">\\n             XML \\n          </label>\\n          <textarea\\n            v-model=\\\"xmlInput\\\"\\n            placeholder=\\\"&#10;<state_bar>&#10;<i></i>&#10;<></>&#10;<></>&#10;</state_bar>\\\"\\n            style=\\\"\\n              width: 100%;\\n              min-height: 200px;\\n              padding: 12px;\\n              background: #1a1a1a;\\n              border: 1px solid #404040;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-family: 'Consolas', 'Monaco', monospace;\\n              font-size: 13px;\\n              resize: vertical;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #404040;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"showXmlDialog = false\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              cursor: pointer;\\n              margin-right: 10px;\\n            \\\"\\n            :disabled=\\\"!xmlInput.trim() || isParsingXml\\\"\\n            @click=\\\"parseXmlWithAI\\\"\\n          >\\n            <i class=\\\"fa-solid fa-robot\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isParsingXml ? 'AI ...' : '' }}\\n          </button>\\n          <button\\n            v-if=\\\"originalXmlInput\\\"\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #ffc107;\\n              border: none;\\n              border-radius: 6px;\\n              color: #000;\\n              font-size: 13px;\\n              cursor: pointer;\\n            \\\"\\n            :disabled=\\\"isModifyingXml\\\"\\n            @click=\\\"showXmlModifyDialog = true\\\"\\n          >\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isModifyingXml ? '...' : 'AI ' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- XML  -->\\n    <AIModifyDialog\\n      :show=\\\"showXmlModifyDialog\\\"\\n      :is-modifying=\\\"isModifyingXml\\\"\\n      title=\\\"AI  XML \\\"\\n      description=\\\"AI \\\"\\n      :examples=\\\"[\\n        '',\\n        '',\\n        '',\\n        '3'\\n      ]\\\"\\n      @close=\\\"showXmlModifyDialog = false\\\"\\n      @confirm=\\\"modifyXmlWithAI\\\"\\n    />\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showAiFieldDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"showAiFieldDialog = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 24px;\\n          width: 90%;\\n          max-width: 700px;\\n          max-height: 80vh;\\n          overflow-y: auto;\\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <h3 style=\\\"margin: 0 0 16px 0; color: #10b981; font-size: 18px; font-weight: 600\\\">\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 8px\\\"></i>\\n          AI \\n        </h3>\\n\\n        <div\\n          style=\\\"\\n            background: rgba(16, 185, 129, 0.1);\\n            border: 1px solid rgba(16, 185, 129, 0.3);\\n            border-radius: 6px;\\n            padding: 12px;\\n            margin-bottom: 16px;\\n          \\\"\\n        >\\n          <p style=\\\"margin: 0; color: #10b981; font-size: 12px; line-height: 1.6\\\">\\n            <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <strong></strong>AI \\n          </p>\\n        </div>\\n\\n        <div style=\\\"margin-bottom: 16px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"aiFieldDescription\\\"\\n            placeholder=\\\"&#10;&#10;- &#10;- &#10;- &#10;- &#10;- &#10;- &#10;- \\\"\\n            style=\\\"\\n              width: 100%;\\n              min-height: 180px;\\n              padding: 12px;\\n              background: #1a1a1a;\\n              border: 1px solid #404040;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              line-height: 1.6;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #404040;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"showAiFieldDialog = false\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              cursor: pointer;\\n              margin-right: 10px;\\n            \\\"\\n            :disabled=\\\"!aiFieldDescription.trim() || isGeneratingFields\\\"\\n            @click=\\\"generateFieldsWithAI\\\"\\n          >\\n            <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isGeneratingFields ? 'AI ...' : '' }}\\n          </button>\\n          <button\\n            v-if=\\\"originalFieldDescription\\\"\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #ffc107;\\n              border: none;\\n              border-radius: 6px;\\n              color: #000;\\n              font-size: 13px;\\n              cursor: pointer;\\n            \\\"\\n            :disabled=\\\"isModifyingField\\\"\\n            @click=\\\"showFieldModifyDialog = true\\\"\\n          >\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isModifyingField ? '...' : 'AI ' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <AIModifyDialog\\n      :show=\\\"showFieldModifyDialog\\\"\\n      :is-modifying=\\\"isModifyingField\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI \\\"\\n      :examples=\\\"[\\n        '',\\n        '3',\\n        '',\\n        '2'\\n      ]\\\"\\n      @close=\\\"showFieldModifyDialog = false\\\"\\n      @confirm=\\\"modifyFieldWithAI\\\"\\n    />\\n\\n    <!--  -->\\n    <ProgressDialog ref=\\\"progressDialogRef\\\" :show=\\\"showProgress\\\" title=\\\"AI \\\" />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { computed, onMounted, ref, watch } from 'vue';\\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\\nimport AIModifyDialog from './AIModifyDialog.vue';\\nimport ProgressDialog from './ProgressDialog.vue';\\n\\ninterface Field {\\n  name: string;\\n  label: string;\\n  icon: string;\\n}\\n\\ninterface Config {\\n  name: string;\\n  findRegex: string;\\n  fields: Field[];\\n}\\n\\ninterface CodeFile {\\n  path: string;\\n  content: string;\\n}\\n\\n//  settings store\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// \\nconst templates = {\\n  simple: {\\n    name: '',\\n    findRegex: '<-CHARACTER_STATUS->',\\n    fields: [\\n      { name: '', label: '', icon: 'fa-solid fa-user' },\\n      { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\\n      { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\\n      { name: '', label: '', icon: 'fa-solid fa-heart' },\\n    ],\\n  },\\n  abo: {\\n    name: 'ABO',\\n    findRegex:\\n      '<-ENVIRONMENT_DATA->[\\\\\\\\r\\\\\\\\n]*\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*<-CHARACTER_STATUS->[\\\\\\\\r\\\\\\\\n]*\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*',\\n    fields: [\\n      { name: '', label: '', icon: 'fa-solid fa-calendar' },\\n      { name: '', label: '', icon: 'fa-solid fa-clock' },\\n      { name: '', label: '', icon: 'fa-solid fa-location-dot' },\\n      { name: '', label: '', icon: 'fa-solid fa-cloud-sun' },\\n      { name: '', label: '', icon: 'fa-solid fa-shirt' },\\n      { name: '', label: '', icon: 'fa-solid fa-heart' },\\n      { name: '', label: '', icon: 'fa-solid fa-fire' },\\n      { name: '', label: '', icon: 'fa-solid fa-bookmark' },\\n    ],\\n  },\\n};\\n\\nconst config = ref<Config>({\\n  name: '',\\n  findRegex: '<-CHARACTER_STATUS->',\\n  fields: [\\n    { name: '', label: '', icon: 'fa-solid fa-user' },\\n    { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\\n    { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\\n    { name: '', label: '', icon: 'fa-solid fa-heart' },\\n  ],\\n});\\n\\nconst files = ref<CodeFile[]>([\\n  { path: 'index.html', content: '' },\\n  { path: 'style.css', content: '' },\\n  { path: 'script.js', content: '' },\\n]);\\n\\nconst currentFile = ref<CodeFile | null>(files.value[0]);\\nconst showAI = ref(false);\\nconst aiPrompt = ref('');\\nconst originalAiPrompt = ref(''); // AI\\nconst showAiModifyDialog = ref(false); // AI\\nconst isModifyingAi = ref(false); // AI\\nconst showIconPickerFor = ref<number | null>(null);\\n\\n// \\nconst showProgress = ref(false);\\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\\n\\n// XML\\nconst originalXmlInput = ref(''); // XML\\nconst showXmlModifyDialog = ref(false);\\nconst isModifyingXml = ref(false);\\n\\n// AI\\nconst originalFieldDescription = ref(''); // \\nconst showFieldModifyDialog = ref(false);\\nconst isModifyingField = ref(false);\\n\\n// XML \\nconst showXmlDialog = ref(false);\\nconst xmlInput = ref('');\\nconst isParsingXml = ref(false);\\n\\n// AI \\nconst showAiFieldDialog = ref(false);\\nconst aiFieldDescription = ref('');\\nconst isGeneratingFields = ref(false);\\n\\n// Font Awesome \\nconst iconList = [\\n  // \\n  'fa-solid fa-cat',\\n  'fa-solid fa-dog',\\n  'fa-solid fa-dove',\\n  'fa-solid fa-fish',\\n  'fa-solid fa-paw',\\n  'fa-solid fa-spider',\\n  'fa-solid fa-horse',\\n  // \\n  'fa-solid fa-heart',\\n  'fa-solid fa-heart-pulse',\\n  // \\n  'fa-solid fa-face-smile',\\n  'fa-solid fa-face-grin-stars',\\n  'fa-solid fa-face-grin-beam',\\n  'fa-solid fa-face-laugh',\\n  // \\n  'fa-solid fa-star',\\n  // \\n  'fa-solid fa-wand-magic-sparkles',\\n  'fa-solid fa-hat-wizard',\\n  'fa-solid fa-bolt',\\n  'fa-solid fa-fire',\\n  'fa-solid fa-meteor',\\n  'fa-solid fa-rocket',\\n  // \\n  'fa-solid fa-sun',\\n  'fa-solid fa-moon',\\n  'fa-solid fa-cloud',\\n  'fa-solid fa-seedling',\\n  'fa-solid fa-leaf',\\n  'fa-solid fa-tree',\\n  'fa-solid fa-snowflake',\\n  // \\n  'fa-solid fa-cake-candles',\\n  'fa-solid fa-candy-cane',\\n  'fa-solid fa-apple',\\n  'fa-solid fa-ice-cream',\\n  // \\n  'fa-solid fa-gem',\\n  'fa-solid fa-crown',\\n  'fa-solid fa-gift',\\n  'fa-solid fa-ribbon',\\n  'fa-solid fa-medal',\\n  'fa-solid fa-trophy',\\n  // \\n  'fa-solid fa-shield',\\n  'fa-solid fa-scroll',\\n  // \\n  'fa-solid fa-book',\\n  'fa-solid fa-book-open',\\n  'fa-solid fa-feather',\\n  'fa-solid fa-pen',\\n  'fa-solid fa-paintbrush',\\n  'fa-solid fa-palette',\\n  // \\n  'fa-solid fa-music',\\n  'fa-solid fa-headphones',\\n  'fa-solid fa-gamepad',\\n  'fa-solid fa-chess',\\n  'fa-solid fa-puzzle-piece',\\n  'fa-solid fa-dice',\\n  // \\n  'fa-solid fa-mobile-screen',\\n  'fa-solid fa-tablet',\\n  'fa-solid fa-laptop',\\n  'fa-solid fa-camera',\\n  'fa-solid fa-video',\\n  'fa-solid fa-tv',\\n  // \\n  'fa-solid fa-bell',\\n  'fa-solid fa-envelope',\\n];\\n\\n// \\nconst worldbookContent = computed(() => {\\n  // {{}}\\n  const placeholders = config.value.fields.map(f => `{{${f.label || f.name}}}`).join('|');\\n\\n  // \\n  const fieldDefinitions = config.value.fields\\n    .map(f => {\\n      const iconDesc = f.icon ? `<i class=\\\"${f.icon}\\\"></i> ` : '';\\n      const label = f.label || f.name;\\n      return `  - ${iconDesc}${label}{{char}}${label}`;\\n    })\\n    .join('\\\\n');\\n\\n  // \\n  const exampleValues = config.value.fields.map(f => f.label || f.name || '').join('|');\\n\\n  // \\n  const parseRegexStructure = (regex: string, fields: Field[]): { formatExample: string; exampleOutput: string } => {\\n    //  <-ENVIRONMENT_DATA->\\n    const triggerMatches = regex.match(/<-[^>]+->/g) || [];\\n    \\n    if (triggerMatches.length === 0) {\\n      // \\n      const placeholders = fields.map(f => `{{${f.label || f.name}}}`).join('|');\\n      const exampleValues = fields.map(f => f.label || f.name).join('|');\\n      return {\\n        formatExample: `|${placeholders}|`,\\n        exampleOutput: `|${exampleValues}|`\\n      };\\n    }\\n\\n    // \\n    let normalizedRegex = regex\\n      .replace(/\\\\\\\\\\\\\\\\/g, '\\\\\\\\')  // \\\\\\\\ -> \\\\\\n      .replace(/\\\\\\\\\\\\|/g, '|')   // \\\\| -> |\\n      .replace(/\\\\\\\\\\\\(/g, '(')   // \\\\( -> (\\n      .replace(/\\\\\\\\\\\\)/g, ')')   // \\\\) -> )\\n      .replace(/\\\\\\\\\\\\[/g, '[')   // \\\\[ -> [\\n      .replace(/\\\\\\\\\\\\]/g, ']')   // \\\\] -> ]\\n      .replace(/\\\\\\\\\\\\+/g, '+');  // \\\\+ -> +\\n\\n    console.log(' :', regex);\\n    console.log(' :', normalizedRegex);\\n\\n    // \\n    const lines: string[] = [];\\n    const exampleLines: string[] = [];\\n    let fieldIndex = 0;\\n    \\n    // \\n    const parts = normalizedRegex.split(/(<-[^>]+->)/);\\n    console.log(' :', parts);\\n    \\n    for (let i = 0; i < parts.length; i++) {\\n      const part = parts[i];\\n      \\n      // \\n      if (part.match(/<-[^>]+->/)) {\\n        lines.push(part);\\n        exampleLines.push(part);\\n        console.log(` : ${part}`);\\n      }\\n      // \\n      else if (part.trim().length > 0 && !part.match(/<-[^>]+->/)) {\\n        // \\n        const allCaptures = part.match(/\\\\([^\\\\)]+\\\\)/g) || [];\\n        const totalCount = allCaptures.length;\\n        console.log(`  (100): \\\"${part.substring(0, 100)}\\\"`);\\n        console.log(` :`, allCaptures);\\n        console.log(` : ${totalCount}, : ${fieldIndex}, : ${fields.length}`);\\n        \\n        if (totalCount === 0) {\\n          console.warn(` `);\\n          continue;\\n        }\\n        \\n        // 4\\n        const perLine = 4;\\n        \\n        for (let offset = 0; offset < totalCount; offset += perLine) {\\n          const count = Math.min(perLine, totalCount - offset);\\n          //  fieldIndex < fields.length \\n          if (count > 0) {\\n            const segmentFields = fields.slice(fieldIndex, fieldIndex + count);\\n            // \\n            while (segmentFields.length < count) {\\n              segmentFields.push({ name: `${fieldIndex + segmentFields.length + 1}`, label: `${fieldIndex + segmentFields.length + 1}`, icon: '' });\\n            }\\n            const placeholders = segmentFields.map(f => `{{${f.label || f.name}}}`).join('|');\\n            const examples = segmentFields.map(f => f.label || f.name).join('|');\\n            lines.push(`|${placeholders}|`);\\n            exampleLines.push(`|${examples}|`);\\n            console.log(` : |${examples}|`);\\n            fieldIndex += count;\\n          }\\n        }\\n      }\\n    }\\n\\n    console.log(' :', lines.join('\\\\n'));\\n    console.log(' :', exampleLines.join('\\\\n'));\\n\\n    return {\\n      formatExample: lines.join('\\\\n'),\\n      exampleOutput: exampleLines.join('\\\\n')\\n    };\\n  };\\n\\n  const { formatExample, exampleOutput } = parseRegexStructure(config.value.findRegex, config.value.fields);\\n\\n  return `<status_rule>\\n#{{char}}\\n\\n##\\n<status>\\n${formatExample}\\n</status>\\n\\n##\\n${fieldDefinitions || '  - '}\\n\\n##\\n\\n<status>\\n${exampleOutput}\\n</status>\\n\\n##\\n1. ** <status> **\\n   -  <status>\\n   -  </status>\\n   -  \\n\\n2. ****\\n   -  <-ENVIRONMENT_DATA->\\n   -  | \\n   - \\n   - \\n\\n3. ****\\n   -  |: |: |\\n   -  |||\\n   - \\n\\n4. ****\\n   - \\n   - \\n   - \\n   - \\n\\n5. ****\\n   - \\n   - {{}} \\n   -  {{char}}  {{user}} \\n</status_rule>`;\\n});\\n\\n//  HTML\\nconst previewHtml = computed(() => {\\n  const htmlFile = files.value.find(f => f.path === 'index.html');\\n  const cssFile = files.value.find(f => f.path === 'style.css');\\n  const jsFile = files.value.find(f => f.path === 'script.js');\\n\\n  if (!htmlFile) return '';\\n\\n  const scriptTag = 'script';\\n  const styleTag = 'style';\\n\\n  //  $1, $2 \\n  let previewContent = htmlFile.content || '';\\n  config.value.fields.forEach((field, i) => {\\n    const exampleValue = field.name || `${i + 1}`;\\n    previewContent = previewContent.replace(new RegExp(`\\\\\\\\$${i + 1}(?!\\\\\\\\d)`, 'g'), exampleValue);\\n  });\\n\\n  return `<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\\\">\\n  <${styleTag}>\\n    html, body {\\n      margin: 0;\\n      padding: 0;\\n      width: 100%;\\n      height: auto;\\n      min-height: 800px;\\n      overflow: visible;\\n    }\\n    ${cssFile?.content || ''}\\n  </${styleTag}>\\n  <${scriptTag} src=\\\"https://code.jquery.com/jquery-3.7.1.min.js\\\"></${scriptTag}>\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\\\">\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\\\"></${scriptTag}>\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\\\"></${scriptTag}>\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\\\"></${scriptTag}>\\n</head>\\n<body>\\n  ${previewContent}\\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\\n</body>\\n</html>`;\\n});\\n\\n// \\nfunction updatePreview() {\\n  // \\n}\\n\\n// \\nfunction addField() {\\n  config.value.fields.push({ name: '', label: '', icon: '' });\\n}\\n\\n// \\nfunction removeField(index: number) {\\n  config.value.fields.splice(index, 1);\\n}\\n\\n//  XML \\nfunction showXmlParseDialog() {\\n  showXmlDialog.value = true;\\n  xmlInput.value = '';\\n}\\n\\n//  AI \\nfunction showAiFieldGeneratorDialog() {\\n  showAiFieldDialog.value = true;\\n  aiFieldDescription.value = '';\\n}\\n\\n// AI  XML \\nasync function parseXmlWithAI() {\\n  if (!xmlInput.value.trim()) {\\n    toastr.warning(' XML ');\\n    return;\\n  }\\n\\n  //  API \\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\n    toastr.error(' API \\\" \\\" API ', '', {\\n      timeOut: 0,\\n      extendedTimeOut: 0,\\n      closeButton: true,\\n    });\\n    return;\\n  }\\n\\n  // \\n  originalXmlInput.value = xmlInput.value;\\n\\n  isParsingXml.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage(' XML...');\\n    progressDialogRef.value?.addDetail(`XML : ${xmlInput.value.length} `);\\n    const systemPrompt = ` XML  XML \\n\\n1. **** XML  <i><2i><><> \\n2. ****\\n   -  <i><2i><3i> \\n   -  <><>\\n3. **** namelabelicon\\n\\n** JSON **\\n\\n[\\n  { \\\"name\\\": \\\"1\\\", \\\"label\\\": \\\"1\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" },\\n  { \\\"name\\\": \\\"2\\\", \\\"label\\\": \\\"2\\\", \\\"icon\\\": \\\"\\\" }\\n]\\n\\n****\\n- name  date, location, status\\n- label  \\n- icon  Font Awesome \\n- **** JSON \\n- **** JSON\\n\\n\\n<state_bar>\\n<i></i>\\n<></>\\n<></>\\n</state_bar>\\n\\n\\n[\\n  { \\\"name\\\": \\\"content\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"\\\" },\\n  { \\\"name\\\": \\\"date\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-calendar\\\" },\\n  { \\\"name\\\": \\\"physical_status\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-heart-pulse\\\" }\\n]`;\\n\\n    const userPrompt = ` XML \\n\\n\\\\`\\\\`\\\\`xml\\n${xmlInput.value.trim()}\\n\\\\`\\\\`\\\\`\\n\\n JSON `;\\n\\n    console.log('  AI  XML...');\\n    console.log('  API:', settings.value.api_endpoint);\\n    console.log(' :', settings.value.model);\\n\\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage(' XML  AI ...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    console.log(' :', apiUrl);\\n\\n    //  AI API\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI  XML ...');\\n\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: systemPrompt,\\n          },\\n          {\\n            role: 'user',\\n            content: userPrompt,\\n          },\\n        ],\\n        max_tokens: 2000,\\n        temperature: 0.7,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API: ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n    console.log(' AI :', result);\\n\\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\\n      throw new Error('AI');\\n    }\\n\\n    const aiResponse = result.choices[0].message.content;\\n    console.log(' AI :', aiResponse);\\n\\n    // =====  =====\\n    if (!aiResponse || typeof aiResponse !== 'string') {\\n      throw new Error('AI ');\\n    }\\n\\n    //  JSON\\n    let jsonText = aiResponse.trim();\\n\\n    //  markdown \\n    jsonText = jsonText.replace(/^```(?:json)?\\\\s*\\\\n?/i, '').replace(/\\\\n?```\\\\s*$/i, '');\\n\\n    //  JSON  AI \\n    const jsonMatch = jsonText.match(/\\\\[\\\\s*{[\\\\s\\\\S]*}\\\\s*\\\\]/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    //  JSON\\n    let parsedFields: any;\\n    try {\\n      parsedFields = JSON.parse(jsonText);\\n    } catch (parseError: any) {\\n      throw new Error(\\n        `AI  JSON \\\\n\\\\n AI \\\\n\\\\n200:\\\\n${result.slice(0, 200)}`,\\n      );\\n    }\\n\\n    if (!Array.isArray(parsedFields)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    const validFields = parsedFields.filter((field: any) => {\\n      return field.name && field.label;\\n    });\\n\\n    if (validFields.length === 0) {\\n      throw new Error(' AI ');\\n    }\\n\\n    // \\n    config.value.fields = validFields.map((field: any) => ({\\n      name: field.name || '',\\n      label: field.label || '',\\n      icon: field.icon || '',\\n    }));\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail(` ${validFields.length} `);\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n    showXmlDialog.value = false;\\n    xmlInput.value = '';\\n      toastr.success(` ${validFields.length} `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error(' XML :', error);\\n    showProgress.value = false;\\n\\n    // \\n    const errorMsg = error.message || '';\\n\\n    //  API \\n    if (\\n      errorMsg.includes('API') ||\\n      errorMsg.includes('403') ||\\n      errorMsg.includes('401') ||\\n      errorMsg.includes('Unauthorized')\\n    ) {\\n      toastr.error(' API \\\\n1. API \\\\n2. \\\\n3. ', '', {\\n        timeOut: 0,\\n        extendedTimeOut: 0,\\n        closeButton: true,\\n      });\\n    } else {\\n      toastr.error(`: ${errorMsg}`, '', {\\n        timeOut: 8000,\\n        closeButton: true,\\n      });\\n    }\\n  } finally {\\n    isParsingXml.value = false;\\n  }\\n}\\n\\n// AI  XML \\nasync function modifyXmlWithAI(modifyInstruction: string) {\\n  if (!originalXmlInput.value) {\\n    window.toastr.warning(' XML');\\n    return;\\n  }\\n\\n  isModifyingXml.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\\n\\n    const systemPrompt = ` XML  XML `;\\n\\n    const userPrompt = `#  XML\\n${originalXmlInput.value}\\n\\n# \\n${modifyInstruction}\\n\\n XML \\nJSON \\n[\\n  { \\\"name\\\": \\\"1\\\", \\\"label\\\": \\\"1\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" },\\n  { \\\"name\\\": \\\"2\\\", \\\"label\\\": \\\"2\\\", \\\"icon\\\": \\\"\\\" }\\n]`;\\n\\n    progressDialogRef.value?.setProgress(40);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        max_tokens: 2000,\\n        temperature: 0.7,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.statusText}`);\\n    }\\n\\n    progressDialogRef.value?.setProgress(70);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const result = await response.json();\\n    const aiResponse = result.choices[0]?.message?.content || '';\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    //  JSON\\n    let jsonText = aiResponse.trim().replace(/^```(?:json)?\\\\s*\\\\n?/i, '').replace(/\\\\n?```\\\\s*$/i, '');\\n    const jsonMatch = jsonText.match(/\\\\[\\\\s*{[\\\\s\\\\S]*}\\\\s*\\\\]/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    const parsedFields = JSON.parse(jsonText);\\n    if (!Array.isArray(parsedFields)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    config.value.fields = parsedFields.map((field: any) => ({\\n      name: field.name || '',\\n      label: field.label || field.name || '',\\n      icon: field.icon || '',\\n    }));\\n\\n    // \\n    originalXmlInput.value += `\\\\n\\\\n${modifyInstruction}`;\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n    showXmlModifyDialog.value = false;\\n      window.toastr.success(' AI ');\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n    window.toastr.error('AI : ' + error.message);\\n  } finally {\\n    isModifyingXml.value = false;\\n  }\\n}\\n\\n// AI \\nasync function generateFieldsWithAI() {\\n  if (!aiFieldDescription.value.trim()) {\\n    toastr.warning('');\\n    return;\\n  }\\n\\n  //  API \\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\n    toastr.error(' API \\\" \\\" API ', '', {\\n      timeOut: 0,\\n      extendedTimeOut: 0,\\n      closeButton: true,\\n    });\\n    return;\\n  }\\n\\n  // \\n  originalFieldDescription.value = aiFieldDescription.value;\\n\\n  isGeneratingFields.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail('AI ');\\n    const systemPrompt = `\\n\\n1. ****ABO\\n2. ****\\n3. **** namelabelicon\\n\\n** JSON **\\n\\n[\\n  { \\\"name\\\": \\\"1\\\", \\\"label\\\": \\\"1\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" },\\n  { \\\"name\\\": \\\"2\\\", \\\"label\\\": \\\"2\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" }\\n]\\n\\n****\\n- name  realm, spiritual_power, location\\n- label  \\n- icon  Font Awesome  fa-solid fa-star, fa-solid fa-bolt\\n- **** JSON \\n- **** JSON\\n\\n\\n- fa-solid fa-user, fa-solid fa-user-ninja, fa-solid fa-user-secret\\n- fa-solid fa-heart, fa-solid fa-heart-pulse, fa-solid fa-star\\n- fa-solid fa-location-dot, fa-solid fa-map-marker\\n- fa-solid fa-clock, fa-solid fa-calendar\\n- fa-solid fa-bolt, fa-solid fa-fire, fa-solid fa-droplet\\n- fa-solid fa-book, fa-solid fa-wand-magic-sparkles, fa-solid fa-scroll\\n- fa-solid fa-heart, fa-solid fa-face-smile, fa-solid fa-face-sad-tear\\n\\n\\n\\\"\\\"\\n\\n[\\n  { \\\"name\\\": \\\"name\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-user-ninja\\\" },\\n  { \\\"name\\\": \\\"realm\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-star\\\" },\\n  { \\\"name\\\": \\\"spiritual_power\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-bolt\\\" },\\n  { \\\"name\\\": \\\"cultivation_method\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-scroll\\\" },\\n  { \\\"name\\\": \\\"location\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-location-dot\\\" },\\n  { \\\"name\\\": \\\"status\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-heart-pulse\\\" }\\n]`;\\n\\n    const userPrompt = `\\n\\n${aiFieldDescription.value.trim()}\\n\\n JSON `;\\n\\n    console.log('  AI ...');\\n    console.log('  API:', settings.value.api_endpoint);\\n    console.log(' :', settings.value.model);\\n\\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage(' AI...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    console.log(' :', apiUrl);\\n\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    //  AI API\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: systemPrompt,\\n          },\\n          {\\n            role: 'user',\\n            content: userPrompt,\\n          },\\n        ],\\n        max_tokens: 3000,\\n        temperature: 0.8,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API: ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n    console.log(' AI :', result);\\n\\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\\n      throw new Error('AI');\\n    }\\n\\n    const aiResponse = result.choices[0].message.content;\\n    console.log(' AI :', aiResponse);\\n\\n    // =====  =====\\n    if (!aiResponse || typeof aiResponse !== 'string') {\\n      throw new Error('AI ');\\n    }\\n\\n    //  JSON\\n    let jsonText = aiResponse.trim();\\n\\n    //  markdown \\n    jsonText = jsonText.replace(/^```(?:json)?\\\\s*\\\\n?/i, '').replace(/\\\\n?```\\\\s*$/i, '');\\n\\n    //  JSON  AI \\n    const jsonMatch = jsonText.match(/\\\\[\\\\s*{[\\\\s\\\\S]*}\\\\s*\\\\]/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    //  JSON\\n    let parsedFields: any;\\n    try {\\n      parsedFields = JSON.parse(jsonText);\\n    } catch (parseError: any) {\\n      throw new Error(\\n        `AI  JSON \\\\n\\\\n AI \\\\n\\\\n200:\\\\n${aiResponse.slice(0, 200)}`,\\n      );\\n    }\\n\\n    if (!Array.isArray(parsedFields)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    const validFields = parsedFields.filter((field: any) => {\\n      return field.name && field.label;\\n    });\\n\\n    if (validFields.length === 0) {\\n      throw new Error(' AI ');\\n    }\\n\\n    // \\n    config.value.fields = validFields.map((field: any) => ({\\n      name: field.name || '',\\n      label: field.label || '',\\n      icon: field.icon || '',\\n    }));\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail(` ${validFields.length} `);\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n    showAiFieldDialog.value = false;\\n    aiFieldDescription.value = '';\\n      toastr.success(` ${validFields.length} `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error(' AI :', error);\\n    showProgress.value = false;\\n\\n    // \\n    const errorMsg = error.message || '';\\n\\n    //  API \\n    if (\\n      errorMsg.includes('API') ||\\n      errorMsg.includes('403') ||\\n      errorMsg.includes('401') ||\\n      errorMsg.includes('Unauthorized')\\n    ) {\\n      toastr.error(' API \\\\n1. API \\\\n2. \\\\n3. ', '', {\\n        timeOut: 0,\\n        extendedTimeOut: 0,\\n        closeButton: true,\\n      });\\n    } else {\\n      toastr.error(`: ${errorMsg}`, '', {\\n        timeOut: 8000,\\n        closeButton: true,\\n      });\\n    }\\n  } finally {\\n    isGeneratingFields.value = false;\\n  }\\n}\\n\\n// \\nfunction showIconPicker(index: number) {\\n  showIconPickerFor.value = index;\\n}\\n\\n// \\nfunction selectIcon(iconClass: string) {\\n  if (showIconPickerFor.value !== null) {\\n    config.value.fields[showIconPickerFor.value].icon = iconClass;\\n    showIconPickerFor.value = null;\\n  }\\n}\\n\\n// AI \\nasync function modifyFieldWithAI(modifyInstruction: string) {\\n  if (!originalFieldDescription.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isModifyingField.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\\n\\n    const systemPrompt = ``;\\n\\n    const userPrompt = `# \\n${originalFieldDescription.value}\\n\\n# \\n${modifyInstruction}\\n\\n\\nJSON \\n[\\n  { \\\"name\\\": \\\"1\\\", \\\"label\\\": \\\"1\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" },\\n  { \\\"name\\\": \\\"2\\\", \\\"label\\\": \\\"2\\\", \\\"icon\\\": \\\"\\\" }\\n]`;\\n\\n    progressDialogRef.value?.setProgress(40);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        max_tokens: 2000,\\n        temperature: 0.7,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.statusText}`);\\n    }\\n\\n    progressDialogRef.value?.setProgress(70);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const result = await response.json();\\n    const aiResponse = result.choices[0]?.message?.content || '';\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    //  JSON\\n    let jsonText = aiResponse.trim().replace(/^```(?:json)?\\\\s*\\\\n?/i, '').replace(/\\\\n?```\\\\s*$/i, '');\\n    const jsonMatch = jsonText.match(/\\\\[\\\\s*{[\\\\s\\\\S]*}\\\\s*\\\\]/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    const parsedFields = JSON.parse(jsonText);\\n    if (!Array.isArray(parsedFields)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    config.value.fields = parsedFields.map((field: any) => ({\\n      name: field.name || '',\\n      label: field.label || field.name || '',\\n      icon: field.icon || '',\\n    }));\\n\\n    // \\n    originalFieldDescription.value += `\\\\n\\\\n${modifyInstruction}`;\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n    showFieldModifyDialog.value = false;\\n      window.toastr.success(' AI ');\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n    window.toastr.error('AI : ' + error.message);\\n  } finally {\\n    isModifyingField.value = false;\\n  }\\n}\\n\\n// \\nfunction generateFromFields() {\\n  const fields = config.value.fields;\\n\\n  //  findRegex\\n  const totalFields = fields.length;\\n  \\n  if (totalFields === 0) {\\n    config.value.findRegex = '<-CHARACTER_STATUS->';\\n    console.log(' ');\\n    return;\\n  }\\n  \\n  if (totalFields <= 4) {\\n    // 4\\n    config.value.findRegex = `<-CHARACTER_STATUS->[\\\\\\\\r\\\\\\\\n]*\\\\\\\\|${fields.map(() => '([^|]+)').join('\\\\\\\\|')}\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*`;\\n    console.log('  findRegex ():', config.value.findRegex);\\n    console.log(' :', totalFields);\\n  } else {\\n    // 4\\n    // 4\\n    const perLine = totalFields <= 8 ? Math.ceil(totalFields / 2) : 4;\\n    \\n    // \\n    const firstHalf = Math.min(\\n      Math.ceil(totalFields / 2),\\n      totalFields <= 12 ? 4 : Math.ceil(totalFields / 3)\\n    );\\n    \\n    const lines: string[] = [];\\n    \\n    //  + \\n    lines.push('<-ENVIRONMENT_DATA->[\\\\\\\\r\\\\\\\\n]*');\\n    for (let i = 0; i < firstHalf; i += perLine) {\\n      const count = Math.min(perLine, firstHalf - i);\\n      lines.push('\\\\\\\\|' + fields.slice(i, i + count).map(() => '([^|]+)').join('\\\\\\\\|') + '\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*');\\n    }\\n    \\n    //  + perLine\\n    lines.push('<-CHARACTER_STATUS->[\\\\\\\\r\\\\\\\\n]*');\\n    for (let i = firstHalf; i < totalFields; i += perLine) {\\n      const count = Math.min(perLine, totalFields - i);\\n      lines.push('\\\\\\\\|' + fields.slice(i, i + count).map(() => '([^|]+)').join('\\\\\\\\|') + '\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*');\\n    }\\n    \\n    config.value.findRegex = lines.join('');\\n    \\n    console.log('  findRegex ():', config.value.findRegex);\\n    console.log(' :', totalFields);\\n    console.log(' :', `: ${firstHalf}, : ${totalFields - firstHalf}, : ${perLine}`);\\n  }\\n\\n  //  HTML\\n  const fieldsHtml = fields\\n    .map((f, i) => {\\n      const iconPart = f.icon ? `<i class=\\\"${f.icon}\\\"></i> ` : '';\\n      return `        <div class=\\\"status-field\\\">\\n          <div class=\\\"field-label\\\">${iconPart}${f.label || '' + (i + 1)}</div>\\n          <div class=\\\"field-value\\\">$${i + 1}</div>\\n        </div>`;\\n    })\\n    .join('\\\\n');\\n\\n  const htmlContent = `<details>\\n<summary> ${config.value.name} </summary>\\n<div class=\\\"status-card\\\">\\n    <div class=\\\"status-header\\\">\\n        <span></span>\\n        <span>${config.value.name}</span>\\n    </div>\\n    <div class=\\\"status-content\\\">\\n        <div class=\\\"status-grid\\\">\\n${fieldsHtml}\\n        </div>\\n    </div>\\n</div>\\n</details>`;\\n\\n  //  CSS\\n  const cssContent = `.status-card {\\n    font-family: 'Microsoft YaHei', sans-serif;\\n    background: linear-gradient(145deg, #1e293b, #334155);\\n    border-radius: 14px;\\n    margin: 16px 0;\\n    box-shadow: 0 8px 25px rgba(15, 23, 42, 0.4);\\n    overflow: hidden;\\n    border: 1px solid rgba(148, 163, 184, 0.2);\\n    max-width: 600px;\\n}\\n\\n.status-header {\\n    background: linear-gradient(135deg, #0f172a, #1e293b);\\n    color: #e2e8f0;\\n    padding: 12px 20px;\\n    font-size: 15px;\\n    font-weight: 600;\\n    display: flex;\\n    align-items: center;\\n    gap: 8px;\\n    border-bottom: 1px solid rgba(148, 163, 184, 0.15);\\n}\\n\\n.status-content {\\n    padding: 20px;\\n    background: rgba(30, 41, 59, 0.5);\\n}\\n\\n.status-grid {\\n    display: grid;\\n    grid-template-columns: repeat(2, 1fr);\\n    gap: 16px;\\n}\\n\\n.status-field {\\n    background: rgba(30, 41, 59, 0.8);\\n    padding: 16px;\\n    border-radius: 10px;\\n    border-left: 3px solid #6366f1;\\n}\\n\\n.field-label {\\n    font-size: 11px;\\n    color: #94a3b8;\\n    margin-bottom: 8px;\\n    font-weight: 600;\\n    text-transform: uppercase;\\n}\\n\\n.field-value {\\n    font-size: 14px;\\n    color: #e2e8f0;\\n    line-height: 1.5;\\n    font-weight: 600;\\n}`;\\n\\n  //  JS - \\n  const jsContent = `// \\n(function() {\\n  // \\n  setTimeout(function() {\\n    console.log('${config.value.name} ');\\n\\n    // \\n    if (typeof gsap !== 'undefined') {\\n      gsap.from('.status-field', {\\n        opacity: 0,\\n        y: 20,\\n        duration: 0.5,\\n        stagger: 0.1,\\n        ease: 'power2.out'\\n      });\\n\\n      // \\n      $('.status-field').hover(\\n        function() {\\n          gsap.to($(this), { scale: 1.05, duration: 0.2 });\\n        },\\n        function() {\\n          gsap.to($(this), { scale: 1, duration: 0.2 });\\n        }\\n      );\\n    }\\n  }, 100);\\n})();`;\\n\\n  files.value[0].content = htmlContent;\\n  files.value[1].content = cssContent;\\n  files.value[2].content = jsContent;\\n  currentFile.value = files.value[0];\\n\\n  window.toastr.success(' ');\\n}\\n\\n//  AI \\nfunction showAIDialog() {\\n  showAI.value = true;\\n  aiPrompt.value = '';\\n}\\n\\n// \\nfunction addFieldInDialog() {\\n  config.value.fields.push({\\n    name: `${config.value.fields.length + 1}`,\\n    label: `${config.value.fields.length + 1}`,\\n    icon: '',\\n  });\\n}\\n\\n// \\nfunction removeFieldInDialog(index: number) {\\n  if (config.value.fields.length <= 1) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n  config.value.fields.splice(index, 1);\\n}\\n\\n// \\nfunction loadTemplate(templateKey: 'simple' | 'abo') {\\n  const template = templates[templateKey];\\n  if (template) {\\n    config.value = JSON.parse(JSON.stringify(template)); // \\n    window.toastr.success(` \\\"${template.name}\\\"`);\\n  }\\n}\\n\\n// AI \\nasync function generateWithAI() {\\n  if (!aiPrompt.value.trim()) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  // \\n  originalAiPrompt.value = aiPrompt.value;\\n\\n  // \\n  showProgress.value = true;\\n\\n  try {\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.error(' API  API Key');\\n      showProgress.value = false;\\n      return;\\n    }\\n\\n    // 1: \\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${config.value.fields.length} `);\\n    progressDialogRef.value?.addDetail(`: ${settings.value.model}`);\\n\\n    // \\n    const currentFiles = files.value.map(f => `=== ${f.path} ===\\\\n${f.content}`).join('\\\\n\\\\n');\\n\\n    // \\n    const systemPrompt = ` SillyTavern  HTML/CSS/JS \\n\\n Regex  replaceString  AI \\n**{{char}}**{{user}}\\n\\n\\n- Font Awesome \\n- jQuery ($) - \\n- toastr- \\n- gsap- \\n- lodash (_) - \\n\\n\\n-  $1$2$3 \\n- $1 $2 \\n- \\n- ****\\n\\n\\nFILE_START: index.html\\n<details>\\n<summary>  </summary>\\n<div class=\\\"status-card\\\">\\n  <!--  $1, $2, $3  -->\\n  <div class=\\\"field-value\\\">$1</div>\\n</div>\\n</details>\\nFILE_END\\n\\nFILE_START: style.css\\n.status-card {\\n  /*  */\\n}\\nFILE_END\\n\\nFILE_START: script.js\\n(function() {\\n  // \\n  //  $  document\\n})();\\nFILE_END\\n\\n\\n1. index.html  <details>  </details>  <!DOCTYPE>  <html> \\n2. FILE_START  FILE_END ****\\\\\\\\\\\\`\\\\\\\\\\\\`\\\\\\\\\\\\`html\\\"\\\"\\\"html \\n3. HTML $1, $2, $3...\\n4. CSS \\n5. JS  (function() { ... })() $(function() { ... })\\n6.  DOM \\n7. ****`;\\n\\n    const userPrompt = `# \\n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\\\n')}\\n\\n \\n1. HTML  ${config.value.fields.length} \\n2. $1 = ${config.value.fields[0]?.label || '1'}, $2 = ${config.value.fields[1]?.label || '2'}${config.value.fields[2] ? `, $3 = ${config.value.fields[2].label}` : ''}${config.value.fields[3] ? `, $4 = ${config.value.fields[3].label}` : ''}${config.value.fields[4] ? `, $5 = ${config.value.fields[4].label}` : ''}\\n3. \\\"\\\"\\\"\\\"\\\"\\\"\\n4.  $${config.value.fields.length + 1} \\n\\n# \\n**{{char}}****{{user}}**\\nMVU Beta{{char}}stat_data\\n\\n# \\n${config.value.findRegex}\\n\\n# \\n${aiPrompt.value}\\n\\n# \\n${currentFiles}\\n\\n\\n1. \\n2.  ${config.value.fields.length} $1, $2, $3... HTML \\n3. \\n4.  index.htmlstyle.cssscript.js \\n5. `;\\n\\n    // 2: \\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`API : ${settings.value.api_endpoint}`);\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature || 0.7,\\n        max_tokens: settings.value.max_tokens || 65500,\\n      }),\\n    });\\n\\n    // 3: \\n    progressDialogRef.value?.setProgress(40);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(' 10-30 ');\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.statusText}`);\\n    }\\n\\n    const data = await response.json();\\n    const resultText = data.choices[0]?.message?.content || '';\\n\\n    // 4: \\n    progressDialogRef.value?.setProgress(70);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${resultText.length} `);\\n\\n    //  AI \\n    const FILE_START_REGEX = /FILE_START:\\\\s*([^\\\\n]+)\\\\n([\\\\s\\\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\\n    const matches = [...resultText.matchAll(FILE_START_REGEX)];\\n\\n    if (matches.length === 0) {\\n      throw new Error('AI ');\\n    }\\n\\n    for (const match of matches) {\\n      const rawPath = match[1].trim();\\n      const normalizedPath = rawPath.replace(/^\\\\.\\\\//, '');\\n      let content = sanitizeFileContent(normalizedPath, match[2]);\\n\\n      //  FILE_END\\n      if (content.endsWith('FILE_END')) {\\n        content = content.slice(0, -8).trim();\\n      }\\n\\n      const file = files.value.find(f => f.path === normalizedPath);\\n      if (file) {\\n        file.content = content;\\n      } else if (normalizedPath === 'index.html' || normalizedPath === 'style.css' || normalizedPath === 'script.js') {\\n        // \\n        files.value.push({ path: normalizedPath, content: content });\\n      }\\n    }\\n\\n    //  './'\\n    files.value.forEach(file => {\\n      file.path = file.path.replace(/^\\\\.\\\\//, '');\\n    });\\n\\n    //  './index.html' \\n    const uniqueFiles = new Map<string, CodeFile>();\\n    files.value.forEach(file => {\\n      uniqueFiles.set(file.path, file);\\n    });\\n    files.value = Array.from(uniqueFiles.values());\\n\\n    // 5: \\n    progressDialogRef.value?.setProgress(90);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(` ${matches.length} `);\\n\\n    const htmlFile = files.value.find(f => f.path === 'index.html') || files.value[0];\\n    currentFile.value = htmlFile;\\n    updatePreview();\\n\\n    // \\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' AI ');\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showAI.value = false;\\n      window.toastr.success(' AI ');\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n    window.toastr.error('AI : ' + error.message);\\n  }\\n}\\n\\n// AI \\nasync function modifyWithAI(modifyInstruction: string) {\\n  if (!originalAiPrompt.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isModifyingAi.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    // 1: \\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\\n\\n    const currentFiles = files.value.map(f => `=== ${f.path} ===\\\\n${f.content}`).join('\\\\n\\\\n');\\n\\n    const systemPrompt = ` SillyTavern  HTML/CSS/JS \\n\\n\\n1. ** index.htmlstyle.cssscript.js **\\n2. \\n3. \\n4.  FILE_START  FILE_END \\n\\n****`;\\n\\n    const userPrompt = `# \\n${originalAiPrompt.value}\\n\\n# \\n${modifyInstruction}\\n\\n# \\n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\\\n')}\\n\\n# \\n${currentFiles}\\n\\n ****\\n\\nFILE_START: index.html\\n<details>\\n  <!--  HTML $1, $2, $3  -->\\n</details>\\nFILE_END\\n\\nFILE_START: style.css\\n/*  CSS  */\\nFILE_END\\n\\nFILE_START: script.js\\n(function() {\\n  //  JS \\n})();\\nFILE_END\\n\\n****`;\\n\\n    // 2: \\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${files.value.length} `);\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(' 10-30 ');\\n\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: 0.7,\\n        max_tokens: 65500,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.statusText}`);\\n    }\\n\\n    // 3: \\n    progressDialogRef.value?.setProgress(60);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const data = await response.json();\\n    const resultText = data.choices[0]?.message?.content || '';\\n\\n    // 4: \\n    progressDialogRef.value?.setProgress(80);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(`: ${resultText.length} `);\\n\\n    // \\n    const FILE_START_REGEX = /FILE_START:\\\\s*([^\\\\n]+)\\\\n([\\\\s\\\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\\n    const matches = [...resultText.matchAll(FILE_START_REGEX)];\\n\\n    if (matches.length === 0) {\\n      throw new Error('AI ');\\n    }\\n\\n    progressDialogRef.value?.addDetail(` ${matches.length} `);\\n\\n    // \\n    const generatedFiles = matches.map(m => m[1].trim().replace(/^\\\\.\\\\//, ''));\\n    const requiredFiles = ['index.html', 'style.css', 'script.js'];\\n    const missingFiles = requiredFiles.filter(f => !generatedFiles.includes(f));\\n    \\n    if (missingFiles.length > 0) {\\n      progressDialogRef.value?.addDetail(` : AI : ${missingFiles.join(', ')}`);\\n      window.toastr.warning(`AI : ${missingFiles.join(', ')}`, '', {\\n        timeOut: 5000,\\n      });\\n    }\\n\\n    if (matches.length > 0) {\\n      for (const match of matches) {\\n        const normalizedPath = match[1].trim().replace(/^\\\\.\\\\//, '');\\n        let content = sanitizeFileContent(normalizedPath, match[2]);\\n        if (content.endsWith('FILE_END')) {\\n          content = content.slice(0, -8).trim();\\n        }\\n        const file = files.value.find(f => f.path === normalizedPath);\\n        if (file) {\\n          file.content = content;\\n          progressDialogRef.value?.addDetail(` : ${normalizedPath}`);\\n        }\\n      }\\n    }\\n\\n    // 5: \\n    progressDialogRef.value?.setProgress(95);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    // \\n    originalAiPrompt.value += `\\\\n\\\\n${modifyInstruction}`;\\n\\n    updatePreview();\\n\\n    // \\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' AI ');\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showAiModifyDialog.value = false;\\n      window.toastr.success(` AI  ${matches.length} `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n    window.toastr.error('AI : ' + error.message);\\n  } finally {\\n    isModifyingAi.value = false;\\n  }\\n}\\n\\n// \\nasync function copyWorldbook() {\\n  await copyToClipboard(worldbookContent.value, ' ');\\n}\\n\\nfunction sanitizeFileContent(filePath: string, raw: string): string {\\n  let content = raw.trim();\\n\\n  //  markdown ```html ... ```\\n  const fenceMatch = content.match(/^```[a-zA-Z0-9]*\\\\s*([\\\\s\\\\S]*?)\\\\s*```$/);\\n  if (fenceMatch) {\\n    content = fenceMatch[1].trim();\\n  }\\n\\n  //  Python docstring \\\"\\\"\\\"html ... \\\"\\\"\\\"  '''html ... '''\\n  const docstringMatch = content.match(/^(\\\"\\\"\\\"|''')[a-zA-Z0-9]*\\\\s*([\\\\s\\\\S]*?)\\\\s*\\\\1$/);\\n  if (docstringMatch) {\\n    content = docstringMatch[2].trim();\\n  }\\n\\n  //  \\\"\\\"\\\"html  ```html \\n  content = content.replace(/^(```|\\\"\\\"\\\"|''')[a-zA-Z0-9]*\\\\s*\\\\n?/, '');\\n  content = content.replace(/\\\\n?\\\\s*(```|\\\"\\\"\\\"|''')$/, '');\\n\\n  if (filePath.endsWith('.html')) {\\n    content = content.replace(/<!DOCTYPE html>/i, match => match.toUpperCase());\\n  }\\n\\n  return content;\\n}\\n\\n// \\nfunction exportRegex() {\\n  const htmlFile = files.value.find(f => f.path === 'index.html');\\n  const cssFile = files.value.find(f => f.path === 'style.css');\\n  const jsFile = files.value.find(f => f.path === 'script.js');\\n\\n  if (!htmlFile || htmlFile.content.trim() === '') {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\\n    const r = (Math.random() * 16) | 0;\\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\\n    return v.toString(16);\\n  });\\n\\n  // <details> \\n  const scriptTag = 'script';\\n  const styleTag = 'style';\\n\\n  //  <details> \\n  const detailsHtml = htmlFile.content.trim();\\n  const replaceString = `${detailsHtml}\\n<${styleTag}>\\n${cssFile?.content || ''}\\n</${styleTag}>\\n\\n<${scriptTag}>\\n${jsFile?.content || ''}\\n</${scriptTag}>`;\\n\\n  //  findRegex\\n  //  findRegex \\n  // \\n  let regexPattern = config.value.findRegex;\\n  \\n  //  findRegex \\n  const existingCaptureGroups = (regexPattern.match(/\\\\([^)]+\\\\)/g) || []).length;\\n  const fieldCount = config.value.fields.length;\\n  \\n  if (existingCaptureGroups === 0) {\\n    // \\n    regexPattern = `${regexPattern.replace(/[.*+?^${}()|[\\\\]\\\\\\\\]/g, '\\\\\\\\$&')}[\\\\\\\\r\\\\\\\\n]*${Array(fieldCount)\\n    .fill('\\\\\\\\|([^|]+)')\\n    .join('')}\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*`;\\n  }\\n  // \\n\\n  // \\n  const cleanReplaceString = replaceString.replace(/\\\\r\\\\n/g, '\\\\n').replace(/\\\\r/g, '\\\\n');\\n\\n  const regexJson = {\\n    id: uuid,\\n    scriptName: config.value.name,\\n    findRegex: regexPattern,\\n    replaceString: cleanReplaceString,\\n    trimStrings: [],\\n    placement: [2],\\n    disabled: false,\\n    markdownOnly: true,\\n    promptOnly: false,\\n    runOnEdit: true,\\n    substituteRegex: 0,\\n    minDepth: null,\\n    maxDepth: null,\\n  };\\n\\n  //  JSON\\n  const blob = new Blob([JSON.stringify(regexJson, null, 2)], { type: 'application/json' });\\n  const url = URL.createObjectURL(blob);\\n  const a = document.createElement('a');\\n  a.href = url;\\n  a.download = `regex-${config.value.name}.json`;\\n  a.click();\\n  URL.revokeObjectURL(url);\\n\\n  window.toastr.success('  JSON ');\\n}\\n\\n// ====================  ====================\\n\\n// \\nfunction loadSavedConfig() {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    const savedConfig = scriptVars.statusbar_generator_config;\\n\\n    if (savedConfig) {\\n      config.value = { ...config.value, ...savedConfig };\\n      console.log(' ');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n}\\n\\n// \\nfunction saveConfig() {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n\\n    insertOrAssignVariables({ statusbar_generator_config: config.value }, { type: 'script', script_id: scriptId });\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n}\\n\\n// \\nonMounted(() => {\\n  loadSavedConfig();\\n});\\n\\n// \\nwatch(\\n  () => config.value,\\n  () => {\\n    saveConfig();\\n  },\\n  { deep: true },\\n);\\n</script>\\n\\n<style scoped>\\n.statusbar-generator {\\n  padding: 20px;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 20px;\\n  background: #1a1a1a;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tool-section[data-v-1cb40cd0]{margin-bottom:20px}.tool-content[data-v-1cb40cd0]{padding:0 20px 20px 20px}.form-group[data-v-1cb40cd0]{margin-bottom:15px}.generate-btn:hover .shimmer-effect[data-v-1cb40cd0]{left:100%}.output-section[data-v-1cb40cd0]{margin-top:15px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.1)}.code-output[data-v-1cb40cd0]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:15px;position:relative;max-height:400px;overflow-y:auto}.code-output pre[data-v-1cb40cd0]{margin:0;color:#e0e0e0;font-family:'Courier New',monospace;font-size:12px;white-space:pre-wrap;word-wrap:break-word}.copy-btn-abs[data-v-1cb40cd0]{position:absolute;top:8px;right:8px;background:linear-gradient(135deg,rgba(74,158,255,0.2),rgba(102,126,234,0.3));border:1px solid rgba(74,158,255,0.4);border-radius:6px;color:#4a9eff;padding:8px 14px;cursor:pointer;font-size:12px;font-weight:600;transition:all 0.3s ease;box-shadow:0 2px 8px rgba(74,158,255,0.2)}.copy-btn-abs[data-v-1cb40cd0]:hover{background:linear-gradient(135deg,rgba(74,158,255,0.35),rgba(102,126,234,0.45));border-color:rgba(74,158,255,0.6);box-shadow:0 4px 12px rgba(74,158,255,0.35);transform:translateY(-2px);color:#fff}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/MvuBetaTab.vue\"],\"names\":[],\"mappings\":\"AA2qDA,+BACE,kBACF,CAEA,+BACE,wBACF,CAEA,6BACE,kBACF,CAEA,qDACE,SACF,CAEA,iCACE,eAAgB,CAChB,gBAAiB,CACjB,0CACF,CAEA,8BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,iBAAkB,CAClB,gBAAiB,CACjB,eACF,CAEA,kCACE,QAAS,CACT,aAAc,CACd,mCAAqC,CACrC,cAAe,CACf,oBAAqB,CACrB,oBACF,CAEA,+BACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,6EAAsF,CACtF,qCAAyC,CACzC,iBAAkB,CAClB,aAAc,CACd,gBAAiB,CACjB,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,wBAAyB,CACzB,yCACF,CAEA,qCACE,+EAAwF,CACxF,iCAAqC,CACrC,2CAA+C,CAC/C,0BAA2B,CAC3B,UACF\",\"sourcesContent\":[\"<template>\\r\\n  <div class=\\\"tools-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\r\\n    <!--  -->\\r\\n    <div class=\\\"tool-section\\\">\\r\\n      <div\\r\\n        class=\\\"section-header\\\"\\r\\n        style=\\\"\\r\\n          display: flex;\\r\\n          justify-content: space-between;\\r\\n          align-items: center;\\r\\n          padding: 15px 20px;\\r\\n          background: linear-gradient(\\r\\n            135deg,\\r\\n            rgba(30, 30, 30, 0.95) 0%,\\r\\n            rgba(38, 38, 38, 0.9) 50%,\\r\\n            rgba(30, 30, 30, 0.95) 100%\\r\\n          );\\r\\n          backdrop-filter: blur(12px);\\r\\n          border-radius: 12px;\\r\\n          margin-bottom: 15px;\\r\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\r\\n          box-shadow:\\r\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\r\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\r\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\r\\n          cursor: pointer;\\r\\n          transition: all 0.3s ease;\\r\\n        \\\"\\r\\n        @click=\\\"toggleExpanded('structure')\\\"\\r\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\r\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\r\\n      >\\r\\n        <h4\\r\\n          style=\\\"\\r\\n            margin: 0;\\r\\n            color: #fff;\\r\\n            font-size: 16px;\\r\\n            font-weight: 600;\\r\\n            display: flex;\\r\\n            align-items: center;\\r\\n            gap: 10px;\\r\\n          \\\"\\r\\n        >\\r\\n          <i class=\\\"fa-solid fa-database\\\" style=\\\"color: #4a9eff; font-size: 18px\\\"></i>\\r\\n          [InitVar] \\r\\n        </h4>\\r\\n        <i\\r\\n          :class=\\\"expanded.structure ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\r\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\r\\n        ></i>\\r\\n      </div>\\r\\n\\r\\n      <div v-if=\\\"expanded.structure\\\" class=\\\"tool-content\\\">\\r\\n      <div class=\\\"tool-instructions\\\" style=\\\"margin-bottom: 15px\\\">\\r\\n        <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\r\\n          <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\r\\n             MVU Beta  <strong style=\\\"color: #4a9eff\\\">[InitVar]</strong> \\r\\n          </p>\\r\\n          <p\\r\\n            style=\\\"\\r\\n              margin: 0;\\r\\n              color: #ffa500;\\r\\n              font-size: 11px;\\r\\n              background: #1a1a1a;\\r\\n              padding: 6px;\\r\\n              border-radius: 4px;\\r\\n              border-left: 3px solid #ffa500;\\r\\n            \\\"\\r\\n          >\\r\\n             InitVar JSON <strong> \\\"stat_data\\\" </strong>\\r\\n        </p>\\r\\n      </div>\\r\\n\\r\\n      <!-- AI -->\\r\\n      <div \\r\\n        style=\\\"\\r\\n          background: linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(118, 75, 162, 0.08));\\r\\n          border: 1px solid rgba(102, 126, 234, 0.3);\\r\\n          border-radius: 8px;\\r\\n          padding: 15px;\\r\\n          margin-bottom: 20px;\\r\\n        \\\"\\r\\n      >\\r\\n        <h4 style=\\\"color: #667eea; font-size: 14px; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px\\\">\\r\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\r\\n          AI \\r\\n        </h4>\\r\\n        \\r\\n        <div class=\\\"form-group\\\" style=\\\"margin: 0 0 12px 0\\\">\\r\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\r\\n              \\r\\n          </label>\\r\\n          <textarea\\r\\n            v-model=\\\"aiStructurePrompt\\\"\\r\\n              placeholder=\\\"1-30100\\\"\\r\\n            rows=\\\"4\\\"\\r\\n            style=\\\"\\r\\n              width: 100%;\\r\\n              padding: 12px;\\r\\n              background: #2a2a2a;\\r\\n              border: 1px solid #3a3a3a;\\r\\n              border-radius: 6px;\\r\\n              color: #e0e0e0;\\r\\n              font-size: 13px;\\r\\n              resize: vertical;\\r\\n              line-height: 1.5;\\r\\n              transition: all 0.2s ease;\\r\\n            \\\"\\r\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#667eea')\\\"\\r\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\r\\n          ></textarea>\\r\\n        </div>\\r\\n\\r\\n          <button \\r\\n            class=\\\"ai-generate-btn\\\" \\r\\n            :disabled=\\\"isGeneratingAI || !aiStructurePrompt.trim()\\\"\\r\\n            style=\\\"\\r\\n              padding: 12px 24px;\\r\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\r\\n              border: none;\\r\\n              border-radius: 8px;\\r\\n              color: white;\\r\\n              font-size: 13px;\\r\\n              font-weight: 600;\\r\\n              cursor: pointer;\\r\\n              transition: all 0.3s ease;\\r\\n              box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\r\\n              position: relative;\\r\\n              overflow: hidden;\\r\\n            \\\"\\r\\n            :style=\\\"{\\r\\n              opacity: isGeneratingAI || !aiStructurePrompt.trim() ? 0.6 : 1,\\r\\n              cursor: isGeneratingAI || !aiStructurePrompt.trim() ? 'not-allowed' : 'pointer',\\r\\n            }\\\"\\r\\n            @click=\\\"handleAIGenerateStructure\\\"\\r\\n            @mouseenter=\\\"\\r\\n              (e: any) => {\\r\\n                if (!isGeneratingAI && aiStructurePrompt.trim()) {\\r\\n                  e.currentTarget.style.transform = 'translateY(-2px)';\\r\\n                  e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\\r\\n                }\\r\\n              }\\r\\n            \\\"\\r\\n            @mouseleave=\\\"\\r\\n              (e: any) => {\\r\\n                e.currentTarget.style.transform = 'translateY(0)';\\r\\n                e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\\r\\n              }\\r\\n            \\\"\\r\\n          >\\r\\n            <div\\r\\n              style=\\\"\\r\\n                position: absolute;\\r\\n                top: 0;\\r\\n                left: -100%;\\r\\n                width: 100%;\\r\\n                height: 100%;\\r\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\r\\n                transition: left 0.5s;\\r\\n              \\\"\\r\\n              class=\\\"shimmer-effect\\\"\\r\\n            ></div>\\r\\n            <i\\r\\n              class=\\\"fa-solid fa-wand-magic-sparkles\\\"\\r\\n              style=\\\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\\\"\\r\\n            ></i>\\r\\n            <span style=\\\"position: relative; z-index: 1\\\">{{ isGeneratingAI ? 'AI ...' : 'AI ' }}</span>\\r\\n          </button>\\r\\n\\r\\n          <!-- AI  -->\\r\\n          <button\\r\\n            v-if=\\\"generatedStructure && originalStructurePrompt\\\"\\r\\n            style=\\\"\\r\\n              margin-left: 12px;\\r\\n              padding: 10px 20px;\\r\\n              background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3));\\r\\n              border: 1px solid rgba(251, 191, 36, 0.4);\\r\\n              border-radius: 8px;\\r\\n              color: #fbbf24;\\r\\n              font-size: 13px;\\r\\n              font-weight: 600;\\r\\n              cursor: pointer;\\r\\n              transition: all 0.3s ease;\\r\\n              box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);\\r\\n            \\\"\\r\\n            @click=\\\"showStructureModifyDialog = true\\\"\\r\\n            @mouseenter=\\\"\\r\\n              (e: any) => {\\r\\n                e.currentTarget.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\\r\\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\\r\\n                e.currentTarget.style.transform = 'translateY(-2px)';\\r\\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\\r\\n              }\\r\\n            \\\"\\r\\n            @mouseleave=\\\"\\r\\n              (e: any) => {\\r\\n                e.currentTarget.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\\r\\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\\r\\n                e.currentTarget.style.transform = 'translateY(0)';\\r\\n                e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\\r\\n              }\\r\\n            \\\"\\r\\n          >\\r\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\r\\n            AI \\r\\n          </button>\\r\\n\\r\\n        <p style=\\\"color: #888; font-size: 11px; margin: 8px 0 0 0\\\">\\r\\n             AI  $meta\\r\\n        </p>\\r\\n      </div>\\r\\n\\r\\n      <div style=\\\"text-align: center; margin: 20px 0; position: relative\\\">\\r\\n          <span\\r\\n            style=\\\"background: #1a1a1a; padding: 0 12px; color: #666; font-size: 12px; position: relative; z-index: 1\\\"\\r\\n            ></span\\r\\n          >\\r\\n          <div\\r\\n            style=\\\"\\r\\n          position: absolute;\\r\\n          top: 50%;\\r\\n          left: 0;\\r\\n          right: 0;\\r\\n          height: 1px;\\r\\n          background: rgba(255, 255, 255, 0.1);\\r\\n          z-index: 0;\\r\\n            \\\"\\r\\n          ></div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\r\\n        <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\r\\n          \\r\\n        </label>\\r\\n        <input \\r\\n          v-model=\\\"varName\\\" \\r\\n          type=\\\"text\\\" \\r\\n          placeholder=\\\"\\\" \\r\\n          style=\\\"\\r\\n            width: 100%;\\r\\n            padding: 12px;\\r\\n            background: #2a2a2a;\\r\\n            border: 1px solid #3a3a3a;\\r\\n            border-radius: 6px;\\r\\n            color: #e0e0e0;\\r\\n            font-size: 13px;\\r\\n            transition: all 0.2s ease;\\r\\n          \\\"\\r\\n          @focus=\\\"(e: any) => (e.target.style.borderColor = '#4a9eff')\\\"\\r\\n          @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\r\\n        />\\r\\n      </div>\\r\\n\\r\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\r\\n        <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\r\\n            ::\\r\\n        </label>\\r\\n        <textarea\\r\\n          v-model=\\\"subFields\\\"\\r\\n            placeholder=\\\"&#10;:number:[-30,100]&#10;:string:&#10;:array:\\\"\\r\\n          rows=\\\"5\\\"\\r\\n          style=\\\"\\r\\n            width: 100%;\\r\\n            height: 120px;\\r\\n            padding: 12px;\\r\\n            background: #2a2a2a;\\r\\n            border: 1px solid #3a3a3a;\\r\\n            border-radius: 6px;\\r\\n            color: #e0e0e0;\\r\\n            font-size: 13px;\\r\\n            resize: vertical;\\r\\n            font-family: 'Courier New', monospace;\\r\\n            line-height: 1.5;\\r\\n            transition: all 0.2s ease;\\r\\n          \\\"\\r\\n          @focus=\\\"(e: any) => (e.target.style.borderColor = '#4a9eff')\\\"\\r\\n          @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\r\\n        ></textarea>\\r\\n          <p style=\\\"color: #888; font-size: 11px; margin: 6px 0 0 0\\\"> numberstringarrayobject</p>\\r\\n      </div>\\r\\n\\r\\n      <button \\r\\n        class=\\\"generate-btn\\\" \\r\\n        style=\\\"\\r\\n          padding: 12px 24px;\\r\\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\r\\n          border: none;\\r\\n          border-radius: 8px;\\r\\n          color: white;\\r\\n          font-size: 13px;\\r\\n          font-weight: 600;\\r\\n          cursor: pointer;\\r\\n          transition: all 0.3s ease;\\r\\n          box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\r\\n          position: relative;\\r\\n          overflow: hidden;\\r\\n        \\\"\\r\\n          @click=\\\"generateStructure\\\"\\r\\n          @mouseenter=\\\"\\r\\n            (e: any) => {\\r\\n              e.currentTarget.style.transform = 'translateY(-2px)';\\r\\n              e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\\r\\n            }\\r\\n          \\\"\\r\\n          @mouseleave=\\\"\\r\\n            (e: any) => {\\r\\n              e.currentTarget.style.transform = 'translateY(0)';\\r\\n              e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\\r\\n            }\\r\\n          \\\"\\r\\n      >\\r\\n        <div\\r\\n          style=\\\"\\r\\n            position: absolute;\\r\\n            top: 0;\\r\\n            left: -100%;\\r\\n            width: 100%;\\r\\n            height: 100%;\\r\\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\r\\n            transition: left 0.5s;\\r\\n          \\\"\\r\\n          class=\\\"shimmer-effect\\\"\\r\\n        ></div>\\r\\n        <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\\\"></i>\\r\\n          <span style=\\\"position: relative; z-index: 1\\\"> [InitVar] </span>\\r\\n      </button>\\r\\n\\r\\n      <div v-if=\\\"generatedStructure\\\" class=\\\"output-section\\\">\\r\\n          <h4 style=\\\"color: #4a9eff; font-size: 14px; margin-bottom: 10px\\\"> [InitVar] </h4>\\r\\n        <div class=\\\"code-output\\\">\\r\\n          <pre>{{ generatedStructure }}</pre>\\r\\n          <button class=\\\"copy-btn-abs\\\" @click=\\\"copyGenerated\\\">\\r\\n            <i class=\\\"fa-solid fa-copy\\\"></i>\\r\\n          </button>\\r\\n        </div>\\r\\n        \\r\\n        <!--  -->\\r\\n          <div\\r\\n            style=\\\"\\r\\n          margin-top: 15px;\\r\\n          padding: 12px;\\r\\n          background: rgba(74, 158, 255, 0.05);\\r\\n          border: 1px solid rgba(74, 158, 255, 0.2);\\r\\n          border-radius: 8px;\\r\\n            \\\"\\r\\n          >\\r\\n          <p style=\\\"margin: 0 0 10px 0; color: #4a9eff; font-size: 12px; font-weight: 600\\\">\\r\\n            <i class=\\\"fa-solid fa-link\\\"></i> \\r\\n          </p>\\r\\n          <div style=\\\"display: flex; gap: 10px; flex-wrap: wrap\\\">\\r\\n            <button \\r\\n              style=\\\"\\r\\n                flex: 1;\\r\\n                min-width: 140px;\\r\\n                padding: 8px 16px;\\r\\n                background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.3));\\r\\n                color: #10b981;\\r\\n                border: 1px solid rgba(16, 185, 129, 0.4);\\r\\n                border-radius: 6px;\\r\\n                font-size: 12px;\\r\\n                cursor: pointer;\\r\\n                transition: all 0.2s;\\r\\n              \\\"\\r\\n                @click=\\\"autoGeneratePrompt\\\"\\r\\n                @mouseenter=\\\"\\r\\n                  (e: any) => {\\r\\n                    e.currentTarget.style.transform = 'translateY(-1px)';\\r\\n                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.3)';\\r\\n                  }\\r\\n                \\\"\\r\\n                @mouseleave=\\\"\\r\\n                  (e: any) => {\\r\\n                    e.currentTarget.style.transform = 'translateY(0)';\\r\\n                    e.currentTarget.style.boxShadow = 'none';\\r\\n                  }\\r\\n                \\\"\\r\\n              >\\r\\n                <i class=\\\"fa-solid fa-file-alt\\\"></i>  COT \\r\\n            </button>\\r\\n            <button \\r\\n              style=\\\"\\r\\n                flex: 1;\\r\\n                min-width: 140px;\\r\\n                padding: 8px 16px;\\r\\n                  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.3));\\r\\n                  color: #f59e0b;\\r\\n                  border: 1px solid rgba(245, 158, 11, 0.4);\\r\\n                border-radius: 6px;\\r\\n                font-size: 12px;\\r\\n                cursor: pointer;\\r\\n                transition: all 0.2s;\\r\\n              \\\"\\r\\n                @click=\\\"exportWorldbook\\\"\\r\\n                @mouseenter=\\\"\\r\\n                  (e: any) => {\\r\\n                    e.currentTarget.style.transform = 'translateY(-1px)';\\r\\n                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.3)';\\r\\n                  }\\r\\n                \\\"\\r\\n                @mouseleave=\\\"\\r\\n                  (e: any) => {\\r\\n                    e.currentTarget.style.transform = 'translateY(0)';\\r\\n                    e.currentTarget.style.boxShadow = 'none';\\r\\n                  }\\r\\n                \\\"\\r\\n              >\\r\\n                <i class=\\\"fa-solid fa-book\\\"></i>  JSON\\r\\n            </button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- COT  -->\\r\\n    <div class=\\\"tool-section\\\">\\r\\n      <div\\r\\n        class=\\\"section-header\\\"\\r\\n        style=\\\"\\r\\n          display: flex;\\r\\n          justify-content: space-between;\\r\\n          align-items: center;\\r\\n          padding: 15px 20px;\\r\\n          background: linear-gradient(\\r\\n            135deg,\\r\\n            rgba(30, 30, 30, 0.95) 0%,\\r\\n            rgba(38, 38, 38, 0.9) 50%,\\r\\n            rgba(30, 30, 30, 0.95) 100%\\r\\n          );\\r\\n          backdrop-filter: blur(12px);\\r\\n          border-radius: 12px;\\r\\n          margin-bottom: 15px;\\r\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\r\\n          box-shadow:\\r\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\r\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\r\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\r\\n          cursor: pointer;\\r\\n          transition: all 0.3s ease;\\r\\n        \\\"\\r\\n        @click=\\\"toggleExpanded('prompt')\\\"\\r\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\r\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\r\\n      >\\r\\n        <h4\\r\\n          style=\\\"\\r\\n            margin: 0;\\r\\n            color: #fff;\\r\\n            font-size: 16px;\\r\\n            font-weight: 600;\\r\\n          display: flex;\\r\\n          align-items: center;\\r\\n            gap: 10px;\\r\\n          \\\"\\r\\n        >\\r\\n          <i class=\\\"fa-solid fa-file-code\\\" style=\\\"color: #fbbf24; font-size: 18px\\\"></i>\\r\\n          COT 6 \\r\\n        </h4>\\r\\n        <i\\r\\n          :class=\\\"expanded.prompt ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\r\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\r\\n        ></i>\\r\\n      </div>\\r\\n\\r\\n      <div v-if=\\\"expanded.prompt\\\" class=\\\"tool-content\\\">\\r\\n      <div class=\\\"tool-instructions\\\" style=\\\"margin-bottom: 15px\\\">\\r\\n        <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\r\\n          <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\r\\n             MVU Beta  <strong style=\\\"color: #fbbf24\\\">COT</strong> 6 \\r\\n        </p>\\r\\n      </div>\\r\\n\\r\\n      <!-- AI -->\\r\\n      <div \\r\\n        style=\\\"\\r\\n          background: linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(245, 158, 11, 0.08));\\r\\n          border: 1px solid rgba(251, 191, 36, 0.3);\\r\\n          border-radius: 8px;\\r\\n          padding: 15px;\\r\\n          margin-bottom: 20px;\\r\\n        \\\"\\r\\n      >\\r\\n        <h4 style=\\\"color: #fbbf24; font-size: 14px; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px\\\">\\r\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\r\\n          AI \\r\\n        </h4>\\r\\n        \\r\\n        <div class=\\\"form-group\\\" style=\\\"margin: 0 0 12px 0\\\">\\r\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\r\\n            \\r\\n          </label>\\r\\n          <textarea\\r\\n            v-model=\\\"aiPromptDescription\\\"\\r\\n              placeholder=\\\" AI \\\"\\r\\n            rows=\\\"4\\\"\\r\\n            style=\\\"\\r\\n              width: 100%;\\r\\n              padding: 12px;\\r\\n              background: #2a2a2a;\\r\\n              border: 1px solid #3a3a3a;\\r\\n              border-radius: 6px;\\r\\n              color: #e0e0e0;\\r\\n              font-size: 13px;\\r\\n              resize: vertical;\\r\\n              line-height: 1.5;\\r\\n              transition: all 0.2s ease;\\r\\n            \\\"\\r\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#fbbf24')\\\"\\r\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\r\\n          ></textarea>\\r\\n        </div>\\r\\n\\r\\n        <button \\r\\n          class=\\\"ai-generate-btn\\\" \\r\\n          :disabled=\\\"isGeneratingPrompt || !aiPromptDescription.trim()\\\"\\r\\n          style=\\\"\\r\\n            padding: 12px 24px;\\r\\n            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\\r\\n            border: none;\\r\\n            border-radius: 8px;\\r\\n            color: white;\\r\\n            font-size: 13px;\\r\\n            font-weight: 600;\\r\\n            cursor: pointer;\\r\\n            transition: all 0.3s ease;\\r\\n            box-shadow: 0 3px 12px rgba(251, 191, 36, 0.3);\\r\\n            position: relative;\\r\\n            overflow: hidden;\\r\\n          \\\"\\r\\n            :style=\\\"{\\r\\n              opacity: isGeneratingPrompt || !aiPromptDescription.trim() ? 0.6 : 1,\\r\\n              cursor: isGeneratingPrompt || !aiPromptDescription.trim() ? 'not-allowed' : 'pointer',\\r\\n            }\\\"\\r\\n            @click=\\\"handleAIGeneratePrompt\\\"\\r\\n            @mouseenter=\\\"\\r\\n              (e: any) => {\\r\\n                if (!isGeneratingPrompt && aiPromptDescription.trim()) {\\r\\n                  e.currentTarget.style.transform = 'translateY(-2px)';\\r\\n                  e.currentTarget.style.boxShadow = '0 6px 20px rgba(251, 191, 36, 0.4)';\\r\\n                }\\r\\n              }\\r\\n            \\\"\\r\\n            @mouseleave=\\\"\\r\\n              (e: any) => {\\r\\n                e.currentTarget.style.transform = 'translateY(0)';\\r\\n                e.currentTarget.style.boxShadow = '0 3px 12px rgba(251, 191, 36, 0.3)';\\r\\n              }\\r\\n            \\\"\\r\\n      >\\r\\n        <div\\r\\n          style=\\\"\\r\\n            position: absolute;\\r\\n            top: 0;\\r\\n            left: -100%;\\r\\n            width: 100%;\\r\\n            height: 100%;\\r\\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\r\\n            transition: left 0.5s;\\r\\n          \\\"\\r\\n          class=\\\"shimmer-effect\\\"\\r\\n        ></div>\\r\\n            <i\\r\\n              class=\\\"fa-solid fa-wand-magic-sparkles\\\"\\r\\n              style=\\\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\\\"\\r\\n        ></i>\\r\\n            <span style=\\\"position: relative; z-index: 1\\\">{{\\r\\n              isGeneratingPrompt ? 'AI ...' : 'AI '\\r\\n            }}</span>\\r\\n          </button>\\r\\n\\r\\n          <!-- AI  -->\\r\\n          <button\\r\\n            v-if=\\\"generatedPrompt && originalPromptDescription\\\"\\r\\n            style=\\\"\\r\\n              margin-left: 12px;\\r\\n              padding: 10px 20px;\\r\\n              background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3));\\r\\n              border: 1px solid rgba(251, 191, 36, 0.4);\\r\\n              border-radius: 8px;\\r\\n              color: #fbbf24;\\r\\n              font-size: 13px;\\r\\n              font-weight: 600;\\r\\n              cursor: pointer;\\r\\n              transition: all 0.3s ease;\\r\\n              box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);\\r\\n            \\\"\\r\\n            @click=\\\"showPromptModifyDialog = true\\\"\\r\\n            @mouseenter=\\\"\\r\\n              (e: any) => {\\r\\n                e.currentTarget.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\\r\\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\\r\\n                e.currentTarget.style.transform = 'translateY(-2px)';\\r\\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\\r\\n              }\\r\\n            \\\"\\r\\n            @mouseleave=\\\"\\r\\n              (e: any) => {\\r\\n                e.currentTarget.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\\r\\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\\r\\n                e.currentTarget.style.transform = 'translateY(0)';\\r\\n                e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\\r\\n              }\\r\\n            \\\"\\r\\n          >\\r\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\r\\n            AI \\r\\n          </button>\\r\\n\\r\\n          <p style=\\\"color: #888; font-size: 11px; margin: 8px 0 0 0\\\">\\r\\n             AI  6  COT \\r\\n        </p>\\r\\n      </div>\\r\\n\\r\\n        <div style=\\\"text-align: center; margin: 20px 0; position: relative\\\">\\r\\n          <span\\r\\n            style=\\\"background: #1a1a1a; padding: 0 12px; color: #666; font-size: 12px; position: relative; z-index: 1\\\"\\r\\n            ></span\\r\\n        >\\r\\n          <div\\r\\n            style=\\\"\\r\\n          position: absolute;\\r\\n          top: 50%;\\r\\n          left: 0;\\r\\n          right: 0;\\r\\n          height: 1px;\\r\\n          background: rgba(255, 255, 255, 0.1);\\r\\n          z-index: 0;\\r\\n            \\\"\\r\\n          ></div>\\r\\n        </div>\\r\\n\\r\\n        <div v-if=\\\"generatedStructure\\\" class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\r\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\r\\n             STEP 3\\r\\n          </label>\\r\\n          <textarea\\r\\n            v-model=\\\"variableCategories\\\"\\r\\n            placeholder=\\\"&#10; - 3 fields&#10; - 2 fields&#10; - 1 field\\\"\\r\\n            rows=\\\"4\\\"\\r\\n            style=\\\"\\r\\n              width: 100%;\\r\\n              padding: 12px;\\r\\n              background: #2a2a2a;\\r\\n              border: 1px solid #3a3a3a;\\r\\n              border-radius: 6px;\\r\\n              color: #e0e0e0;\\r\\n              font-size: 13px;\\r\\n              resize: vertical;\\r\\n              font-family: 'Courier New', monospace;\\r\\n              line-height: 1.5;\\r\\n              transition: all 0.2s ease;\\r\\n            \\\"\\r\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#fbbf24')\\\"\\r\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\r\\n          ></textarea>\\r\\n          <p style=\\\"color: #888; font-size: 11px; margin: 6px 0 0 0\\\"> AI  STEP 3 </p>\\r\\n        </div>\\r\\n\\r\\n        <button \\r\\n          class=\\\"generate-btn\\\" \\r\\n          style=\\\"\\r\\n            margin-top: 10px;\\r\\n            padding: 12px 24px;\\r\\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\r\\n            border: none;\\r\\n            border-radius: 8px;\\r\\n            color: white;\\r\\n            font-size: 13px;\\r\\n            font-weight: 600;\\r\\n            cursor: pointer;\\r\\n            transition: all 0.3s ease;\\r\\n            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\r\\n            position: relative;\\r\\n            overflow: hidden;\\r\\n          \\\"\\r\\n          @click=\\\"generatePrompt\\\"\\r\\n          @mouseenter=\\\"\\r\\n            (e: any) => {\\r\\n              e.currentTarget.style.transform = 'translateY(-2px)';\\r\\n              e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\\r\\n            }\\r\\n          \\\"\\r\\n          @mouseleave=\\\"\\r\\n            (e: any) => {\\r\\n              e.currentTarget.style.transform = 'translateY(0)';\\r\\n              e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\\r\\n            }\\r\\n          \\\"\\r\\n        >\\r\\n          <div\\r\\n            style=\\\"\\r\\n              position: absolute;\\r\\n              top: 0;\\r\\n              left: -100%;\\r\\n              width: 100%;\\r\\n              height: 100%;\\r\\n              background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\r\\n              transition: left 0.5s;\\r\\n            \\\"\\r\\n            class=\\\"shimmer-effect\\\"\\r\\n          ></div>\\r\\n          <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\\\"></i>\\r\\n          <span style=\\\"position: relative; z-index: 1\\\"> COT </span>\\r\\n        </button>\\r\\n\\r\\n        <div v-if=\\\"generatedPrompt\\\" class=\\\"output-section\\\">\\r\\n          <h4 style=\\\"color: #fbbf24; font-size: 14px; margin-bottom: 10px\\\"> COT </h4>\\r\\n          <div class=\\\"code-output\\\">\\r\\n            <pre>{{ generatedPrompt }}</pre>\\r\\n            <button class=\\\"copy-btn-abs\\\" @click=\\\"copyPrompt\\\">\\r\\n              <i class=\\\"fa-solid fa-copy\\\"></i>\\r\\n            </button>\\r\\n        </div>\\r\\n      </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <!-- AI  -  -->\\r\\n  <AIModifyDialog\\r\\n    :show=\\\"showStructureModifyDialog\\\"\\r\\n    :is-modifying=\\\"isModifyingStructure\\\"\\r\\n    title=\\\"AI  [InitVar] \\\"\\r\\n    description=\\\" AI  MVU \\\"\\r\\n    :examples=\\\"[\\r\\n      ' number',\\r\\n      '',\\r\\n      '',\\r\\n      '',\\r\\n    ]\\\"\\r\\n    @close=\\\"showStructureModifyDialog = false\\\"\\r\\n    @confirm=\\\"modifyStructureWithAI\\\"\\r\\n  />\\r\\n\\r\\n  <!-- AI  -  -->\\r\\n  <AIModifyDialog\\r\\n    :show=\\\"showPromptModifyDialog\\\"\\r\\n    :is-modifying=\\\"isModifyingPrompt\\\"\\r\\n    title=\\\"AI  COT \\\"\\r\\n    description=\\\" AI \\\"\\r\\n    :examples=\\\"[\\r\\n      ' STEP 2 ',\\r\\n      '',\\r\\n      '',\\r\\n      ' STEP 3 ',\\r\\n    ]\\\"\\r\\n    @close=\\\"showPromptModifyDialog = false\\\"\\r\\n    @confirm=\\\"modifyPromptWithAI\\\"\\r\\n  />\\r\\n</template>\\r\\n\\r\\n<script setup lang=\\\"ts\\\">\\r\\nimport { storeToRefs } from 'pinia';\\r\\nimport { onMounted, ref, watch } from 'vue';\\r\\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\\r\\nimport { getScriptIdSafe } from '../utils';\\r\\nimport AIModifyDialog from './AIModifyDialog.vue';\\r\\n\\r\\nconst settingsStore = useSettingsStore();\\r\\nconst { settings } = storeToRefs(settingsStore);\\r\\n\\r\\nconst expanded = ref({\\r\\n  structure: true,\\r\\n  prompt: false,\\r\\n});\\r\\n\\r\\nfunction toggleExpanded(key: keyof typeof expanded.value) {\\r\\n  expanded.value[key] = !expanded.value[key];\\r\\n}\\r\\n\\r\\n// AI\\r\\nconst aiStructurePrompt = ref('');\\r\\nconst isGeneratingAI = ref(false);\\r\\nconst aiPromptDescription = ref('');\\r\\nconst isGeneratingPrompt = ref(false);\\r\\n\\r\\n// \\r\\nconst originalStructurePrompt = ref('');\\r\\nconst originalPromptDescription = ref('');\\r\\n\\r\\n// \\r\\nconst showStructureModifyDialog = ref(false);\\r\\nconst isModifyingStructure = ref(false);\\r\\nconst showPromptModifyDialog = ref(false);\\r\\nconst isModifyingPrompt = ref(false);\\r\\n\\r\\n// \\r\\nconst varName = ref('');\\r\\nconst subFields = ref('');\\r\\nconst generatedStructure = ref('');\\r\\nconst variableCategories = ref('');\\r\\nconst generatedPrompt = ref('');\\r\\n\\r\\nfunction copyToClipboard(text: string) {\\r\\n  navigator.clipboard.writeText(text).then(() => {\\r\\n    window.toastr.success('');\\r\\n  });\\r\\n}\\r\\n\\r\\nfunction generateStructure() {\\r\\n  if (!varName.value.trim()) {\\r\\n    window.toastr.error('');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  const result: any = {\\r\\n    $meta: {\\r\\n      extensible: false,\\r\\n      strictSet: true,\\r\\n    },\\r\\n  };\\r\\n\\r\\n  result[varName.value] = parseSubFields();\\r\\n  generatedStructure.value = JSON.stringify(result, null, 2);\\r\\n}\\r\\n\\r\\nfunction parseSubFields(): any {\\r\\n  const lines = subFields.value.split('\\\\n').filter(l => l.trim());\\r\\n  const obj: any = {};\\r\\n\\r\\n  lines.forEach(line => {\\r\\n    const parts = line.split(':').map(s => s.trim());\\r\\n    const name = parts[0];\\r\\n    const type = parts[1] || 'string';\\r\\n    const desc = parts[2] || '...';\\r\\n\\r\\n    if (!name) return;\\r\\n\\r\\n    if (type === 'number') {\\r\\n      obj[name] = [0, desc];\\r\\n    } else if (type === 'string') {\\r\\n      obj[name] = ['', desc];\\r\\n    } else if (type === 'array') {\\r\\n      obj[name] = [[], desc];\\r\\n    } else if (type === 'object') {\\r\\n      obj[name] = [{}, desc];\\r\\n    } else {\\r\\n      obj[name] = [null, desc];\\r\\n    }\\r\\n  });\\r\\n\\r\\n  return obj;\\r\\n}\\r\\n\\r\\nfunction copyGenerated() {\\r\\n  copyToClipboard(generatedStructure.value);\\r\\n}\\r\\n\\r\\n// AI\\r\\nasync function handleAIGenerateStructure() {\\r\\n  if (!aiStructurePrompt.value.trim()) {\\r\\n    window.toastr.error('');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\r\\n    window.toastr.error(' API  API Key');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  // \\r\\n  originalStructurePrompt.value = aiStructurePrompt.value;\\r\\n\\r\\n  isGeneratingAI.value = true;\\r\\n\\r\\n  try {\\r\\n    const systemPrompt = ` MVU Beta  [InitVar] JSON\\r\\n\\r\\n\\r\\n1.  \\\"stat_data\\\" \\r\\n2. : [, \\\"\\\"]\\r\\n3. $meta \\r\\n4. \\r\\n5. 20\\r\\n\\r\\n\\r\\n{\\r\\n  \\\"$meta\\\": {\\\"extensible\\\": false, \\\"strictSet\\\": true},\\r\\n  \\\"\\\": {\\r\\n    \\\"\\\": [, \\\"\\\"]\\r\\n  }\\r\\n}\\r\\n\\r\\n JSON`;\\r\\n\\r\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\r\\n    const response = await fetch(apiUrl, {\\r\\n      method: 'POST',\\r\\n      headers: {\\r\\n        'Content-Type': 'application/json',\\r\\n        Authorization: `Bearer ${settings.value.api_key}`,\\r\\n      },\\r\\n      body: JSON.stringify({\\r\\n        model: settings.value.model,\\r\\n        messages: [\\r\\n          { role: 'system', content: systemPrompt },\\r\\n          { role: 'user', content: `${aiStructurePrompt.value}\\\\n\\\\n [InitVar] JSON` },\\r\\n        ],\\r\\n        temperature: settings.value.temperature || 0.7,\\r\\n        max_tokens: settings.value.max_tokens || 4000,\\r\\n      }),\\r\\n    });\\r\\n\\r\\n    // \\r\\n    const responseText = await response.text();\\r\\n\\r\\n    if (!response.ok) {\\r\\n      // \\r\\n      let errorMessage = `API : ${response.status}`;\\r\\n      try {\\r\\n        const errorData = JSON.parse(responseText);\\r\\n        if (errorData.error) {\\r\\n          errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\\r\\n        } else if (errorData.message) {\\r\\n          errorMessage = `${errorMessage} - ${errorData.message}`;\\r\\n        } else {\\r\\n          errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\\r\\n        }\\r\\n      } catch (e) {\\r\\n        errorMessage = `${errorMessage} - ${responseText.slice(0, 200)}`;\\r\\n      }\\r\\n      console.error('API :', errorMessage);\\r\\n      console.error(' URL:', settings.value.api_endpoint);\\r\\n      console.error(':', JSON.stringify({\\r\\n        model: settings.value.model,\\r\\n        messages: [\\r\\n          { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\\r\\n          { role: 'user', content: `${aiStructurePrompt.value.substring(0, 100)}...` },\\r\\n        ],\\r\\n        temperature: settings.value.temperature || 0.7,\\r\\n        max_tokens: settings.value.max_tokens || 4000,\\r\\n      }, null, 2));\\r\\n      throw new Error(errorMessage);\\r\\n    }\\r\\n\\r\\n    // \\r\\n    const data = JSON.parse(responseText);\\r\\n    // \\r\\n    let result = '';\\r\\n    if (data.choices && data.choices[0] && data.choices[0].message) {\\r\\n      result = data.choices[0].message.content || '';\\r\\n    } else if (data.data && data.data.choices && data.data.choices[0]) {\\r\\n      //  API  data.data.choices \\r\\n      result = data.data.choices[0].message?.content || '';\\r\\n    } else if (data.content) {\\r\\n      result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\\r\\n    }\\r\\n    \\r\\n    console.log('AI :', result);\\r\\n\\r\\n    //  JSON\\r\\n    let jsonText = result;\\r\\n\\r\\n    // \\r\\n    jsonText = jsonText.replace(/```json\\\\s*/gi, '').replace(/```\\\\s*$/g, '');\\r\\n\\r\\n    //  JSON \\r\\n    const jsonMatch = jsonText.match(/\\\\{[\\\\s\\\\S]*$/);\\r\\n    if (!jsonMatch) {\\r\\n      throw new Error(' JSON ');\\r\\n    }\\r\\n\\r\\n    jsonText = jsonMatch[0];\\r\\n\\r\\n    //  JSON\\r\\n    let bracketCount = 0;\\r\\n    let inString = false;\\r\\n    let escapeNext = false;\\r\\n    let lastValidPos = jsonText.length;\\r\\n\\r\\n    for (let i = 0; i < jsonText.length; i++) {\\r\\n      const char = jsonText[i];\\r\\n\\r\\n      if (escapeNext) {\\r\\n        escapeNext = false;\\r\\n        continue;\\r\\n      }\\r\\n\\r\\n      if (char === '\\\\\\\\') {\\r\\n        escapeNext = true;\\r\\n        continue;\\r\\n      }\\r\\n\\r\\n      if (char === '\\\"' && !inString) {\\r\\n        inString = true;\\r\\n        continue;\\r\\n      } else if (char === '\\\"' && inString) {\\r\\n        inString = false;\\r\\n        continue;\\r\\n      }\\r\\n\\r\\n      if (inString) continue;\\r\\n\\r\\n      if (char === '{') bracketCount++;\\r\\n      else if (char === '}') bracketCount--;\\r\\n\\r\\n      if (bracketCount === 0) {\\r\\n        lastValidPos = i + 1;\\r\\n        break;\\r\\n      }\\r\\n    }\\r\\n\\r\\n    jsonText = jsonText.substring(0, lastValidPos);\\r\\n\\r\\n    // \\r\\n    if (bracketCount > 0) {\\r\\n      console.warn(`JSON  ${bracketCount} ...`);\\r\\n      jsonText += '}'.repeat(bracketCount);\\r\\n    }\\r\\n\\r\\n    //  JSON\\r\\n    // \\r\\n    jsonText = jsonText.replace(/,(\\\\s*[}\\\\]])/g, '$1');\\r\\n    // \\r\\n    jsonText = jsonText.replace(/\\\\/\\\\/[^\\\\n]*/g, '');\\r\\n    jsonText = jsonText.replace(/\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\//g, '');\\r\\n\\r\\n    let parsed;\\r\\n    try {\\r\\n      parsed = JSON.parse(jsonText);\\r\\n    } catch (e) {\\r\\n      console.error('JSON :', jsonText);\\r\\n      throw new Error(`JSON : ${(e as Error).message} AI  JSON`);\\r\\n    }\\r\\n    const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\\r\\n    varName.value = varNameParsed;\\r\\n\\r\\n    const varData = parsed[varNameParsed] || {};\\r\\n    const fields: string[] = [];\\r\\n\\r\\n    for (const key in varData) {\\r\\n      if (key === '$meta') continue;\\r\\n      const value = varData[key];\\r\\n      if (Array.isArray(value) && value.length === 2) {\\r\\n        const val = value[0];\\r\\n        const type =\\r\\n          typeof val === 'number'\\r\\n            ? 'number'\\r\\n            : typeof val === 'string'\\r\\n              ? 'string'\\r\\n              : Array.isArray(val)\\r\\n                ? 'array'\\r\\n                : 'object';\\r\\n        const desc = value[1] || '...';\\r\\n        fields.push(`${key}:${type}:${desc}`);\\r\\n      }\\r\\n    }\\r\\n\\r\\n    subFields.value = fields.join('\\\\n');\\r\\n    generatedStructure.value = JSON.stringify(parsed, null, 2);\\r\\n    window.toastr.success('AI ');\\r\\n  } catch (error: any) {\\r\\n    console.error('AI:', error);\\r\\n    window.toastr.error(`AI: ${error.message}`);\\r\\n  } finally {\\r\\n    isGeneratingAI.value = false;\\r\\n  }\\r\\n}\\r\\n\\r\\nfunction autoGeneratePrompt() {\\r\\n  if (!generatedStructure.value) {\\r\\n    window.toastr.error(' [InitVar] ');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  try {\\r\\n    const structure = JSON.parse(generatedStructure.value);\\r\\n    const varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\\r\\n\\r\\n    const varData = structure[varNameParsed] || {};\\r\\n    let fieldCount = 0;\\r\\n\\r\\n    for (const key in varData) {\\r\\n      if (key === '$meta') continue;\\r\\n      fieldCount++;\\r\\n    }\\r\\n\\r\\n    variableCategories.value = `${varNameParsed} - ${fieldCount} fields`;\\r\\n    expanded.value.prompt = true;\\r\\n    generatePrompt();\\r\\n    window.toastr.success(' COT ');\\r\\n    \\r\\n    setTimeout(() => {\\r\\n      const promptSection = document.querySelector('.tool-section:nth-child(2)');\\r\\n      promptSection?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\\r\\n    }, 100);\\r\\n  } catch (error: any) {\\r\\n    console.error(':', error);\\r\\n    window.toastr.error('');\\r\\n  }\\r\\n}\\r\\n\\r\\nfunction generatePrompt() {\\r\\n  const categories = variableCategories.value.trim() || ' - X fields';\\r\\n\\r\\n  const promptTemplate = `<%_ setLocalVar('initialized_lorebooks.-YourLorebook[0]', true); _%>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<status_current_variables>\\r\\n{{get_message_variable::stat_data}}\\r\\n</status_current_variables>\\r\\n\\r\\n\\r\\n\\r\\nrule:\\r\\n  description:\\r\\n    - Output update analysis at the end of response\\r\\n    - Variable updates are omitted in context but you must still add them\\r\\n    - **CRITICAL**: For MVU format [value, description], ALWAYS use [0] suffix to access the value part\\r\\n    - 4 commands available: \\\\\\\\\\\\`_.set\\\\\\\\\\\\` (2-3 args), \\\\\\\\\\\\`_.insert\\\\\\\\\\\\` (2-3 args), \\\\\\\\\\\\`_.remove\\\\\\\\\\\\` (1-2 args), \\\\\\\\\\\\`_.add\\\\\\\\\\\\` (2 args)\\r\\n    - **RECOMMENDED**: Use \\\\\\\\\\\\`_.insert\\\\\\\\\\\\` instead of \\\\\\\\\\\\`_.assign\\\\\\\\\\\\`\\r\\n    - strictSet enabled: [0] suffix is mandatory for all value access\\r\\n\\r\\n  command_usage:\\r\\n    - \\\\\\\\\\\\`_.set('path[0]', old?, new);//reason\\\\\\\\\\\\` - Replace value\\r\\n    - \\\\\\\\\\\\`_.add('path[0]', delta);//reason\\\\\\\\\\\\` - Add/subtract numbers only\\r\\n    - \\\\\\\\\\\\`_.insert('path[0]', value);//reason\\\\\\\\\\\\` - Add to array end\\r\\n    - \\\\\\\\\\\\`_.insert('path[0]', index, value);//reason\\\\\\\\\\\\` - Insert to array at position\\r\\n    - \\\\\\\\\\\\`_.insert('path', key, value);//reason\\\\\\\\\\\\` - Add key-value to object\\r\\n    - \\\\\\\\\\\\`_.remove('path[0]', value);//reason\\\\\\\\\\\\` - Remove from array/object\\r\\n\\r\\n  analysis:\\r\\n    You MUST follow this Chain-of-Thought (COT) analysis process step by step:\\r\\n\\r\\n    **STEP 1: Scene Analysis (50 words max, IN ENGLISH)**\\r\\n    - Identify current scene/stage/phase\\r\\n    - Describe what happened\\r\\n    - Determine what changes occurred (time/location/status/progress)\\r\\n\\r\\n    **STEP 2: Time & Key Status Check**\\r\\n    - Extract current time/status from story context\\r\\n    - Read key variables from <status_current_variables>\\r\\n    - Calculate changes\\r\\n    - Decision: What needs to be updated?\\r\\n\\r\\n    **STEP 3: Systematic Variable Review (check EVERY variable category)**\\r\\n    Go through each variable category systematically and mark Y or N:\\r\\n\\r\\n    ${categories}:\\r\\n      - 1[0]: [Y/N] - explain\\r\\n      - 2[0]: [Y/N] - explain\\r\\n\\r\\n    **STEP 4: Command Selection**\\r\\n    For each variable marked Y, determine which command to use\\r\\n\\r\\n    **STEP 5: Analyze Other Variable Systems**\\r\\n    - stat_data detailed COT: COMPLETED\\r\\n    - Other variable groups? [YES/NO]\\r\\n\\r\\n    **STEP 6: Final Validation Checklist**\\r\\n    - All [0] suffixes present? [YES/NO]\\r\\n    - All Y variables have corresponding commands? [YES/NO]\\r\\n    - All commands have clear Chinese comments? [YES/NO]\\r\\n\\r\\n  format: |-\\r\\n    <UpdateVariable>\\r\\n        <ThinkingProcess>\\r\\n            **STEP 1: Scene Analysis**\\r\\n            [50 words]\\r\\n\\r\\n            **STEP 2: Time & Key Status Check**\\r\\n            - Current status: ...\\r\\n            - Stored variable[0]: ...\\r\\n            - Changes: ...\\r\\n            - Update decision: ...\\r\\n\\r\\n            **STEP 3: Variable Review (stat_data)**\\r\\n            [List categories with Y/N]\\r\\n\\r\\n            **STEP 4: Command Selection**\\r\\n            [For each Y variable, state which command]\\r\\n\\r\\n            **STEP 5: Other Systems**\\r\\n            - stat_data COT: COMPLETED\\r\\n            - Other groups? NO\\r\\n\\r\\n            **STEP 6: Final Check**\\r\\n            - [0] suffixes? YES\\r\\n            - All Y have commands? YES\\r\\n            - Chinese comments? YES\\r\\n        </ThinkingProcess>\\r\\n\\r\\n        _.set('path[0]', old?, new);//reason\\r\\n        _.add('path[0]', delta);//reason\\r\\n        _.insert('path[0]', value);//reason\\r\\n        _.remove('path[0]', value);//reason\\r\\n    </UpdateVariable>\\r\\n\\r\\n  example: |-\\r\\n    <UpdateVariable>\\r\\n        <ThinkingProcess>\\r\\n            **STEP 1: Scene Analysis**\\r\\n            User and character had conversation at library. User helped find a book. Time advanced from 10:00 to 10:30. Character's impression improved.\\r\\n\\r\\n            **STEP 2: Time & Key Status Check**\\r\\n            - Current time: 10:30\\r\\n            - Stored [0]: \\\"10:00\\\"\\r\\n            - Time passed: 30 minutes\\r\\n            - Update decision: Time, Favor\\r\\n\\r\\n            **STEP 3: Variable Review (stat_data)**\\r\\n             - 3 fields:\\r\\n              - [0]: Y - Time advanced\\r\\n              - [0]: N - Same day\\r\\n              - [0]: N - Still at library\\r\\n\\r\\n             - 1 field:\\r\\n              - [0]: Y - Positive interaction\\r\\n\\r\\n            **STEP 4: Command Selection**\\r\\n            - : use _.set\\r\\n            - : use _.add\\r\\n\\r\\n            **STEP 5: Other Systems**\\r\\n            - stat_data COT: COMPLETED\\r\\n            - Other groups? NO\\r\\n\\r\\n            **STEP 6: Final Check**\\r\\n            - [0] suffixes? YES\\r\\n            - All Y have commands? YES\\r\\n            - Chinese comments? YES\\r\\n        </ThinkingProcess>\\r\\n\\r\\n        _.set('[0]', '10:00', '10:30');//30\\r\\n        _.add('.[0]', 3);//\\r\\n    </UpdateVariable>\\r\\n\\r\\n  specific_rules:\\r\\n    -  _.set \\r\\n    - /\\r\\n    -  _.add \\r\\n    -  _.insert _.remove\\r\\n    - [0][0]\\r\\n    -  $__META_EXTENSIBLE__$  _.insert \\r\\n    -  _.insert('', , ) `;\\r\\n\\r\\n  generatedPrompt.value = promptTemplate;\\r\\n}\\r\\n\\r\\nfunction copyPrompt() {\\r\\n  copyToClipboard(generatedPrompt.value);\\r\\n}\\r\\n\\r\\n// AI\\r\\nasync function handleAIGeneratePrompt() {\\r\\n  if (!aiPromptDescription.value.trim()) {\\r\\n    window.toastr.error('');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\r\\n    window.toastr.error(' API  API Key');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  // \\r\\n  originalPromptDescription.value = aiPromptDescription.value;\\r\\n\\r\\n  isGeneratingPrompt.value = true;\\r\\n\\r\\n  try {\\r\\n    const systemPrompt = ` MVU Beta COT  6 \\r\\n\\r\\n## \\r\\n1.  {{get_message_variable::stat_data}}\\r\\n2.  _.insert  _.assign\\r\\n3.  [0] \\r\\n4. 6  COT \\r\\n\\r\\n EJS `;\\r\\n\\r\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\r\\n    const response = await fetch(apiUrl, {\\r\\n      method: 'POST',\\r\\n      headers: {\\r\\n        'Content-Type': 'application/json',\\r\\n        Authorization: `Bearer ${settings.value.api_key}`,\\r\\n      },\\r\\n      body: JSON.stringify({\\r\\n        model: settings.value.model,\\r\\n        messages: [\\r\\n          { role: 'system', content: systemPrompt },\\r\\n          { role: 'user', content: `${aiPromptDescription.value}\\\\n\\\\n COT ` },\\r\\n        ],\\r\\n        temperature: settings.value.temperature || 0.7,\\r\\n        max_tokens: settings.value.max_tokens || 3000,\\r\\n      }),\\r\\n    });\\r\\n\\r\\n    // \\r\\n    const responseText2 = await response.text();\\r\\n    \\r\\n    if (!response.ok) {\\r\\n      // \\r\\n      let errorMessage = `API : ${response.status}`;\\r\\n      try {\\r\\n        const errorData = JSON.parse(responseText2);\\r\\n        if (errorData.error) {\\r\\n          errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\\r\\n        } else if (errorData.message) {\\r\\n          errorMessage = `${errorMessage} - ${errorData.message}`;\\r\\n        } else {\\r\\n          errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\\r\\n        }\\r\\n      } catch (e) {\\r\\n        errorMessage = `${errorMessage} - ${responseText2.slice(0, 200)}`;\\r\\n      }\\r\\n      console.error('API :', errorMessage);\\r\\n      console.error(' URL:', settings.value.api_endpoint);\\r\\n      console.error(':', JSON.stringify({\\r\\n        model: settings.value.model,\\r\\n        messages: [\\r\\n          { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\\r\\n          { role: 'user', content: `${aiPromptDescription.value.substring(0, 100)}...` },\\r\\n        ],\\r\\n        temperature: settings.value.temperature || 0.7,\\r\\n        max_tokens: settings.value.max_tokens || 3000,\\r\\n      }, null, 2));\\r\\n      throw new Error(errorMessage);\\r\\n    }\\r\\n\\r\\n    // \\r\\n    const data = JSON.parse(responseText2);\\r\\n    // \\r\\n    let result = '';\\r\\n    if (data.choices && data.choices[0] && data.choices[0].message) {\\r\\n      result = data.choices[0].message.content || '';\\r\\n    } else if (data.data && data.data.choices && data.data.choices[0]) {\\r\\n      //  API  data.data.choices \\r\\n      result = data.data.choices[0].message?.content || '';\\r\\n    } else if (data.content) {\\r\\n      result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\\r\\n    }\\r\\n\\r\\n    generatedPrompt.value = result.trim();\\r\\n    window.toastr.success('AI ');\\r\\n  } catch (error: any) {\\r\\n    console.error('AI:', error);\\r\\n    window.toastr.error(`AI: ${error.message}`);\\r\\n  } finally {\\r\\n    isGeneratingPrompt.value = false;\\r\\n  }\\r\\n}\\r\\n\\r\\n// AI \\r\\nasync function modifyStructureWithAI(modifyInstruction: string) {\\r\\n  if (!originalStructurePrompt.value) {\\r\\n    window.toastr.warning('');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  isModifyingStructure.value = true;\\r\\n\\r\\n  try {\\r\\n    window.toastr.info('AI ...');\\r\\n\\r\\n    const systemPrompt = ` MVU Beta  [InitVar] JSON\\r\\n\\r\\n\\r\\n1.  \\\"stat_data\\\" \\r\\n2. : [, \\\"\\\"]\\r\\n3. $meta \\r\\n4. \\r\\n5. 20\\r\\n\\r\\n JSON`;\\r\\n\\r\\n    const userPrompt = `# \\r\\n${originalStructurePrompt.value}\\r\\n\\r\\n# \\r\\n${modifyInstruction}\\r\\n\\r\\n [InitVar] JSON`;\\r\\n\\r\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\r\\n    const response = await fetch(apiUrl, {\\r\\n      method: 'POST',\\r\\n      headers: {\\r\\n        'Content-Type': 'application/json',\\r\\n        Authorization: `Bearer ${settings.value.api_key}`,\\r\\n      },\\r\\n      body: JSON.stringify({\\r\\n        model: settings.value.model,\\r\\n        messages: [\\r\\n          { role: 'system', content: systemPrompt },\\r\\n          { role: 'user', content: userPrompt },\\r\\n        ],\\r\\n        temperature: settings.value.temperature || 0.7,\\r\\n        max_tokens: settings.value.max_tokens || 4000,\\r\\n      }),\\r\\n    });\\r\\n\\r\\n    if (!response.ok) {\\r\\n      throw new Error(`API : ${response.status}`);\\r\\n    }\\r\\n\\r\\n    const data = await response.json();\\r\\n    let result = data.choices?.[0]?.message?.content || '';\\r\\n\\r\\n    //  JSON\\r\\n    let jsonText = result.replace(/```json\\\\s*/gi, '').replace(/```\\\\s*$/g, '');\\r\\n    const jsonMatch = jsonText.match(/\\\\{[\\\\s\\\\S]*$/);\\r\\n    if (jsonMatch) {\\r\\n      jsonText = jsonMatch[0];\\r\\n    }\\r\\n\\r\\n    // \\r\\n    jsonText = jsonText.replace(/,(\\\\s*[}\\\\]])/g, '$1');\\r\\n    const parsed = JSON.parse(jsonText);\\r\\n    \\r\\n    const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\\r\\n    varName.value = varNameParsed;\\r\\n\\r\\n    const varData = parsed[varNameParsed] || {};\\r\\n    const fields: string[] = [];\\r\\n\\r\\n    for (const key in varData) {\\r\\n      if (key === '$meta') continue;\\r\\n      const value = varData[key];\\r\\n      if (Array.isArray(value) && value.length === 2) {\\r\\n        const val = value[0];\\r\\n        const type =\\r\\n          typeof val === 'number'\\r\\n            ? 'number'\\r\\n            : typeof val === 'string'\\r\\n              ? 'string'\\r\\n              : Array.isArray(val)\\r\\n                ? 'array'\\r\\n                : 'object';\\r\\n        const desc = value[1] || '...';\\r\\n        fields.push(`${key}:${type}:${desc}`);\\r\\n      }\\r\\n    }\\r\\n\\r\\n    subFields.value = fields.join('\\\\n');\\r\\n    generatedStructure.value = JSON.stringify(parsed, null, 2);\\r\\n\\r\\n    // \\r\\n    originalStructurePrompt.value += `\\\\n\\\\n${modifyInstruction}`;\\r\\n\\r\\n    window.toastr.success(' AI ');\\r\\n    showStructureModifyDialog.value = false;\\r\\n  } catch (error: any) {\\r\\n    console.error('AI :', error);\\r\\n    window.toastr.error('AI : ' + error.message);\\r\\n  } finally {\\r\\n    isModifyingStructure.value = false;\\r\\n  }\\r\\n}\\r\\n\\r\\n// AI \\r\\nasync function modifyPromptWithAI(modifyInstruction: string) {\\r\\n  if (!originalPromptDescription.value) {\\r\\n    window.toastr.warning('');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  isModifyingPrompt.value = true;\\r\\n\\r\\n  try {\\r\\n    window.toastr.info('AI ...');\\r\\n\\r\\n    const systemPrompt = ` MVU Beta COT  6 \\r\\n\\r\\n## \\r\\n1.  {{get_message_variable::stat_data}}\\r\\n2.  _.insert  _.assign\\r\\n3.  [0] \\r\\n4. 6  COT \\r\\n\\r\\n EJS `;\\r\\n\\r\\n    const userPrompt = `# \\r\\n${originalPromptDescription.value}\\r\\n\\r\\n# \\r\\n${modifyInstruction}\\r\\n\\r\\n COT `;\\r\\n\\r\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\r\\n    const response = await fetch(apiUrl, {\\r\\n      method: 'POST',\\r\\n      headers: {\\r\\n        'Content-Type': 'application/json',\\r\\n        Authorization: `Bearer ${settings.value.api_key}`,\\r\\n      },\\r\\n      body: JSON.stringify({\\r\\n        model: settings.value.model,\\r\\n        messages: [\\r\\n          { role: 'system', content: systemPrompt },\\r\\n          { role: 'user', content: userPrompt },\\r\\n        ],\\r\\n        temperature: settings.value.temperature || 0.7,\\r\\n        max_tokens: settings.value.max_tokens || 3000,\\r\\n      }),\\r\\n    });\\r\\n\\r\\n    if (!response.ok) {\\r\\n      throw new Error(`API : ${response.status}`);\\r\\n    }\\r\\n\\r\\n    const data = await response.json();\\r\\n    let result = data.choices?.[0]?.message?.content || '';\\r\\n\\r\\n    generatedPrompt.value = result.trim();\\r\\n\\r\\n    // \\r\\n    originalPromptDescription.value += `\\\\n\\\\n${modifyInstruction}`;\\r\\n\\r\\n    window.toastr.success(' AI ');\\r\\n    showPromptModifyDialog.value = false;\\r\\n  } catch (error: any) {\\r\\n    console.error('AI :', error);\\r\\n    window.toastr.error('AI : ' + error.message);\\r\\n  } finally {\\r\\n    isModifyingPrompt.value = false;\\r\\n  }\\r\\n}\\r\\n\\r\\nfunction exportWorldbook() {\\r\\n  if (!generatedStructure.value) {\\r\\n    window.toastr.error(' [InitVar] ');\\r\\n    return;\\r\\n  }\\r\\n  \\r\\n  if (!generatedPrompt.value) {\\r\\n    autoGeneratePrompt();\\r\\n  }\\r\\n\\r\\n  setTimeout(() => {\\r\\n    exportAsWorldbook();\\r\\n  }, 100);\\r\\n}\\r\\n\\r\\nfunction exportAsWorldbook() {\\r\\n  if (!generatedStructure.value || !generatedPrompt.value) {\\r\\n    window.toastr.error(' [InitVar]  COT ');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  let varNameParsed = 'myVar';\\r\\n  try {\\r\\n    const structure = JSON.parse(generatedStructure.value);\\r\\n    varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\\r\\n  } catch (e) {\\r\\n    console.error(':', e);\\r\\n  }\\r\\n\\r\\n  const worldbookEntries = [\\r\\n    {\\r\\n      uid: generateUID(),\\r\\n      key: [],\\r\\n      keysecondary: [],\\r\\n      comment: '[InitVar]',\\r\\n      content: generatedStructure.value,\\r\\n      constant: false,\\r\\n      vectorized: false,\\r\\n      selective: true,\\r\\n      selectiveLogic: 0,\\r\\n      addMemo: false,\\r\\n      order: 100,\\r\\n      position: 0,\\r\\n      disable: false,\\r\\n      excludeRecursion: false,\\r\\n      delayUntilRecursion: false,\\r\\n      probability: 100,\\r\\n      useProbability: true,\\r\\n      depth: 4,\\r\\n      group: '',\\r\\n      groupOverride: false,\\r\\n      groupWeight: 100,\\r\\n      scanDepth: null,\\r\\n      caseSensitive: null,\\r\\n      matchWholeWords: null,\\r\\n      useGroupScoring: false,\\r\\n      automationId: '',\\r\\n      role: 0,\\r\\n      sticky: 0,\\r\\n      cooldown: 0,\\r\\n      delay: 0,\\r\\n    },\\r\\n    {\\r\\n      uid: generateUID(),\\r\\n      key: [],\\r\\n      keysecondary: [],\\r\\n      comment: '',\\r\\n      content: generatedPrompt.value,\\r\\n      constant: true,\\r\\n      vectorized: false,\\r\\n      selective: false,\\r\\n      selectiveLogic: 0,\\r\\n      addMemo: false,\\r\\n      order: 100,\\r\\n      position: 1,\\r\\n      disable: false,\\r\\n      excludeRecursion: false,\\r\\n      delayUntilRecursion: false,\\r\\n      probability: 100,\\r\\n      useProbability: true,\\r\\n      depth: 0,\\r\\n      group: '',\\r\\n      groupOverride: false,\\r\\n      groupWeight: 100,\\r\\n      scanDepth: null,\\r\\n      caseSensitive: null,\\r\\n      matchWholeWords: null,\\r\\n      useGroupScoring: false,\\r\\n      automationId: '',\\r\\n      role: 0,\\r\\n      sticky: 0,\\r\\n      cooldown: 0,\\r\\n      delay: 0,\\r\\n    },\\r\\n  ];\\r\\n\\r\\n  const jsonStr = JSON.stringify(worldbookEntries, null, 2);\\r\\n  const blob = new Blob([jsonStr], { type: 'application/json' });\\r\\n  const url = URL.createObjectURL(blob);\\r\\n  const a = document.createElement('a');\\r\\n  a.href = url;\\r\\n  a.download = `${varNameParsed}_MVU_worldbook.json`;\\r\\n  document.body.appendChild(a);\\r\\n  a.click();\\r\\n  document.body.removeChild(a);\\r\\n  URL.revokeObjectURL(url);\\r\\n  \\r\\n  window.toastr.success(`  JSON[InitVar] + `);\\r\\n}\\r\\n\\r\\nfunction generateUID(): number {\\r\\n  return Date.now() + Math.floor(Math.random() * 1000);\\r\\n}\\r\\n\\r\\n// ====================  ====================\\r\\n\\r\\n// \\r\\nfunction loadSavedData() {\\r\\n  try {\\r\\n    const scriptId = getScriptIdSafe();\\r\\n    if (!scriptId) {\\r\\n      console.warn('script_id  MVU ');\\r\\n      return;\\r\\n    }\\r\\n\\r\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\r\\n    const savedData = scriptVars.mvu_beta_config;\\r\\n\\r\\n    if (savedData) {\\r\\n      if (savedData.varName) varName.value = savedData.varName;\\r\\n      if (savedData.subFields) subFields.value = savedData.subFields;\\r\\n      if (savedData.generatedStructure) generatedStructure.value = savedData.generatedStructure;\\r\\n      if (savedData.variableCategories) variableCategories.value = savedData.variableCategories;\\r\\n      if (savedData.generatedPrompt) generatedPrompt.value = savedData.generatedPrompt;\\r\\n      console.log('  MVU Beta ');\\r\\n    }\\r\\n  } catch (error) {\\r\\n    console.error(' MVU Beta :', error);\\r\\n  }\\r\\n}\\r\\n\\r\\n// \\r\\nfunction saveData() {\\r\\n  try {\\r\\n    const scriptId = getScriptIdSafe();\\r\\n    if (!scriptId) {\\r\\n      console.warn('script_id  MVU ');\\r\\n    return;\\r\\n  }\\r\\n\\r\\n    insertOrAssignVariables(\\r\\n      {\\r\\n        mvu_beta_config: {\\r\\n          varName: varName.value,\\r\\n          subFields: subFields.value,\\r\\n          generatedStructure: generatedStructure.value,\\r\\n          variableCategories: variableCategories.value,\\r\\n          generatedPrompt: generatedPrompt.value,\\r\\n        },\\r\\n      },\\r\\n      { type: 'script', script_id: scriptId },\\r\\n    );\\r\\n  } catch (error) {\\r\\n    console.error(' MVU Beta :', error);\\r\\n  }\\r\\n}\\r\\n\\r\\n// \\r\\nonMounted(() => {\\r\\n  loadSavedData();\\r\\n});\\r\\n\\r\\n// \\r\\nlet saveTimer: number | null = null;\\r\\nwatch([varName, subFields, generatedStructure, variableCategories, generatedPrompt], () => {\\r\\n  if (saveTimer) clearTimeout(saveTimer);\\r\\n  saveTimer = window.setTimeout(() => {\\r\\n    saveData();\\r\\n  }, 1000); // 1\\r\\n});\\r\\n</script>\\r\\n\\r\\n<style scoped>\\r\\n.tool-section {\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.tool-content {\\r\\n  padding: 0 20px 20px 20px;\\r\\n}\\r\\n\\r\\n.form-group {\\r\\n  margin-bottom: 15px;\\r\\n}\\r\\n\\r\\n.generate-btn:hover .shimmer-effect {\\r\\n  left: 100%;\\r\\n}\\r\\n\\r\\n.output-section {\\r\\n  margin-top: 15px;\\r\\n  padding-top: 15px;\\r\\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\\r\\n}\\r\\n\\r\\n.code-output {\\r\\n  background: #1a1a1a;\\r\\n  border: 1px solid #3a3a3a;\\r\\n  border-radius: 6px;\\r\\n  padding: 15px;\\r\\n  position: relative;\\r\\n  max-height: 400px;\\r\\n  overflow-y: auto;\\r\\n}\\r\\n\\r\\n.code-output pre {\\r\\n  margin: 0;\\r\\n  color: #e0e0e0;\\r\\n  font-family: 'Courier New', monospace;\\r\\n  font-size: 12px;\\r\\n  white-space: pre-wrap;\\r\\n  word-wrap: break-word;\\r\\n}\\r\\n\\r\\n.copy-btn-abs {\\r\\n  position: absolute;\\r\\n  top: 8px;\\r\\n  right: 8px;\\r\\n  background: linear-gradient(135deg, rgba(74, 158, 255, 0.2), rgba(102, 126, 234, 0.3));\\r\\n  border: 1px solid rgba(74, 158, 255, 0.4);\\r\\n  border-radius: 6px;\\r\\n  color: #4a9eff;\\r\\n  padding: 8px 14px;\\r\\n  cursor: pointer;\\r\\n  font-size: 12px;\\r\\n  font-weight: 600;\\r\\n  transition: all 0.3s ease;\\r\\n  box-shadow: 0 2px 8px rgba(74, 158, 255, 0.2);\\r\\n}\\r\\n\\r\\n.copy-btn-abs:hover {\\r\\n  background: linear-gradient(135deg, rgba(74, 158, 255, 0.35), rgba(102, 126, 234, 0.45));\\r\\n  border-color: rgba(74, 158, 255, 0.6);\\r\\n  box-shadow: 0 4px 12px rgba(74, 158, 255, 0.35);\\r\\n  transform: translateY(-2px);\\r\\n  color: #fff;\\r\\n}\\r\\n</style>\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProjectManager.vue?vue&type=style&index=0&id=434cf372&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b913b8a8\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProjectManager.vue?vue&type=style&index=0&id=434cf372&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProjectManager.vue?vue&type=style&index=0&id=434cf372&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=14fcd832&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"76b49fe9\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=14fcd832&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=14fcd832&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes fadeIn-3b4dcffa{from{opacity:0}to{opacity:1}}@keyframes slideUp-3b4dcffa{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/GreetingsTab.vue\"],\"names\":[],\"mappings\":\"AAixDA,2BACE,KACE,SACF,CACA,GACE,SACF,CACF,CAEA,4BACE,KACE,SAAU,CACV,0BACF,CACA,GACE,SAAU,CACV,uBACF,CACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    class=\\\"greetings-tab\\\"\\n    style=\\\"display: flex; flex-direction: column; height: 100%; background: #1a1a1a !important\\\"\\n  >\\n    <!--  -->\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-comments\\\" style=\\\"color: #667eea\\\"></i>\\n        \\n      </h3>\\n      <div class=\\\"header-actions\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span\\n          v-if=\\\"greetings.length > 0\\\"\\n          class=\\\"count-badge\\\"\\n          style=\\\"background: #667eea; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n        >\\n          {{ greetings.length }} \\n        </span>\\n        <button\\n          v-if=\\\"greetings.length > 0\\\"\\n          class=\\\"mini-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 4px;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          :style=\\\"{ color: showHelp ? '#667eea' : '#e0e0e0', borderColor: showHelp ? '#667eea' : '#3a3a3a' }\\\"\\n          @click=\\\"showHelp = !showHelp\\\"\\n        >\\n          <i class=\\\"fa-solid fa-circle-question\\\"></i> {{ showHelp ? '' : '' }}\\n        </button>\\n        <button\\n          v-if=\\\"greetings.length > 0\\\"\\n          class=\\\"mini-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #dc2626;\\n            border: none;\\n            border-radius: 4px;\\n            color: white;\\n            cursor: pointer;\\n            font-size: 12px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"clearAllConfig\\\"\\n          @mouseenter=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\\\"\\n          @mouseleave=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\\\"\\n        >\\n          <i class=\\\"fa-solid fa-eraser\\\"></i> \\n        </button>\\n        <button\\n          v-if=\\\"greetings.length > 0\\\"\\n          class=\\\"mini-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\\n            border: none;\\n            border-radius: 4px;\\n            color: white;\\n            cursor: pointer;\\n            font-size: 12px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"showAiStyleDialog = true\\\"\\n          @mouseenter=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\\\"\\n          @mouseleave=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i> AI\\n        </button>\\n        <button\\n          class=\\\"mini-button refresh-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 4px;\\n            color: #e0e0e0;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"loadConfig\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div style=\\\"flex: 1; display: flex; gap: 20px; padding: 20px; overflow: hidden\\\">\\n      <!--  -->\\n      <div style=\\\"flex: 1; overflow-y: auto; padding-right: 10px\\\">\\n        <!--  /  -->\\n        <div\\n          v-if=\\\"greetings.length === 0\\\"\\n          style=\\\"\\n            display: flex;\\n            flex-direction: column;\\n            align-items: center;\\n            justify-content: center;\\n            padding: 60px 20px;\\n            text-align: center;\\n            color: #888;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-comment-dots\\\" style=\\\"font-size: 64px; margin-bottom: 20px; opacity: 0.3\\\"></i>\\n          <div style=\\\"font-size: 18px; font-weight: 600; color: #e0e0e0; margin-bottom: 10px\\\"></div>\\n          <div style=\\\"font-size: 14px; color: #888; max-width: 400px; line-height: 1.6\\\">\\n            \\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-else-if=\\\"showHelp\\\"\\n          style=\\\"background: #2a2a2a; border: 1px solid #667eea; border-radius: 8px; padding: 20px; margin-bottom: 20px\\\"\\n        >\\n          <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\\\">\\n            <h4 style=\\\"color: #667eea; margin: 0; display: flex; align-items: center; gap: 8px\\\">\\n              <i class=\\\"fa-solid fa-circle-info\\\"></i>\\n              \\n            </h4>\\n            <button\\n              style=\\\"background: transparent; border: none; color: #888; cursor: pointer; font-size: 18px; padding: 4px\\\"\\n              @click=\\\"showHelp = false\\\"\\n            >\\n              <i class=\\\"fa-solid fa-times\\\"></i>\\n            </button>\\n          </div>\\n          <ol style=\\\"color: #ccc; margin: 0; padding-left: 20px; line-height: 1.8\\\">\\n            <li></li>\\n            <li></li>\\n            <li>AI</li>\\n            <li>\\\"AI\\\"</li>\\n            <li>AIHTML</li>\\n            <li></li>\\n            <li>\\\"\\\"</li>\\n            <li>\\\"STScript JSON\\\"</li>\\n            <li>JSON / </li>\\n          </ol>\\n          <div style=\\\"margin-top: 15px; padding-top: 15px; border-top: 1px solid #3a3a3a\\\">\\n            <p style=\\\"color: #888; font-size: 13px; margin: 0\\\">\\n              <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"color: #ffc107\\\"></i>\\n              <strong></strong>0\\n            </p>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div v-else style=\\\"display: flex; flex-direction: column; gap: 15px\\\">\\n          <div\\n            v-for=\\\"(greeting, index) in greetings\\\"\\n            :key=\\\"index\\\"\\n            class=\\\"greeting-item\\\"\\n            style=\\\"\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              padding: 15px;\\n              transition: all 0.3s ease;\\n            \\\"\\n          >\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                display: flex;\\n                align-items: center;\\n                gap: 10px;\\n                margin-bottom: 12px;\\n                padding-bottom: 10px;\\n                border-bottom: 1px solid #3a3a3a;\\n              \\\"\\n            >\\n              <span\\n                style=\\\"\\n                  background: #667eea;\\n                  color: white;\\n                  padding: 4px 10px;\\n                  border-radius: 6px;\\n                  font-size: 12px;\\n                  font-weight: bold;\\n                  min-width: 35px;\\n                  text-align: center;\\n                \\\"\\n              >\\n                #{{ index }}\\n              </span>\\n              <input\\n                v-model=\\\"greeting.icon\\\"\\n                style=\\\"\\n                  width: 60px;\\n                  text-align: center;\\n                  font-size: 20px;\\n                  background: #1a1a1a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  padding: 6px;\\n                  color: #e0e0e0;\\n                \\\"\\n                placeholder=\\\"\\\"\\n                maxlength=\\\"4\\\"\\n                @input=\\\"saveConfig\\\"\\n              />\\n              <input\\n                v-model=\\\"greeting.title\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  background: #1a1a1a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  padding: 8px 12px;\\n                  color: #e0e0e0;\\n                  font-size: 14px;\\n                \\\"\\n                :placeholder=\\\"index === 0 ? '' : ` ${index}`\\\"\\n                @input=\\\"saveConfig\\\"\\n              />\\n              <button\\n                style=\\\"\\n                  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\\n                  border: none;\\n                  color: white;\\n                  padding: 8px 16px;\\n                  border-radius: 6px;\\n                  cursor: pointer;\\n                  transition: all 0.2s ease;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 6px;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"generateDescription(index)\\\"\\n                @mouseenter=\\\"\\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)';\\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\\n                \\\"\\n                @mouseleave=\\\"\\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.3)';\\n                \\\"\\n              >\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n                <span>AI </span>\\n              </button>\\n              <button\\n                v-if=\\\"greeting.description\\\"\\n                style=\\\"\\n                  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\\n                  border: none;\\n                  color: white;\\n                  padding: 8px 16px;\\n                  border-radius: 6px;\\n                  cursor: pointer;\\n                  transition: all 0.2s ease;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 6px;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"editDescription(index)\\\"\\n                @mouseenter=\\\"\\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)';\\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.5)';\\n                \\\"\\n                @mouseleave=\\\"\\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 2px 8px rgba(59, 130, 246, 0.3)';\\n                \\\"\\n              >\\n                <i class=\\\"fa-solid fa-edit\\\"></i>\\n                <span>AI </span>\\n              </button>\\n            </div>\\n\\n            <!--  -->\\n            <textarea\\n              v-model=\\\"greeting.description\\\"\\n              style=\\\"\\n                width: 100%;\\n                background: #1a1a1a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                padding: 10px;\\n                color: #e0e0e0;\\n                font-size: 13px;\\n                font-family: inherit;\\n                resize: vertical;\\n                min-height: 60px;\\n              \\\"\\n              placeholder=\\\"...\\\"\\n              @input=\\\"saveConfig\\\"\\n            >\\n            </textarea>\\n\\n            <!--  -->\\n            <button\\n              style=\\\"\\n                width: 100%;\\n                padding: 10px;\\n                background: transparent;\\n                border: 1px solid #667eea;\\n                border-radius: 6px;\\n                color: #667eea;\\n                font-size: 13px;\\n                cursor: pointer;\\n                transition: all 0.2s ease;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n                margin-top: 10px;\\n              \\\"\\n              @click=\\\"viewOriginalGreeting(index)\\\"\\n              @mouseenter=\\\"($event.currentTarget as HTMLElement).style.background = 'rgba(102, 126, 234, 0.1)'\\\"\\n              @mouseleave=\\\"($event.currentTarget as HTMLElement).style.background = 'transparent'\\\"\\n            >\\n              <i class=\\\"fa-solid fa-file-lines\\\"></i>\\n              <span></span>\\n            </button>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"greetings.length > 0\\\"\\n          style=\\\"\\n            position: sticky;\\n            bottom: 0;\\n            padding: 20px;\\n            background: linear-gradient(to top, #1a1a1a 80%, transparent);\\n            border-top: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: center;\\n            gap: 15px;\\n            margin-top: 20px;\\n          \\\"\\n        >\\n          <button\\n            style=\\\"\\n              padding: 15px 35px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 10px;\\n              color: white;\\n              font-size: 15px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\\n            \\\"\\n            @click=\\\"generateFrontendCode\\\"\\n            @mouseenter=\\\"\\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(-3px)';\\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.6)';\\n            \\\"\\n            @mouseleave=\\\"\\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-code\\\" style=\\\"font-size: 16px\\\"></i>\\n            HTML\\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 15px 35px;\\n              background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n              border: none;\\n              border-radius: 10px;\\n              color: white;\\n              font-size: 15px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);\\n            \\\"\\n            @click=\\\"downloadAsJson\\\"\\n            @mouseenter=\\\"\\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(-3px)';\\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 6px 20px rgba(16, 185, 129, 0.6)';\\n            \\\"\\n            @mouseleave=\\\"\\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.4)';\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-download\\\" style=\\\"font-size: 16px\\\"></i>\\n            STScript JSON\\n          </button>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          flex: 1;\\n          display: flex;\\n          flex-direction: column;\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          overflow: hidden;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n        \\\"\\n      >\\n        <div\\n          style=\\\"\\n            padding: 15px 20px;\\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n            border-bottom: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h4\\n            style=\\\"\\n              margin: 0;\\n              color: white;\\n              font-size: 14px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 8px;\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-eye\\\"></i>\\n            \\n          </h4>\\n          <button\\n            v-if=\\\"previewHtml\\\"\\n            title=\\\"\\\"\\n            style=\\\"\\n              width: 32px;\\n              height: 32px;\\n              background: rgba(255, 255, 255, 0.2);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 14px;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n            \\\"\\n            @click=\\\"openPreviewInNewWindow\\\"\\n          >\\n            <i class=\\\"fa-solid fa-external-link-alt\\\"></i>\\n          </button>\\n        </div>\\n        <div style=\\\"flex: 1; position: relative; overflow: hidden; background: #1e1e1e\\\">\\n          <iframe\\n            v-if=\\\"previewHtml\\\"\\n            :srcdoc=\\\"previewHtml\\\"\\n            sandbox=\\\"allow-scripts allow-same-origin allow-modals allow-forms\\\"\\n            style=\\\"width: 100%; height: 100%; border: none; background: white\\\"\\n          ></iframe>\\n          <div\\n            v-else\\n            style=\\\"\\n              width: 100%;\\n              height: 100%;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              color: #666;\\n              font-size: 14px;\\n              padding: 20px;\\n              text-align: center;\\n              line-height: 1.8;\\n            \\\"\\n          >\\n            <div>\\n              <i class=\\\"fa-solid fa-eye-slash\\\" style=\\\"font-size: 48px; margin-bottom: 15px; opacity: 0.3\\\"></i>\\n              <p style=\\\"margin: 0\\\"></p>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI -->\\n    <AIGenerateDialog\\n      :show=\\\"showAiGenerateDialog\\\"\\n      :is-generating=\\\"isGeneratingAi\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI 20-50...\\\"\\n      :show-input=\\\"false\\\"\\n      @close=\\\"closeAiGenerateDialog\\\"\\n      @confirm=\\\"() => {}\\\"\\n    />\\n\\n    <!-- AI -->\\n    <AIModifyDialog\\n      :show=\\\"showAiEditDialog\\\"\\n      :is-modifying=\\\"isEditingAi\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI \\\"\\n      :examples=\\\"['', '', '', '']\\\"\\n      @close=\\\"showAiEditDialog = false\\\"\\n      @confirm=\\\"confirmEditDescription\\\"\\n    />\\n\\n    <!-- AI -->\\n    <AIModifyDialog\\n      :show=\\\"showAiStyleDialog\\\"\\n      :is-modifying=\\\"isGeneratingStyle\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI HTML\\\"\\n      :examples=\\\"[\\n        '',\\n        '',\\n        '',\\n        '',\\n        '',\\n      ]\\\"\\n      @close=\\\"showAiStyleDialog = false\\\"\\n      @confirm=\\\"generateStyleWithAI\\\"\\n    />\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showOriginalDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        padding: 20px;\\n      \\\"\\n      @click.self=\\\"showOriginalDialog = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);\\n          border-radius: 12px;\\n          padding: 24px;\\n          max-width: 700px;\\n          width: 100%;\\n          max-height: 80vh;\\n          display: flex;\\n          flex-direction: column;\\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\\n        \\\"\\n        @click.stop\\n      >\\n        <!--  -->\\n        <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px\\\">\\n          <h3 style=\\\"margin: 0; color: white; display: flex; align-items: center; gap: 8px\\\">\\n            <i class=\\\"fa-solid fa-file-lines\\\"></i>\\n            <span></span>\\n          </h3>\\n          <button\\n            style=\\\"\\n              background: transparent;\\n              border: none;\\n              color: rgba(255, 255, 255, 0.7);\\n              cursor: pointer;\\n              font-size: 20px;\\n              padding: 4px 8px;\\n              transition: all 0.2s;\\n            \\\"\\n            @click=\\\"showOriginalDialog = false\\\"\\n            @mouseenter=\\\"($event.currentTarget as HTMLElement).style.color = 'white'\\\"\\n            @mouseleave=\\\"($event.currentTarget as HTMLElement).style.color = 'rgba(255, 255, 255, 0.7)'\\\"\\n          >\\n            <i class=\\\"fa-solid fa-times\\\"></i>\\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            background: #1a1a1a;\\n            border-radius: 8px;\\n            padding: 16px;\\n            color: #e0e0e0;\\n            font-size: 14px;\\n            line-height: 1.6;\\n            overflow-y: auto;\\n            flex: 1;\\n            white-space: pre-wrap;\\n            word-wrap: break-word;\\n          \\\"\\n        >\\n          {{ originalGreetingContent }}\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"display: flex; justify-content: flex-end; margin-top: 16px\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 24px;\\n              background: white;\\n              border: none;\\n              border-radius: 6px;\\n              color: #1e3a8a;\\n              font-size: 14px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n            \\\"\\n            @click=\\\"showOriginalDialog = false\\\"\\n            @mouseenter=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\\\"\\n            @mouseleave=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\\\"\\n          >\\n            \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showCodeDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        backdrop-filter: blur(5px);\\n      \\\"\\n      @click=\\\"closeCodeDialog\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 15px;\\n          max-width: 800px;\\n          width: 90%;\\n          max-height: 80vh;\\n          display: flex;\\n          flex-direction: column;\\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\\n        \\\"\\n        @click.stop\\n      >\\n        <div\\n          style=\\\"\\n            padding: 20px;\\n            border-bottom: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h3 style=\\\"color: #e0e0e0; font-size: 18px; margin: 0; display: flex; align-items: center; gap: 10px\\\">\\n            <i class=\\\"fa-solid fa-code\\\"></i>\\n            \\n          </h3>\\n          <button\\n            style=\\\"\\n              background: transparent;\\n              border: none;\\n              color: #888;\\n              font-size: 20px;\\n              cursor: pointer;\\n              padding: 5px 10px;\\n              transition: color 0.2s ease;\\n            \\\"\\n            @click=\\\"closeCodeDialog\\\"\\n          >\\n            <i class=\\\"fa-solid fa-times\\\"></i>\\n          </button>\\n        </div>\\n        <div style=\\\"padding: 20px; overflow-y: auto; flex: 1\\\">\\n          <div\\n            style=\\\"\\n              background: #1a1a1a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              padding: 15px;\\n              margin-bottom: 20px;\\n              color: #e0e0e0;\\n            \\\"\\n          >\\n            <p style=\\\"margin-bottom: 10px; font-weight: 600\\\"><strong></strong></p>\\n            <ol style=\\\"margin-left: 20px; color: #aaa; line-height: 1.8\\\">\\n              <li></li>\\n              <li>\\n                \\n                <code style=\\\"background: #2a2a2a; padding: 2px 6px; border-radius: 4px; color: #667eea\\\"></code\\n                >\\n              </li>\\n              <li></li>\\n            </ol>\\n          </div>\\n          <div\\n            style=\\\"\\n              background: #1a1a1a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              padding: 15px;\\n              max-height: 400px;\\n              overflow-y: auto;\\n              margin-bottom: 15px;\\n            \\\"\\n          >\\n            <pre\\n              style=\\\"margin: 0; white-space: pre-wrap; word-wrap: break-word\\\"\\n            ><code style=\\\"color: #e0e0e0; font-family: 'Consolas', 'Monaco', monospace; font-size: 12px; line-height: 1.6\\\">{{ generatedCode }}</code></pre>\\n          </div>\\n          <button\\n            style=\\\"\\n              width: 100%;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              color: white;\\n              border: none;\\n              padding: 12px;\\n              border-radius: 8px;\\n              font-size: 14px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 8px;\\n            \\\"\\n            @click=\\\"copyCode\\\"\\n          >\\n            <i class=\\\"fa-solid fa-copy\\\"></i>\\n            {{ copyButtonText }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { klona } from 'klona';\\nimport { storeToRefs } from 'pinia';\\nimport toastr from 'toastr';\\nimport { onMounted, ref } from 'vue';\\nimport { z } from 'zod';\\nimport { useSettingsStore } from '../settings';\\nimport { copyToClipboard } from '../utils';\\nimport { normalizeApiEndpoint } from '../utils/api';\\nimport AIGenerateDialog from './AIGenerateDialog.vue';\\nimport AIModifyDialog from './AIModifyDialog.vue';\\n\\n// \\nconst GreetingConfig = z.object({\\n  icon: z.string().default(''),\\n  title: z.string().default(''),\\n  description: z.string().default(''),\\n});\\n\\ntype GreetingConfig = z.infer<typeof GreetingConfig>;\\n\\n// UIHTML\\nconst UIConfig = z.object({\\n  customHtml: z.string().default(''), // AIHTML\\n});\\n\\ntype UIConfig = z.infer<typeof UIConfig>;\\n\\n// settings store\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// \\nconst greetings = ref<GreetingConfig[]>([]);\\nconst uiConfig = ref<UIConfig>(UIConfig.parse({})); // UI\\nconst showCodeDialog = ref(false);\\nconst generatedCode = ref('');\\nconst copyButtonText = ref('');\\nconst showAiGenerateDialog = ref(false);\\nconst showAiEditDialog = ref(false);\\nconst isGeneratingAi = ref(false);\\nconst isEditingAi = ref(false);\\nconst currentEditingIndex = ref(-1);\\nconst showHelp = ref(false); // \\nconst previewHtml = ref('');\\nconst currentCharacter = ref<any>(null);\\nconst showOriginalDialog = ref(false);\\nconst originalGreetingContent = ref('');\\nconst showAiStyleDialog = ref(false); // AI\\nconst isGeneratingStyle = ref(false); // \\n\\n// \\nfunction getCurrentCharacter() {\\n  try {\\n    const char = getCharData('current');\\n    if (char) {\\n      console.log(':', char.name);\\n    } else {\\n      console.log('');\\n    }\\n    return char;\\n  } catch (error) {\\n    console.error(':', error);\\n    return null;\\n  }\\n}\\n\\n// \\nasync function loadConfig() {\\n  try {\\n    const character = getCurrentCharacter();\\n    if (!character) {\\n      greetings.value = [];\\n      console.log('');\\n      return;\\n    }\\n\\n    console.log(':', character.name);\\n\\n    // \\n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\\n    console.log('', allGreetings.length, '');\\n\\n    // \\n    const savedConfig = getVariables({ type: 'character' });\\n    const configs = savedConfig?.greetings_config || [];\\n    const savedUIConfig = savedConfig?.ui_config;\\n\\n    // \\n    greetings.value = allGreetings.map((_, index) => {\\n      const saved = configs[index];\\n      return GreetingConfig.parse(saved || {});\\n    });\\n\\n    // UI\\n    uiConfig.value = UIConfig.parse(savedUIConfig || {});\\n\\n    console.log(':', greetings.value.length, '');\\n    console.log('UI, HTML:', uiConfig.value.customHtml.length);\\n    currentCharacter.value = character;\\n    updatePreview();\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\n// \\nfunction saveConfig() {\\n  try {\\n    replaceVariables(\\n      {\\n        greetings_config: klona(greetings.value),\\n        ui_config: klona(uiConfig.value),\\n      },\\n      { type: 'character' },\\n    );\\n    updatePreview(); // \\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n}\\n\\n// \\nfunction clearAllConfig() {\\n  if (!confirm(`\\\\n\\\\n ${greetings.value.length} \\\\n\\\\n `)) {\\n    return;\\n  }\\n\\n  try {\\n    // \\n    greetings.value = greetings.value.map(() => {\\n      return GreetingConfig.parse({\\n        icon: '',\\n        title: '',\\n        description: '',\\n      });\\n    });\\n\\n    // UI\\n    uiConfig.value.customHtml = '';\\n\\n    // \\n    saveConfig();\\n    \\n    // \\n    updatePreview();\\n    \\n    toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\n// \\nfunction viewOriginalGreeting(index: number) {\\n  try {\\n    const character = getCurrentCharacter();\\n    if (!character) {\\n      toastr.error('');\\n      return;\\n    }\\n\\n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\\n    const greetingContent = allGreetings[index] || '';\\n\\n    if (!greetingContent.trim()) {\\n      toastr.warning('');\\n      return;\\n    }\\n\\n    originalGreetingContent.value = greetingContent;\\n    showOriginalDialog.value = true;\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\n// AI\\nfunction closeAiGenerateDialog() {\\n  if (!isGeneratingAi.value) {\\n    showAiGenerateDialog.value = false;\\n  }\\n}\\n\\n// AI\\nasync function generateDescription(index: number) {\\n  currentEditingIndex.value = index;\\n\\n  // \\n  showAiGenerateDialog.value = true;\\n  isGeneratingAi.value = true;\\n\\n  const idx = index;\\n  if (idx < 0 || idx >= greetings.value.length) {\\n    isGeneratingAi.value = false;\\n    showAiGenerateDialog.value = false;\\n    return;\\n  }\\n\\n  try {\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      toastr.error(' API  API Key');\\n      showAiGenerateDialog.value = false;\\n      isGeneratingAi.value = false;\\n      return;\\n    }\\n\\n    // \\n    const character = getCurrentCharacter();\\n    if (!character) {\\n      toastr.error('');\\n      showAiGenerateDialog.value = false;\\n      isGeneratingAi.value = false;\\n      return;\\n    }\\n\\n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\\n    const greetingContent = allGreetings[idx] || '';\\n\\n    if (!greetingContent.trim()) {\\n      toastr.warning('');\\n      showAiGenerateDialog.value = false;\\n      isGeneratingAi.value = false;\\n      return;\\n    }\\n\\n    // \\n    const systemPrompt = `\\n\\n\\n1.  20-50 \\n2. \\n3. \\n4. \\\"...\\\"\\\"...\\\"\\n5. `;\\n\\n    const userPrompt = `\\n\\n${greetingContent}\\n\\n`;\\n\\n    console.log(' AI ...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\\n    console.log(' :', apiUrl);\\n\\n    //  AI API\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature,\\n        max_tokens: settings.value.max_tokens,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API : ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n\\n    console.log(' [] API :', result);\\n\\n    let aiDescription = result.choices?.[0]?.message?.content?.trim() || '';\\n\\n    console.log(' [] AI :', aiDescription);\\n\\n    if (!aiDescription) {\\n      console.error(' [] AI ');\\n      console.error(':', JSON.stringify(result, null, 2));\\n\\n      // \\n      if (result.error) {\\n        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\\n      }\\n\\n      // \\n      if (!result.choices || result.choices.length === 0) {\\n        throw new Error('API  choices  API ');\\n      }\\n\\n      throw new Error('AI \\\\n1. API Key \\\\n2. \\\\n3. ');\\n    }\\n\\n    // AI\\n    // \\n    aiDescription = aiDescription.replace(/^[\\\"']|[\\\"']$/g, '');\\n    // markdown\\n    aiDescription = aiDescription.replace(/^```.*?\\\\n?|```$/g, '').trim();\\n\\n    if (!aiDescription) {\\n      throw new Error('AI ');\\n    }\\n\\n    console.log(' [] AI :', aiDescription);\\n\\n    // \\n    greetings.value[idx].description = aiDescription;\\n    saveConfig();\\n\\n    toastr.success('');\\n    showAiGenerateDialog.value = false;\\n  } catch (error) {\\n    console.error(' [] AI :', error);\\n    const errorMsg = ': ' + (error as Error).message;\\n    toastr.error(errorMsg);\\n    // \\n    setTimeout(() => {}, 5000);\\n  } finally {\\n    isGeneratingAi.value = false;\\n  }\\n}\\n\\n// AI\\nfunction editDescription(index: number) {\\n  currentEditingIndex.value = index;\\n  showAiEditDialog.value = true;\\n}\\n\\n// AI\\nasync function confirmEditDescription(requirement: string) {\\n  const index = currentEditingIndex.value;\\n  if (index < 0 || index >= greetings.value.length) return;\\n\\n  isEditingAi.value = true;\\n\\n  try {\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      toastr.error(' API  API Key');\\n      showAiEditDialog.value = false;\\n      isEditingAi.value = false;\\n      return;\\n    }\\n\\n    const currentDesc = greetings.value[index].description;\\n\\n    if (!currentDesc.trim()) {\\n      toastr.warning(' AI ');\\n      showAiEditDialog.value = false;\\n      isEditingAi.value = false;\\n      return;\\n    }\\n\\n    // \\n    const systemPrompt = `\\n\\n\\n1. \\n2.  20-50 \\n3. \\n4. `;\\n\\n    const userPrompt = `\\n${currentDesc}\\n\\n\\n${requirement}\\n\\n`;\\n\\n    console.log(' AI ...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\\n    console.log(' :', apiUrl);\\n\\n    //  AI API\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature,\\n        max_tokens: settings.value.max_tokens,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API : ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n\\n    console.log(' [] API :', result);\\n\\n    let aiDescription = result.choices?.[0]?.message?.content?.trim() || '';\\n\\n    console.log(' [] AI :', aiDescription);\\n\\n    if (!aiDescription) {\\n      console.error(' [] AI ');\\n      console.error(':', JSON.stringify(result, null, 2));\\n\\n      // \\n      if (result.error) {\\n        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\\n      }\\n\\n      // \\n      if (!result.choices || result.choices.length === 0) {\\n        throw new Error('API  choices  API ');\\n      }\\n\\n      throw new Error('AI \\\\n1. API Key \\\\n2. \\\\n3. ');\\n    }\\n\\n    // AI\\n    // \\n    aiDescription = aiDescription.replace(/^[\\\"']|[\\\"']$/g, '');\\n    // markdown\\n    aiDescription = aiDescription.replace(/^```.*?\\\\n?|```$/g, '').trim();\\n\\n    if (!aiDescription) {\\n      throw new Error('AI ');\\n    }\\n\\n    console.log(' [] AI :', aiDescription);\\n\\n    // \\n    greetings.value[index].description = aiDescription;\\n    saveConfig();\\n\\n    toastr.success('');\\n    showAiEditDialog.value = false;\\n  } catch (error) {\\n    console.error(' [] AI :', error);\\n    const errorMsg = ': ' + (error as Error).message;\\n    toastr.error(errorMsg);\\n  } finally {\\n    isEditingAi.value = false;\\n  }\\n}\\n\\n// AI\\nasync function generateStyleWithAI(styleDescription: string) {\\n  if (!styleDescription.trim()) {\\n    toastr.warning('');\\n    return;\\n  }\\n\\n  //  API \\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\n    toastr.error(' API  API Key');\\n    showAiStyleDialog.value = false;\\n    return;\\n  }\\n\\n  isGeneratingStyle.value = true;\\n\\n  try {\\n    // HTML\\n    const cards = greetings.value\\n      .map((g, index) => {\\n        const icon = g.icon || '';\\n        const title = g.title || (index === 0 ? '' : ` ${index}`);\\n        const desc = g.description || '';\\n        const badge = index === 0 ? '' : String(index).padStart(2, '0');\\n        return '      <' + 'div class=\\\"scene-card\\\" onclick=\\\"switchGreeting(' + index + ')\\\">' +\\n          '<' + 'div class=\\\"card-badge\\\">' + badge + '<' + '/div>' +\\n          '<' + 'div class=\\\"card-icon\\\">' + icon + '<' + '/div>' +\\n          '<' + 'div class=\\\"card-title\\\">' + title + '<' + '/div>' +\\n          '<' + 'div class=\\\"card-desc\\\">' + desc + '<' + '/div>' +\\n          '<' + '/div>';\\n      })\\n      .join('\\\\n');\\n\\n    const systemPrompt = `HTML/CSS\\n\\nHTML\\n\\n\\n1.  HTML ` + '<' + `html>` + '<' + `head>` + '<' + `body>\\n2.  ` + '<' + `head>  Font Awesome ` + '<' + `link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\\\">\\n3.  ` + '<' + `style>  CSS \\n4. HTML\\n   - body\\n   - .container\\n   - .header\\n     - h1\\n     - p\\n   - .scene-grid\\n   - .scene-card onclick \\n   - .card-badge\\n   - .card-icon\\n   - .card-title\\n   - .card-desc\\n   - .loading\\n5.  switchGreeting(id)  JavaScript \\n6. \\n7. \\n8. HTMLmarkdown`;\\n\\n    //  switchGreeting \\n    const switchGreetingCode = `async function switchGreeting(id) {\\n      try {\\n        const loading = document.getElementById(\\\"loading\\\");\\n        const mainContainer = document.getElementById(\\\"mainContainer\\\");\\n        if (loading) loading.classList.add(\\\"active\\\");\\n        if (mainContainer) mainContainer.style.display = \\\"none\\\";\\n        \\n        if (typeof window.getChatMessages !== \\\"function\\\") {\\n          alert(\\\"\\\");\\n          if (loading) loading.classList.remove(\\\"active\\\");\\n          if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n          return;\\n        }\\n        \\n        const messages = await window.getChatMessages(0, { include_swipe: true });\\n        if (!messages || messages.length === 0) {\\n          alert(\\\"\\\");\\n          if (loading) loading.classList.remove(\\\"active\\\");\\n          if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n          return;\\n        }\\n        \\n        const content = messages[0].swipes[id];\\n        if (!content) {\\n          alert(\\\"\\\");\\n          if (loading) loading.classList.remove(\\\"active\\\");\\n          if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n          return;\\n        }\\n        \\n        await window.setChatMessage(content, 0, { swipe_id: id, refresh: \\\"display_and_render_current\\\" });\\n        \\n        setTimeout(() => {\\n          if (loading) loading.classList.remove(\\\"active\\\");\\n          if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n        }, 500);\\n      } catch (err) {\\n        console.error(\\\":\\\", err);\\n        alert(\\\": \\\" + err.message);\\n        const loading = document.getElementById(\\\"loading\\\");\\n        const mainContainer = document.getElementById(\\\"mainContainer\\\");\\n        if (loading) loading.classList.remove(\\\"active\\\");\\n        if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n      }\\n    }`;\\n\\n    const userPrompt = `${styleDescription}\\n\\n onclick=\\\"switchGreeting()\\\" \\n${cards}\\n\\n ` + '<' + `/body>  JavaScript \\n` + '<' + `script>\\n${switchGreetingCode}\\n` + '<' + `/script>\\n\\n .scene-card  onclick=\\\"switchGreeting()\\\" \\n` + '<' + `div class=\\\"scene-card\\\" onclick=\\\"switchGreeting(0)\\\">\\n\\n loading \\n` + '<' + `div class=\\\"loading\\\" id=\\\"loading\\\" style=\\\"display: none; text-align: center; padding: 40px;\\\">\\n  ` + '<' + `p style=\\\"color: #888; font-size: 18px;\\\">...` + '<' + `/p>\\n` + '<' + `/div>\\n\\nHTML`;\\n\\n    console.log(' AI ...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\\n    console.log(' :', apiUrl);\\n\\n    //  AI API\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature,\\n        max_tokens: settings.value.max_tokens,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API : ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n\\n    console.log(' [] API :', result);\\n\\n    let generatedHtml = result.choices?.[0]?.message?.content?.trim() || '';\\n\\n    console.log(' [] AI :', generatedHtml ? generatedHtml.substring(0, 500) : '()');\\n\\n    if (!generatedHtml) {\\n      console.error(' [] AI ');\\n      console.error(':', JSON.stringify(result, null, 2));\\n\\n      // \\n      if (result.error) {\\n        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\\n      }\\n\\n      throw new Error('AI  API ');\\n    }\\n\\n    // AI\\n    // markdown\\n    generatedHtml = generatedHtml.replace(/^```html\\\\n?|^```\\\\n?|```$/gm, '').trim();\\n\\n    if (!generatedHtml) {\\n      throw new Error('AI ');\\n    }\\n\\n    console.log(' [] AI HTML:', generatedHtml.length);\\n\\n    // HTML\\n    uiConfig.value.customHtml = generatedHtml;\\n    saveConfig();\\n\\n    toastr.success('');\\n    showAiStyleDialog.value = false;\\n\\n    // \\n    updatePreview();\\n  } catch (error) {\\n    console.error(' [] AI :', error);\\n    toastr.error(': ' + (error as Error).message, '', { timeOut: 5000 });\\n  } finally {\\n    isGeneratingStyle.value = false;\\n  }\\n}\\n\\n// \\nasync function generateFrontendCode() {\\n  const character = getCurrentCharacter();\\n  if (!character) {\\n    toastr.warning('');\\n    return;\\n  }\\n\\n  // AIHTML\\n  if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\\n    generatedCode.value = uiConfig.value.customHtml;\\n    showCodeDialog.value = true;\\n    return;\\n  }\\n\\n  // \\n  // \\n  const cards = greetings.value\\n    .map((g, index) => {\\n      const icon = g.icon || '<' + 'i class=\\\"fa-solid fa-comment\\\"><' + '/i>';\\n      const title = g.title || (index === 0 ? '' : ` ${index}`);\\n      const desc = g.description || '';\\n      const badge = index === 0 ? '' : String(index).padStart(2, '0');\\n\\n      return '        <' + 'div class=\\\"scene-card\\\" onclick=\\\"switchGreeting(' + index + ')\\\">' +\\n        '<' + 'div class=\\\"card-badge\\\">' + badge + '<' + '/div>' +\\n        '<' + 'div class=\\\"card-icon\\\">' + icon + '<' + '/div>' +\\n        '<' + 'div class=\\\"card-title\\\">' + title + '<' + '/div>' +\\n        '<' + 'div class=\\\"card-desc\\\">' + desc + '<' + '/div>' +\\n        '<' + '/div>';\\n    })\\n    .join('\\\\n\\\\n');\\n\\n  // HTML\\n  const htmlCode = [\\n    '<' + 'html>',\\n    '<' + 'head>',\\n    '  <' + 'meta charset=\\\"UTF-8\\\">',\\n    '  <' + 'link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\\\">',\\n    '  <' + 'style>',\\n    '    * { margin: 0; padding: 0; box-sizing: border-box; }',\\n    '    body {',\\n    '      font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, sans-serif;',\\n    '      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);',\\n    '      padding: 20px; min-height: 100vh; display: flex; align-items: center; justify-content: center;',\\n    '    }',\\n    '    .container { max-width: 900px; width: 100%; background: rgba(255, 255, 255, 0.95);',\\n    '      border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }',\\n    '    .header { text-align: center; margin-bottom: 40px; }',\\n    '    .header h1 { font-size: 32px; color: #333; margin-bottom: 10px; }',\\n    '    .header p { color: #666; font-size: 16px; }',\\n    '    .scene-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }',\\n    '    .scene-card { background: white; border: 2px solid #e0e0e0; border-radius: 15px;',\\n    '      padding: 25px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }',\\n    '    .scene-card:hover { transform: translateY(-5px); border-color: #667eea;',\\n    '      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }',\\n    '    .card-badge { position: absolute; top: 10px; right: 10px; background: #667eea;',\\n    '      color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; }',\\n    '    .card-icon { font-size: 48px; margin-bottom: 15px; text-align: center; }',\\n    '    .card-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 10px; }',\\n    '    .card-desc { font-size: 14px; color: #666; line-height: 1.5; }',\\n    '    .loading { display: none; text-align: center; padding: 40px; }',\\n    '    .loading.active { display: block; }',\\n    '  <' + '/style>',\\n    '<' + '/head>',\\n    '<' + 'body>',\\n    '  <' + 'div class=\\\"container\\\" id=\\\"mainContainer\\\">',\\n    '    <' + 'div class=\\\"header\\\">',\\n    '      <' + 'h1><' + '/h1>',\\n    '      <' + 'p><' + '/p>',\\n    '    <' + '/div>',\\n    '    <' + 'div class=\\\"scene-grid\\\" id=\\\"sceneGrid\\\">',\\n    cards,\\n      '    <' + '/div>',\\n      '  <' + '/div>',\\n      '  <' + 'div class=\\\"loading\\\" id=\\\"loading\\\"><' + 'p>...<' + '/p><' + '/div>',\\n      '  <' + 'script>',\\n    '    async function switchGreeting(id) {',\\n    '      try {',\\n    '        const loading = document.getElementById(\\\"loading\\\");',\\n    '        const mainContainer = document.getElementById(\\\"mainContainer\\\");',\\n    '        loading.classList.add(\\\"active\\\"); mainContainer.style.display = \\\"none\\\";',\\n    '        const messages = await getChatMessages(0, { include_swipe: true });',\\n    '        if (!messages || messages.length === 0) { alert(\\\"\\\"); return; }',\\n    '        const content = messages[0].swipes[id];',\\n    '        if (!content) { alert(\\\"\\\"); return; }',\\n    '        await setChatMessage(content, 0, { swipe_id: id, refresh: \\\"display_and_render_current\\\" });',\\n    '        setTimeout(() => { loading.classList.remove(\\\"active\\\"); mainContainer.style.display = \\\"block\\\"; }, 500);',\\n    '      } catch (err) { console.error(\\\":\\\", err); alert(\\\": \\\" + err.message); }',\\n    '    }',\\n    '  </' + 'script>',\\n    '<' + '/body>',\\n    '<' + '/html>',\\n  ].join('\\\\n');\\n\\n  // API\\n  const fixedHtmlCode = htmlCode\\n    .replace(\\n      'const messages = await getChatMessages',\\n      'if (typeof window.getChatMessages !== \\\"function\\\") { alert(\\\"\\\"); loading.classList.remove(\\\"active\\\"); mainContainer.style.display = \\\"block\\\"; return; }\\\\n        const messages = await window.getChatMessages',\\n    )\\n    .replace('await setChatMessage', 'await window.setChatMessage')\\n    .replace(\\n      'alert(\\\"\\\"); return;',\\n      'alert(\\\"\\\"); loading.classList.remove(\\\"active\\\"); mainContainer.style.display = \\\"block\\\"; return;',\\n    )\\n    .replace(\\n      'alert(\\\"\\\"); return;',\\n      'alert(\\\"\\\"); loading.classList.remove(\\\"active\\\"); mainContainer.style.display = \\\"block\\\"; return;',\\n    );\\n\\n  generatedCode.value = fixedHtmlCode;\\n\\n  showCodeDialog.value = true;\\n  copyButtonText.value = '';\\n}\\n\\n// \\nasync function copyCode() {\\n  const success = await copyToClipboard(generatedCode.value, ' ');\\n  if (success) {\\n    copyButtonText.value = ' ';\\n    setTimeout(() => {\\n      copyButtonText.value = '';\\n    }, 2000);\\n  }\\n}\\n\\n// \\nfunction closeCodeDialog() {\\n  showCodeDialog.value = false;\\n}\\n\\n// API\\nfunction updatePreview() {\\n  if (greetings.value.length === 0) {\\n    previewHtml.value = '';\\n    return;\\n  }\\n\\n  const character = getCurrentCharacter();\\n  const characterName = character?.name || '';\\n\\n  // AIHTML\\n  if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\\n    console.log(' AIHTML');\\n    \\n    try {\\n      // HTML\\n      const cardsHtml = greetings.value\\n        .map((g, index) => {\\n          const icon = g.icon || '';\\n          const title = g.title || (index === 0 ? '' : ` ${index}`);\\n          const desc = g.description || '';\\n          const badge = index === 0 ? '' : String(index).padStart(2, '0');\\n          \\n          return `\\n        <div class=\\\"scene-card\\\">\\n          <div class=\\\"card-badge\\\">${badge}</div>\\n          <div class=\\\"card-icon\\\">${icon}</div>\\n          <div class=\\\"card-title\\\">${title}</div>\\n          <div class=\\\"card-desc\\\">${desc}</div>\\n        </div>`;\\n        })\\n        .join('\\\\n');\\n      \\n      //  scene-grid \\n      let customHtml = uiConfig.value.customHtml;\\n      \\n      //  scene-grid \\n      const sceneGridPattern = /(<div[^>]*class=\\\"scene-grid\\\"[^>]*>)([\\\\s\\\\S]*?)(<\\\\/div>)/i;\\n      const match = customHtml.match(sceneGridPattern);\\n      \\n      if (match) {\\n        //  scene-grid \\n        customHtml = customHtml.replace(sceneGridPattern, `$1\\\\n${cardsHtml}\\\\n      $3`);\\n        previewHtml.value = customHtml;\\n        console.log(' HTML');\\n        return;\\n      } else {\\n        console.warn(' HTML .scene-grid HTML');\\n        previewHtml.value = uiConfig.value.customHtml;\\n        return;\\n      }\\n    } catch (error) {\\n      console.error(' HTML:', error);\\n      toastr.warning('HTML');\\n      // \\n    }\\n  }\\n\\n  console.log(' ');\\n\\n  //  - \\n  const cards = greetings.value\\n    .map((g, index) => {\\n      const icon = g.icon || '<' + 'i class=\\\"fa-solid fa-comment\\\"><' + '/i>';\\n      const title = g.title || (index === 0 ? '' : ` ${index}`);\\n      const desc = g.description || '';\\n      const badge = index === 0 ? '' : String(index).padStart(2, '0');\\n\\n      return '        <' + 'div class=\\\"scene-card\\\">' +\\n        '<' + 'div class=\\\"card-badge\\\">' + badge + '<' + '/div>' +\\n        '<' + 'div class=\\\"card-icon\\\">' + icon + '<' + '/div>' +\\n        '<' + 'div class=\\\"card-title\\\">' + title + '<' + '/div>' +\\n        '<' + 'div class=\\\"card-desc\\\">' + desc + '<' + '/div>' +\\n        '<' + '/div>';\\n    })\\n    .join('\\\\n\\\\n');\\n\\n  // HTML\\n  const htmlCode = [\\n    '<' + 'html>',\\n    '<' + 'head>',\\n    '  <' + 'meta charset=\\\"UTF-8\\\">',\\n    '  <' + 'link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\\\">',\\n    '  <' + 'style>',\\n    '    * { margin: 0; padding: 0; box-sizing: border-box; }',\\n    '    body {',\\n    '      font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, sans-serif;',\\n    '      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);',\\n    '      padding: 20px; min-height: 100vh; display: flex; align-items: center; justify-content: center;',\\n    '    }',\\n    '    .container { max-width: 900px; width: 100%; background: rgba(255, 255, 255, 0.95);',\\n    '      border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }',\\n    '    .header { text-align: center; margin-bottom: 40px; }',\\n    '    .header h1 { font-size: 32px; color: #333; margin-bottom: 10px; }',\\n    '    .header p { color: #666; font-size: 16px; }',\\n    '    .scene-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }',\\n    '    .scene-card { background: white; border: 2px solid #e0e0e0; border-radius: 15px;',\\n    '      padding: 25px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }',\\n    '    .scene-card:hover { transform: translateY(-5px); border-color: #667eea;',\\n    '      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }',\\n    '    .scene-card:active { transform: translateY(-2px); }',\\n    '    .card-badge { position: absolute; top: 10px; right: 10px; background: #667eea;',\\n    '      color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; }',\\n    '    .card-icon { font-size: 48px; margin-bottom: 15px; text-align: center; }',\\n    '    .card-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 10px; }',\\n    '    .card-desc { font-size: 14px; color: #666; line-height: 1.5; }',\\n    '  <' + '/style>',\\n    '<' + '/head>',\\n    '<' + 'body>',\\n    '  <' + 'div class=\\\"container\\\">',\\n    '    <' + 'div class=\\\"header\\\">',\\n    `      <` + `h1>${characterName} <` + '/h1>',\\n    '      <' + 'p><' + '/p>',\\n    '    <' + '/div>',\\n    '    <' + 'div class=\\\"scene-grid\\\">',\\n    cards,\\n    '    <' + '/div>',\\n    '  <' + '/div>',\\n    '<' + '/body>',\\n    '<' + '/html>',\\n  ].join('\\\\n');\\n\\n  previewHtml.value = htmlCode;\\n}\\n\\n// \\nfunction openPreviewInNewWindow() {\\n  if (!previewHtml.value) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  const character = getCurrentCharacter();\\n  const windowTitle = character ? `${character.name} - ` : '';\\n\\n  // \\n  const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\\n  if (newWindow) {\\n    newWindow.document.write(previewHtml.value);\\n    newWindow.document.close();\\n    newWindow.document.title = windowTitle;\\n    toastr.success('');\\n  } else {\\n    toastr.error('');\\n  }\\n}\\n\\n// STScript JSON\\nasync function downloadAsJson() {\\n  try {\\n    await generateFrontendCode();\\n\\n    if (!generatedCode.value) {\\n      toastr.error('');\\n      return;\\n    }\\n\\n    const character = getCurrentCharacter();\\n    const characterName = character?.name || '';\\n\\n    // UUID\\n    const uuid = crypto.randomUUID();\\n\\n    // STScript JSON\\n    const stscriptJson = {\\n      id: uuid,\\n      scriptName: `${characterName}-`,\\n      disabled: false,\\n      runOnEdit: true,\\n      findRegex: '//g',\\n      replaceString: '```html\\\\n' + generatedCode.value + '\\\\n```',\\n      trimStrings: [],\\n      placement: [1, 2],\\n      substituteRegex: 0,\\n      minDepth: null,\\n      maxDepth: null,\\n      markdownOnly: true,\\n      promptOnly: false,\\n    };\\n\\n    // JSON\\n    const jsonString = JSON.stringify(stscriptJson, null, 4);\\n\\n    // Blob\\n    const blob = new Blob([jsonString], { type: 'application/json' });\\n\\n    // \\n    const url = URL.createObjectURL(blob);\\n    const link = document.createElement('a');\\n    link.href = url;\\n    link.download = `${characterName}-.json`;\\n\\n    // \\n    document.body.appendChild(link);\\n    link.click();\\n\\n    // \\n    document.body.removeChild(link);\\n    URL.revokeObjectURL(url);\\n\\n    toastr.success('JSON');\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\n// \\nonMounted(() => {\\n  loadConfig();\\n});\\n</script>\\n\\n<style scoped>\\n@keyframes fadeIn {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes slideUp {\\n  from {\\n    opacity: 0;\\n    transform: translateY(30px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { ref, watch } from 'vue';\nimport { getChatIdSafe, getScriptIdSafe } from './utils';\n\n//  zod\nlet z: any;\ntry {\n  z = require('zod');\n} catch (e) {\n  console.warn('zod ');\n  // \n  z = {\n    object: (obj: any) => ({\n      parse: (data: any) => data,\n      default: (def: any) => ({ parse: (data: any) => data || def }),\n    }),\n    string: () => ({ default: (def: string) => ({ parse: (data: any) => data || def }) }),\n    number: () => ({ default: (def: number) => ({ parse: (data: any) => data || def }) }),\n    boolean: () => ({ default: (def: boolean) => ({ parse: (data: any) => data || def }) }),\n    array: (schema: any) => ({\n      default: (def: any[]) => ({ parse: (data: any) => (Array.isArray(data) ? data : def) }),\n    }),\n    prefault: (def: any) => ({ parse: (data: any) => data || def }),\n  };\n}\n\nconst Settings = z\n  .object({\n    api_provider: z.string().default('openai'), // 'openai' | 'gemini'\n    api_endpoint: z.string().default('https://api.openai.com/v1'), // base URL\n    api_key: z.string().default(''),\n    model: z.string().default('gpt-4o-mini'),\n    max_tokens: z.number().default(4000),\n    temperature: z.number().default(0.7),\n    top_p: z.number().default(1.0), //  (0-1)\n    presence_penalty: z.number().default(0.0), //  (-2.0 to 2.0)\n    frequency_penalty: z.number().default(0.0), //  (-2.0 to 2.0)\n    auto_summarize_enabled: z.boolean().default(false),\n    summarize_interval: z.number().default(50), // \n    start_message_id: z.number().default(0), // \n    end_message_id: z.number().default(0), // \n    table_start_message_id: z.number().default(0), // \n    table_end_message_id: z.number().default(0), // \n    summary_history: z\n      .array(\n        z.object({\n          start_id: z.number(),\n          end_id: z.number(),\n          content: z.string(),\n        }),\n      )\n      .default([]),\n  })\n  .prefault({});\n\n/**\n *  API  URL\n *  base URL /v1/chat/completions\n */\nexport function normalizeApiEndpoint(endpoint: string, path: string = '/chat/completions'): string {\n  if (!endpoint || endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  const trimmed = endpoint.trim();\n\n  //  /chat/completions  /models\n  if (trimmed.includes('/chat/completions') || trimmed.includes('/models')) {\n    return trimmed;\n  }\n\n  // \n  let baseUrl = trimmed.endsWith('/') ? trimmed.slice(0, -1) : trimmed;\n\n  //  URL  /v1 /v1\n  if (!baseUrl.endsWith('/v1')) {\n    baseUrl = baseUrl + '/v1';\n  }\n\n  // \n  return baseUrl + path;\n}\n\nexport const useSettingsStore = defineStore('settings', () => {\n  // \n  const getScriptIdSafely = () => getScriptIdSafe();\n\n  // \n  const isLocalDebug = () => {\n    return typeof getVariables !== 'function' || !getScriptIdSafely();\n  };\n\n  // \n  const initSettings = () => {\n    const script_id = getScriptIdSafely();\n\n    //  localStorage\n    if (isLocalDebug()) {\n      console.warn('  localStorage ');\n      try {\n        const saved = localStorage.getItem('tavern_helper_settings');\n        if (saved) {\n          return ref(Settings.parse(JSON.parse(saved)));\n        }\n      } catch (e) {\n        console.warn(' localStorage :', e);\n      }\n      return ref(Settings.parse({}));\n    }\n\n    // \n    try {\n      return ref(Settings.parse(getVariables({ type: 'script', script_id })));\n    } catch (e) {\n      console.warn(':', e);\n      return ref(Settings.parse({}));\n    }\n  };\n\n  const settings = initSettings();\n\n  // \n  setTimeout(() => {\n    if (isLocalDebug()) {\n      console.log(' ');\n      return;\n    }\n\n    const script_id = getScriptIdSafely();\n    if (script_id) {\n      try {\n        const realVariables = getVariables({ type: 'script', script_id });\n        if (realVariables && Object.keys(realVariables).length > 0) {\n          settings.value = Settings.parse(realVariables);\n        }\n      } catch (e) {\n        console.warn(':', e);\n      }\n    }\n  }, 200);\n\n  // \n  const saveImmediately = (new_settings: any) => {\n    //  localStorage\n    if (isLocalDebug()) {\n      try {\n        console.log('  localStorage:', klona(new_settings));\n        localStorage.setItem('tavern_helper_settings', JSON.stringify(klona(new_settings)));\n        console.log('  localStorage');\n      } catch (e) {\n        console.error('  localStorage :', e);\n      }\n      return;\n    }\n\n    // \n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      return;\n    }\n    try {\n      console.log(' :', klona(new_settings));\n      insertOrAssignVariables(klona(new_settings), { type: 'script', script_id });\n      console.log(' ');\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n    }\n  };\n\n  // \n  let saveTimeout: number | null = null;\n  const debouncedSave = (new_settings: any) => {\n    if (saveTimeout) {\n      clearTimeout(saveTimeout);\n    }\n    saveTimeout = setTimeout(() => {\n      saveImmediately(new_settings);\n    }, 300); // 300ms \n  };\n\n  watch(settings, debouncedSave, { immediate: false, deep: true });\n  \n  // \n  if (typeof window !== 'undefined') {\n    window.addEventListener('pagehide', () => {\n      console.log(' ');\n      saveImmediately(settings.value);\n    });\n  }\n\n  // \n  const saveSettings = () => {\n    //  localStorage\n    if (isLocalDebug()) {\n      try {\n        console.log('  localStorage:', klona(settings.value));\n        localStorage.setItem('tavern_helper_settings', JSON.stringify(klona(settings.value)));\n        window.toastr?.success('localStorage');\n        return true;\n      } catch (e) {\n        console.error('  localStorage :', e);\n        window.toastr?.error(': ' + (e as Error).message);\n        return false;\n      }\n    }\n\n    // \n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      window.toastr?.error('script_id ');\n      return false;\n    }\n    try {\n      console.log(' :', klona(settings.value));\n      insertOrAssignVariables(klona(settings.value), { type: 'script', script_id });\n      window.toastr?.success('');\n      return true;\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n      return false;\n    }\n  };\n\n  // \n  const reloadSettings = () => {\n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      return false;\n    }\n    try {\n      const realVariables = getVariables({ type: 'script', script_id });\n      if (realVariables && Object.keys(realVariables).length > 0) {\n        settings.value = Settings.parse(realVariables);\n        console.log(' :', settings.value);\n        window.toastr?.success('');\n        return true;\n      }\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n    }\n    return false;\n  };\n\n  return {\n    settings,\n    saveSettings,\n    reloadSettings,\n  };\n});\n\n//  Store - \nexport const useSummaryHistoryStore = defineStore('summaryHistory', () => {\n  const addSummary = (start_id: number, end_id: number, content: string) => {\n    try {\n      //  ID\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        console.error(' ID');\n        window.toastr.error('');\n        return;\n      }\n\n      console.log(':', chat_id);\n\n      // \n      let chatHistory: Array<{ start_id: number; end_id: number; content: string }> = [];\n      try {\n        const chatData = getVariables({ type: 'chat' });\n        if (chatData && chatData.summary_history) {\n          chatHistory = Array.isArray(chatData.summary_history) ? chatData.summary_history : [];\n        }\n      } catch (e) {\n        console.warn(':', e);\n      }\n\n      // \n      chatHistory.unshift({\n        start_id,\n        end_id,\n        content,\n      });\n\n      //  50 \n      if (chatHistory.length > 50) {\n        chatHistory = chatHistory.slice(0, 50);\n      }\n\n      // \n      insertOrAssignVariables(klona({ summary_history: chatHistory }), { type: 'chat' });\n\n      console.log(':', chat_id);\n    } catch (error) {\n      console.error(':', error);\n      window.toastr.error(': ' + (error as Error).message);\n    }\n  };\n\n  const getSummaryHistory = (): Array<{ start_id: number; end_id: number; content: string }> => {\n    try {\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        return [];\n      }\n\n      const chatData = getVariables({ type: 'chat' });\n      if (chatData && chatData.summary_history) {\n        return Array.isArray(chatData.summary_history) ? chatData.summary_history : [];\n      }\n      return [];\n    } catch (e) {\n      console.warn(':', e);\n      return [];\n    }\n  };\n\n  return {\n    addSummary,\n    getSummaryHistory,\n  };\n});\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpTab.vue?vue&type=style&index=0&id=ae7cd18e&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"504d1cc4\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpTab.vue?vue&type=style&index=0&id=ae7cd18e&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpTab.vue?vue&type=style&index=0&id=ae7cd18e&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `button[data-v-9bd7a892]:disabled{cursor:not-allowed !important}button[data-v-9bd7a892]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}div[data-v-9bd7a892]::-webkit-scrollbar{width:8px}div[data-v-9bd7a892]::-webkit-scrollbar-track{background:#1a1a1a}div[data-v-9bd7a892]::-webkit-scrollbar-thumb{background:#ffc107;border-radius:4px}div[data-v-9bd7a892]::-webkit-scrollbar-thumb:hover{background:#ffb300}.progress-bar[data-v-9bd7a892]{position:absolute;top:0;left:0;height:100%;width:100%;background:linear-gradient(90deg,#ffc107 0%,#ffb300 50%,#ffc107 100%);background-size:200% 100%;animation:progressMove-9bd7a892 2s linear infinite;box-shadow:0 0 10px rgba(255,193,7,0.5)}@keyframes progressMove-9bd7a892{0%{background-position:-200% 0}100%{background-position:200% 0}}@keyframes pulse-9bd7a892{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.7;transform:scale(1.1)}}.icon-spin[data-v-9bd7a892]{animation:spin-9bd7a892 1s linear infinite}@keyframes spin-9bd7a892{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/AIModifyDialog.vue\"],\"names\":[],\"mappings\":\"AAmKA,iCACE,6BACF,CAEA,6CACE,0BAA2B,CAC3B,qCACF,CAGA,wCACE,SACF,CAEA,8CACE,kBACF,CAEA,8CACE,kBAAmB,CACnB,iBACF,CAEA,oDACE,kBACF,CAGA,+BACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,WAAY,CACZ,UAAW,CACX,qEAAyE,CACzE,yBAA0B,CAC1B,kDAA0C,CAC1C,uCACF,CAEA,iCACE,GACE,2BACF,CACA,KACE,0BACF,CACF,CAGA,0BACE,QAEE,SAAU,CACV,kBACF,CACA,IACE,WAAY,CACZ,oBACF,CACF,CAGA,4BACE,0CACF,CAEA,yBACE,KACE,sBACF,CACA,GACE,wBACF,CACF\",\"sourcesContent\":[\"<template>\\r\\n  <div\\r\\n    v-if=\\\"show\\\"\\r\\n    @click.self=\\\"$emit('close')\\\"\\r\\n    style=\\\"\\r\\n      position: fixed;\\r\\n      top: 0;\\r\\n      left: 0;\\r\\n      right: 0;\\r\\n      bottom: 0;\\r\\n      background: rgba(0, 0, 0, 0.8);\\r\\n      z-index: 1000000;\\r\\n      display: flex;\\r\\n      align-items: center;\\r\\n      justify-content: center;\\r\\n      padding: 20px;\\r\\n    \\\"\\r\\n  >\\r\\n    <div\\r\\n      style=\\\"\\r\\n        background: #2a2a2a;\\r\\n        border: 2px solid #ffc107;\\r\\n        border-radius: 12px;\\r\\n        padding: 30px;\\r\\n        max-width: 600px;\\r\\n        width: 100%;\\r\\n        max-height: 80vh;\\r\\n        overflow-y: auto;\\r\\n      \\\"\\r\\n      @click.stop\\r\\n    >\\r\\n      <h3 style=\\\"color: #ffc107; margin: 0 0 20px 0\\\">\\r\\n        <i class=\\\"fa-solid fa-edit\\\"></i>\\r\\n        {{ title || 'AI ' }}\\r\\n      </h3>\\r\\n      <p style=\\\"color: #888; margin: 0 0 15px 0; line-height: 1.6\\\">\\r\\n        {{ description || 'AI ' }}\\r\\n      </p>\\r\\n      <ul v-if=\\\"examples && examples.length > 0\\\" style=\\\"color: #888; margin: 0 0 20px 0; padding-left: 20px; line-height: 1.8\\\">\\r\\n        <li v-for=\\\"(example, index) in examples\\\" :key=\\\"index\\\">{{ example }}</li>\\r\\n      </ul>\\r\\n      <textarea\\r\\n        v-model=\\\"localInstruction\\\"\\r\\n        :placeholder=\\\"placeholder || '...'\\\"\\r\\n        style=\\\"\\r\\n          width: 100%;\\r\\n          min-height: 150px;\\r\\n          background: #1a1a1a;\\r\\n          color: #e0e0e0;\\r\\n          border: 1px solid #444;\\r\\n          border-radius: 4px;\\r\\n          padding: 12px;\\r\\n          font-size: 14px;\\r\\n          margin-bottom: 20px;\\r\\n          resize: vertical;\\r\\n          box-sizing: border-box;\\r\\n        \\\"\\r\\n      ></textarea>\\r\\n      <!--  -->\\r\\n      <div\\r\\n        v-if=\\\"isModifying\\\"\\r\\n        style=\\\"\\r\\n          margin-bottom: 20px;\\r\\n          background: #1a1a1a;\\r\\n          border-radius: 8px;\\r\\n          padding: 15px;\\r\\n          border: 1px solid #444;\\r\\n        \\\"\\r\\n      >\\r\\n        <div style=\\\"display: flex; align-items: center; gap: 12px; margin-bottom: 10px\\\">\\r\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"color: #ffc107; font-size: 18px; animation: pulse 1.5s infinite\\\"></i>\\r\\n          <span style=\\\"color: #ffc107; font-weight: 600; font-size: 14px\\\">AI ...</span>\\r\\n        </div>\\r\\n        <div style=\\\"width: 100%; height: 6px; background: #333; border-radius: 3px; overflow: hidden; position: relative\\\">\\r\\n          <div class=\\\"progress-bar\\\"></div>\\r\\n        </div>\\r\\n        <p style=\\\"color: #888; font-size: 12px; margin: 8px 0 0 0; text-align: center\\\"></p>\\r\\n      </div>\\r\\n\\r\\n      <div style=\\\"display: flex; gap: 12px\\\">\\r\\n        <button\\r\\n          @click=\\\"handleConfirm\\\"\\r\\n          :disabled=\\\"!localInstruction || isModifying\\\"\\r\\n          style=\\\"\\r\\n            flex: 1;\\r\\n            background: #ffc107;\\r\\n            color: #000;\\r\\n            border: none;\\r\\n            padding: 12px 24px;\\r\\n            border-radius: 6px;\\r\\n            cursor: pointer;\\r\\n            font-size: 14px;\\r\\n            font-weight: 600;\\r\\n            transition: all 0.2s;\\r\\n            position: relative;\\r\\n            overflow: hidden;\\r\\n          \\\"\\r\\n          :style=\\\"{ opacity: !localInstruction || isModifying ? 0.5 : 1 }\\\"\\r\\n        >\\r\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" :class=\\\"{ 'icon-spin': isModifying }\\\"></i>\\r\\n          {{ isModifying ? '...' : '' }}\\r\\n        </button>\\r\\n        <button\\r\\n          @click=\\\"$emit('close')\\\"\\r\\n          :disabled=\\\"isModifying\\\"\\r\\n          style=\\\"\\r\\n            flex: 1;\\r\\n            background: #666;\\r\\n            color: white;\\r\\n            border: none;\\r\\n            padding: 12px 24px;\\r\\n            border-radius: 6px;\\r\\n            cursor: pointer;\\r\\n            font-size: 14px;\\r\\n            font-weight: 600;\\r\\n            transition: all 0.2s;\\r\\n          \\\"\\r\\n          :style=\\\"{ opacity: isModifying ? 0.5 : 1 }\\\"\\r\\n        >\\r\\n          \\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</template>\\r\\n\\r\\n<script setup lang=\\\"ts\\\">\\r\\nimport { ref, watch } from 'vue';\\r\\n\\r\\nconst props = defineProps<{\\r\\n  show: boolean;\\r\\n  title?: string;\\r\\n  description?: string;\\r\\n  examples?: string[];\\r\\n  placeholder?: string;\\r\\n  isModifying?: boolean;\\r\\n}>();\\r\\n\\r\\nconst emit = defineEmits<{\\r\\n  (e: 'close'): void;\\r\\n  (e: 'confirm', instruction: string): void;\\r\\n}>();\\r\\n\\r\\nconst localInstruction = ref('');\\r\\n\\r\\n// \\r\\nwatch(\\r\\n  () => props.show,\\r\\n  newVal => {\\r\\n    if (newVal) {\\r\\n      localInstruction.value = '';\\r\\n    }\\r\\n  },\\r\\n);\\r\\n\\r\\nconst handleConfirm = () => {\\r\\n  if (localInstruction.value && !props.isModifying) {\\r\\n    emit('confirm', localInstruction.value);\\r\\n  }\\r\\n};\\r\\n</script>\\r\\n\\r\\n<style scoped>\\r\\nbutton:disabled {\\r\\n  cursor: not-allowed !important;\\r\\n}\\r\\n\\r\\nbutton:not(:disabled):hover {\\r\\n  transform: translateY(-2px);\\r\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n/*  */\\r\\ndiv::-webkit-scrollbar {\\r\\n  width: 8px;\\r\\n}\\r\\n\\r\\ndiv::-webkit-scrollbar-track {\\r\\n  background: #1a1a1a;\\r\\n}\\r\\n\\r\\ndiv::-webkit-scrollbar-thumb {\\r\\n  background: #ffc107;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\ndiv::-webkit-scrollbar-thumb:hover {\\r\\n  background: #ffb300;\\r\\n}\\r\\n\\r\\n/*  */\\r\\n.progress-bar {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  height: 100%;\\r\\n  width: 100%;\\r\\n  background: linear-gradient(90deg, #ffc107 0%, #ffb300 50%, #ffc107 100%);\\r\\n  background-size: 200% 100%;\\r\\n  animation: progressMove 2s linear infinite;\\r\\n  box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);\\r\\n}\\r\\n\\r\\n@keyframes progressMove {\\r\\n  0% {\\r\\n    background-position: -200% 0;\\r\\n  }\\r\\n  100% {\\r\\n    background-position: 200% 0;\\r\\n  }\\r\\n}\\r\\n\\r\\n/*  */\\r\\n@keyframes pulse {\\r\\n  0%,\\r\\n  100% {\\r\\n    opacity: 1;\\r\\n    transform: scale(1);\\r\\n  }\\r\\n  50% {\\r\\n    opacity: 0.7;\\r\\n    transform: scale(1.1);\\r\\n  }\\r\\n}\\r\\n\\r\\n/*  */\\r\\n.icon-spin {\\r\\n  animation: spin 1s linear infinite;\\r\\n}\\r\\n\\r\\n@keyframes spin {\\r\\n  from {\\r\\n    transform: rotate(0deg);\\r\\n  }\\r\\n  to {\\r\\n    transform: rotate(360deg);\\r\\n  }\\r\\n}\\r\\n</style>\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=170043aa&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ffed978a\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=170043aa&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=170043aa&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusBarGenerator.vue?vue&type=style&index=0&id=bbbf3552&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"62ec37d9\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusBarGenerator.vue?vue&type=style&index=0&id=bbbf3552&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusBarGenerator.vue?vue&type=style&index=0&id=bbbf3552&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","$(() => {\r\n  // \r\n  setTimeout(() => {\r\n    let isAdding = false;\r\n\r\n    const addNavButton = () => {\r\n      // \r\n      if (isAdding) {\r\n        return;\r\n      }\r\n      isAdding = true;\r\n      try {\r\n        // \r\n        const possibleSelectors = [\r\n          '#top-bar', //  HTML \r\n          '#top-settings-holder', //  HTML \r\n          '#topBar',\r\n          '.topBar',\r\n          '#navbar',\r\n          '.navbar',\r\n          'header',\r\n          '.header',\r\n          '#header',\r\n          '.top_header',\r\n          '.navigation',\r\n        ];\r\n\r\n        let topBar: JQuery<HTMLElement> = $();\r\n        let foundSelector = '';\r\n\r\n        for (const selector of possibleSelectors) {\r\n          const found = $(selector);\r\n          if (found.length > 0) {\r\n            topBar = found;\r\n            foundSelector = selector;\r\n            console.log(`: ${selector}`);\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (topBar.length === 0) {\r\n          console.log('500ms...');\r\n          setTimeout(addNavButton, 500);\r\n          return;\r\n        }\r\n\r\n        console.log(`: ${foundSelector}`);\r\n\r\n        // \r\n        const existingButton = $('#memoryNavButton');\r\n        if (existingButton.length > 0) {\r\n          console.log('mzrodyu');\r\n          existingButton.remove();\r\n        }\r\n\r\n        //  -  top-bar top-settings-holder\r\n        let targetContainer = topBar;\r\n        if (foundSelector === '#top-bar') {\r\n          const settingsHolder = $('#top-settings-holder');\r\n          if (settingsHolder.length > 0) {\r\n            targetContainer = settingsHolder;\r\n            console.log(' top-settings-holder ');\r\n          }\r\n        }\r\n\r\n        //  - \r\n        const navButton = $(\r\n          `<div id=\"memoryNavButton\" class=\"interactable\" style=\"\r\n            padding: 8px;\r\n            display: inline-flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            cursor: pointer;\r\n            color: inherit;\r\n            border-radius: 4px;\r\n            transition: background 0.2s;\r\n            position: relative;\r\n          \" title=\"mzrodyu\">\r\n            <span style=\"font-size: 24px\"></span>\r\n          </div>`,\r\n        );\r\n\r\n        // \r\n        console.log(':', targetContainer[0]?.id || '');\r\n        console.log('HTML:', targetContainer[0]?.outerHTML?.substring(0, 300));\r\n\r\n        //  targetContainer  top-settings-holder\r\n        if (targetContainer[0]?.id === 'top-settings-holder') {\r\n          console.log(' top-settings-holder ');\r\n          const firstChild = targetContainer.children().first();\r\n          if (firstChild.length > 0) {\r\n            navButton.insertBefore(firstChild);\r\n          } else {\r\n            targetContainer.prepend(navButton);\r\n          }\r\n        } else {\r\n          // \r\n          console.log('');\r\n          targetContainer.prepend(navButton);\r\n        }\r\n\r\n        //  - \r\n        navButton.on('click', function (e) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n\r\n          console.log('mzrodyu');\r\n\r\n          // \r\n          const panel = $('#memoryManagementPanel');\r\n          if (panel.length > 0) {\r\n            if (panel.is(':visible')) {\r\n              panel.fadeOut(200);\r\n            } else {\r\n              panel.fadeIn(200);\r\n            }\r\n          } else {\r\n            toastr.error('');\r\n          }\r\n        });\r\n\r\n        // \r\n        navButton\r\n          .on('mouseenter', function () {\r\n            $(this).css('background', 'rgba(255, 255, 255, 0.1)');\r\n          })\r\n          .on('mouseleave', function () {\r\n            $(this).css('background', 'transparent');\r\n          });\r\n\r\n        console.log('mzrodyu:', targetContainer[0]?.id || '');\r\n        console.log(':', navButton[0]?.parentElement?.children?.[0]?.className || '');\r\n        console.log(':', navButton[0]);\r\n        console.log(':', $('#memoryManagementPanel').length);\r\n        isAdding = false;\r\n      } catch (error) {\r\n        console.error(':', error);\r\n        isAdding = false;\r\n        setTimeout(addNavButton, 500);\r\n      }\r\n    };\r\n\r\n    // \r\n    addNavButton();\r\n\r\n    // 2\r\n    setInterval(() => {\r\n      const button = $('#memoryNavButton');\r\n      if (button.length === 0 && !isAdding) {\r\n        console.log('...');\r\n        addNavButton();\r\n      }\r\n    }, 2000);\r\n\r\n    // UI\r\n    if (typeof eventOn === 'function') {\r\n      try {\r\n        // \r\n        eventOn(tavern_events.CHAT_CHANGED, () => {\r\n          console.log('...');\r\n          setTimeout(() => {\r\n            const button = $('#memoryNavButton');\r\n            if (button.length === 0 && !isAdding) {\r\n              console.log('...');\r\n              addNavButton();\r\n            }\r\n          }, 500);\r\n        });\r\n      } catch (e) {\r\n        console.log(':', e);\r\n      }\r\n    }\r\n  }, 300);\r\n});\r\n\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.regex-ui-generator[data-v-f1283e36]{height:100%;overflow-y:auto}button[data-v-f1283e36]:disabled{cursor:not-allowed !important;opacity:0.5 !important}button[data-v-f1283e36]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}code[data-v-f1283e36]{background:#1a1a1a;padding:2px 6px;border-radius:3px;font-family:'Consolas',monospace}pre[data-v-f1283e36]::-webkit-scrollbar{width:8px;height:8px}pre[data-v-f1283e36]::-webkit-scrollbar-track{background:#1a1a1a}pre[data-v-f1283e36]::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:4px}pre[data-v-f1283e36]::-webkit-scrollbar-thumb:hover{background:#5ab0ff}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/RegexUIGenerator.vue\"],\"names\":[],\"mappings\":\"AAuqBA,qCACE,WAAY,CACZ,eACF,CAEA,iCACE,6BAA8B,CAC9B,sBACF,CAEA,6CACE,0BAA2B,CAC3B,qCACF,CAEA,sBACE,kBAAmB,CACnB,eAAgB,CAChB,iBAAkB,CAClB,gCACF,CAEA,wCACE,SAAU,CACV,UACF,CAEA,8CACE,kBACF,CAEA,8CACE,kBAAmB,CACnB,iBACF,CAEA,oDACE,kBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"regex-ui-generator\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\\n        padding: 20px;\\n        border-radius: 12px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(102, 126, 234, 0.2);\\n      \\\"\\n    >\\n      <h3 style=\\\"color: #4a9eff; margin: 0 0 10px 0; font-size: 20px; font-weight: 600\\\"> </h3>\\n      <p style=\\\"color: #888; margin: 0; font-size: 14px; line-height: 1.6\\\">\\n        AI  HTML/CSS/JS \\n      </p>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        background: #2a2a2a;\\n        padding: 20px;\\n        border-radius: 8px;\\n        margin-bottom: 20px;\\n        border-left: 4px solid #ffc107;\\n      \\\"\\n    >\\n      <h4 style=\\\"color: #ffc107; margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center; gap: 8px\\\">\\n        <i class=\\\"fa-solid fa-lightbulb\\\"></i>\\n        \\n      </h4>\\n      <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; line-height: 2\\\">\\n        <li>\\n          <strong style=\\\"color: #fff\\\">1</strong> \\n          <code style=\\\"background: #1a1a1a; padding: 2px 6px; border-radius: 3px; color: #4a9eff\\\"></code>\\n          \\n        </li>\\n        <li><strong style=\\\"color: #fff\\\">2</strong> </li>\\n        <li><strong style=\\\"color: #fff\\\">3</strong> \\\"AI \\\"AI </li>\\n        <li>\\n          <strong style=\\\"color: #fff\\\">4</strong> <strong style=\\\"color: #51cf66\\\"></strong\\n          >\\\"AI \\\"\\n        </li>\\n        <li><strong style=\\\"color: #fff\\\">5</strong> \\\"\\\"</li>\\n        <li>\\n          <strong style=\\\"color: #fff\\\"></strong> \\n          <code style=\\\"background: #1a1a1a; padding: 2px 6px; border-radius: 3px; color: #51cf66\\\"></code>\\n          \\n        </li>\\n      </ol>\\n    </div>\\n\\n    <!--  -->\\n    <div style=\\\"display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px\\\">\\n      <!--  -->\\n      <div style=\\\"display: flex; flex-direction: column; gap: 20px\\\">\\n        <!--  -->\\n        <div style=\\\"background: #2a2a2a; padding: 20px; border-radius: 8px\\\">\\n          <h4 style=\\\"color: #4a9eff; margin: 0 0 15px 0; font-size: 16px\\\">\\n            <i class=\\\"fa-solid fa-key\\\"></i>\\n            :\\n          </h4>\\n          <input\\n            v-model=\\\"triggerKeyword\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              width: 100%;\\n              background: #1a1a1a;\\n              color: #e0e0e0;\\n              border: 1px solid #444;\\n              border-radius: 4px;\\n              padding: 12px;\\n              font-size: 14px;\\n            \\\"\\n          />\\n        </div>\\n\\n        <!-- AI  -->\\n        <div\\n          style=\\\"background: #2a2a2a; padding: 20px; border-radius: 8px; flex: 1; display: flex; flex-direction: column\\\"\\n        >\\n          <h4 style=\\\"color: #4a9eff; margin: 0 0 15px 0; font-size: 16px\\\">\\n            <i class=\\\"fa-solid fa-magic\\\"></i>\\n            AI :\\n          </h4>\\n          <p style=\\\"color: #888; margin: 0 0 10px 0; font-size: 13px\\\">\\n            RPG...\\n          </p>\\n          <textarea\\n            v-model=\\\"interfaceDescription\\\"\\n            placeholder=\\\"&#10;- &#10;- RPG&#10;- &#10;&#10;&#10;\\\"\\n            style=\\\"\\n              width: 100%;\\n              flex: 1;\\n              min-height: 200px;\\n              background: #1a1a1a;\\n              color: #e0e0e0;\\n              border: 1px solid #444;\\n              border-radius: 4px;\\n              padding: 12px;\\n              font-size: 14px;\\n              font-family: 'Consolas', monospace;\\n              resize: none;\\n              line-height: 1.6;\\n            \\\"\\n          />\\n\\n          <!-- AI / -->\\n          <div style=\\\"display: flex; gap: 12px; margin-top: 15px\\\">\\n            <button\\n              :disabled=\\\"!triggerKeyword || !interfaceDescription || isGenerating\\\"\\n              style=\\\"\\n                flex: 1;\\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n                color: white;\\n                border: none;\\n                padding: 12px 24px;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-size: 14px;\\n                font-weight: 600;\\n                transition: all 0.3s;\\n              \\\"\\n              :style=\\\"{ opacity: !triggerKeyword || !interfaceDescription || isGenerating ? 0.5 : 1 }\\\"\\n              @click=\\\"generateWithAI\\\"\\n            >\\n              <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n              {{ isGenerating ? 'AI ...' : generatedCode ? 'AI ' : 'AI ' }}\\n            </button>\\n            <button\\n              v-if=\\\"generatedCode\\\"\\n              :disabled=\\\"isModifying\\\"\\n              style=\\\"\\n                flex: 1;\\n                background: #ffc107;\\n                color: #000;\\n                border: none;\\n                padding: 12px 24px;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-size: 14px;\\n                font-weight: 600;\\n                transition: all 0.3s;\\n              \\\"\\n              :style=\\\"{ opacity: isModifying ? 0.5 : 1 }\\\"\\n              @click=\\\"showModifyDialog\\\"\\n            >\\n              <i class=\\\"fa-solid fa-edit\\\"></i>\\n              {{ isModifying ? '...' : 'AI ' }}\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div style=\\\"background: #2a2a2a; padding: 20px; border-radius: 8px; display: flex; flex-direction: column\\\">\\n        <h4 style=\\\"color: #51cf66; margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center; gap: 8px\\\">\\n          <i class=\\\"fa-solid fa-eye\\\"></i>\\n          \\n          <span\\n            v-if=\\\"generatedCode\\\"\\n            style=\\\"\\n              margin-left: auto;\\n              background: #51cf66;\\n              color: white;\\n              padding: 4px 12px;\\n              border-radius: 12px;\\n              font-size: 12px;\\n            \\\"\\n            ></span\\n          >\\n        </h4>\\n        <div\\n          style=\\\"\\n            flex: 1;\\n            background: #1a1a1a;\\n            border: 2px solid #444;\\n            border-radius: 6px;\\n            overflow: hidden;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            min-height: 400px;\\n          \\\"\\n        >\\n          <div v-if=\\\"!generatedCode\\\" style=\\\"text-align: center; color: #666; padding: 40px\\\">\\n            <i class=\\\"fa-solid fa-image\\\" style=\\\"font-size: 64px; margin-bottom: 20px; opacity: 0.3\\\"></i>\\n            <p style=\\\"font-size: 16px; margin: 0\\\">...</p>\\n            <p style=\\\"font-size: 14px; margin: 10px 0 0 0\\\">\\\"AI \\\"</p>\\n          </div>\\n          <iframe\\n            v-else\\n            ref=\\\"previewFrame\\\"\\n            :srcdoc=\\\"generatedCode\\\"\\n            style=\\\"width: 100%; height: 100%; border: none; background: white\\\"\\n          ></iframe>\\n        </div>\\n\\n        <!--  -->\\n        <button\\n          v-if=\\\"generatedCode\\\"\\n          style=\\\"\\n            margin-top: 15px;\\n            background: #51cf66;\\n            color: white;\\n            border: none;\\n            padding: 12px 24px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 14px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"copyRegex\\\"\\n        >\\n          <i class=\\\"fa-solid fa-copy\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div v-if=\\\"generatedRegex\\\" style=\\\"background: #2a2a2a; padding: 20px; border-radius: 8px\\\">\\n      <div\\n        style=\\\"display: flex; justify-content: space-between; align-items: center; cursor: pointer; margin-bottom: 15px\\\"\\n        @click=\\\"showCode = !showCode\\\"\\n      >\\n        <h4 style=\\\"color: #4a9eff; margin: 0\\\">\\n          <i class=\\\"fa-solid fa-code\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"showCode ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #888; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n      <div\\n        v-if=\\\"showCode\\\"\\n        style=\\\"\\n          background: #1a1a1a;\\n          padding: 15px;\\n          border-radius: 4px;\\n          border: 1px solid #444;\\n          max-height: 300px;\\n          overflow-y: auto;\\n        \\\"\\n      >\\n        <pre\\n          style=\\\"\\n            margin: 0;\\n            color: #e0e0e0;\\n            font-family: 'Consolas', monospace;\\n            font-size: 13px;\\n            white-space: pre-wrap;\\n            word-wrap: break-word;\\n          \\\"\\n          >{{ generatedRegex }}</pre\\n        >\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showModify\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        z-index: 1000000;\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        padding: 20px;\\n      \\\"\\n      @click.self=\\\"showModify = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 2px solid #ffc107;\\n          border-radius: 12px;\\n          padding: 30px;\\n          max-width: 600px;\\n          width: 100%;\\n        \\\"\\n        @click.stop\\n      >\\n        <h3 style=\\\"color: #ffc107; margin: 0 0 20px 0\\\">\\n          <i class=\\\"fa-solid fa-edit\\\"></i>\\n          AI \\n        </h3>\\n        <p style=\\\"color: #888; margin: 0 0 15px 0; line-height: 1.6\\\">\\n          AI \\n        </p>\\n        <ul style=\\\"color: #888; margin: 0 0 20px 0; padding-left: 20px; line-height: 1.8\\\">\\n          <li></li>\\n          <li></li>\\n          <li></li>\\n          <li></li>\\n        </ul>\\n        <textarea\\n          v-model=\\\"modifyInstruction\\\"\\n          placeholder=\\\"...\\\"\\n          style=\\\"\\n            width: 100%;\\n            min-height: 150px;\\n            background: #1a1a1a;\\n            color: #e0e0e0;\\n            border: 1px solid #444;\\n            border-radius: 4px;\\n            padding: 12px;\\n            font-size: 14px;\\n            margin-bottom: 20px;\\n            resize: vertical;\\n          \\\"\\n        ></textarea>\\n        <div style=\\\"display: flex; gap: 12px\\\">\\n          <button\\n            :disabled=\\\"!modifyInstruction || isModifying\\\"\\n            style=\\\"\\n              flex: 1;\\n              background: #ffc107;\\n              color: #000;\\n              border: none;\\n              padding: 12px 24px;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-size: 14px;\\n              font-weight: 600;\\n            \\\"\\n            :style=\\\"{ opacity: !modifyInstruction || isModifying ? 0.5 : 1 }\\\"\\n            @click=\\\"modifyWithAI\\\"\\n          >\\n            <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n            {{ isModifying ? '...' : '' }}\\n          </button>\\n          <button\\n            style=\\\"\\n              flex: 1;\\n              background: #666;\\n              color: white;\\n              border: none;\\n              padding: 12px 24px;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-size: 14px;\\n              font-weight: 600;\\n            \\\"\\n            @click=\\\"showModify = false\\\"\\n          >\\n            \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\\nimport { copyToClipboard } from '../utils';\\n\\nconst settingsStore = useSettingsStore();\\nconst settings = settingsStore.settings;\\n\\nconst triggerKeyword = ref('');\\nconst interfaceDescription = ref('');\\nconst generatedCode = ref('');\\nconst generatedRegex = ref('');\\nconst isGenerating = ref(false);\\nconst isModifying = ref(false);\\nconst showCode = ref(false);\\nconst showModify = ref(false);\\nconst modifyInstruction = ref('');\\nconst previewFrame = ref<HTMLIFrameElement | null>(null);\\n\\n// AI \\nconst generateWithAI = async () => {\\n  if (!triggerKeyword.value || !interfaceDescription.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isGenerating.value = true;\\n\\n  try {\\n    const prompt = ` HTML \\n\\n${triggerKeyword.value}\\n\\n\\n${interfaceDescription.value}\\n\\n HTML \\n1. HTML \\n2.  <style> CSS \\n3.  <script>  JS \\n\\n\\n- HTML \\n- CSS \\n- JS \\n- \\n- \\n\\n HTML  <!DOCTYPE html>  <div> `;\\n\\n    const apiUrl = normalizeApiEndpoint(settings.api_endpoint);\\n\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: ' HTML/CSS/JS ',\\n          },\\n          { role: 'user', content: prompt },\\n        ],\\n        temperature: 0.7,\\n        max_tokens: 4000,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    let result = data.choices?.[0]?.message?.content || '';\\n\\n    console.log(' [] AI :', result.length);\\n    console.log(' [] AI 500:', result.substring(0, 500));\\n\\n    //  markdown \\n    result = result\\n      .replace(/```html\\\\n?/g, '')\\n      .replace(/```\\\\n?/g, '')\\n      .trim();\\n\\n    // HTMLAI\\n    // 1.  <!DOCTYPE html \\n    const doctypeMatch = result.match(/<!DOCTYPE html>[\\\\s\\\\S]*/i);\\n    if (doctypeMatch) {\\n      result = doctypeMatch[0].trim();\\n      console.log(' [] HTMLDOCTYPE');\\n    } else {\\n      // 2. DOCTYPE <html \\n      const htmlMatch = result.match(/<html[\\\\s\\\\S]*/i);\\n      if (htmlMatch) {\\n        result = htmlMatch[0].trim();\\n        console.log(' [] HTMLDOCTYPE');\\n      } else if (result.includes('<') && result.includes('>')) {\\n        // 3. htmlHTML\\n        console.log(' [] HTML');\\n        // \\n        if (!result.includes('<html')) {\\n          result = `<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n</head>\\n<body>\\n${result}\\n</body>\\n</html>`;\\n          console.log(' [] HTML');\\n        }\\n      } else {\\n        // 4. HTMLAI\\n        console.error(' [] AIHTML');\\n        console.error('AI:', result);\\n        throw new Error('AIHTML');\\n      }\\n    }\\n\\n    console.log(' [] HTML:', result.length);\\n\\n    generatedCode.value = result;\\n\\n    // \\n    const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\\\]\\\\\\\\]/g, '\\\\\\\\$&');\\n    const regexJson = {\\n      id: `regex_ui_${Date.now()}`,\\n      scriptName: `_${triggerKeyword.value}`,\\n      findRegex: findRegex,\\n      replaceString: result,\\n      trimStrings: [],\\n      placement: [2], // AI\\n      disabled: false,\\n      markdownOnly: true,\\n      promptOnly: false,\\n      runOnEdit: true,\\n      substituteRegex: 0,\\n      minDepth: null,\\n      maxDepth: null,\\n    };\\n    generatedRegex.value = JSON.stringify(regexJson, null, 2);\\n\\n    window.toastr.success('AI ');\\n  } catch (error) {\\n    console.error('AI :', error);\\n    window.toastr.error('AI : ' + (error as Error).message);\\n  } finally {\\n    isGenerating.value = false;\\n  }\\n};\\n\\n// \\nconst showModifyDialog = () => {\\n  modifyInstruction.value = '';\\n  showModify.value = true;\\n};\\n\\n// AI \\nconst modifyWithAI = async () => {\\n  if (!modifyInstruction.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isModifying.value = true;\\n\\n  try {\\n    //  +  AI \\n    const prompt = ` HTML \\n\\n${triggerKeyword.value}\\n\\n\\n${interfaceDescription.value}\\n\\n\\n${modifyInstruction.value}\\n\\n HTML \\n1. HTML \\n2.  <style> CSS \\n3.  <script>  JS \\n\\n\\n- \\n- HTML \\n- CSS \\n- JS \\n- \\n\\n HTML  <!DOCTYPE html>  <div> `;\\n\\n    const apiUrl = normalizeApiEndpoint(settings.api_endpoint);\\n\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content:\\n              ' HTML/CSS/JS ',\\n          },\\n          { role: 'user', content: prompt },\\n        ],\\n        temperature: 0.7,\\n        max_tokens: 4000,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    let result = data.choices?.[0]?.message?.content || '';\\n\\n    console.log(' [] AI :', result.length);\\n    console.log(' [] AI 500:', result.substring(0, 500));\\n\\n    //  markdown \\n    result = result\\n      .replace(/```html\\\\n?/g, '')\\n      .replace(/```\\\\n?/g, '')\\n      .trim();\\n\\n    // HTMLAI\\n    // 1.  <!DOCTYPE html \\n    const doctypeMatch = result.match(/<!DOCTYPE html>[\\\\s\\\\S]*/i);\\n    if (doctypeMatch) {\\n      result = doctypeMatch[0].trim();\\n      console.log(' [] HTMLDOCTYPE');\\n    } else {\\n      // 2. DOCTYPE <html \\n      const htmlMatch = result.match(/<html[\\\\s\\\\S]*/i);\\n      if (htmlMatch) {\\n        result = htmlMatch[0].trim();\\n        console.log(' [] HTMLDOCTYPE');\\n      } else if (result.includes('<') && result.includes('>')) {\\n        // 3. htmlHTML\\n        console.log(' [] HTML');\\n        // \\n        if (!result.includes('<html')) {\\n          result = `<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n</head>\\n<body>\\n${result}\\n</body>\\n</html>`;\\n          console.log(' [] HTML');\\n        }\\n      } else {\\n        // 4. HTMLAI\\n        console.error(' [] AIHTML');\\n        console.error('AI:', result);\\n        throw new Error('AIHTML');\\n      }\\n    }\\n\\n    console.log(' [] HTML:', result.length);\\n\\n    generatedCode.value = result;\\n\\n    // \\n    const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\\\]\\\\\\\\]/g, '\\\\\\\\$&');\\n    const regexJson = {\\n      id: `regex_ui_${Date.now()}`,\\n      scriptName: `_${triggerKeyword.value}`,\\n      findRegex: findRegex,\\n      replaceString: result,\\n      trimStrings: [],\\n      placement: [2], // AI\\n      disabled: false,\\n      markdownOnly: true,\\n      promptOnly: false,\\n      runOnEdit: true,\\n      substituteRegex: 0,\\n      minDepth: null,\\n      maxDepth: null,\\n    };\\n    generatedRegex.value = JSON.stringify(regexJson, null, 2);\\n\\n    // \\n    interfaceDescription.value = `${interfaceDescription.value}\\\\n\\\\n\\\\n${modifyInstruction.value}`;\\n\\n    window.toastr.success('AI ');\\n    showModify.value = false;\\n  } catch (error) {\\n    console.error('AI :', error);\\n    window.toastr.error('AI : ' + (error as Error).message);\\n  } finally {\\n    isModifying.value = false;\\n  }\\n};\\n\\n// \\nconst copyRegex = () => {\\n  copyToClipboard(generatedRegex.value, '');\\n};\\n</script>\\n\\n<style scoped>\\n.regex-ui-generator {\\n  height: 100%;\\n  overflow-y: auto;\\n}\\n\\nbutton:disabled {\\n  cursor: not-allowed !important;\\n  opacity: 0.5 !important;\\n}\\n\\nbutton:not(:disabled):hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n}\\n\\ncode {\\n  background: #1a1a1a;\\n  padding: 2px 6px;\\n  border-radius: 3px;\\n  font-family: 'Consolas', monospace;\\n}\\n\\npre::-webkit-scrollbar {\\n  width: 8px;\\n  height: 8px;\\n}\\n\\npre::-webkit-scrollbar-track {\\n  background: #1a1a1a;\\n}\\n\\npre::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 4px;\\n}\\n\\npre::-webkit-scrollbar-thumb:hover {\\n  background: #5ab0ff;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.memory-panel-container[data-v-13cb6ed0]{display:flex;flex-direction:column;height:100%;background:#1a1a1a;color:#e0e0e0}.panel-header[data-v-13cb6ed0]{padding:15px 20px;background:#2a2a2a;border-bottom:1px solid #3a3a3a;display:flex;justify-content:space-between;align-items:center;border-radius:8px 8px 0 0}.header-left[data-v-13cb6ed0]{display:flex;align-items:center;gap:10px}.minimize-button[data-v-13cb6ed0]{cursor:pointer;padding:5px 10px;border-radius:4px;transition:background 0.2s}.minimize-button[data-v-13cb6ed0]:hover{background:rgba(255,255,255,0.1)}.close-button[data-v-13cb6ed0]{cursor:pointer;padding:5px 10px;border-radius:4px;transition:background 0.2s}.close-button[data-v-13cb6ed0]:hover{background:rgba(255,255,255,0.1)}.panel-tabs[data-v-13cb6ed0]{display:flex;background:#2a2a2a;border-bottom:1px solid #3a3a3a}.tab-item[data-v-13cb6ed0]:hover{background:rgba(255,255,255,0.05) !important}.panel-content[data-v-13cb6ed0]{flex:1;overflow-y:auto;overflow-x:hidden;padding:0;min-height:0}.panel-content[data-v-13cb6ed0]::-webkit-scrollbar{width:8px}.panel-content[data-v-13cb6ed0]::-webkit-scrollbar-track{background:#2a2a2a}.panel-content[data-v-13cb6ed0]::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:4px}.panel-content[data-v-13cb6ed0]::-webkit-scrollbar-thumb:hover{background:#5ab0ff}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/MainPanel.vue\"],\"names\":[],\"mappings\":\"AAsKA,yCACE,YAAa,CACb,qBAAsB,CACtB,WAAY,CACZ,kBAAmB,CACnB,aACF,CAEA,+BACE,iBAAkB,CAClB,kBAAmB,CACnB,+BAAgC,CAChC,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,yBACF,CAEA,8BACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,kCACE,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,0BACF,CAEA,wCACE,gCACF,CAEA,+BACE,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,0BACF,CAEA,qCACE,gCACF,CAEA,6BACE,YAAa,CACb,kBAAmB,CACnB,+BACF,CAEA,iCACE,4CACF,CAEA,gCACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,SAAU,CACV,YACF,CAGA,mDACE,SACF,CAEA,yDACE,kBACF,CAEA,yDACE,kBAAmB,CACnB,iBACF,CAEA,+DACE,kBACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    class=\\\"memory-panel-container\\\"\\n    style=\\\"display: flex; flex-direction: column; height: 100%; background: #1a1a1a; color: #e0e0e0\\\"\\n  >\\n    <!--  -->\\n    <div\\n      class=\\\"panel-header\\\"\\n      style=\\\"\\n        padding: 15px 20px;\\n        background: #2a2a2a;\\n        border-bottom: 1px solid #3a3a3a;\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        border-radius: 8px 8px 0 0;\\n        flex-shrink: 0;\\n      \\\"\\n    >\\n      <div class=\\\"header-left\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span style=\\\"font-size: 24px\\\"></span>\\n        <b class=\\\"panel-title\\\">mzrodyu</b>\\n        <b class=\\\"panel-title-mobile\\\"></b>\\n      </div>\\n      <div style=\\\"display: flex; gap: 10px\\\">\\n        <div\\n          class=\\\"minimize-button\\\"\\n          style=\\\"cursor: pointer; padding: 5px 10px; border-radius: 4px; transition: background 0.2s\\\"\\n          title=\\\"\\\"\\n          @click=\\\"minimizePanel\\\"\\n        >\\n          <i class=\\\"fa-solid fa-minus\\\"></i>\\n        </div>\\n        <div\\n          class=\\\"close-button\\\"\\n          style=\\\"cursor: pointer; padding: 5px 10px; border-radius: 4px; transition: background 0.2s\\\"\\n          title=\\\"\\\"\\n          @click=\\\"closePanel\\\"\\n        >\\n          <i class=\\\"fa-solid fa-times\\\"></i>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"panel-tabs\\\"\\n      style=\\\"display: flex; background: #2a2a2a; border-bottom: 1px solid #3a3a3a; flex-shrink: 0\\\"\\n    >\\n      <div\\n        v-for=\\\"tab in tabs\\\"\\n        :key=\\\"tab.key\\\"\\n        :class=\\\"{ 'tab-active': activeTab === tab.key }\\\"\\n        class=\\\"tab-item\\\"\\n        :style=\\\"{\\n          flex: '1',\\n          padding: '12px 20px',\\n          cursor: 'pointer',\\n          textAlign: 'center',\\n          transition: 'background 0.2s, color 0.2s',\\n          display: 'flex',\\n          alignItems: 'center',\\n          justifyContent: 'center',\\n          gap: '8px',\\n          borderBottom: '2px solid transparent',\\n          backgroundColor: activeTab === tab.key ? '#1a1a1a' : 'transparent',\\n          color: activeTab === tab.key ? '#4a9eff' : '#e0e0e0',\\n          borderBottomColor: activeTab === tab.key ? '#4a9eff' : 'transparent',\\n        }\\\"\\n        @click=\\\"switchTab(tab.key)\\\"\\n      >\\n        <i :class=\\\"tab.icon\\\"></i>\\n        <span class=\\\"tab-label\\\">{{ tab.label }}</span>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"panel-content\\\"\\n      style=\\\"\\n        flex: 1;\\n        overflow-y: auto;\\n        overflow-x: hidden;\\n        padding: 0;\\n        min-height: 0;\\n        scrollbar-width: thin;\\n        scrollbar-color: #4a9eff #2a2a2a;\\n      \\\"\\n    >\\n      <component :is=\\\"currentComponent\\\" :key=\\\"activeTab\\\" v-bind=\\\"componentProps\\\" />\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { computed, ref } from 'vue';\\nimport { minimizeMemoryPanel } from '../';\\nimport GreetingsTab from './GreetingsTab.vue';\\nimport HelpTab from './HelpTab.vue';\\nimport MvuBetaTab from './MvuBetaTab.vue';\\nimport ProjectManager from './ProjectManager.vue';\\nimport RegexUIGenerator from './RegexUIGenerator.vue';\\nimport SettingsTab from './SettingsTab.vue';\\nimport StatusBarGenerator from './StatusBarGenerator.vue';\\nimport SummaryTab from './SummaryTab.vue';\\nimport TableTab from './TableTab.vue';\\nimport ToolsTab from './ToolsTab.vue';\\n\\n// \\nconst tabs = [\\n  { key: 'settings', label: '', icon: 'fa-solid fa-cog' },\\n  { key: 'summary', label: '', icon: 'fa-solid fa-list' },\\n  { key: 'table', label: '', icon: 'fa-solid fa-table' },\\n  { key: 'greetings', label: '', icon: 'fa-solid fa-comments' },\\n  { key: 'regex', label: '', icon: 'fa-solid fa-code' },\\n  { key: 'status', label: '', icon: 'fa-solid fa-chart-bar' },\\n  { key: 'project', label: '', icon: 'fa-solid fa-laptop-code' },\\n  { key: 'tools', label: '', icon: 'fa-solid fa-tools' },\\n  { key: 'mvu', label: 'MVU Beta', icon: 'fa-solid fa-flask' },\\n  { key: 'help', label: '', icon: 'fa-solid fa-question-circle' },\\n];\\n\\nconst activeTab = ref<'settings' | 'summary' | 'table' | 'greetings' | 'status' | 'regex' | 'project' | 'tools' | 'mvu' | 'help'>(\\n  'settings',\\n);\\n\\n// \\nconst componentMap = {\\n  settings: SettingsTab,\\n  summary: SummaryTab,\\n  table: TableTab,\\n  greetings: GreetingsTab,\\n  status: StatusBarGenerator,\\n  regex: RegexUIGenerator,\\n  project: ProjectManager,\\n  tools: ToolsTab,\\n  mvu: MvuBetaTab,\\n  help: HelpTab,\\n};\\n\\n// \\nconst currentComponent = computed(() => componentMap[activeTab.value]);\\n\\n// \\nconst componentProps = computed(() => ({\\n  activeTab: activeTab.value,\\n}));\\n\\n// \\nconst switchTab = (tabKey: string) => {\\n  console.log(':', tabKey);\\n  activeTab.value = tabKey as any;\\n};\\n\\n// \\nconst minimizePanel = () => {\\n  minimizeMemoryPanel();\\n};\\n\\n// \\nconst closePanel = () => {\\n  $('#memoryManagementPanel').fadeOut(200);\\n};\\n</script>\\n\\n<style scoped>\\n.memory-panel-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n}\\n\\n.panel-header {\\n  padding: 15px 20px;\\n  background: #2a2a2a;\\n  border-bottom: 1px solid #3a3a3a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  border-radius: 8px 8px 0 0;\\n}\\n\\n.header-left {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.minimize-button {\\n  cursor: pointer;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  transition: background 0.2s;\\n}\\n\\n.minimize-button:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.close-button {\\n  cursor: pointer;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  transition: background 0.2s;\\n}\\n\\n.close-button:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.panel-tabs {\\n  display: flex;\\n  background: #2a2a2a;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.tab-item:hover {\\n  background: rgba(255, 255, 255, 0.05) !important;\\n}\\n\\n.panel-content {\\n  flex: 1;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n  padding: 0;\\n  min-height: 0;\\n}\\n\\n/*  */\\n.panel-content::-webkit-scrollbar {\\n  width: 8px;\\n}\\n\\n.panel-content::-webkit-scrollbar-track {\\n  background: #2a2a2a;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 4px;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb:hover {\\n  background: #5ab0ff;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIGenerateDialog.vue?vue&type=style&index=0&id=4dab0e4d&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3d6e8f2c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIGenerateDialog.vue?vue&type=style&index=0&id=4dab0e4d&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIGenerateDialog.vue?vue&type=style&index=0&id=4dab0e4d&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","module.exports = z;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tools-tab[data-v-14fcd832]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-14fcd832]{display:flex;align-items:center;justify-content:space-between;padding:15px 20px;background:linear-gradient(135deg,#2a2a2a 0%,#3a3a3a 100%);border-radius:8px;cursor:pointer;transition:all 0.3s ease;margin-bottom:15px;border:1px solid #3a3a3a}.section-header[data-v-14fcd832]:hover{background:linear-gradient(135deg,#3a3a3a 0%,#4a4a4a 100%);transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}.section-header-anti-cliche[data-v-14fcd832]{background:linear-gradient(135deg,rgba(42,42,42,0.95) 0%,rgba(58,58,58,0.95) 100%) !important;border:1px solid rgba(255,107,107,0.3) !important;box-shadow:0 2px 8px rgba(0,0,0,0.2),0 0 0 1px rgba(255,107,107,0.1) inset !important;backdrop-filter:blur(10px)}.section-header-anti-cliche[data-v-14fcd832]:hover{background:linear-gradient(135deg,rgba(255,107,107,0.2) 0%,rgba(238,90,36,0.2) 100%) !important;border-color:rgba(255,107,107,0.5) !important;box-shadow:0 4px 16px rgba(255,107,107,0.3),0 0 0 1px rgba(255,107,107,0.2) inset !important;transform:translateY(-2px) !important}.section-header-worldbook[data-v-14fcd832]{background:linear-gradient(135deg,rgba(42,42,42,0.95) 0%,rgba(58,58,58,0.95) 100%) !important;border:1px solid rgba(255,193,7,0.3) !important;box-shadow:0 2px 8px rgba(0,0,0,0.2),0 0 0 1px rgba(255,193,7,0.1) inset !important;backdrop-filter:blur(10px)}.section-header-worldbook[data-v-14fcd832]:hover{background:linear-gradient(135deg,rgba(255,193,7,0.2) 0%,rgba(255,152,0,0.2) 100%) !important;border-color:rgba(255,193,7,0.5) !important;box-shadow:0 4px 16px rgba(255,193,7,0.3),0 0 0 1px rgba(255,193,7,0.2) inset !important;transform:translateY(-2px) !important}.section-header-character[data-v-14fcd832]{background:linear-gradient(135deg,rgba(42,42,42,0.95) 0%,rgba(58,58,58,0.95) 100%) !important;border:1px solid rgba(23,162,184,0.3) !important;box-shadow:0 2px 8px rgba(0,0,0,0.2),0 0 0 1px rgba(23,162,184,0.1) inset !important;backdrop-filter:blur(10px)}.section-header-character[data-v-14fcd832]:hover{background:linear-gradient(135deg,rgba(23,162,184,0.2) 0%,rgba(19,132,150,0.2) 100%) !important;border-color:rgba(23,162,184,0.5) !important;box-shadow:0 4px 16px rgba(23,162,184,0.3),0 0 0 1px rgba(23,162,184,0.2) inset !important;transform:translateY(-2px) !important}.tool-section-anti-cliche[data-v-14fcd832],.tool-section-worldbook[data-v-14fcd832],.tool-section-character[data-v-14fcd832]{margin-bottom:20px;border-radius:12px;overflow:hidden;background:rgba(26,26,26,0.5);backdrop-filter:blur(5px)}.tool-content[data-v-14fcd832]{background:#1e1e1e;border:1px solid #3a3a3a;border-radius:8px;padding:20px;margin-bottom:20px}.tool-instructions[data-v-14fcd832]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:12px;color:#ccc;font-size:12px;margin-bottom:15px}.form-group[data-v-14fcd832]{margin-bottom:15px}.button-group[data-v-14fcd832]{display:flex;gap:12px;margin-bottom:20px}.output-section[data-v-14fcd832]{margin-top:20px}.output-content[data-v-14fcd832]{background:#1e1e1e;border:1px solid #3a3a3a;border-radius:6px;padding:15px;color:#e0e0e0;font-size:13px;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;max-height:300px;overflow-y:auto}.output-actions[data-v-14fcd832]{margin-top:12px;display:flex;gap:12px}.process-button[data-v-14fcd832],.clear-button[data-v-14fcd832],.generate-button[data-v-14fcd832],.copy-button[data-v-14fcd832]{position:relative;overflow:hidden;transition:all 0.3s ease}.process-button[data-v-14fcd832]:hover:not(:disabled),.clear-button[data-v-14fcd832]:hover:not(:disabled),.generate-button[data-v-14fcd832]:hover:not(:disabled),.copy-button[data-v-14fcd832]:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,0.3)}.copy-button[data-v-14fcd832]:hover{background:#218838 !important}.tool-instructions[data-v-14fcd832]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:12px;color:#ccc;font-size:12px;margin-bottom:15px}.process-button:hover:not(:disabled) .shimmer-effect[data-v-14fcd832],.clear-button:hover:not(:disabled) .shimmer-effect[data-v-14fcd832],.generate-button:hover:not(:disabled) .shimmer-effect[data-v-14fcd832],.copy-button:hover .shimmer-effect[data-v-14fcd832]{left:100%}.process-button[data-v-14fcd832]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,0.4)}.clear-button[data-v-14fcd832]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(255,107,107,0.4)}.generate-button[data-v-14fcd832]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(23,162,184,0.4)}.copy-button[data-v-14fcd832]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(40,167,69,0.4)}.process-button[data-v-14fcd832]:disabled,.clear-button[data-v-14fcd832]:disabled,.generate-button[data-v-14fcd832]:disabled{opacity:0.6;cursor:not-allowed;transform:none}.process-button[data-v-14fcd832]:disabled:hover,.clear-button[data-v-14fcd832]:disabled:hover,.generate-button[data-v-14fcd832]:disabled:hover{transform:none;box-shadow:none}.output-content[data-v-14fcd832]::-webkit-scrollbar{width:6px}.output-content[data-v-14fcd832]::-webkit-scrollbar-track{background:#1a1a1a;border-radius:3px}.output-content[data-v-14fcd832]::-webkit-scrollbar-thumb{background:#3a3a3a;border-radius:3px}.output-content[data-v-14fcd832]::-webkit-scrollbar-thumb:hover{background:#4a4a4a}@media (max-width:768px){.button-group[data-v-14fcd832]{flex-direction:column}.output-actions[data-v-14fcd832]{flex-direction:column}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/ToolsTab.vue\"],\"names\":[],\"mappings\":\"AAqqHA,4BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,iBAAkB,CAClB,0DAA6D,CAC7D,iBAAkB,CAClB,cAAe,CACf,wBAAyB,CACzB,kBAAmB,CACnB,wBACF,CAEA,uCACE,0DAA6D,CAC7D,0BAA2B,CAC3B,qCACF,CAGA,6CACE,6FAAsG,CACtG,iDAAqD,CACrD,qFAEqD,CACrD,0BACF,CAEA,mDACE,+FAAwG,CACxG,6CAAiD,CACjD,4FAEqD,CACrD,qCACF,CAGA,2CACE,6FAAsG,CACtG,+CAAmD,CACnD,mFAEmD,CACnD,0BACF,CAEA,iDACE,6FAAsG,CACtG,2CAA+C,CAC/C,wFAEmD,CACnD,qCACF,CAGA,2CACE,6FAAsG,CACtG,gDAAoD,CACpD,oFAEoD,CACpD,0BACF,CAEA,iDACE,+FAAwG,CACxG,4CAAgD,CAChD,0FAEoD,CACpD,qCACF,CAGA,6HAGE,kBAAmB,CACnB,kBAAmB,CACnB,eAAgB,CAChB,6BAAiC,CACjC,yBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,kBACF,CAEA,oCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UAAW,CACX,cAAe,CACf,kBACF,CAEA,6BACE,kBACF,CAEA,+BACE,YAAa,CACb,QAAS,CACT,kBACF,CAEA,iCACE,eACF,CAEA,iCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,oBAAqB,CACrB,gBAAiB,CACjB,eACF,CAEA,iCACE,eAAgB,CAChB,YAAa,CACb,QACF,CAGA,gIAIE,iBAAkB,CAClB,eAAgB,CAChB,wBACF,CAEA,qMAIE,0BAA2B,CAC3B,qCACF,CAEA,oCACE,6BACF,CAEA,oCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UAAW,CACX,cAAe,CACf,kBACF,CAGA,qQAIE,SACF,CAEA,sDACE,0BAA2B,CAC3B,2CACF,CAEA,oDACE,0BAA2B,CAC3B,2CACF,CAEA,uDACE,0BAA2B,CAC3B,0CACF,CAEA,oCACE,0BAA2B,CAC3B,yCACF,CAEA,6HAGE,WAAY,CACZ,kBAAmB,CACnB,cACF,CAEA,+IAGE,cAAe,CACf,eACF,CAGA,oDACE,SACF,CAEA,0DACE,kBAAmB,CACnB,iBACF,CAEA,0DACE,kBAAmB,CACnB,iBACF,CAEA,gEACE,kBACF,CAGA,yBACE,+BACE,qBACF,CAEA,iCACE,qBACF,CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"tools-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleToolExpanded('antiCliche')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-broom\\\" style=\\\"color: #ff6b6b; font-size: 18px\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('antiCliche')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n            //<strong style=\\\"color: #10b981\\\"></strong>\\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 8px 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n            \\n            <strong></strong\\n            >\\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0;\\n              color: #10b981;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #10b981;\\n            \\\"\\n          >\\n             <strong></strong> - \\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"antiClicheInput\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\\\">\\n            <input v-model=\\\"enableAntiClicheStreaming\\\" type=\\\"checkbox\\\" style=\\\"cursor: pointer\\\" />\\n            \\n          </label>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"isProcessingAntiCliche && antiClicheProgressPercent > 0\\\"\\n          class=\\\"progress-bar-container\\\"\\n          style=\\\"margin: 15px 0\\\"\\n        >\\n          <div\\n            class=\\\"progress-bar\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 8px;\\n              background: #2a2a2a;\\n              border-radius: 4px;\\n              overflow: hidden;\\n              position: relative;\\n            \\\"\\n          >\\n            <div\\n              class=\\\"progress-fill\\\"\\n              :style=\\\"{\\n                width: antiClicheProgressPercent + '%',\\n                height: '100%',\\n                background: 'linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%)',\\n                backgroundSize: '200% 100%',\\n                animation: enableAntiClicheStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                transition: 'width 0.3s ease',\\n              }\\\"\\n            ></div>\\n          </div>\\n          <div style=\\\"text-align: center; margin-top: 8px; color: #667eea; font-size: 12px; font-weight: 500\\\">\\n            ... {{ antiClicheProgressPercent.toFixed(0) }}%\\n          </div>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"process-button\\\"\\n            :disabled=\\\"isProcessingAntiCliche || !antiClicheInput.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleAntiClicheProcess\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isProcessingAntiCliche ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearAntiClicheForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"antiClicheOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n          <div\\n            class=\\\"output-content\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              max-height: 300px;\\n              overflow-y: auto;\\n            \\\"\\n          >\\n            {{ antiClicheOutput }}\\n          </div>\\n\\n          <div class=\\\"output-actions\\\" style=\\\"margin-top: 12px; display: flex; gap: 12px\\\">\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 10px 20px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 600;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyAntiClicheResult\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i> \\n            </button>\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"margin-top: 20px; padding-top: 20px; border-top: 1px solid #3a3a3a\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px; color: #ffc107\\\"></i>\\n              AI \\n            </h5>\\n            <div class=\\\"form-group\\\" style=\\\"margin-bottom: 12px\\\">\\n              <textarea\\n                v-model=\\\"antiClicheModifyRequest\\\"\\n                placeholder=\\\"...\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 80px;\\n                  padding: 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  resize: vertical;\\n                  font-family: inherit;\\n                \\\"\\n              ></textarea>\\n            </div>\\n\\n            <div style=\\\"display: flex; gap: 10px\\\">\\n              <button\\n                :disabled=\\\"isModifyingAntiCliche || !antiClicheModifyRequest.trim()\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  padding: 10px 20px;\\n                  background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: #1a1a1a;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(255, 193, 7, 0.3);\\n                  opacity: 1;\\n                \\\"\\n                :style=\\\"{\\n                  opacity: isModifyingAntiCliche || !antiClicheModifyRequest.trim() ? 0.5 : 1,\\n                  cursor: isModifyingAntiCliche || !antiClicheModifyRequest.trim() ? 'not-allowed' : 'pointer',\\n                }\\\"\\n                @click=\\\"handleModifyAntiCliche\\\"\\n              >\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n                {{ isModifyingAntiCliche ? '...' : 'AI ' }}\\n              </button>\\n              <button\\n                :disabled=\\\"!antiClicheModifyRequest.trim()\\\"\\n                style=\\\"\\n                  padding: 10px 20px;\\n                  background: #dc3545;\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                \\\"\\n                :style=\\\"{\\n                  opacity: !antiClicheModifyRequest.trim() ? 0.5 : 1,\\n                  cursor: !antiClicheModifyRequest.trim() ? 'not-allowed' : 'pointer',\\n                }\\\"\\n                @click=\\\"clearAntiClicheModifyRequest\\\"\\n              >\\n                <i class=\\\"fa-solid fa-eraser\\\" style=\\\"margin-right: 6px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleToolExpanded('worldbookEntry')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-book-atlas\\\" style=\\\"color: #ffc107; font-size: 18px\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('worldbookEntry') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('worldbookEntry')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #ffc107\\\"></i>\\n            AI \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0;\\n              color: #4a9eff;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffc107;\\n            \\\"\\n          >\\n             \\\"\\\"\\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"worldbookDescription\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\\\">\\n            <input v-model=\\\"enableWorldbookStreaming\\\" type=\\\"checkbox\\\" style=\\\"cursor: pointer\\\" />\\n            \\n          </label>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"isGeneratingWorldbook && worldbookProgressPercent > 0\\\"\\n          class=\\\"progress-bar-container\\\"\\n          style=\\\"margin: 15px 0\\\"\\n        >\\n          <div\\n            class=\\\"progress-bar\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 8px;\\n              background: #2a2a2a;\\n              border-radius: 4px;\\n              overflow: hidden;\\n              position: relative;\\n            \\\"\\n          >\\n            <div\\n              class=\\\"progress-fill\\\"\\n              :style=\\\"{\\n                width: worldbookProgressPercent + '%',\\n                height: '100%',\\n                background: 'linear-gradient(90deg, #ffc107 0%, #ff9800 50%, #ffc107 100%)',\\n                backgroundSize: '200% 100%',\\n                animation: enableWorldbookStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                transition: 'width 0.3s ease',\\n              }\\\"\\n            ></div>\\n          </div>\\n          <div style=\\\"text-align: center; margin-top: 8px; color: #ffc107; font-size: 12px; font-weight: 500\\\">\\n            ... {{ worldbookProgressPercent.toFixed(0) }}%\\n          </div>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"generate-button\\\"\\n            :disabled=\\\"isGeneratingWorldbook || !worldbookDescription.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 193, 7, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleGenerateWorldbookEntry\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isGeneratingWorldbook ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearWorldbookForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"worldbookEntryOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n\\n          <!--  -->\\n          <div\\n            class=\\\"entry-preview\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              margin-bottom: 15px;\\n            \\\"\\n          >\\n            <div class=\\\"entry-field\\\" style=\\\"margin-bottom: 10px\\\">\\n              <label style=\\\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\\\"\\n                ></label\\n              >\\n              <div style=\\\"color: #e0e0e0; font-size: 13px\\\">{{ worldbookEntryOutput.name || '' }}</div>\\n            </div>\\n\\n            <div class=\\\"entry-field\\\" style=\\\"margin-bottom: 10px\\\">\\n              <label style=\\\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\\\"\\n                ></label\\n              >\\n              <div style=\\\"color: #e0e0e0; font-size: 13px\\\">\\n                {{ worldbookEntryOutput.strategy?.keys?.join(', ') || '' }}\\n              </div>\\n            </div>\\n\\n            <div class=\\\"entry-field\\\" style=\\\"margin-bottom: 10px\\\">\\n              <label style=\\\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\\\"\\n                ></label\\n              >\\n              <div\\n                style=\\\"\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  line-height: 1.6;\\n                  white-space: pre-wrap;\\n                  max-height: 200px;\\n                  overflow-y: auto;\\n                \\\"\\n              >\\n                {{ worldbookEntryOutput.content }}\\n              </div>\\n            </div>\\n\\n            <div class=\\\"entry-field\\\">\\n              <label style=\\\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\\\"\\n                ></label\\n              >\\n              <div style=\\\"color: #e0e0e0; font-size: 13px\\\">\\n                {{\\n                  worldbookEntryOutput.strategy?.type === 'constant'\\n                    ? '  ()'\\n                    : worldbookEntryOutput.strategy?.type === 'selective'\\n                      ? '  ()'\\n                      : ' '\\n                }}\\n              </div>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div class=\\\"modify-section\\\" style=\\\"margin-top: 25px; border-top: 2px dashed #3a3a3a; padding-top: 20px\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n              \\n            </h5>\\n            <div\\n              class=\\\"modify-instructions\\\"\\n              style=\\\"\\n                background: #1a1a1a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                padding: 10px;\\n                margin-bottom: 15px;\\n              \\\"\\n            >\\n              <p style=\\\"margin: 0 0 6px 0; color: #ccc; font-size: 12px\\\">\\n                <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n                AI\\\"\\\"\\\"\\\"\\\"\\\"\\n              </p>\\n              <p style=\\\"margin: 0; color: #ffa500; font-size: 11px\\\">  JSON </p>\\n            </div>\\n\\n            <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n                \\n              </label>\\n              <textarea\\n                v-model=\\\"worldbookModifyRequest\\\"\\n                placeholder=\\\"...\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 80px;\\n                  padding: 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  resize: vertical;\\n                  font-family: inherit;\\n                \\\"\\n              ></textarea>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              v-if=\\\"isModifyingWorldbook && worldbookProgressPercent > 0\\\"\\n              class=\\\"progress-bar-container\\\"\\n              style=\\\"margin: 12px 0\\\"\\n            >\\n              <div\\n                class=\\\"progress-bar\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 8px;\\n                  background: #2a2a2a;\\n                  border-radius: 4px;\\n                  overflow: hidden;\\n                  position: relative;\\n                \\\"\\n              >\\n                <div\\n                  class=\\\"progress-fill\\\"\\n                  :style=\\\"{\\n                    width: worldbookProgressPercent + '%',\\n                    height: '100%',\\n                    background: 'linear-gradient(90deg, #ffa500 0%, #ff8c00 50%, #ffa500 100%)',\\n                    backgroundSize: '200% 100%',\\n                    animation: enableWorldbookStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                    transition: 'width 0.3s ease',\\n                  }\\\"\\n                ></div>\\n              </div>\\n              <div style=\\\"text-align: center; margin-top: 8px; color: #ffa500; font-size: 12px; font-weight: 500\\\">\\n                ... {{ worldbookProgressPercent.toFixed(0) }}%\\n              </div>\\n            </div>\\n\\n            <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 15px\\\">\\n              <button\\n                class=\\\"modify-button\\\"\\n                :disabled=\\\"isModifyingWorldbook || !worldbookModifyRequest.trim()\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(255, 165, 0, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"handleModifyWorldbookEntry\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                {{ isModifyingWorldbook ? '...' : 'AI' }}\\n              </button>\\n\\n              <button\\n                class=\\\"clear-modify-button\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(108, 117, 125, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"clearWorldbookModifyRequest\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-eraser\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div class=\\\"insert-section\\\" style=\\\"background: #1a1a1a; padding: 15px; border-radius: 6px; margin-top: 20px\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-file-import\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n              \\n            </h5>\\n\\n            <div class=\\\"form-group\\\" style=\\\"margin-bottom: 12px\\\">\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n                \\n              </label>\\n              <select\\n                v-model=\\\"selectedWorldbook\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  padding: 10px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                \\\"\\n              >\\n                <option value=\\\"\\\" disabled></option>\\n                <option v-for=\\\"wb in availableWorldbooks\\\" :key=\\\"wb\\\" :value=\\\"wb\\\">{{ wb }}</option>\\n              </select>\\n            </div>\\n\\n            <div class=\\\"output-actions\\\" style=\\\"display: flex; gap: 12px\\\">\\n              <button\\n                class=\\\"insert-button\\\"\\n                :disabled=\\\"!selectedWorldbook || isInsertingEntry\\\"\\n                style=\\\"\\n                  padding: 10px 20px;\\n                  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 8px;\\n                  box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"handleInsertEntry\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-plus-circle\\\" style=\\\"font-size: 14px\\\"></i>\\n                {{ isInsertingEntry ? '...' : '' }}\\n              </button>\\n\\n              <button\\n                class=\\\"copy-button\\\"\\n                style=\\\"\\n                  padding: 10px 20px;\\n                  background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 8px;\\n                  box-shadow: 0 3px 12px rgba(23, 162, 184, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"copyWorldbookEntry\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i>  JSON\\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header viewer-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleToolExpanded('worldbookViewer')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-list\\\" style=\\\"color: #20c997; font-size: 18px\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('worldbookViewer') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #888; font-size: 14px; transition: transform 0.3s ease\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('worldbookViewer')\\\" class=\\\"tool-content\\\">\\n        <div\\n          class=\\\"tool-instructions\\\"\\n          style=\\\"\\n            background: rgba(32, 201, 151, 0.1);\\n            border-left: 3px solid #20c997;\\n            padding: 12px 15px;\\n            border-radius: 6px;\\n            margin-bottom: 20px;\\n          \\\"\\n        >\\n          <p style=\\\"margin: 0; color: #a0f0e0; font-size: 13px; display: flex; align-items: center; gap: 8px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"color: #20c997\\\"></i>\\n            \\n          </p>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 20px\\\">\\n          <label\\n            style=\\\"\\n              display: block;\\n              margin-bottom: 10px;\\n              color: #e0e0e0;\\n              font-size: 14px;\\n              font-weight: 500;\\n              letter-spacing: 0.3px;\\n            \\\"\\n          >\\n            \\n          </label>\\n          <select\\n            v-model=\\\"selectedViewerWorldbook\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 12px 15px;\\n              background: #2a2a2a;\\n              border: 1px solid rgba(255, 255, 255, 0.1);\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 14px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            @change=\\\"loadWorldbookEntries\\\"\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#20c997')\\\"\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)')\\\"\\n          >\\n            <option value=\\\"\\\"></option>\\n            <option v-for=\\\"wb in availableWorldbooks\\\" :key=\\\"wb\\\" :value=\\\"wb\\\">\\n              {{ wb }}\\n            </option>\\n          </select>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"selectedViewerWorldbook\\\" class=\\\"form-group\\\" style=\\\"margin-bottom: 20px\\\">\\n          <label\\n            style=\\\"\\n              display: block;\\n              margin-bottom: 10px;\\n              color: #e0e0e0;\\n              font-size: 14px;\\n              font-weight: 500;\\n              letter-spacing: 0.3px;\\n            \\\"\\n          >\\n            \\n          </label>\\n          <input\\n            v-model=\\\"viewerSearchQuery\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 12px 15px;\\n              background: #2a2a2a;\\n              border: 1px solid rgba(255, 255, 255, 0.1);\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 14px;\\n              transition: all 0.3s ease;\\n              box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#20c997')\\\"\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)')\\\"\\n          />\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"selectedViewerWorldbook && worldbookEntries.length > 0\\\"\\n          style=\\\"display: flex; gap: 10px; margin-bottom: 15px\\\"\\n        >\\n          <button\\n            :style=\\\"{\\n              padding: '8px 16px',\\n              background: viewerSortBy === 'original' ? '#20c997' : '#444',\\n              border: 'none',\\n              borderRadius: '6px',\\n              color: 'white',\\n              fontSize: '12px',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s',\\n            }\\\"\\n            @click=\\\"viewerSortBy = 'original'\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            :style=\\\"{\\n              padding: '8px 16px',\\n              background: viewerSortBy === 'enabled' ? '#28a745' : '#444',\\n              border: 'none',\\n              borderRadius: '6px',\\n              color: 'white',\\n              fontSize: '12px',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s',\\n            }\\\"\\n            @click=\\\"viewerSortBy = 'enabled'\\\"\\n          >\\n             \\n          </button>\\n          <button\\n            :style=\\\"{\\n              padding: '8px 16px',\\n              background: viewerSortBy === 'disabled' ? '#dc3545' : '#444',\\n              border: 'none',\\n              borderRadius: '6px',\\n              color: 'white',\\n              fontSize: '12px',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s',\\n            }\\\"\\n            @click=\\\"viewerSortBy = 'disabled'\\\"\\n          >\\n             \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"selectedViewerWorldbook\\\" style=\\\"margin-bottom: 15px; color: #888; font-size: 12px\\\">\\n          <span v-if=\\\"filteredWorldbookEntries.length > 0\\\">  {{ filteredWorldbookEntries.length }}  </span>\\n          <span v-else style=\\\"color: #ff6b6b\\\"></span>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"filteredWorldbookEntries.length > 0\\\" style=\\\"display: flex; flex-direction: column; gap: 12px\\\">\\n          <div\\n            v-for=\\\"(entry, index) in filteredWorldbookEntries\\\"\\n            :key=\\\"index\\\"\\n            style=\\\"\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              padding: 15px;\\n              transition: all 0.3s ease;\\n            \\\"\\n          >\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                display: flex;\\n                justify-content: space-between;\\n                align-items: flex-start;\\n                cursor: pointer;\\n                user-select: none;\\n              \\\"\\n              @click=\\\"toggleEntryExpanded(index)\\\"\\n            >\\n              <!--  -->\\n              <div style=\\\"flex: 1; line-height: 1.6\\\">\\n                <!--  +  -->\\n                <div style=\\\"display: flex; align-items: center; gap: 6px; margin-bottom: 8px\\\">\\n                  <span v-if=\\\"entry.strategy?.type === 'constant'\\\" style=\\\"font-size: 14px\\\"></span>\\n                  <span v-else-if=\\\"entry.strategy?.type === 'selective'\\\" style=\\\"font-size: 14px\\\"></span>\\n                  <span v-else style=\\\"font-size: 14px\\\"></span>\\n                  <span style=\\\"color: #fff; font-weight: 600; font-size: 14px\\\">\\n                    {{ entry.name || '()' }}\\n                  </span>\\n                </div>\\n\\n                <!--  |  |  -->\\n                <div style=\\\"padding-left: 20px; margin-bottom: 6px; font-size: 12px; color: #ccc\\\">\\n                  <span v-if=\\\"entry.strategy?.keys && entry.strategy.keys.length > 0\\\">\\n                    :\\n                    {{ entry.strategy.keys.map((k: any) => (typeof k === 'string' ? k : String(k))).join(', ') }}\\n                  </span>\\n                  <span v-else>: ()</span>\\n\\n                  <span v-if=\\\"entry.position?.order && entry.position.order !== 0\\\">\\n                    <span style=\\\"color: #666\\\"> | </span>\\n                    : {{ entry.position.order }}\\n                  </span>\\n\\n                  <span\\n                    v-if=\\\"entry.position?.type === 'at_depth' && entry.position.depth && entry.position.depth !== 0\\\"\\n                  >\\n                    <span style=\\\"color: #666\\\"> | </span>\\n                    : {{ entry.position.depth }}\\n                  </span>\\n                </div>\\n\\n                <!--  -->\\n                <div style=\\\"padding-left: 20px; font-size: 12px; color: #999; font-style: italic\\\">\\n                  {{\\n                    entry.content\\n                      ? entry.content.length > 50\\n                        ? entry.content.substring(0, 50) + '...'\\n                        : entry.content\\n                      : '()'\\n                  }}\\n                </div>\\n              </div>\\n\\n              <i\\n                :class=\\\"isEntryExpanded(index) ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n                style=\\\"color: #888; font-size: 12px; margin-top: 2px\\\"\\n              ></i>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              v-if=\\\"isEntryExpanded(index)\\\"\\n              style=\\\"margin-top: 15px; padding-top: 15px; border-top: 1px solid #3a3a3a\\\"\\n            >\\n              <!--  -->\\n              <div style=\\\"margin-bottom: 12px\\\">\\n                <span style=\\\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\\\">\\n                   \\n                </span>\\n                <div style=\\\"display: flex; align-items: center; gap: 8px\\\">\\n                  <span\\n                    v-if=\\\"entry.strategy?.type === 'constant'\\\"\\n                    style=\\\"\\n                      padding: 4px 10px;\\n                      background: #4a9eff;\\n                      color: white;\\n                      border-radius: 12px;\\n                      font-size: 11px;\\n                      font-weight: bold;\\n                    \\\"\\n                  >\\n                     - \\n                  </span>\\n                  <span\\n                    v-else-if=\\\"entry.strategy?.type === 'selective'\\\"\\n                    style=\\\"\\n                      padding: 4px 10px;\\n                      background: #28a745;\\n                      color: white;\\n                      border-radius: 12px;\\n                      font-size: 11px;\\n                      font-weight: bold;\\n                    \\\"\\n                  >\\n                     - \\n                  </span>\\n                  <span\\n                    v-else\\n                    style=\\\"\\n                      padding: 4px 10px;\\n                      background: #888;\\n                      color: white;\\n                      border-radius: 12px;\\n                      font-size: 11px;\\n                      font-weight: bold;\\n                    \\\"\\n                  >\\n                     \\n                  </span>\\n                </div>\\n              </div>\\n\\n              <!--  -->\\n              <div style=\\\"margin-bottom: 12px\\\">\\n                <span style=\\\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\\\">\\n                   \\n                  <span\\n                    v-if=\\\"entry.strategy?.type === 'constant'\\\"\\n                    style=\\\"color: #ffa500; font-size: 10px; margin-left: 6px\\\"\\n                  >\\n                    ()\\n                  </span>\\n                </span>\\n                <div style=\\\"display: flex; flex-wrap: wrap; gap: 6px\\\">\\n                  <span\\n                    v-for=\\\"(key, ki) in entry.strategy?.keys || []\\\"\\n                    :key=\\\"ki\\\"\\n                    style=\\\"padding: 4px 10px; background: #667eea; color: white; border-radius: 12px; font-size: 11px\\\"\\n                  >\\n                    {{ typeof key === 'string' ? key : String(key) }}\\n                  </span>\\n                  <span\\n                    v-if=\\\"!entry.strategy?.keys || entry.strategy.keys.length === 0\\\"\\n                    style=\\\"color: #888; font-size: 11px\\\"\\n                  >\\n                    {{ entry.strategy?.type === 'constant' ? '()' : '()' }}\\n                  </span>\\n                </div>\\n              </div>\\n\\n              <!--  -->\\n              <div style=\\\"margin-bottom: 12px\\\">\\n                <span style=\\\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\\\">\\n                   \\n                </span>\\n                <div\\n                  style=\\\"\\n                    padding: 12px;\\n                    background: #1a1a1a;\\n                    border: 1px solid #3a3a3a;\\n                    border-radius: 6px;\\n                    color: #ccc;\\n                    font-size: 12px;\\n                    line-height: 1.6;\\n                    max-height: 200px;\\n                    overflow-y: auto;\\n                    white-space: pre-wrap;\\n                  \\\"\\n                >\\n                  {{ entry.content || '()' }}\\n                </div>\\n              </div>\\n\\n              <!--  -->\\n              <div style=\\\"display: flex; gap: 10px; margin-top: 12px\\\">\\n                <button\\n                  style=\\\"\\n                    padding: 8px 16px;\\n                    background: #4a9eff;\\n                    border: none;\\n                    border-radius: 6px;\\n                    color: white;\\n                    font-size: 12px;\\n                    cursor: pointer;\\n                    transition: all 0.2s;\\n                  \\\"\\n                  @click=\\\"editWorldbookEntry(entry)\\\"\\n                >\\n                  <i class=\\\"fa-solid fa-edit\\\"></i> \\n                </button>\\n                <button\\n                  style=\\\"\\n                    padding: 8px 16px;\\n                    background: #ff6b6b;\\n                    border: none;\\n                    border-radius: 6px;\\n                    color: white;\\n                    font-size: 12px;\\n                    cursor: pointer;\\n                    transition: all 0.2s;\\n                  \\\"\\n                  @click=\\\"deleteWorldbookEntry(entry)\\\"\\n                >\\n                  <i class=\\\"fa-solid fa-trash\\\"></i> \\n                </button>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showEditDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        backdrop-filter: blur(4px);\\n      \\\"\\n      @click.self=\\\"showEditDialog = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid rgba(255, 255, 255, 0.1);\\n          border-radius: 12px;\\n          padding: 25px;\\n          max-width: 700px;\\n          width: 90%;\\n          max-height: 85vh;\\n          overflow-y: auto;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px\\\">\\n          <h3 style=\\\"margin: 0; color: #fff; font-size: 18px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 8px; color: #4a9eff\\\"></i>\\n            \\n          </h3>\\n          <button\\n            style=\\\"\\n              background: transparent;\\n              border: none;\\n              color: #888;\\n              font-size: 20px;\\n              cursor: pointer;\\n              padding: 5px 10px;\\n              transition: color 0.2s;\\n            \\\"\\n            @click=\\\"showEditDialog = false\\\"\\n            @mouseenter=\\\"(e: any) => (e.target.style.color = '#fff')\\\"\\n            @mouseleave=\\\"(e: any) => (e.target.style.color = '#888')\\\"\\n          >\\n            <i class=\\\"fa-solid fa-times\\\"></i>\\n          </button>\\n        </div>\\n\\n        <div style=\\\"display: flex; flex-direction: column; gap: 15px\\\">\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <input\\n              v-model=\\\"editingEntry.name\\\"\\n              type=\\\"text\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n              \\\"\\n            />\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n            <input\\n              id=\\\"entry-enabled\\\"\\n              v-model=\\\"editingEntry.enabled\\\"\\n              type=\\\"checkbox\\\"\\n              style=\\\"width: 18px; height: 18px; cursor: pointer\\\"\\n            />\\n            <label for=\\\"entry-enabled\\\" style=\\\"color: #e0e0e0; font-size: 14px; cursor: pointer\\\">  </label>\\n          </div>\\n\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <input\\n              :value=\\\"\\n                (editingEntry.strategy?.keys || []).map((k: any) => (typeof k === 'string' ? k : String(k))).join(',')\\n              \\\"\\n              type=\\\"text\\\"\\n              placeholder=\\\",Aria,,{{char}}\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n              \\\"\\n              @input=\\\"\\n                (e: any) => {\\n                  const keys = e.target.value\\n                    .split(',')\\n                    .filter((k: string) => k.trim())\\n                    .map((k: string) => k.trim());\\n                  editingEntry.strategy = {\\n                    ...editingEntry.strategy,\\n                    keys: keys,\\n                    keys_secondary: editingEntry.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\\n                    scan_depth: editingEntry.strategy?.scan_depth || 'same_as_global',\\n                    type: editingEntry.strategy?.type || 'selective',\\n                  };\\n                }\\n              \\\"\\n            />\\n          </div>\\n\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <select\\n              :value=\\\"editingEntry.strategy?.type || 'selective'\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n                cursor: pointer;\\n              \\\"\\n              @change=\\\"\\n                (e: any) =>\\n                  (editingEntry.strategy = {\\n                    ...editingEntry.strategy,\\n                    type: e.target.value,\\n                    keys: editingEntry.strategy?.keys || [],\\n                    keys_secondary: editingEntry.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\\n                    scan_depth: editingEntry.strategy?.scan_depth || 'same_as_global',\\n                  })\\n              \\\"\\n            >\\n              <option value=\\\"selective\\\"> ()</option>\\n              <option value=\\\"constant\\\"> ()</option>\\n            </select>\\n          </div>\\n\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <select\\n              :value=\\\"editingEntry.position?.type || 'before_character_definition'\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n                cursor: pointer;\\n              \\\"\\n              @change=\\\"\\n                (e: any) =>\\n                  (editingEntry.position = {\\n                    ...editingEntry.position,\\n                    type: e.target.value,\\n                    role: editingEntry.position?.role || 'system',\\n                    depth: editingEntry.position?.depth || 0,\\n                    order: editingEntry.position?.order || 0,\\n                  })\\n              \\\"\\n            >\\n              <option value=\\\"before_character_definition\\\"></option>\\n              <option value=\\\"after_character_definition\\\"></option>\\n              <option value=\\\"before_example_messages\\\"></option>\\n              <option value=\\\"after_example_messages\\\"></option>\\n              <option value=\\\"before_author_note\\\"></option>\\n              <option value=\\\"after_author_note\\\"></option>\\n              <option value=\\\"at_depth\\\"></option>\\n            </select>\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"display: grid; grid-template-columns: 1fr 1fr; gap: 10px\\\">\\n            <div>\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n                \\n              </label>\\n              <input\\n                :value=\\\"editingEntry.position?.depth || 0\\\"\\n                type=\\\"number\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  padding: 12px;\\n                  background: #1a1a1a;\\n                  border: 1px solid rgba(255, 255, 255, 0.1);\\n                  border-radius: 8px;\\n                  color: #e0e0e0;\\n                  font-size: 14px;\\n                \\\"\\n                @input=\\\"\\n                  (e: any) =>\\n                    (editingEntry.position = {\\n                      ...editingEntry.position,\\n                      depth: Number(e.target.value) || 0,\\n                      role: editingEntry.position?.role || 'system',\\n                      order: editingEntry.position?.order || 0,\\n                      type: editingEntry.position?.type || 'before_character_definition',\\n                    })\\n                \\\"\\n              />\\n            </div>\\n            <div>\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n                \\n              </label>\\n              <input\\n                :value=\\\"editingEntry.position?.order || 0\\\"\\n                type=\\\"number\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  padding: 12px;\\n                  background: #1a1a1a;\\n                  border: 1px solid rgba(255, 255, 255, 0.1);\\n                  border-radius: 8px;\\n                  color: #e0e0e0;\\n                  font-size: 14px;\\n                \\\"\\n                @input=\\\"\\n                  (e: any) =>\\n                    (editingEntry.position = {\\n                      ...editingEntry.position,\\n                      order: Number(e.target.value) || 0,\\n                      type: editingEntry.position?.type || 'before_character_definition',\\n                      role: editingEntry.position?.role || 'system',\\n                      depth: editingEntry.position?.depth || 0,\\n                    })\\n                \\\"\\n              />\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div\\n            style=\\\"background: #1a1a1a; padding: 15px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1)\\\"\\n          >\\n            <label style=\\\"display: block; margin-bottom: 12px; color: #e0e0e0; font-size: 14px; font-weight: 600\\\">\\n              \\n            </label>\\n            <div style=\\\"display: flex; flex-direction: column; gap: 10px\\\">\\n              <label\\n                style=\\\"color: #ccc; font-size: 13px; display: flex; align-items: center; gap: 10px; cursor: pointer\\\"\\n              >\\n                <input\\n                  type=\\\"checkbox\\\"\\n                  :checked=\\\"editingEntry.recursion?.prevent_incoming || false\\\"\\n                  @change=\\\"\\n                    (e: any) =>\\n                      (editingEntry.recursion = {\\n                        ...editingEntry.recursion,\\n                        prevent_incoming: e.target.checked,\\n                        prevent_outgoing: editingEntry.recursion?.prevent_outgoing || false,\\n                        delay_until: editingEntry.recursion?.delay_until || null,\\n                      })\\n                  \\\"\\n                />\\n                \\n              </label>\\n              <label\\n                style=\\\"color: #ccc; font-size: 13px; display: flex; align-items: center; gap: 10px; cursor: pointer\\\"\\n              >\\n                <input\\n                  type=\\\"checkbox\\\"\\n                  :checked=\\\"editingEntry.recursion?.prevent_outgoing || false\\\"\\n                  @change=\\\"\\n                    (e: any) =>\\n                      (editingEntry.recursion = {\\n                        ...editingEntry.recursion,\\n                        prevent_outgoing: e.target.checked,\\n                        prevent_incoming: editingEntry.recursion?.prevent_incoming || false,\\n                        delay_until: editingEntry.recursion?.delay_until || null,\\n                      })\\n                  \\\"\\n                />\\n                \\n              </label>\\n              <div>\\n                <label style=\\\"color: #ccc; font-size: 13px; display: block; margin-bottom: 5px\\\">\\n                   n \\n                </label>\\n                <input\\n                  :value=\\\"editingEntry.recursion?.delay_until || ''\\\"\\n                  type=\\\"number\\\"\\n                  placeholder=\\\"\\\"\\n                  style=\\\"\\n                    width: 100%;\\n                    padding: 8px;\\n                    background: #2a2a2a;\\n                    border: 1px solid rgba(255, 255, 255, 0.1);\\n                    border-radius: 6px;\\n                    color: #e0e0e0;\\n                    font-size: 13px;\\n                  \\\"\\n                  @input=\\\"\\n                    (e: any) =>\\n                      (editingEntry.recursion = {\\n                        ...editingEntry.recursion,\\n                        delay_until: e.target.value === '' ? null : Number(e.target.value),\\n                        prevent_incoming: editingEntry.recursion?.prevent_incoming || false,\\n                        prevent_outgoing: editingEntry.recursion?.prevent_outgoing || false,\\n                      })\\n                  \\\"\\n                />\\n              </div>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <textarea\\n              v-model=\\\"editingEntry.content\\\"\\n              style=\\\"\\n                width: 100%;\\n                min-height: 200px;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n                resize: vertical;\\n                font-family: inherit;\\n              \\\"\\n            ></textarea>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"display: flex; gap: 10px; margin-top: 20px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #444;\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 14px;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n            \\\"\\n            @click=\\\"showEditDialog = false\\\"\\n            @mouseenter=\\\"(e: any) => (e.target.style.background = '#555')\\\"\\n            @mouseleave=\\\"(e: any) => (e.target.style.background = '#444')\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #4a9eff;\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 14px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n            \\\"\\n            @click=\\\"saveEditedEntry\\\"\\n            @mouseenter=\\\"(e: any) => (e.target.style.background = '#5ba8ff')\\\"\\n            @mouseleave=\\\"(e: any) => (e.target.style.background = '#4a9eff')\\\"\\n          >\\n            <i class=\\\"fa-solid fa-save\\\" style=\\\"margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleToolExpanded('characterCard')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-user-plus\\\" style=\\\"color: #17a2b8; font-size: 18px\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('characterCard')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n            AIYAML \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 6px 0;\\n              color: #4a9eff;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #17a2b8;\\n            \\\"\\n          >\\n             \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 6px 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n             \\\"\\\"AI\\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"characterDescription\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\\\">\\n            <input v-model=\\\"enableCharacterStreaming\\\" type=\\\"checkbox\\\" style=\\\"cursor: pointer\\\" />\\n            \\n          </label>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"isGeneratingCharacter && characterProgressPercent > 0\\\"\\n          class=\\\"progress-bar-container\\\"\\n          style=\\\"margin: 15px 0\\\"\\n        >\\n          <div\\n            class=\\\"progress-bar\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 8px;\\n              background: #2a2a2a;\\n              border-radius: 4px;\\n              overflow: hidden;\\n              position: relative;\\n            \\\"\\n          >\\n            <div\\n              class=\\\"progress-fill\\\"\\n              :style=\\\"{\\n                width: characterProgressPercent + '%',\\n                height: '100%',\\n                background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\\n                backgroundSize: '200% 100%',\\n                animation: enableCharacterStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                transition: 'width 0.3s ease',\\n              }\\\"\\n            ></div>\\n          </div>\\n          <div style=\\\"text-align: center; margin-top: 8px; color: #17a2b8; font-size: 12px; font-weight: 500\\\">\\n            ... {{ characterProgressPercent.toFixed(0) }}%\\n          </div>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"generate-button\\\"\\n            :disabled=\\\"isGeneratingCharacter || !characterDescription.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(23, 162, 184, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleGenerateCharacterCard\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isGeneratingCharacter ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearCharacterForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"characterCardOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n          <div\\n            class=\\\"output-content\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              max-height: 300px;\\n              overflow-y: auto;\\n            \\\"\\n          >\\n            {{ characterCardOutput }}\\n          </div>\\n\\n          <div class=\\\"output-actions\\\" style=\\\"margin-top: 12px; display: flex; gap: 12px\\\">\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 10px 20px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 600;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyCharacterCard\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i> \\n            </button>\\n          </div>\\n\\n          <!--  -->\\n          <div class=\\\"modify-section\\\" style=\\\"margin-top: 25px; border-top: 2px dashed #3a3a3a; padding-top: 20px\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n              \\n            </h5>\\n            <div\\n              class=\\\"modify-instructions\\\"\\n              style=\\\"\\n                background: #1a1a1a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                padding: 10px;\\n                margin-bottom: 15px;\\n              \\\"\\n            >\\n              <p style=\\\"margin: 0 0 6px 0; color: #ccc; font-size: 12px\\\">\\n                <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n                AI\\\"\\\"\\\"\\\"\\\"\\\"\\n              </p>\\n              <p style=\\\"margin: 0; color: #ffa500; font-size: 11px\\\">  YAML </p>\\n            </div>\\n\\n            <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n                \\n              </label>\\n              <textarea\\n                v-model=\\\"modifyRequest\\\"\\n                placeholder=\\\"...\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 80px;\\n                  padding: 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  resize: vertical;\\n                  font-family: inherit;\\n                \\\"\\n              ></textarea>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              v-if=\\\"isModifyingCharacter && characterProgressPercent > 0\\\"\\n              class=\\\"progress-bar-container\\\"\\n              style=\\\"margin: 15px 0\\\"\\n            >\\n              <div\\n                class=\\\"progress-bar\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 8px;\\n                  background: #2a2a2a;\\n                  border-radius: 4px;\\n                  overflow: hidden;\\n                  position: relative;\\n                \\\"\\n              >\\n                <div\\n                  class=\\\"progress-fill\\\"\\n                  :style=\\\"{\\n                    width: characterProgressPercent + '%',\\n                    height: '100%',\\n                    background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\\n                    backgroundSize: '200% 100%',\\n                    animation: enableCharacterStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                    transition: 'width 0.3s ease',\\n                  }\\\"\\n                ></div>\\n              </div>\\n              <div style=\\\"text-align: center; margin-top: 8px; color: #17a2b8; font-size: 12px; font-weight: 500\\\">\\n                ... {{ characterProgressPercent.toFixed(0) }}%\\n              </div>\\n            </div>\\n\\n            <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 15px\\\">\\n              <button\\n                class=\\\"modify-button\\\"\\n                :disabled=\\\"isModifyingCharacter || !modifyRequest.trim()\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(255, 165, 0, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"handleModifyCharacterCard\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                {{ isModifyingCharacter ? '...' : 'AI' }}\\n              </button>\\n\\n              <button\\n                class=\\\"clear-modify-button\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(108, 117, 125, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"clearModifyRequest\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-eraser\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { debounce } from 'lodash';\\nimport { storeToRefs } from 'pinia';\\nimport { onBeforeUnmount, onMounted, ref, Ref, watch } from 'vue';\\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// \\nconst toolExpandedState = ref(new Map<string, boolean>());\\nconst antiClicheInput = ref('');\\nconst antiClicheOutput = ref('');\\nconst isProcessingAntiCliche = ref(false);\\nconst enableAntiClicheStreaming = ref(false); // \\nconst antiClicheProgressPercent = ref(0); // \\nconst antiClicheModifyRequest = ref(''); // \\nconst isModifyingAntiCliche = ref(false); // \\nconst characterDescription = ref('');\\nconst characterCardOutput = ref('');\\nconst isGeneratingCharacter = ref(false);\\nconst modifyRequest = ref('');\\nconst isModifyingCharacter = ref(false);\\nconst enableCharacterStreaming = ref(false); // \\nconst characterProgressPercent = ref(0); // \\n\\n// \\nconst worldbookDescription = ref('');\\nconst worldbookEntryOutput = ref<Partial<WorldbookEntry> | null>(null);\\nconst isGeneratingWorldbook = ref(false);\\nconst availableWorldbooks = ref<string[]>([]);\\nconst selectedWorldbook = ref('');\\nconst isInsertingEntry = ref(false);\\nconst worldbookModifyRequest = ref('');\\nconst isModifyingWorldbook = ref(false);\\nconst enableWorldbookStreaming = ref(false); // \\nconst worldbookProgressPercent = ref(0); // \\n\\n// \\nconst selectedViewerWorldbook = ref('');\\nconst worldbookEntries = ref<WorldbookEntry[]>([]);\\nconst viewerSearchQuery = ref('');\\nconst viewerSortBy = ref<'original' | 'enabled' | 'disabled'>('original');\\nconst entryExpandedState = ref(new Map<number, boolean>());\\n\\n// \\nconst showEditDialog = ref(false);\\nconst editingEntry = ref<Partial<WorldbookEntry>>({});\\nconst editingEntryUid = ref<number | null>(null);\\n\\n// \\nconst isDataLoaded = ref(false);\\n\\n// \\nconst loadAvailableWorldbooks = () => {\\n  try {\\n    availableWorldbooks.value = getWorldbookNames();\\n    console.log(' :', availableWorldbooks.value);\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst loadToolsData = () => {\\n  try {\\n    isDataLoaded.value = false; // \\n    const script_id = getScriptIdSafe();\\n    if (!script_id) {\\n      console.warn(' script_id ');\\n      isDataLoaded.value = true;\\n      return;\\n    }\\n    const savedData = getVariables({ type: 'script', script_id });\\n\\n    console.log(' :', savedData);\\n\\n    // \\n    if (savedData.tools_antiCliche) {\\n      antiClicheInput.value = savedData.tools_antiCliche.input || '';\\n      antiClicheOutput.value = savedData.tools_antiCliche.output || '';\\n      enableAntiClicheStreaming.value = savedData.tools_antiCliche.enableStreaming || false;\\n      antiClicheModifyRequest.value = savedData.tools_antiCliche.modifyRequest || '';\\n      console.log(' :', {\\n        input: antiClicheInput.value.substring(0, 50),\\n        output: antiClicheOutput.value.substring(0, 50),\\n        enableStreaming: enableAntiClicheStreaming.value,\\n        modifyRequest: antiClicheModifyRequest.value.substring(0, 30),\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_characterCard) {\\n      characterDescription.value = savedData.tools_characterCard.description || '';\\n      characterCardOutput.value = savedData.tools_characterCard.output || '';\\n      modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\\n      enableCharacterStreaming.value = savedData.tools_characterCard.enableStreaming || false;\\n      console.log(' :', {\\n        description: characterDescription.value.substring(0, 50),\\n        output: characterCardOutput.value.substring(0, 50),\\n        modifyRequest: modifyRequest.value.substring(0, 50),\\n        enableStreaming: enableCharacterStreaming.value,\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_worldbookEntry) {\\n      worldbookDescription.value = savedData.tools_worldbookEntry.description || '';\\n      worldbookEntryOutput.value = savedData.tools_worldbookEntry.output || null;\\n      selectedWorldbook.value = savedData.tools_worldbookEntry.selectedWorldbook || '';\\n      worldbookModifyRequest.value = savedData.tools_worldbookEntry.modifyRequest || '';\\n      enableWorldbookStreaming.value = savedData.tools_worldbookEntry.enableStreaming || false;\\n      console.log(' :', {\\n        description: worldbookDescription.value.substring(0, 50),\\n        output: worldbookEntryOutput.value ? '' : '',\\n        selectedWorldbook: selectedWorldbook.value,\\n        modifyRequest: worldbookModifyRequest.value.substring(0, 50),\\n        enableStreaming: enableWorldbookStreaming.value,\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_expandedState) {\\n      toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\\n      console.log(' :', Object.fromEntries(toolExpandedState.value));\\n    }\\n\\n    // \\n    if (savedData.tools_worldbookViewer) {\\n      selectedViewerWorldbook.value = savedData.tools_worldbookViewer.selectedWorldbook || '';\\n      viewerSearchQuery.value = savedData.tools_worldbookViewer.searchQuery || '';\\n      viewerSortBy.value = savedData.tools_worldbookViewer.sortBy || 'original';\\n      console.log(' :', {\\n        selectedWorldbook: selectedViewerWorldbook.value,\\n        searchQuery: viewerSearchQuery.value,\\n        sortBy: viewerSortBy.value,\\n      });\\n\\n      // \\n      if (selectedViewerWorldbook.value) {\\n        console.log(' ...');\\n        setTimeout(() => {\\n          loadWorldbookEntries();\\n        }, 200);\\n      }\\n    }\\n\\n    // \\n    setTimeout(() => {\\n      isDataLoaded.value = true;\\n      console.log(' ');\\n    }, 100);\\n  } catch (error) {\\n    console.error(' :', error);\\n    isDataLoaded.value = true;\\n  }\\n};\\n\\n// \\nconst saveToolsDataImmediate = () => {\\n  // \\n  if (!isDataLoaded.value) {\\n    console.log(' ');\\n    return;\\n  }\\n\\n  try {\\n    const script_id = getScriptIdSafe();\\n    if (!script_id) {\\n      console.warn(' script_id ');\\n      return;\\n    }\\n\\n    const dataToSave = {\\n      tools_antiCliche: {\\n        input: antiClicheInput.value,\\n        output: antiClicheOutput.value,\\n        enableStreaming: enableAntiClicheStreaming.value,\\n        modifyRequest: antiClicheModifyRequest.value,\\n      },\\n      tools_characterCard: {\\n        description: characterDescription.value,\\n        output: characterCardOutput.value,\\n        modifyRequest: modifyRequest.value,\\n        enableStreaming: enableCharacterStreaming.value,\\n      },\\n      tools_worldbookEntry: {\\n        description: worldbookDescription.value,\\n        output: worldbookEntryOutput.value,\\n        selectedWorldbook: selectedWorldbook.value,\\n        modifyRequest: worldbookModifyRequest.value,\\n        enableStreaming: enableWorldbookStreaming.value,\\n      },\\n      tools_worldbookViewer: {\\n        selectedWorldbook: selectedViewerWorldbook.value,\\n        searchQuery: viewerSearchQuery.value,\\n        sortBy: viewerSortBy.value,\\n      },\\n      tools_expandedState: Object.fromEntries(toolExpandedState.value),\\n    };\\n\\n    insertOrAssignVariables(klona(dataToSave), { type: 'script', script_id });\\n    console.log(' :', {\\n      antiCliche_input_length: antiClicheInput.value.length,\\n      antiCliche_output_length: antiClicheOutput.value.length,\\n      character_desc_length: characterDescription.value.length,\\n      character_output_length: characterCardOutput.value.length,\\n    });\\n  } catch (error) {\\n    console.error(' :', error);\\n  }\\n};\\n\\n// 300ms\\nconst saveToolsData = debounce(saveToolsDataImmediate, 300);\\n\\n// \\nwatch(\\n  [\\n    antiClicheInput,\\n    antiClicheOutput,\\n    enableAntiClicheStreaming,\\n    antiClicheModifyRequest,\\n    characterDescription,\\n    characterCardOutput,\\n    modifyRequest,\\n    enableCharacterStreaming,\\n    worldbookDescription,\\n    worldbookEntryOutput,\\n    selectedWorldbook,\\n    worldbookModifyRequest,\\n    enableWorldbookStreaming,\\n    selectedViewerWorldbook,\\n    viewerSearchQuery,\\n    viewerSortBy,\\n    toolExpandedState,\\n  ],\\n  () => {\\n    if (isDataLoaded.value) {\\n      console.log(' ...');\\n      saveToolsData();\\n    }\\n  },\\n  { deep: true },\\n);\\n\\n// \\nonMounted(() => {\\n  console.log(' ToolsTab ...');\\n  loadToolsData();\\n  loadAvailableWorldbooks();\\n});\\n\\n// \\nonBeforeUnmount(() => {\\n  console.log(' ToolsTab ...');\\n  // \\n  saveToolsData.cancel();\\n  saveToolsDataImmediate();\\n});\\n\\n// \\nconst toggleToolExpanded = (toolName: string) => {\\n  console.log('toggleToolExpanded :', toolName);\\n  const current = toolExpandedState.value.get(toolName) || false;\\n  console.log(':', current);\\n  toolExpandedState.value.set(toolName, !current);\\n  console.log(':', !current);\\n};\\n\\n// \\nconst isToolExpanded = (toolName: string) => {\\n  return toolExpandedState.value.get(toolName) || false;\\n};\\n\\n// copyToClipboard  utils.ts \\n\\n// \\nconst handleAntiClicheProcess = async () => {\\n  if (!antiClicheInput.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isProcessingAntiCliche.value = true;\\n    antiClicheProgressPercent.value = 0;\\n    window.toastr.info('AI...', '', { timeOut: 15000 });\\n\\n    const requestPayload = {\\n      model: settings.value.model,\\n      max_tokens: settings.value.max_tokens || 8000,\\n      temperature: 0.7,\\n      stream: enableAntiClicheStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: `****\\n\\n##  \\n\\n ****\\n ****\\n ****\\n **\\\"\\\"\\\"\\\"\\\"\\\"**\\n\\n## \\n\\n###  \\n\\n#### 1. \\n- ****\\n- ****\\n- ****\\\"......\\\"\\\"...\\\"\\\"\\\"\\n- ****\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\n- ****\\\"\\\"\\\"\\\"\\\"xx\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\n- ****\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\n- **\\\"\\\"+**\\n- ****168cm/50kgC\\\"\\\"\\\"\\\"\\\"\\\"\\n\\n#### 2. \\n-  **//**\\\"xxx\\\"\\\"\\\"\\\"\\\"\\n-  ****\\\"\\\"\\\"\\\"\\n-  ****\\\"\\\"\\\"\\\"\\n-  ****\\\"\\\"\\\"\\\"\\\"\\\"\\n-  ****\\\"\\\"\\\"...\\\"\\\"...\\\"///\\n-  ****\\n\\n#### 3. \\n-  \\\"\\\"\\\"\\\"\\\"\\\"\\n-  \\n\\n#### 4. \\n-  ****\\n-  \\\"\\\"\\n-  \\\"\\\"\\n\\n#### 5. /\\n-  ****\\n-  \\\"\\\"\\n-  \\\"\\\"\\\"\\\"\\n\\n#### 6. \\n-  \\\"\\\"\\n-  \\n-  \\n\\n#### 7. \\n-  168cm50kgC\\n-  \\n-  \\n-  \\n\\n###  3\\n1. ****\\n2. ****\\n3. ****\\n4. ****\\n\\n##  \\n\\n****\\n \\n \\n \\n \\n \\n\\n****\\n /\\n ****\\n ****\\n ****\\\"......\\\"\\n \\n \\n \\n\\n##  \\n\\n****\\n\\n###  \\n1. ****\\n   -  \\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\n\\n2. ****\\n   -  \\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\n\\n3. ****\\n   -  \\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\n\\n4. ****\\n   -  \\\"\\\"\\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\\"\\\"\\n\\n5. ****\\n   -  \\\"\\\"\\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\\"\\\"\\n\\n###  \\n- ****\\n- ****\\n- ****\\n\\n###  \\n1. ****\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\n2. ****\\\"......\\\"\\\"\\\"\\\"\\\"\\n3. ****\\\"\\\"\\\"\\\"\\n4. ****\\\"\\\"\\\"\\\"\\n5. ****\\\"\\\"\\\"\\\"\\n\\n##  \\n\\n### 1\\n\\n****\\nA\\\"\\\"\\n\\nA168cmC\\n\\n\\n\\n\\n\\n\\\"\\\"\\n\\n** **\\nA\\\"\\\"\\nA\\n\\\"\\\"\\n\\n** **\\nA\\\"\\\"\\n\\nA\\n\\nA\\n\\nA\\n\\n\\\"\\\"\\n\\n****\\n1. \\\"\\\"  \\\"\\\"\\n2. \\\"\\\"  \\n3. \\\"\\\"  \\n4. \\\"\\\"\\\"\\\"  \\n5. \\\"......\\\"  \\\"A\\\"\\n6. \\\"\\\"\\\"\\\"  \\n7. \\\"168cm\\\"\\\"C\\\"  \\\"\\\"\\n8. \\\"\\\"  \\n\\n### 2\\n\\n****\\n\\n\\n** **\\n\\n\\n****\\n1. \\\"......\\\"  \\n2. \\\"\\\"  \\n3. \\\"\\\"  \\\"\\\"\\n4. \\\"\\\"\\\"\\\"  \\n5. \\\"\\\"  \\n6. \\\"\\\"  \\\"\\\"\\\"\\\"+\\n\\n\\n##  \\n\\n1. ****\\n2. ****\\n3. ****\\n   - \\n   - \\n   - \\\"\\\"\\\"\\\"\\n   - \\n   - \\n4. ****\\n5. ****\\n6. ****\\n\\n****`,\\n        },\\n        {\\n          role: 'user',\\n          content: antiClicheInput.value,\\n        },\\n      ],\\n    };\\n\\n    let generatedText: string;\\n\\n    if (enableAntiClicheStreaming.value) {\\n      // \\n      generatedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      generatedText = data.choices[0].message.content.trim();\\n      antiClicheProgressPercent.value = 100;\\n    }\\n\\n    antiClicheOutput.value = generatedText;\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isProcessingAntiCliche.value = false;\\n    antiClicheProgressPercent.value = 0;\\n  }\\n};\\n\\nconst copyAntiClicheResult = () => {\\n  if (!antiClicheOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  // \\n  copyToClipboard(antiClicheOutput.value, '');\\n};\\n\\n// \\nconst handleModifyAntiCliche = async () => {\\n  if (!antiClicheModifyRequest.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!antiClicheOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isModifyingAntiCliche.value = true;\\n    antiClicheProgressPercent.value = 0;\\n    window.toastr.info('AI...', '', { timeOut: 15000 });\\n\\n    const requestPayload = {\\n      model: settings.value.model,\\n      max_tokens: settings.value.max_tokens || 8000,\\n      temperature: 0.7,\\n      stream: enableAntiClicheStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content:\\n            '',\\n        },\\n        {\\n          role: 'user',\\n          content: `\\\\n${antiClicheOutput.value}\\\\n\\\\n${antiClicheModifyRequest.value}`,\\n        },\\n      ],\\n    };\\n\\n    let modifiedText: string;\\n\\n    if (enableAntiClicheStreaming.value) {\\n      // \\n      modifiedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      modifiedText = data.choices[0].message.content.trim();\\n      antiClicheProgressPercent.value = 100;\\n    }\\n\\n    antiClicheOutput.value = modifiedText;\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isModifyingAntiCliche.value = false;\\n    antiClicheProgressPercent.value = 0;\\n  }\\n};\\n\\n// \\nconst clearAntiClicheModifyRequest = () => {\\n  antiClicheModifyRequest.value = '';\\n  saveToolsDataImmediate();\\n  window.toastr.success('');\\n};\\n\\n// \\nconst handleGenerateCharacterCard = async () => {\\n  if (!characterDescription.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isGeneratingCharacter.value = true;\\n    characterProgressPercent.value = 0;\\n    window.toastr.info('AI...');\\n\\n    const requestPayload = {\\n      model: settings.value.model || 'gpt-3.5-turbo',\\n      max_tokens: settings.value.max_tokens || 16000,\\n      temperature: 0.8,\\n      stream: enableCharacterStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: `\\n\\n****\\n-  YAML \\n- \\n- AI\\n- AI\\n\\n****\\n\\\\`\\\\`\\\\`yaml\\n:\\n  : \\\"\\\"\\n  : \\n  : \\\"YYYYMM\\\"\\n  : \\\"//\\\"\\n  : \\\"Alpha/Beta/Omega/\\\"\\n  : \\\"////\\\"\\n  : \\\"\\\"\\n  : \\\"//\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n\\n:\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n\\n:\\n  :\\n    - 1: \\\"\\\"\\n    - 2: \\\"\\\"\\n    - 3: \\\"\\\"\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"\\\"\\n\\n:\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"/\\\"\\n  : [\\\"1\\\", \\\"2\\\"]\\n\\n:\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  : [\\\"1\\\", \\\"2\\\", \\\"3\\\"]\\n  : \\\"TA\\\"\\n  : \\\"\\\"\\n  : \\\"TA\\\"\\n\\n:\\n  : \\\"{{user}}\\\"\\n  : \\\"\\\"\\n  : \\\"//\\\"\\n  : \\\"\\\"\\n\\n:\\n  :\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n    : \\\"\\\"\\n  : \\\"TA\\\"\\n  :\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n\\\\`\\\\`\\\\`\\n\\n\\n1. \\n2. \\n3. TA\\n4. `,\\n        },\\n        {\\n          role: 'user',\\n          content: characterDescription.value,\\n        },\\n      ],\\n    };\\n\\n    let generatedText: string;\\n\\n    if (enableCharacterStreaming.value) {\\n      // \\n      generatedText = await generateWithStreaming(requestPayload, characterProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      generatedText = data.choices[0].message.content.trim();\\n      characterProgressPercent.value = 100;\\n    }\\n\\n    characterCardOutput.value = generatedText;\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isGeneratingCharacter.value = false;\\n    characterProgressPercent.value = 0;\\n  }\\n};\\n\\nconst clearCharacterForm = () => {\\n  characterDescription.value = '';\\n  characterCardOutput.value = '';\\n  modifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\nconst copyCharacterCard = () => {\\n  if (!characterCardOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  // \\n  copyToClipboard(characterCardOutput.value, '');\\n};\\n\\n// \\nconst clearAntiClicheForm = () => {\\n  antiClicheInput.value = '';\\n  antiClicheOutput.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// \\nconst handleModifyCharacterCard = async () => {\\n  if (!modifyRequest.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!characterCardOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isModifyingCharacter.value = true;\\n    characterProgressPercent.value = 0;\\n    window.toastr.info('AI...');\\n\\n    const requestPayload = {\\n      model: settings.value.model || 'gpt-3.5-turbo',\\n      max_tokens: settings.value.max_tokens || 16000,\\n      temperature: 0.8,\\n      stream: enableCharacterStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: ` YAML \\n\\n****\\n1.  YAML \\n2. \\n3. \\n4. \\n5. \\n6. \\n\\n****\\n- ////\\n- \\n- \\n- AI\\n\\n YAML `,\\n        },\\n        {\\n          role: 'user',\\n          content: `\\n\\n${characterCardOutput.value}\\n\\n---\\n\\n\\n${modifyRequest.value}`,\\n        },\\n      ],\\n    };\\n\\n    let modifiedCard: string;\\n\\n    if (enableCharacterStreaming.value) {\\n      // \\n      modifiedCard = await generateWithStreaming(requestPayload, characterProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      modifiedCard = data.choices[0].message.content.trim();\\n      characterProgressPercent.value = 100;\\n    }\\n\\n    characterCardOutput.value = modifiedCard;\\n    modifyRequest.value = ''; // \\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isModifyingCharacter.value = false;\\n    characterProgressPercent.value = 0;\\n  }\\n};\\n\\n// \\nconst clearModifyRequest = () => {\\n  modifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// ====================  ====================\\n\\n// \\nconst extractStreamContent = (chunk: any): string | null => {\\n  // OpenAI \\n  if (chunk.choices?.[0]?.delta?.content) {\\n    return chunk.choices[0].delta.content;\\n  }\\n  // Claude \\n  if (chunk.delta?.text) {\\n    return chunk.delta.text;\\n  }\\n  // \\n  if (typeof chunk.content === 'string') {\\n    return chunk.content;\\n  }\\n  if (typeof chunk.text === 'string') {\\n    return chunk.text;\\n  }\\n  if (typeof chunk.response === 'string') {\\n    return chunk.response;\\n  }\\n  return null;\\n};\\n\\n// \\nconst generateWithStreaming = async (\\n  requestPayload: Record<string, any>,\\n  progressRef: Ref<number>,\\n): Promise<string> => {\\n  const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n  const response = await fetch(apiUrl, {\\n    method: 'POST',\\n    headers: {\\n      'Content-Type': 'application/json',\\n      Authorization: `Bearer ${settings.value.api_key}`,\\n    },\\n    body: JSON.stringify(requestPayload),\\n  });\\n\\n  if (!response.ok) {\\n    const errorText = await response.text();\\n    throw new Error(`${response.status} ${response.statusText}\\\\n${errorText.slice(0, 400)}`);\\n  }\\n\\n  if (!response.body) {\\n    throw new Error(' API ');\\n  }\\n\\n  const reader = response.body.getReader();\\n  const decoder = new TextDecoder('utf-8');\\n  let buffer = '';\\n  let done = false;\\n  let result = '';\\n\\n  progressRef.value = 0;\\n\\n  const processLine = (line: string): boolean => {\\n    const trimmed = line.trim();\\n    if (!trimmed) {\\n      return false;\\n    }\\n\\n    if (trimmed === 'data: [DONE]' || trimmed === '[DONE]') {\\n      return true;\\n    }\\n\\n    const payloadText = trimmed.startsWith('data:') ? trimmed.slice(5).trim() : trimmed;\\n    if (!payloadText || payloadText === '[DONE]') {\\n      return false;\\n    }\\n\\n    try {\\n      const payloadJson = JSON.parse(payloadText);\\n      const deltaText = extractStreamContent(payloadJson);\\n      if (deltaText) {\\n        result += deltaText;\\n        progressRef.value = Math.min(progressRef.value + 2, 98);\\n      }\\n    } catch (parseError) {\\n      console.warn(':', payloadText.slice(0, 100), parseError);\\n    }\\n\\n    return false;\\n  };\\n\\n  while (!done) {\\n    const { value, done: readerDone } = await reader.read();\\n    if (value) {\\n      buffer += decoder.decode(value, { stream: true });\\n      const lines = buffer.split('\\\\n');\\n      buffer = lines.pop() ?? '';\\n      for (const line of lines) {\\n        if (processLine(line)) {\\n          done = true;\\n          break;\\n        }\\n      }\\n    }\\n\\n    if (readerDone) {\\n      done = true;\\n    }\\n  }\\n\\n  if (buffer && !done) {\\n    processLine(buffer);\\n  }\\n\\n  progressRef.value = 100;\\n  return result;\\n};\\n\\n// ====================  ====================\\n\\n// \\nconst handleGenerateWorldbookEntry = async () => {\\n  if (!worldbookDescription.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isGeneratingWorldbook.value = true;\\n    worldbookProgressPercent.value = 0;\\n    window.toastr.info('AI...', '', { timeOut: 15000 });\\n\\n    const requestPayload = {\\n      model: settings.value.model || 'gpt-3.5-turbo',\\n      max_tokens: settings.value.max_tokens || 4000,\\n      temperature: 0.7,\\n      stream: enableWorldbookStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: ` SillyTavern  JSON \\n\\n****\\n\\\\`\\\\`\\\\`typescript\\n{\\n  \\\"name\\\": \\\"\\\",\\n  \\\"enabled\\\": true,\\n  \\\"strategy\\\": {\\n    \\\"type\\\": \\\"selective\\\",  // \\\"constant\\\"(-)  \\\"selective\\\"(-)\\n    \\\"keys\\\": [\\\"1\\\", \\\"2\\\"],  // \\n    \\\"keys_secondary\\\": {\\n      \\\"logic\\\": \\\"and_any\\\",  // \\\"and_any\\\" | \\\"and_all\\\" | \\\"not_all\\\" | \\\"not_any\\\"\\n      \\\"keys\\\": []  // \\n    },\\n    \\\"scan_depth\\\": \\\"same_as_global\\\"  //  10\\n  },\\n  \\\"position\\\": {\\n    \\\"type\\\": \\\"after_character_definition\\\",  // : \\\"after_character_definition\\\" | \\\"at_depth\\\"\\n    \\\"role\\\": \\\"system\\\",  // \\\"system\\\" | \\\"assistant\\\" | \\\"user\\\"\\n    \\\"depth\\\": 4,\\n    \\\"order\\\": 100\\n  },\\n  \\\"content\\\": \\\"\\\",\\n  \\\"probability\\\": 100,  //  100\\n  \\\"recursion\\\": {\\n    \\\"prevent_incoming\\\": false,\\n    \\\"prevent_outgoing\\\": false,\\n    \\\"delay_until\\\": null\\n  },\\n  \\\"effect\\\": {\\n    \\\"sticky\\\": null,\\n    \\\"cooldown\\\": null,\\n    \\\"delay\\\": null\\n  }\\n}\\n\\\\`\\\\`\\\\`\\n\\n****\\n1. ** (name)**\\n2. ** (strategy.type)**\\n   -  \\\"selective\\\" ()\\n   -  \\\"constant\\\" ()\\n3. ** (strategy.keys)**\\n   - \\n   - \\n   -  3-6 \\n4. ** (content)**\\n   - ****\\n   - \\n   - \\n   - ** content **\\n   - ****\\n5. ** (position.type)**\\n   -  \\\"after_character_definition\\\"\\n   -  \\\"at_depth\\\" \\n6. ****\\n\\n** 1**\\n\\\"16\\\"\\n\\n\\\\`\\\\`\\\\`json\\n{\\n  \\\"name\\\": \\\"\\\",\\n  \\\"enabled\\\": true,\\n  \\\"strategy\\\": {\\n    \\\"type\\\": \\\"selective\\\",\\n    \\\"keys\\\": [\\\"\\\", \\\"\\\", \\\"\\\"],\\n    \\\"keys_secondary\\\": { \\\"logic\\\": \\\"and_any\\\", \\\"keys\\\": [] },\\n    \\\"scan_depth\\\": \\\"same_as_global\\\"\\n  },\\n  \\\"position\\\": {\\n    \\\"type\\\": \\\"after_character_definition\\\",\\n    \\\"role\\\": \\\"system\\\",\\n    \\\"depth\\\": 4,\\n    \\\"order\\\": 100\\n  },\\n  \\\"content\\\": \\\"16\\\",\\n  \\\"probability\\\": 100,\\n  \\\"recursion\\\": {\\n    \\\"prevent_incoming\\\": false,\\n    \\\"prevent_outgoing\\\": false,\\n    \\\"delay_until\\\": null\\n  },\\n  \\\"effect\\\": {\\n    \\\"sticky\\\": null,\\n    \\\"cooldown\\\": null,\\n    \\\"delay\\\": null\\n  }\\n}\\n\\\\`\\\\`\\\\`\\n\\n** 2**\\n\\\"\\\"\\n\\n\\\\`\\\\`\\\\`json\\n{\\n  \\\"name\\\": \\\"\\\",\\n  \\\"enabled\\\": true,\\n  \\\"strategy\\\": {\\n    \\\"type\\\": \\\"selective\\\",\\n    \\\"keys\\\": [\\\"\\\", \\\"\\\", \\\"\\\", \\\"\\\"],\\n    \\\"keys_secondary\\\": { \\\"logic\\\": \\\"and_any\\\", \\\"keys\\\": [] },\\n    \\\"scan_depth\\\": \\\"same_as_global\\\"\\n  },\\n  \\\"position\\\": {\\n    \\\"type\\\": \\\"after_character_definition\\\",\\n    \\\"role\\\": \\\"system\\\",\\n    \\\"depth\\\": 4,\\n    \\\"order\\\": 100\\n  },\\n  \\\"content\\\": \\\"\\\",\\n  \\\"probability\\\": 100,\\n  \\\"recursion\\\": {\\n    \\\"prevent_incoming\\\": false,\\n    \\\"prevent_outgoing\\\": false,\\n    \\\"delay_until\\\": null\\n  },\\n  \\\"effect\\\": {\\n    \\\"sticky\\\": null,\\n    \\\"cooldown\\\": null,\\n    \\\"delay\\\": null\\n  }\\n}\\n\\\\`\\\\`\\\\`\\n\\n****\\n-  JSON \\n-  JSON \\n- **content **\\n-  content \\n-  strategy.type`,\\n        },\\n        {\\n          role: 'user',\\n          content: worldbookDescription.value,\\n        },\\n      ],\\n    };\\n\\n    let generatedText: string;\\n\\n    if (enableWorldbookStreaming.value) {\\n      // \\n      generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      generatedText = data.choices[0].message.content.trim();\\n      worldbookProgressPercent.value = 100;\\n    }\\n\\n    //  JSON\\n    try {\\n      //  JSON \\n      const jsonMatch = generatedText.match(/```(?:json)?\\\\s*([\\\\s\\\\S]*?)```/) || [null, generatedText];\\n      const jsonText = jsonMatch[1] || generatedText;\\n\\n      const parsedEntry = JSON.parse(jsonText);\\n      worldbookEntryOutput.value = parsedEntry;\\n      saveToolsDataImmediate(); // \\n\\n      window.toastr.success('');\\n    } catch (parseError) {\\n      console.error('JSON :', parseError);\\n      console.log(':', generatedText);\\n      window.toastr.error('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isGeneratingWorldbook.value = false;\\n    worldbookProgressPercent.value = 0;\\n  }\\n};\\n\\n// \\nconst clearWorldbookForm = () => {\\n  worldbookDescription.value = '';\\n  worldbookEntryOutput.value = null;\\n  selectedWorldbook.value = '';\\n  worldbookModifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// \\nconst handleInsertEntry = async () => {\\n  if (!selectedWorldbook.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!worldbookEntryOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isInsertingEntry.value = true;\\n    window.toastr.info(`${selectedWorldbook.value}...`);\\n\\n    //  createWorldbookEntries \\n    await createWorldbookEntries(selectedWorldbook.value, [worldbookEntryOutput.value], { render: 'immediate' });\\n\\n    window.toastr.success(` ${selectedWorldbook.value}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isInsertingEntry.value = false;\\n  }\\n};\\n\\n//  JSON\\nconst copyWorldbookEntry = () => {\\n  if (!worldbookEntryOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  const jsonText = JSON.stringify(worldbookEntryOutput.value, null, 2);\\n  copyToClipboard(jsonText, ' JSON ');\\n};\\n\\n// \\nconst handleModifyWorldbookEntry = async () => {\\n  if (!worldbookModifyRequest.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!worldbookEntryOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isModifyingWorldbook.value = true;\\n    worldbookProgressPercent.value = 0;\\n    window.toastr.info('AI...');\\n\\n    const requestPayload = {\\n      model: settings.value.model || 'gpt-3.5-turbo',\\n      max_tokens: settings.value.max_tokens || 4000,\\n      temperature: 0.7,\\n      stream: enableWorldbookStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: ` JSON \\n\\n****\\n1.  JSON \\n2. \\n3. \\n4. \\n5.  JSON\\n6. \\n\\n****\\n-  (content)\\n-  (keys)\\n-  (strategy.type) \\n-  JSON \\n\\n JSON `,\\n        },\\n        {\\n          role: 'user',\\n          content: `\\n\\n${JSON.stringify(worldbookEntryOutput.value, null, 2)}\\n\\n---\\n\\n\\n${worldbookModifyRequest.value}`,\\n        },\\n      ],\\n    };\\n\\n    let generatedText: string;\\n\\n    if (enableWorldbookStreaming.value) {\\n      // \\n      generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      generatedText = data.choices[0].message.content.trim();\\n      worldbookProgressPercent.value = 100;\\n    }\\n\\n    //  JSON\\n    try {\\n      //  JSON \\n      const jsonMatch = generatedText.match(/```(?:json)?\\\\s*([\\\\s\\\\S]*?)```/) || [null, generatedText];\\n      const jsonText = jsonMatch[1] || generatedText;\\n\\n      const parsedEntry = JSON.parse(jsonText);\\n      worldbookEntryOutput.value = parsedEntry;\\n      worldbookModifyRequest.value = ''; // \\n      saveToolsDataImmediate(); // \\n\\n      window.toastr.success('');\\n    } catch (parseError) {\\n      console.error('JSON :', parseError);\\n      console.log(':', generatedText);\\n      window.toastr.error('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isModifyingWorldbook.value = false;\\n    worldbookProgressPercent.value = 0;\\n  }\\n};\\n\\n// \\nconst clearWorldbookModifyRequest = () => {\\n  worldbookModifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// ====================  ====================\\n\\n// \\nconst loadWorldbookEntries = async () => {\\n  if (!selectedViewerWorldbook.value) {\\n    worldbookEntries.value = [];\\n    return;\\n  }\\n\\n  try {\\n    const worldbook = await getWorldbook(selectedViewerWorldbook.value);\\n    if (worldbook && Array.isArray(worldbook) && worldbook.length > 0) {\\n      worldbookEntries.value = worldbook;\\n      console.log(`  \\\"${selectedViewerWorldbook.value}\\\"  ${worldbookEntries.value.length} `);\\n      window.toastr.success(` ${worldbookEntries.value.length} `);\\n    } else {\\n      worldbookEntries.value = [];\\n      window.toastr.info('');\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error('' + (error as Error).message);\\n    worldbookEntries.value = [];\\n  }\\n};\\n\\n// \\nconst filteredWorldbookEntries = computed(() => {\\n  let entries = [...worldbookEntries.value];\\n\\n  // \\n  if (viewerSearchQuery.value.trim()) {\\n    const query = viewerSearchQuery.value.toLowerCase();\\n    entries = entries.filter(entry => {\\n      const nameMatch = entry.name?.toLowerCase().includes(query);\\n      const contentMatch = entry.content?.toLowerCase().includes(query);\\n      const keysMatch = entry.strategy?.keys?.some(key => {\\n        if (typeof key === 'string') {\\n          return key.toLowerCase().includes(query);\\n        } else if (key instanceof RegExp) {\\n          return key.toString().toLowerCase().includes(query);\\n        }\\n        return false;\\n      });\\n      return nameMatch || contentMatch || keysMatch;\\n    });\\n  }\\n\\n  // \\n  if (viewerSortBy.value === 'enabled') {\\n    entries = entries.filter(entry => entry.enabled);\\n  } else if (viewerSortBy.value === 'disabled') {\\n    entries = entries.filter(entry => !entry.enabled);\\n  }\\n\\n  return entries;\\n});\\n\\n// \\nconst toggleEntryExpanded = (index: number) => {\\n  const current = entryExpandedState.value.get(index) || false;\\n  entryExpandedState.value.set(index, !current);\\n};\\n\\n// \\nconst isEntryExpanded = (index: number) => {\\n  return entryExpandedState.value.get(index) || false;\\n};\\n\\n// \\nconst editWorldbookEntry = (entry: WorldbookEntry) => {\\n  try {\\n    // \\n    editingEntry.value = {\\n      uid: entry.uid,\\n      name: entry.name || '',\\n      enabled: entry.enabled ?? true,\\n      content: entry.content || '',\\n      strategy: {\\n        type: entry.strategy?.type || 'selective',\\n        keys: [...(entry.strategy?.keys || [])],\\n        keys_secondary: {\\n          logic: entry.strategy?.keys_secondary?.logic || 'and_any',\\n          keys: [...(entry.strategy?.keys_secondary?.keys || [])],\\n        },\\n        scan_depth: entry.strategy?.scan_depth || 'same_as_global',\\n      },\\n      position: entry.position\\n        ? {\\n            type: entry.position.type || 'before_character_definition',\\n            role: entry.position.role || 'system',\\n            depth: entry.position.depth ?? 0,\\n            order: entry.position.order ?? 0,\\n          }\\n        : {\\n            type: 'before_character_definition',\\n            role: 'system',\\n            depth: 0,\\n            order: 0,\\n          },\\n      probability: entry.probability ?? 100,\\n      recursion: entry.recursion\\n        ? {\\n            prevent_incoming: entry.recursion.prevent_incoming ?? false,\\n            prevent_outgoing: entry.recursion.prevent_outgoing ?? false,\\n            delay_until: entry.recursion.delay_until ?? null,\\n          }\\n        : {\\n            prevent_incoming: false,\\n            prevent_outgoing: false,\\n            delay_until: null,\\n          },\\n      effect: entry.effect\\n        ? {\\n            sticky: entry.effect.sticky ?? null,\\n            cooldown: entry.effect.cooldown ?? null,\\n            delay: entry.effect.delay ?? null,\\n          }\\n        : {\\n            sticky: null,\\n            cooldown: null,\\n            delay: null,\\n          },\\n    };\\n    editingEntryUid.value = entry.uid;\\n    showEditDialog.value = true;\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst saveEditedEntry = async () => {\\n  if (!editingEntry.value.name?.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!editingEntryUid.value) {\\n    window.toastr.error('ID');\\n    return;\\n  }\\n\\n  try {\\n    //  updateWorldbookWith API \\n    const updatedWorldbook = await updateWorldbookWith(selectedViewerWorldbook.value, worldbook => {\\n      const entryIndex = worldbook.findIndex(e => e.uid === editingEntryUid.value);\\n      if (entryIndex !== -1) {\\n        // \\n        worldbook[entryIndex] = {\\n          ...worldbook[entryIndex],\\n          ...editingEntry.value,\\n          uid: editingEntryUid.value, //  UID \\n        } as WorldbookEntry;\\n      }\\n      return worldbook;\\n    });\\n\\n    // \\n    worldbookEntries.value = updatedWorldbook;\\n\\n    // \\n    showEditDialog.value = false;\\n    editingEntry.value = {};\\n    editingEntryUid.value = null;\\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst deleteWorldbookEntry = async (entry: WorldbookEntry) => {\\n  if (!confirm(` \\\"${entry.name}\\\" `)) {\\n    return;\\n  }\\n\\n  try {\\n    //  deleteWorldbookEntries API\\n    const { worldbook } = await deleteWorldbookEntries(selectedViewerWorldbook.value, e => e.uid === entry.uid);\\n\\n    // \\n    worldbookEntries.value = worldbook;\\n\\n    window.toastr.success(` \\\"${entry.name}\\\"`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n</script>\\n\\n<style scoped>\\n.tools-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 15px 20px;\\n  background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);\\n  border-radius: 8px;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  margin-bottom: 15px;\\n  border: 1px solid #3a3a3a;\\n}\\n\\n.section-header:hover {\\n  background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);\\n  transform: translateY(-1px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n}\\n\\n/*  */\\n.section-header-anti-cliche {\\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\\n  border: 1px solid rgba(255, 107, 107, 0.3) !important;\\n  box-shadow:\\n    0 2px 8px rgba(0, 0, 0, 0.2),\\n    0 0 0 1px rgba(255, 107, 107, 0.1) inset !important;\\n  backdrop-filter: blur(10px);\\n}\\n\\n.section-header-anti-cliche:hover {\\n  background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(238, 90, 36, 0.2) 100%) !important;\\n  border-color: rgba(255, 107, 107, 0.5) !important;\\n  box-shadow:\\n    0 4px 16px rgba(255, 107, 107, 0.3),\\n    0 0 0 1px rgba(255, 107, 107, 0.2) inset !important;\\n  transform: translateY(-2px) !important;\\n}\\n\\n/*  */\\n.section-header-worldbook {\\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\\n  border: 1px solid rgba(255, 193, 7, 0.3) !important;\\n  box-shadow:\\n    0 2px 8px rgba(0, 0, 0, 0.2),\\n    0 0 0 1px rgba(255, 193, 7, 0.1) inset !important;\\n  backdrop-filter: blur(10px);\\n}\\n\\n.section-header-worldbook:hover {\\n  background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 152, 0, 0.2) 100%) !important;\\n  border-color: rgba(255, 193, 7, 0.5) !important;\\n  box-shadow:\\n    0 4px 16px rgba(255, 193, 7, 0.3),\\n    0 0 0 1px rgba(255, 193, 7, 0.2) inset !important;\\n  transform: translateY(-2px) !important;\\n}\\n\\n/*  */\\n.section-header-character {\\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\\n  border: 1px solid rgba(23, 162, 184, 0.3) !important;\\n  box-shadow:\\n    0 2px 8px rgba(0, 0, 0, 0.2),\\n    0 0 0 1px rgba(23, 162, 184, 0.1) inset !important;\\n  backdrop-filter: blur(10px);\\n}\\n\\n.section-header-character:hover {\\n  background: linear-gradient(135deg, rgba(23, 162, 184, 0.2) 0%, rgba(19, 132, 150, 0.2) 100%) !important;\\n  border-color: rgba(23, 162, 184, 0.5) !important;\\n  box-shadow:\\n    0 4px 16px rgba(23, 162, 184, 0.3),\\n    0 0 0 1px rgba(23, 162, 184, 0.2) inset !important;\\n  transform: translateY(-2px) !important;\\n}\\n\\n/*  */\\n.tool-section-anti-cliche,\\n.tool-section-worldbook,\\n.tool-section-character {\\n  margin-bottom: 20px;\\n  border-radius: 12px;\\n  overflow: hidden;\\n  background: rgba(26, 26, 26, 0.5);\\n  backdrop-filter: blur(5px);\\n}\\n\\n.tool-content {\\n  background: #1e1e1e;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 8px;\\n  padding: 20px;\\n  margin-bottom: 20px;\\n}\\n\\n.tool-instructions {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 12px;\\n  color: #ccc;\\n  font-size: 12px;\\n  margin-bottom: 15px;\\n}\\n\\n.form-group {\\n  margin-bottom: 15px;\\n}\\n\\n.button-group {\\n  display: flex;\\n  gap: 12px;\\n  margin-bottom: 20px;\\n}\\n\\n.output-section {\\n  margin-top: 20px;\\n}\\n\\n.output-content {\\n  background: #1e1e1e;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 15px;\\n  color: #e0e0e0;\\n  font-size: 13px;\\n  line-height: 1.6;\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  max-height: 300px;\\n  overflow-y: auto;\\n}\\n\\n.output-actions {\\n  margin-top: 12px;\\n  display: flex;\\n  gap: 12px;\\n}\\n\\n/*  */\\n.process-button,\\n.clear-button,\\n.generate-button,\\n.copy-button {\\n  position: relative;\\n  overflow: hidden;\\n  transition: all 0.3s ease;\\n}\\n\\n.process-button:hover:not(:disabled),\\n.clear-button:hover:not(:disabled),\\n.generate-button:hover:not(:disabled),\\n.copy-button:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\\n}\\n\\n.copy-button:hover {\\n  background: #218838 !important;\\n}\\n\\n.tool-instructions {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 12px;\\n  color: #ccc;\\n  font-size: 12px;\\n  margin-bottom: 15px;\\n}\\n\\n/*  */\\n.process-button:hover:not(:disabled) .shimmer-effect,\\n.clear-button:hover:not(:disabled) .shimmer-effect,\\n.generate-button:hover:not(:disabled) .shimmer-effect,\\n.copy-button:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.process-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\\n}\\n\\n.clear-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);\\n}\\n\\n.generate-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(23, 162, 184, 0.4);\\n}\\n\\n.copy-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\\n}\\n\\n.process-button:disabled,\\n.clear-button:disabled,\\n.generate-button:disabled {\\n  opacity: 0.6;\\n  cursor: not-allowed;\\n  transform: none;\\n}\\n\\n.process-button:disabled:hover,\\n.clear-button:disabled:hover,\\n.generate-button:disabled:hover {\\n  transform: none;\\n  box-shadow: none;\\n}\\n\\n/*  */\\n.output-content::-webkit-scrollbar {\\n  width: 6px;\\n}\\n\\n.output-content::-webkit-scrollbar-track {\\n  background: #1a1a1a;\\n  border-radius: 3px;\\n}\\n\\n.output-content::-webkit-scrollbar-thumb {\\n  background: #3a3a3a;\\n  border-radius: 3px;\\n}\\n\\n.output-content::-webkit-scrollbar-thumb:hover {\\n  background: #4a4a4a;\\n}\\n\\n/*  */\\n@media (max-width: 768px) {\\n  .button-group {\\n    flex-direction: column;\\n  }\\n\\n  .output-actions {\\n    flex-direction: column;\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RegexUIGenerator.vue?vue&type=style&index=0&id=f1283e36&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b0007bc8\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RegexUIGenerator.vue?vue&type=style&index=0&id=f1283e36&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RegexUIGenerator.vue?vue&type=style&index=0&id=f1283e36&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./GreetingsTab.vue?vue&type=style&index=0&id=3b4dcffa&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5fc9a793\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./GreetingsTab.vue?vue&type=style&index=0&id=3b4dcffa&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./GreetingsTab.vue?vue&type=style&index=0&id=3b4dcffa&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=f8bd87fc&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"42cd3b06\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=f8bd87fc&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=f8bd87fc&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.table-tab[data-v-170043aa]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-170043aa]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.section-header h3[data-v-170043aa]{margin:0;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.count-badge[data-v-170043aa]{background:#4a9eff;color:white;padding:4px 8px;border-radius:12px;font-size:12px}.empty-state[data-v-170043aa]{text-align:center;padding:40px 20px;color:#888}.empty-state i[data-v-170043aa]{font-size:48px;margin-bottom:10px;opacity:0.3}.empty-state p[data-v-170043aa]{margin:10px 0;font-size:14px}.empty-state small[data-v-170043aa]{color:#666;font-size:12px}.history-list[data-v-170043aa]{display:flex;flex-direction:column;gap:10px;padding:15px 20px}.history-item[data-v-170043aa]{background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;overflow:hidden;transition:border-color 0.2s}.history-item[data-v-170043aa]:hover{border-color:#4a4a4a}.history-header[data-v-170043aa]{padding:12px 15px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background 0.2s}.history-header[data-v-170043aa]:hover{background:#2a2a2a}.history-info[data-v-170043aa]{display:flex;align-items:center;gap:10px;flex:1}.history-number[data-v-170043aa]{color:#4a9eff;font-weight:bold}.history-range[data-v-170043aa]{color:#888;font-size:12px}.expand-icon[data-v-170043aa]{color:#888;font-size:12px}.history-content[data-v-170043aa]{padding:15px;background:#2a2a2a}.history-actions[data-v-170043aa]{display:flex;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a}.mini-button[data-v-170043aa]{flex:1;padding:6px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:background 0.2s}.mini-button[data-v-170043aa]:hover{background:#3a3a3a}.mini-button.delete-button[data-v-170043aa]:hover{background:#ff4444;border-color:#ff4444;color:white}.table-display[data-v-170043aa]{margin-top:15px;overflow-x:auto;max-height:400px;overflow-y:auto;border-radius:6px;background:#1a1a1a}.table-display table[data-v-170043aa]{width:100%;font-size:12px;border-collapse:collapse}.table-display th[data-v-170043aa],.table-display td[data-v-170043aa]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px;padding:8px;border:1px solid #444}.table-display th[data-v-170043aa]{background:#2a2a2a;font-weight:bold;color:#fff}.table-display td[data-v-170043aa]{color:#e0e0e0}.copy-button:hover .shimmer-effect[data-v-170043aa],.delete-button:hover .shimmer-effect[data-v-170043aa]{left:100%}.copy-button[data-v-170043aa]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(40,167,69,0.4)}.delete-button[data-v-170043aa]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(255,107,107,0.4)}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/TableTab.vue\"],\"names\":[],\"mappings\":\"AAomBA,4BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,oCACE,QAAS,CACT,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,cACF,CAEA,8BACE,iBAAkB,CAClB,iBAAkB,CAClB,UACF,CAEA,gCACE,cAAe,CACf,kBAAmB,CACnB,WACF,CAEA,gCACE,aAAc,CACd,cACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,iBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,oBACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,0BACF,CAEA,uCACE,kBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,iCACE,aAAc,CACd,gBACF,CAEA,gCACE,UAAW,CACX,cACF,CAEA,8BACE,UAAW,CACX,cACF,CAEA,kCACE,YAAa,CACb,kBACF,CAEA,kCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,kBAAmB,CACnB,+BACF,CAEA,8BACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,cAAe,CACf,0BACF,CAEA,oCACE,kBACF,CAEA,kDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,gCACE,eAAgB,CAChB,eAAgB,CAChB,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,kBACF,CAEA,sCACE,UAAW,CACX,cAAe,CACf,wBACF,CAEA,sEAEE,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,eAAgB,CAChB,WAAY,CACZ,qBACF,CAEA,mCACE,kBAAmB,CACnB,gBAAiB,CACjB,UACF,CAEA,mCACE,aACF,CAGA,0GAEE,SACF,CAEA,oCACE,0BAA2B,CAC3B,yCACF,CAEA,sCACE,0BAA2B,CAC3B,2CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"table-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n        margin-bottom: 5px;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <span\\n        v-if=\\\"table_history.length > 0\\\"\\n        class=\\\"count-badge\\\"\\n        style=\\\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n        >{{ table_history.length }} </span\\n      >\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"table_history && table_history.length > 0\\\"\\n      class=\\\"history-list\\\"\\n      style=\\\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\\\"\\n    >\\n      <div\\n        v-for=\\\"(item, index) in table_history\\\"\\n        :key=\\\"index\\\"\\n        class=\\\"history-item\\\"\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #444;\\n          border-radius: 8px;\\n          padding: 15px;\\n          transition: all 0.3s ease;\\n        \\\"\\n      >\\n        <div\\n          class=\\\"history-header\\\"\\n          style=\\\"\\n            padding: 12px 15px;\\n            background: #1a1a1a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background 0.2s;\\n            border-radius: 6px;\\n          \\\"\\n          @click=\\\"toggleTableExpanded(index)\\\"\\n        >\\n          <div class=\\\"history-info\\\" style=\\\"display: flex; align-items: center; gap: 10px; flex: 1\\\">\\n            <span class=\\\"history-number\\\" style=\\\"color: #4a9eff; font-weight: bold\\\">#{{ index + 1 }}</span>\\n            <span class=\\\"history-range\\\" style=\\\"color: #888; font-size: 12px\\\"\\n              > {{ item.start_id }} - {{ item.end_id }}</span\\n            >\\n          </div>\\n          <span class=\\\"expand-icon\\\" style=\\\"color: #888; font-size: 12px\\\">{{\\n            isTableExpanded(index) ? '' : ''\\n          }}</span>\\n        </div>\\n        <div\\n          v-if=\\\"isTableExpanded(index)\\\"\\n          class=\\\"history-content\\\"\\n          style=\\\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\\\"\\n        >\\n          <div\\n            class=\\\"history-actions\\\"\\n            style=\\\"\\n              display: flex;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n              flex-wrap: wrap;\\n            \\\"\\n          >\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                font-weight: 600;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 6px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyTable(item)\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 12px\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"delete-button\\\"\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                font-weight: 600;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 6px;\\n                box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"deleteTable(index)\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 12px\\\"></i> \\n            </button>\\n          </div>\\n          <div class=\\\"table-display\\\" style=\\\"overflow-x: auto; border-radius: 6px; border: 1px solid #3a3a3a\\\">\\n            <table style=\\\"width: 100%; border-collapse: collapse; background: #1a1a1a\\\">\\n              <thead style=\\\"background: #2a2a2a\\\">\\n                <tr>\\n                  <th\\n                    v-for=\\\"(header, idx) in item.headers\\\"\\n                    :key=\\\"idx\\\"\\n                    style=\\\"\\n                      padding: 12px 16px;\\n                      text-align: left;\\n                      font-weight: bold;\\n                      color: #fff;\\n                      border-bottom: 2px solid #3a3a3a;\\n                      border-right: 1px solid #3a3a3a;\\n                    \\\"\\n                  >\\n                    {{ header }}\\n                  </th>\\n                </tr>\\n              </thead>\\n              <tbody>\\n                <tr v-for=\\\"(row, rowIdx) in item.data\\\" :key=\\\"rowIdx\\\" style=\\\"border-bottom: 1px solid #3a3a3a\\\">\\n                  <td\\n                    v-for=\\\"(cell, cellIdx) in row\\\"\\n                    :key=\\\"cellIdx\\\"\\n                    style=\\\"padding: 10px 16px; color: #e0e0e0; border-right: 1px solid #3a3a3a\\\"\\n                  >\\n                    {{ cell }}\\n                  </td>\\n                </tr>\\n              </tbody>\\n            </table>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"empty-state\\\" style=\\\"text-align: center; padding: 40px 20px; color: #888\\\">\\n      <i class=\\\"fa-solid fa-table\\\" style=\\\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\\\"></i>\\n      <p style=\\\"margin: 10px 0; font-size: 16px\\\"></p>\\n      <small style=\\\"font-size: 12px; color: #666\\\">\\\"\\\"</small>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { getChatIdSafe } from '../utils';\\n\\n// \\nconst table_history = ref<Array<{ start_id: number; end_id: number; headers: string[]; data: string[][] }>>([]);\\nconst tableExpandedState = ref<Map<number, boolean>>(new Map());\\n\\n// \\nconst refreshTableHistory = () => {\\n  try {\\n    const chat_id = getChatIdSafe();\\n    if (!chat_id) {\\n      console.warn('ID');\\n      table_history.value = [];\\n      return;\\n    }\\n\\n    const chat_vars = getVariables({ type: 'chat' });\\n    console.log(':', chat_vars);\\n    console.log(':', chat_vars.table_history);\\n\\n    table_history.value = chat_vars.table_history || [];\\n    console.log(':', table_history.value.length);\\n  } catch (e) {\\n    console.error(':', e);\\n    table_history.value = [];\\n  }\\n};\\n\\n// \\nconst toggleTableExpanded = (index: number) => {\\n  const current = tableExpandedState.value.get(index) || false;\\n  tableExpandedState.value.set(index, !current);\\n};\\n\\nconst isTableExpanded = (index: number) => {\\n  return tableExpandedState.value.get(index) || false;\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // iframe\\n    if (window.parent && window.parent !== window) {\\n      console.log('iframe');\\n      const parentSuccess = await tryParentWindowCopy(text);\\n      if (parentSuccess) {\\n        console.log('');\\n        window.toastr.success(successMessage);\\n        return;\\n      }\\n    }\\n\\n    // 1:  Clipboard API\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log(' Clipboard API');\\n      try {\\n        await navigator.clipboard.writeText(text);\\n        console.log('Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } catch (clipboardErr) {\\n        console.warn('Clipboard API :', clipboardErr);\\n        // \\n      }\\n    }\\n\\n    // 2:  execCommand \\n    console.log(' execCommand ');\\n    const success = await execCommandCopy(text);\\n    if (success) {\\n      console.log('execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    }\\n\\n    // 3: \\n    console.log('');\\n    showManualCopyDialog(text);\\n  } catch (err) {\\n    console.error(':', err);\\n    // \\n    showManualCopyDialog(text);\\n  }\\n};\\n\\n// \\nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      const parentDoc = window.parent.document;\\n      const parentBody = window.parent.document.body;\\n\\n      //  textarea \\n      const textarea = parentDoc.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.cssText = `\\n        position: fixed;\\n        left: -9999px;\\n        top: -9999px;\\n        opacity: 0;\\n        pointer-events: none;\\n        z-index: -1000;\\n      `;\\n      textarea.setAttribute('readonly', '');\\n\\n      parentBody.appendChild(textarea);\\n\\n      // \\n      textarea.focus();\\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n\\n      // \\n      parentBody.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error(':', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n// execCommand \\nconst execCommandCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      //  textarea \\n      const textarea = document.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.position = 'fixed';\\n      textarea.style.left = '-9999px';\\n      textarea.style.top = '-9999px';\\n      textarea.style.opacity = '0';\\n      textarea.style.pointerEvents = 'none';\\n      textarea.setAttribute('readonly', '');\\n\\n      document.body.appendChild(textarea);\\n\\n      // \\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = document.execCommand('copy');\\n\\n      // \\n      document.body.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error('execCommand :', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'manual-copy-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #4a9eff;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 900px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+C</kbd> </li>\\n          <li>\\\"\\\" <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Esc</kbd> </li>\\n        </ol>\\n      </div>\\n    `;\\n\\n    // \\n    const textarea = parentDoc.createElement('textarea');\\n    textarea.value = text;\\n    textarea.style.cssText = `\\n      width: 100%;\\n      height: 400px;\\n      background: #1a1a1a;\\n      border: 2px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      color: #e0e0e0;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 13px;\\n      line-height: 1.5;\\n      resize: vertical;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      outline: none;\\n      margin-bottom: 20px;\\n      box-sizing: border-box;\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: flex;\\n      gap: 12px;\\n      justify-content: center;\\n      align-items: center;\\n    `;\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #4a9eff;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    closeButton.onmouseover = () => {\\n      closeButton.style.background = '#5ba8ff';\\n    };\\n    closeButton.onmouseout = () => {\\n      closeButton.style.background = '#4a9eff';\\n    };\\n\\n    // \\n    const copyButton = parentDoc.createElement('button');\\n    copyButton.textContent = '';\\n    copyButton.style.cssText = `\\n      background: #28a745;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    copyButton.onmouseover = () => {\\n      copyButton.style.background = '#218838';\\n    };\\n    copyButton.onmouseout = () => {\\n      copyButton.style.background = '#28a745';\\n    };\\n\\n    // \\n    buttonContainer.appendChild(copyButton);\\n    buttonContainer.appendChild(closeButton);\\n\\n    container.appendChild(header);\\n    container.appendChild(textarea);\\n    container.appendChild(buttonContainer);\\n    overlay.appendChild(container);\\n\\n    // \\n    parentBody.appendChild(overlay);\\n\\n    // \\n    closeButton.onclick = () => {\\n      console.log('');\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    copyButton.onclick = async () => {\\n      console.log('');\\n      try {\\n        // \\n        textarea.focus();\\n        textarea.select();\\n\\n        // \\n        const success = document.execCommand('copy');\\n        if (success) {\\n          window.toastr.success('');\\n          parentBody.removeChild(overlay);\\n        } else {\\n          window.toastr.warning('');\\n        }\\n      } catch (err) {\\n        console.error(':', err);\\n        window.toastr.warning('');\\n      }\\n    };\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        console.log('');\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log('ESC');\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    // \\n    setTimeout(() => {\\n      console.log('');\\n      textarea.focus();\\n      textarea.select();\\n    }, 200);\\n\\n    // \\n    window.toastr.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr.error('');\\n  }\\n};\\n\\n//  - \\nconst copyTable = (tableItem: { headers: string[]; data: string[][] }) => {\\n  try {\\n    // TSV\\n    const tsv = [tableItem.headers.join('\\\\t'), ...tableItem.data.map(row => row.join('\\\\t'))].join('\\\\n');\\n    copyToClipboard(tsv, '');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('');\\n  }\\n};\\n\\n// \\nconst deleteTable = (index: number) => {\\n  if (confirm('')) {\\n    table_history.value.splice(index, 1);\\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      insertOrAssignVariables({ table_history: table_history.value }, { type: 'chat' });\\n      window.toastr.success('');\\n    }\\n  }\\n};\\n\\n// \\nrefreshTableHistory();\\n</script>\\n\\n<style scoped>\\n.table-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.section-header h3 {\\n  margin: 0;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.count-badge {\\n  background: #4a9eff;\\n  color: white;\\n  padding: 4px 8px;\\n  border-radius: 12px;\\n  font-size: 12px;\\n}\\n\\n.empty-state {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #888;\\n}\\n\\n.empty-state i {\\n  font-size: 48px;\\n  margin-bottom: 10px;\\n  opacity: 0.3;\\n}\\n\\n.empty-state p {\\n  margin: 10px 0;\\n  font-size: 14px;\\n}\\n\\n.empty-state small {\\n  color: #666;\\n  font-size: 12px;\\n}\\n\\n.history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 15px 20px;\\n}\\n\\n.history-item {\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  overflow: hidden;\\n  transition: border-color 0.2s;\\n}\\n\\n.history-item:hover {\\n  border-color: #4a4a4a;\\n}\\n\\n.history-header {\\n  padding: 12px 15px;\\n  background: #1a1a1a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: pointer;\\n  user-select: none;\\n  transition: background 0.2s;\\n}\\n\\n.history-header:hover {\\n  background: #2a2a2a;\\n}\\n\\n.history-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.history-number {\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.history-range {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.expand-icon {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.history-content {\\n  padding: 15px;\\n  background: #2a2a2a;\\n}\\n\\n.history-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.mini-button {\\n  flex: 1;\\n  padding: 6px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 4px;\\n  color: #e0e0e0;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: background 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #3a3a3a;\\n}\\n\\n.mini-button.delete-button:hover {\\n  background: #ff4444;\\n  border-color: #ff4444;\\n  color: white;\\n}\\n\\n.table-display {\\n  margin-top: 15px;\\n  overflow-x: auto;\\n  max-height: 400px;\\n  overflow-y: auto;\\n  border-radius: 6px;\\n  background: #1a1a1a;\\n}\\n\\n.table-display table {\\n  width: 100%;\\n  font-size: 12px;\\n  border-collapse: collapse;\\n}\\n\\n.table-display th,\\n.table-display td {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  max-width: 200px;\\n  padding: 8px;\\n  border: 1px solid #444;\\n}\\n\\n.table-display th {\\n  background: #2a2a2a;\\n  font-weight: bold;\\n  color: #fff;\\n}\\n\\n.table-display td {\\n  color: #e0e0e0;\\n}\\n\\n/*  */\\n.copy-button:hover .shimmer-effect,\\n.delete-button:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.copy-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\\n}\\n\\n.delete-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes spin-4dab0e4d{to{transform:rotate(360deg)}}button[data-v-4dab0e4d]:disabled{cursor:not-allowed !important}button[data-v-4dab0e4d]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}div[data-v-4dab0e4d]::-webkit-scrollbar{width:8px}div[data-v-4dab0e4d]::-webkit-scrollbar-track{background:#1a1a1a}div[data-v-4dab0e4d]::-webkit-scrollbar-thumb{background:#667eea;border-radius:4px}div[data-v-4dab0e4d]::-webkit-scrollbar-thumb:hover{background:#5568d3}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/AIGenerateDialog.vue\"],\"names\":[],\"mappings\":\"AAuKA,yBACE,GACE,wBACF,CACF,CAEA,iCACE,6BACF,CAEA,6CACE,0BAA2B,CAC3B,qCACF,CAGA,wCACE,SACF,CAEA,8CACE,kBACF,CAEA,8CACE,kBAAmB,CACnB,iBACF,CAEA,oDACE,kBACF\",\"sourcesContent\":[\"<template>\\r\\n  <div\\r\\n    v-if=\\\"show\\\"\\r\\n    @click.self=\\\"handleClose\\\"\\r\\n    style=\\\"\\r\\n      position: fixed;\\r\\n      top: 0;\\r\\n      left: 0;\\r\\n      right: 0;\\r\\n      bottom: 0;\\r\\n      background: rgba(0, 0, 0, 0.8);\\r\\n      z-index: 1000000;\\r\\n      display: flex;\\r\\n      align-items: center;\\r\\n      justify-content: center;\\r\\n      padding: 20px;\\r\\n    \\\"\\r\\n  >\\r\\n    <div\\r\\n      style=\\\"\\r\\n        background: #2a2a2a;\\r\\n        border: 2px solid #667eea;\\r\\n        border-radius: 12px;\\r\\n        padding: 30px;\\r\\n        max-width: 500px;\\r\\n        width: 100%;\\r\\n        text-align: center;\\r\\n      \\\"\\r\\n      @click.stop\\r\\n    >\\r\\n      <h3 style=\\\"color: #667eea; margin: 0 0 15px 0\\\">\\r\\n        <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\r\\n        {{ title || 'AI ' }}\\r\\n      </h3>\\r\\n      <p style=\\\"color: #888; margin: 0 0 25px 0; line-height: 1.6\\\">\\r\\n        {{ description || 'AI ...' }}\\r\\n      </p>\\r\\n\\r\\n      <!--  -->\\r\\n      <textarea\\r\\n        v-if=\\\"showInput\\\"\\r\\n        v-model=\\\"localInput\\\"\\r\\n        :placeholder=\\\"placeholder || '...'\\\"\\r\\n        style=\\\"\\r\\n          width: 100%;\\r\\n          min-height: 120px;\\r\\n          background: #1a1a1a;\\r\\n          color: #e0e0e0;\\r\\n          border: 1px solid #444;\\r\\n          border-radius: 4px;\\r\\n          padding: 12px;\\r\\n          font-size: 14px;\\r\\n          margin-bottom: 20px;\\r\\n          resize: vertical;\\r\\n          box-sizing: border-box;\\r\\n        \\\"\\r\\n      ></textarea>\\r\\n\\r\\n      <!--  -->\\r\\n      <div v-if=\\\"isGenerating\\\" style=\\\"margin-bottom: 25px\\\">\\r\\n        <div\\r\\n          style=\\\"\\r\\n            display: inline-block;\\r\\n            width: 50px;\\r\\n            height: 50px;\\r\\n            border: 4px solid #3a3a3a;\\r\\n            border-top-color: #667eea;\\r\\n            border-radius: 50%;\\r\\n            animation: spin 1s linear infinite;\\r\\n          \\\"\\r\\n        ></div>\\r\\n        <p style=\\\"color: #888; margin-top: 15px; font-size: 14px\\\">...</p>\\r\\n      </div>\\r\\n\\r\\n      <div style=\\\"display: flex; gap: 12px\\\">\\r\\n        <button\\r\\n          v-if=\\\"!isGenerating\\\"\\r\\n          @click=\\\"handleConfirm\\\"\\r\\n          :disabled=\\\"showInput && !localInput\\\"\\r\\n          style=\\\"\\r\\n            flex: 1;\\r\\n            background: #667eea;\\r\\n            color: white;\\r\\n            border: none;\\r\\n            padding: 12px 24px;\\r\\n            border-radius: 6px;\\r\\n            cursor: pointer;\\r\\n            font-size: 14px;\\r\\n            font-weight: 600;\\r\\n            transition: all 0.2s;\\r\\n          \\\"\\r\\n          :style=\\\"{ opacity: showInput && !localInput ? 0.5 : 1 }\\\"\\r\\n        >\\r\\n          <i class=\\\"fa-solid fa-check\\\"></i>\\r\\n          \\r\\n        </button>\\r\\n        <button\\r\\n          @click=\\\"handleClose\\\"\\r\\n          :disabled=\\\"isGenerating\\\"\\r\\n          style=\\\"\\r\\n            flex: 1;\\r\\n            background: #666;\\r\\n            color: white;\\r\\n            border: none;\\r\\n            padding: 12px 24px;\\r\\n            border-radius: 6px;\\r\\n            cursor: pointer;\\r\\n            font-size: 14px;\\r\\n            font-weight: 600;\\r\\n            transition: all 0.2s;\\r\\n          \\\"\\r\\n          :style=\\\"{ opacity: isGenerating ? 0.5 : 1 }\\\"\\r\\n        >\\r\\n          {{ isGenerating ? '...' : '' }}\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</template>\\r\\n\\r\\n<script setup lang=\\\"ts\\\">\\r\\nimport { ref, watch } from 'vue';\\r\\n\\r\\nconst props = defineProps<{\\r\\n  show: boolean;\\r\\n  title?: string;\\r\\n  description?: string;\\r\\n  placeholder?: string;\\r\\n  isGenerating?: boolean;\\r\\n  showInput?: boolean; // \\r\\n}>();\\r\\n\\r\\nconst emit = defineEmits<{\\r\\n  (e: 'close'): void;\\r\\n  (e: 'confirm', input?: string): void;\\r\\n}>();\\r\\n\\r\\nconst localInput = ref('');\\r\\n\\r\\n// \\r\\nwatch(\\r\\n  () => props.show,\\r\\n  newVal => {\\r\\n    if (newVal) {\\r\\n      localInput.value = '';\\r\\n    }\\r\\n  },\\r\\n);\\r\\n\\r\\nconst handleConfirm = () => {\\r\\n  if (!props.isGenerating) {\\r\\n    if (props.showInput) {\\r\\n      emit('confirm', localInput.value);\\r\\n    } else {\\r\\n      emit('confirm');\\r\\n    }\\r\\n  }\\r\\n};\\r\\n\\r\\nconst handleClose = () => {\\r\\n  if (!props.isGenerating) {\\r\\n    emit('close');\\r\\n  }\\r\\n};\\r\\n</script>\\r\\n\\r\\n<style scoped>\\r\\n@keyframes spin {\\r\\n  to {\\r\\n    transform: rotate(360deg);\\r\\n  }\\r\\n}\\r\\n\\r\\nbutton:disabled {\\r\\n  cursor: not-allowed !important;\\r\\n}\\r\\n\\r\\nbutton:not(:disabled):hover {\\r\\n  transform: translateY(-2px);\\r\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n/*  */\\r\\ndiv::-webkit-scrollbar {\\r\\n  width: 8px;\\r\\n}\\r\\n\\r\\ndiv::-webkit-scrollbar-track {\\r\\n  background: #1a1a1a;\\r\\n}\\r\\n\\r\\ndiv::-webkit-scrollbar-thumb {\\r\\n  background: #667eea;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\ndiv::-webkit-scrollbar-thumb:hover {\\r\\n  background: #5568d3;\\r\\n}\\r\\n</style>\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.summary-tab[data-v-f8bd87fc]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-f8bd87fc]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.section-header h3[data-v-f8bd87fc]{margin:0;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.header-actions[data-v-f8bd87fc]{display:flex;align-items:center;gap:10px}.count-badge[data-v-f8bd87fc]{background:#4a9eff;color:white;padding:4px 8px;border-radius:12px;font-size:12px}.empty-state[data-v-f8bd87fc]{text-align:center;padding:40px 20px;color:#888}.empty-state i[data-v-f8bd87fc]{font-size:48px;margin-bottom:10px;opacity:0.3}.empty-state p[data-v-f8bd87fc]{margin:10px 0;font-size:14px}.empty-state small[data-v-f8bd87fc]{color:#666;font-size:12px}.history-list[data-v-f8bd87fc]{display:flex;flex-direction:column;gap:10px;padding:15px 20px}.history-item[data-v-f8bd87fc]{background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;overflow:hidden;transition:border-color 0.2s}.history-item[data-v-f8bd87fc]:hover{border-color:#4a4a4a}.history-header[data-v-f8bd87fc]{padding:12px 15px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background 0.2s}.history-header[data-v-f8bd87fc]:hover{background:#2a2a2a}.history-info[data-v-f8bd87fc]{display:flex;align-items:center;gap:10px;flex:1}.history-number[data-v-f8bd87fc]{color:#4a9eff;font-weight:bold}.history-range[data-v-f8bd87fc]{color:#888;font-size:12px}.expand-icon[data-v-f8bd87fc]{color:#888;font-size:12px}.history-content[data-v-f8bd87fc]{padding:15px;background:#2a2a2a}.history-actions[data-v-f8bd87fc]{display:flex;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a}.mini-button[data-v-f8bd87fc]{flex:1;padding:6px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:background 0.2s}.mini-button[data-v-f8bd87fc]:hover{background:#3a3a3a}.mini-button.delete-button[data-v-f8bd87fc]:hover{background:#ff4444;border-color:#ff4444;color:white}.mini-button.worldbook-button[data-v-f8bd87fc]{background:#28a745;color:white;border-color:#28a745}.mini-button.worldbook-button[data-v-f8bd87fc]:hover{background:#218838;border-color:#218838;color:white}.mini-button.create-worldbook-button[data-v-f8bd87fc]{background:#17a2b8;color:white;border-color:#17a2b8}.mini-button.create-worldbook-button[data-v-f8bd87fc]:hover{background:#138496;border-color:#138496;color:white}.mini-button.refresh-button[data-v-f8bd87fc]{background:#6c757d;color:white;border-color:#6c757d}.mini-button.refresh-button[data-v-f8bd87fc]:hover{background:#5a6268;border-color:#5a6268;color:white}.mini-button.debug-button[data-v-f8bd87fc]{background:#ffc107;color:#000;border-color:#ffb300}.mini-button.debug-button[data-v-f8bd87fc]:hover{background:#e0a800;border-color:#d39e00;color:#000}.history-text[data-v-f8bd87fc]{white-space:pre-wrap;word-wrap:break-word;line-height:1.6;max-height:400px;overflow-y:auto}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/SummaryTab.vue\"],\"names\":[],\"mappings\":\"AAqlCA,8BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,oCACE,QAAS,CACT,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,cACF,CAEA,8BACE,iBAAkB,CAClB,iBAAkB,CAClB,UACF,CAEA,gCACE,cAAe,CACf,kBAAmB,CACnB,WACF,CAEA,gCACE,aAAc,CACd,cACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,iBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,oBACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,0BACF,CAEA,uCACE,kBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,iCACE,aAAc,CACd,gBACF,CAEA,gCACE,UAAW,CACX,cACF,CAEA,8BACE,UAAW,CACX,cACF,CAEA,kCACE,YAAa,CACb,kBACF,CAEA,kCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,kBAAmB,CACnB,+BACF,CAEA,8BACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,cAAe,CACf,0BACF,CAEA,oCACE,kBACF,CAEA,kDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,+CACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,qDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,sDACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,4DACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,6CACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,mDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,2CACE,kBAAmB,CACnB,UAAW,CACX,oBACF,CAEA,iDACE,kBAAmB,CACnB,oBAAqB,CACrB,UACF,CAEA,+BACE,oBAAqB,CACrB,oBAAqB,CACrB,eAAgB,CAChB,gBAAiB,CACjB,eACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"summary-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n        margin-bottom: 5px;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"header-actions\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span\\n          v-if=\\\"summary_history.length > 0\\\"\\n          class=\\\"count-badge\\\"\\n          style=\\\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n          >{{ summary_history.length }} </span\\n        >\\n        <button\\n          class=\\\"mini-button refresh-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 4px;\\n            color: #e0e0e0;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"handleRefreshData\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"mini-button create-worldbook-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #51cf66;\\n            border: 1px solid #40c057;\\n            border-radius: 4px;\\n            color: white;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"createSummaryWorldbook\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"mini-button debug-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #ffc107;\\n            border: 1px solid #ffb300;\\n            border-radius: 4px;\\n            color: #000;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"showDebugPanel\\\"\\n        >\\n          <i class=\\\"fa-solid fa-bug\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <div\\n      v-if=\\\"summary_history && summary_history.length > 0\\\"\\n      class=\\\"history-list\\\"\\n      style=\\\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\\\"\\n    >\\n      <div\\n        v-for=\\\"(item, index) in summary_history\\\"\\n        :key=\\\"index\\\"\\n        class=\\\"history-item\\\"\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #444;\\n          border-radius: 8px;\\n          padding: 15px;\\n          transition: all 0.3s ease;\\n        \\\"\\n      >\\n        <div\\n          class=\\\"history-header\\\"\\n          style=\\\"\\n            padding: 12px 15px;\\n            background: #1a1a1a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background 0.2s;\\n            border-radius: 6px;\\n          \\\"\\n          @click=\\\"toggleExpanded(index)\\\"\\n        >\\n          <div class=\\\"history-info\\\" style=\\\"display: flex; align-items: center; gap: 10px; flex: 1\\\">\\n            <span class=\\\"history-number\\\" style=\\\"color: #4a9eff; font-weight: bold\\\">#{{ index + 1 }}</span>\\n            <span class=\\\"history-range\\\" style=\\\"color: #888; font-size: 12px\\\"\\n              > {{ item.start_id }} - {{ item.end_id }}</span\\n            >\\n          </div>\\n          <span class=\\\"expand-icon\\\" style=\\\"color: #888; font-size: 12px\\\">{{ isExpanded(index) ? '' : '' }}</span>\\n        </div>\\n        <div\\n          v-if=\\\"isExpanded(index)\\\"\\n          class=\\\"history-content\\\"\\n          style=\\\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\\\"\\n        >\\n          <div\\n            class=\\\"history-actions\\\"\\n            style=\\\"display: flex; gap: 8px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #3a3a3a\\\"\\n          >\\n            <button\\n              class=\\\"mini-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 4px;\\n                color: #e0e0e0;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: background 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"copySummary(item.content)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-copy\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"mini-button worldbook-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #4a9eff;\\n                border: 1px solid #5aaeff;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"bindToWorldbook(item.content, index)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-book\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"mini-button delete-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #ff6b6b;\\n                border: 1px solid #ff5252;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"deleteSummary(index)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-trash\\\"></i> \\n            </button>\\n          </div>\\n          <div\\n            class=\\\"history-text\\\"\\n            style=\\\"\\n              font-family: 'Courier New', monospace;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              color: #e0e0e0;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              user-select: text;\\n              cursor: text;\\n            \\\"\\n          >\\n            {{ item.content }}\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"empty-state\\\" style=\\\"text-align: center; padding: 40px 20px; color: #888\\\">\\n      <i class=\\\"fa-solid fa-inbox\\\" style=\\\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\\\"></i>\\n      <p style=\\\"margin: 10px 0; font-size: 16px\\\"></p>\\n      <small style=\\\"font-size: 12px; color: #666\\\">\\\"\\\"</small>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { useSummaryHistoryStore } from '../settings';\\nimport { getChatIdSafe } from '../utils';\\n\\nconst historyStore = useSummaryHistoryStore();\\n\\n// \\nconst summary_history = ref<Array<{ start_id: number; end_id: number; content: string }>>([]);\\nconst expandedState = ref<Map<number, boolean>>(new Map());\\n\\n// \\nconst refreshSummaryHistory = () => {\\n  try {\\n    summary_history.value = historyStore.getSummaryHistory();\\n    console.log(':', summary_history.value.length);\\n  } catch (e) {\\n    console.error(':', e);\\n    summary_history.value = [];\\n  }\\n};\\n\\n// \\nconst toggleExpanded = (index: number) => {\\n  const current = expandedState.value.get(index) || false;\\n  expandedState.value.set(index, !current);\\n};\\n\\nconst isExpanded = (index: number) => {\\n  return expandedState.value.get(index) || false;\\n};\\n\\n// \\nconst handleRefreshData = async () => {\\n  console.log('');\\n  try {\\n    await refreshSummaryHistory();\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // iframe\\n    if (window.parent && window.parent !== window) {\\n      console.log('iframe');\\n      const parentSuccess = await tryParentWindowCopy(text);\\n      if (parentSuccess) {\\n        console.log('');\\n        window.toastr.success(successMessage);\\n        return;\\n      }\\n    }\\n\\n    // 1:  Clipboard API\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log(' Clipboard API');\\n      try {\\n        await navigator.clipboard.writeText(text);\\n        console.log('Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } catch (clipboardErr) {\\n        console.warn('Clipboard API :', clipboardErr);\\n        // \\n      }\\n    }\\n\\n    // 2:  execCommand \\n    console.log(' execCommand ');\\n    const success = await execCommandCopy(text);\\n    if (success) {\\n      console.log('execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    }\\n\\n    // 3: \\n    console.log('');\\n    showManualCopyDialog(text);\\n  } catch (err) {\\n    console.error(':', err);\\n    // \\n    showManualCopyDialog(text);\\n  }\\n};\\n\\n// \\nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      const parentDoc = window.parent.document;\\n      const parentBody = window.parent.document.body;\\n\\n      //  textarea \\n      const textarea = parentDoc.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.cssText = `\\n        position: fixed;\\n        left: -9999px;\\n        top: -9999px;\\n        opacity: 0;\\n        pointer-events: none;\\n        z-index: -1000;\\n      `;\\n      textarea.setAttribute('readonly', '');\\n\\n      parentBody.appendChild(textarea);\\n\\n      // \\n      textarea.focus();\\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n\\n      // \\n      parentBody.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error(':', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n// execCommand \\nconst execCommandCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      //  textarea \\n      const textarea = document.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.position = 'fixed';\\n      textarea.style.left = '-9999px';\\n      textarea.style.top = '-9999px';\\n      textarea.style.opacity = '0';\\n      textarea.style.pointerEvents = 'none';\\n      textarea.setAttribute('readonly', '');\\n\\n      document.body.appendChild(textarea);\\n\\n      // \\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = document.execCommand('copy');\\n\\n      // \\n      document.body.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error('execCommand :', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'manual-copy-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #4a9eff;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 900px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+C</kbd> </li>\\n          <li>\\\"\\\" <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Esc</kbd> </li>\\n        </ol>\\n      </div>\\n    `;\\n\\n    // \\n    const textarea = parentDoc.createElement('textarea');\\n    textarea.value = text;\\n    textarea.style.cssText = `\\n      width: 100%;\\n      height: 400px;\\n      background: #1a1a1a;\\n      border: 2px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      color: #e0e0e0;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 13px;\\n      line-height: 1.5;\\n      resize: vertical;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      outline: none;\\n      margin-bottom: 20px;\\n      box-sizing: border-box;\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: flex;\\n      gap: 12px;\\n      justify-content: center;\\n      align-items: center;\\n    `;\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #4a9eff;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    closeButton.onmouseover = () => {\\n      closeButton.style.background = '#5ba8ff';\\n    };\\n    closeButton.onmouseout = () => {\\n      closeButton.style.background = '#4a9eff';\\n    };\\n\\n    // \\n    const copyButton = parentDoc.createElement('button');\\n    copyButton.textContent = '';\\n    copyButton.style.cssText = `\\n      background: #28a745;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    copyButton.onmouseover = () => {\\n      copyButton.style.background = '#218838';\\n    };\\n    copyButton.onmouseout = () => {\\n      copyButton.style.background = '#28a745';\\n    };\\n\\n    // \\n    buttonContainer.appendChild(copyButton);\\n    buttonContainer.appendChild(closeButton);\\n\\n    container.appendChild(header);\\n    container.appendChild(textarea);\\n    container.appendChild(buttonContainer);\\n    overlay.appendChild(container);\\n\\n    // \\n    parentBody.appendChild(overlay);\\n\\n    // \\n    closeButton.onclick = () => {\\n      console.log('');\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    copyButton.onclick = async () => {\\n      console.log('');\\n      try {\\n        // \\n        textarea.focus();\\n        textarea.select();\\n\\n        // \\n        const success = document.execCommand('copy');\\n        if (success) {\\n          window.toastr.success('');\\n          parentBody.removeChild(overlay);\\n        } else {\\n          window.toastr.warning('');\\n        }\\n      } catch (err) {\\n        console.error(':', err);\\n        window.toastr.warning('');\\n      }\\n    };\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        console.log('');\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log('ESC');\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    // \\n    setTimeout(() => {\\n      console.log('');\\n      textarea.focus();\\n      textarea.select();\\n    }, 200);\\n\\n    // \\n    window.toastr.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr.error('');\\n  }\\n};\\n\\n//  - \\nconst copySummary = (content: string) => {\\n  copyToClipboard(content, '');\\n};\\n\\n// \\nconst deleteSummary = (index: number) => {\\n  if (confirm('')) {\\n    try {\\n      const chat_id = getChatIdSafe();\\n      if (!chat_id) {\\n        window.toastr.error('');\\n        return;\\n      }\\n\\n      summary_history.value.splice(index, 1);\\n      insertOrAssignVariables({ summary_history: summary_history.value }, { type: 'chat' });\\n      window.toastr.success('');\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error('');\\n    }\\n  }\\n};\\n\\n// \\nconst createSummaryWorldbook = async () => {\\n  try {\\n    // \\n    let characterName = '';\\n    try {\\n      const currentCharacter = getCharData('current');\\n      if (currentCharacter && currentCharacter.name) {\\n        characterName = currentCharacter.name;\\n        // \\n        characterName = characterName.replace(/[<>:\\\"/\\\\\\\\|?*]/g, '_').trim();\\n      }\\n    } catch (charError) {\\n      console.warn(':', charError);\\n    }\\n\\n    // \\n    const dateStr = new Date().toISOString().slice(0, 10);\\n    const worldbookName = `_${characterName}_${dateStr}`;\\n\\n    console.log(':', worldbookName);\\n\\n    const existingWorldbooks = getWorldbookNames();\\n    if (existingWorldbooks.includes(worldbookName)) {\\n      window.toastr.warning(` \\\"${worldbookName}\\\" `);\\n      return;\\n    }\\n\\n    await createWorldbook(worldbookName, []);\\n\\n    try {\\n      await rebindChatWorldbook('current', worldbookName);\\n      window.toastr.success(` \\\"${worldbookName}\\\" `);\\n    } catch (bindError) {\\n      console.warn(':', bindError);\\n      window.toastr.success(` \\\"${worldbookName}\\\"`);\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst bindToWorldbook = async (content: string, summaryIndex: number) => {\\n  try {\\n    const worldbookNames = getWorldbookNames();\\n    if (worldbookNames.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    const selectedWorldbook =\\n      worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\\n    if (!selectedWorldbook) {\\n      return;\\n    }\\n\\n    const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\\n    const newEntry = {\\n      name: entryName,\\n      enabled: true,\\n      strategy: {\\n        type: 'constant' as const,\\n        keys: [],\\n        keys_secondary: { logic: 'and_any' as const, keys: [] },\\n        scan_depth: 'same_as_global' as const,\\n      },\\n      position: {\\n        type: 'before_character_definition' as const,\\n        role: 'system' as const,\\n        depth: 1,\\n      },\\n      content: content,\\n      comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\\n      insertion_order: 0,\\n      case_sensitive: false,\\n      name_is_regex: false,\\n      keys_are_regex: false,\\n      selective_logic: 'and',\\n      secondary_keys_logic: 'and',\\n      activation_threshold: 0,\\n      disabled: false,\\n      order: 0,\\n      group: '',\\n      local_id: 0,\\n      depth_entries: [],\\n      depth_entries_all: false,\\n      search_range: 0,\\n      force_activation: false,\\n      disable: false,\\n      exclude_recursion: false,\\n      hidden: false,\\n      priority: 0,\\n      comment_is_regex: false,\\n      content_is_regex: false,\\n      secondary_keys_are_regex: false,\\n      keys_secondary_are_regex: false,\\n      uid: Date.now(),\\n    };\\n\\n    await createWorldbookEntries(selectedWorldbook, [newEntry]);\\n    window.toastr.success(`: ${selectedWorldbook}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst promptForWorldbook = async (worldbookNames: string[]): Promise<string | null> => {\\n  return new Promise<string | null>(resolve => {\\n    const dialog = $(`\\n      <div style=\\\"\\n        position: fixed;\\n        top: 50%;\\n        left: 50%;\\n        transform: translate(-50%, -50%);\\n        background: #2a2a2a;\\n        border: 1px solid #3a3a3a;\\n        border-radius: 8px;\\n        padding: 20px;\\n        z-index: 1000000;\\n        min-width: 300px;\\n      \\\">\\n        <h3 style=\\\"margin: 0 0 15px 0; color: #e0e0e0;\\\"></h3>\\n        <div style=\\\"margin-bottom: 15px;\\\">\\n          ${worldbookNames\\n            .map(\\n              name => `\\n            <label style=\\\"display: block; margin: 5px 0; color: #e0e0e0;\\\">\\n              <input type=\\\"radio\\\" name=\\\"worldbook\\\" value=\\\"${name}\\\" style=\\\"margin-right: 8px;\\\">\\n              ${name}\\n            </label>\\n          `,\\n            )\\n            .join('')}\\n        </div>\\n        <div style=\\\"text-align: right;\\\">\\n          <button id=\\\"cancelWorldbook\\\" style=\\\"\\n            background: #666;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 4px;\\n            margin-right: 10px;\\n            cursor: pointer;\\n          \\\"></button>\\n          <button id=\\\"confirmWorldbook\\\" style=\\\"\\n            background: #4a9eff;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 4px;\\n            cursor: pointer;\\n          \\\"></button>\\n        </div>\\n      </div>\\n    `);\\n\\n    const overlay = $(`\\n      <div style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(0, 0, 0, 0.5);\\n        z-index: 999999;\\n      \\\"></div>\\n    `);\\n\\n    $('body').append(overlay).append(dialog);\\n\\n    $('#cancelWorldbook').on('click', () => {\\n      overlay.remove();\\n      dialog.remove();\\n      resolve(null);\\n    });\\n\\n    $('#confirmWorldbook').on('click', () => {\\n      const selected = $('input[name=\\\"worldbook\\\"]:checked').val() as string;\\n      overlay.remove();\\n      dialog.remove();\\n      resolve(selected || null);\\n    });\\n\\n    $('input[name=\\\"worldbook\\\"]:first').prop('checked', true);\\n  });\\n};\\n\\n// \\nconst showDebugPanel = () => {\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'debug-panel-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #ffc107;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 800px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ul style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li>localStorage</li>\\n          <li></li>\\n          <li></li>\\n        </ul>\\n      </div>\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: grid;\\n      grid-template-columns: 1fr 1fr;\\n      gap: 12px;\\n      margin-bottom: 20px;\\n    `;\\n\\n    // \\n    const buttons = [\\n      { id: 'testComplete', text: ' ', color: '#4a9eff' },\\n      { id: 'syncData', text: ' ', color: '#28a745' },\\n      { id: 'checkFloor', text: ' ', color: '#17a2b8' },\\n      { id: 'testCalculation', text: ' ', color: '#6f42c1' },\\n      { id: 'showStatus', text: ' ', color: '#fd7e14' },\\n      { id: 'resetStartId', text: ' ', color: '#dc3545' },\\n    ];\\n\\n    buttons.forEach(button => {\\n      const btn = parentDoc.createElement('button');\\n      btn.id = button.id;\\n      btn.textContent = button.text;\\n      btn.style.cssText = `\\n        background: ${button.color};\\n        color: white;\\n        border: none;\\n        padding: 12px 16px;\\n        border-radius: 6px;\\n        cursor: pointer;\\n        font-size: 13px;\\n        font-weight: 500;\\n        transition: background 0.2s;\\n      `;\\n      btn.onmouseover = () => {\\n        btn.style.opacity = '0.8';\\n      };\\n      btn.onmouseout = () => {\\n        btn.style.opacity = '1';\\n      };\\n      buttonContainer.appendChild(btn);\\n    });\\n\\n    // \\n    const outputArea = parentDoc.createElement('div');\\n    outputArea.id = 'debug-output';\\n    outputArea.style.cssText = `\\n      background: #1a1a1a;\\n      border: 1px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      height: 200px;\\n      overflow-y: auto;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 12px;\\n      color: #e0e0e0;\\n      white-space: pre-wrap;\\n      margin-bottom: 20px;\\n    `;\\n    outputArea.textContent = '...\\\\n';\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #6c757d;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n      align-self: center;\\n    `;\\n\\n    // \\n    container.appendChild(header);\\n    container.appendChild(buttonContainer);\\n    container.appendChild(outputArea);\\n    container.appendChild(closeButton);\\n\\n    overlay.appendChild(container);\\n    parentBody.appendChild(overlay);\\n\\n    // \\n    const log = (message: string) => {\\n      const output = parentDoc.getElementById('debug-output');\\n      if (output) {\\n        output.textContent += message + '\\\\n';\\n        output.scrollTop = output.scrollHeight;\\n      }\\n    };\\n\\n    // \\n    closeButton.onclick = () => {\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    // \\n    parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).testCompleteAutoSummary) {\\n          (window as any).testCompleteAutoSummary();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('syncData')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).syncAutoSummaryData) {\\n          (window as any).syncAutoSummaryData();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).checkCurrentFloor) {\\n          (window as any).checkCurrentFloor();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).testFloorCalculation) {\\n          (window as any).testFloorCalculation();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).checkAutoSummaryStatus) {\\n          (window as any).checkAutoSummaryStatus();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).smartResetChat) {\\n          (window as any).smartResetChat();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    window.toastr?.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr?.error('');\\n  }\\n};\\n\\n// \\nrefreshSummaryHistory();\\n</script>\\n\\n<style scoped>\\n.summary-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.section-header h3 {\\n  margin: 0;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.header-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.count-badge {\\n  background: #4a9eff;\\n  color: white;\\n  padding: 4px 8px;\\n  border-radius: 12px;\\n  font-size: 12px;\\n}\\n\\n.empty-state {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #888;\\n}\\n\\n.empty-state i {\\n  font-size: 48px;\\n  margin-bottom: 10px;\\n  opacity: 0.3;\\n}\\n\\n.empty-state p {\\n  margin: 10px 0;\\n  font-size: 14px;\\n}\\n\\n.empty-state small {\\n  color: #666;\\n  font-size: 12px;\\n}\\n\\n.history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 15px 20px;\\n}\\n\\n.history-item {\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  overflow: hidden;\\n  transition: border-color 0.2s;\\n}\\n\\n.history-item:hover {\\n  border-color: #4a4a4a;\\n}\\n\\n.history-header {\\n  padding: 12px 15px;\\n  background: #1a1a1a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: pointer;\\n  user-select: none;\\n  transition: background 0.2s;\\n}\\n\\n.history-header:hover {\\n  background: #2a2a2a;\\n}\\n\\n.history-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.history-number {\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.history-range {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.expand-icon {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.history-content {\\n  padding: 15px;\\n  background: #2a2a2a;\\n}\\n\\n.history-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.mini-button {\\n  flex: 1;\\n  padding: 6px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 4px;\\n  color: #e0e0e0;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: background 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #3a3a3a;\\n}\\n\\n.mini-button.delete-button:hover {\\n  background: #ff4444;\\n  border-color: #ff4444;\\n  color: white;\\n}\\n\\n.mini-button.worldbook-button {\\n  background: #28a745;\\n  color: white;\\n  border-color: #28a745;\\n}\\n\\n.mini-button.worldbook-button:hover {\\n  background: #218838;\\n  border-color: #218838;\\n  color: white;\\n}\\n\\n.mini-button.create-worldbook-button {\\n  background: #17a2b8;\\n  color: white;\\n  border-color: #17a2b8;\\n}\\n\\n.mini-button.create-worldbook-button:hover {\\n  background: #138496;\\n  border-color: #138496;\\n  color: white;\\n}\\n\\n.mini-button.refresh-button {\\n  background: #6c757d;\\n  color: white;\\n  border-color: #6c757d;\\n}\\n\\n.mini-button.refresh-button:hover {\\n  background: #5a6268;\\n  border-color: #5a6268;\\n  color: white;\\n}\\n\\n.mini-button.debug-button {\\n  background: #ffc107;\\n  color: #000;\\n  border-color: #ffb300;\\n}\\n\\n.mini-button.debug-button:hover {\\n  background: #e0a800;\\n  border-color: #d39e00;\\n  color: #000;\\n}\\n\\n.history-text {\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  line-height: 1.6;\\n  max-height: 400px;\\n  overflow-y: auto;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = toastr;","import { APISettings, ChatMessage } from '../types';\n\n// API\nasync function fetchWithProxy(url: string, options: RequestInit = {}) {\n  try {\n    const origin = window.location.origin;\n    console.log(' :', origin);\n\n    const response = await fetch(`${origin}/api/proxy`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(typeof SillyTavern !== 'undefined' && SillyTavern.getRequestHeaders ? SillyTavern.getRequestHeaders() : {})\n      },\n      body: JSON.stringify({\n        url: url,\n        method: options.method || 'GET',\n        headers: options.headers || {}\n      })\n    });\n\n    if (response.ok) {\n      console.log(' ');\n      return response;\n    }\n    console.log(' ');\n  } catch (error) {\n    console.log(' :', error);\n  }\n\n  return fetch(url, options);\n}\n\n// API\nexport function normalizeApiEndpoint(endpoint: string, path: string = ''): string {\n  try {\n    const url = new URL(endpoint);\n    if (path && !url.pathname.endsWith('/')) {\n      url.pathname += '/';\n    }\n    if (path) {\n      url.pathname += path.startsWith('/') ? path.slice(1) : path;\n    }\n    return url.toString();\n  } catch (error) {\n    throw new Error(`API : ${endpoint}`);\n  }\n}\n\n// \nexport async function fetchAvailableModels(settings: APISettings): Promise<string[]> {\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  const endpoint = settings.api_endpoint.trim();\n  let modelEndpoint: string;\n\n  console.log(' :', endpoint);\n\n  try {\n    modelEndpoint = normalizeApiEndpoint(endpoint, '/models');\n    console.log('  models :', modelEndpoint);\n  } catch (error) {\n    throw new Error(`API : ${endpoint}`);\n  }\n\n  try {\n    new URL(modelEndpoint);\n  } catch (error) {\n    throw new Error(`API : ${modelEndpoint}`);\n  }\n\n  // \n  const possibleEndpoints = [\n    modelEndpoint,\n    endpoint + (endpoint.endsWith('/') ? 'models' : '/models'),\n    new URL(modelEndpoint).origin + '/v1/models',\n    new URL(modelEndpoint).origin + '/models'\n  ];\n\n  console.log(' :', possibleEndpoints);\n\n  const errors: string[] = [];\n  let hasCorsError = false;\n\n  for (const endpoint of possibleEndpoints) {\n    try {\n      console.log(` : ${endpoint}`);\n\n      const response = await fetchWithProxy(endpoint, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${settings.api_key}`\n        }\n      });\n\n      console.log(` : ${response.status} ${response.statusText}`);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        errors.push(`${endpoint}: ${response.status} - ${errorText.substring(0, 100)}`);\n        console.log(` : ${response.status}`);\n        console.log(`: ${errorText.substring(0, 200)}`);\n        continue;\n      }\n\n      const contentType = response.headers.get('content-type');\n      console.log(` : ${contentType}`);\n\n      if (!contentType || !contentType.includes('application/json')) {\n        const errorText = await response.text();\n        errors.push(`${endpoint}:  JSON  - ${errorText.substring(0, 100)}`);\n        console.log('  JSON :', errorText.substring(0, 200));\n        continue;\n      }\n\n      const data = await response.json();\n      console.log(' API :', JSON.stringify(data, null, 2));\n\n      // \n      if (data.data && Array.isArray(data.data)) {\n        const models = data.data.map((item: any) => item.id || item.name || item).filter(Boolean);\n        if (models.length > 0) {\n          console.log(`  ${models.length} :`, models);\n          return models;\n        }\n      }\n\n      if (Array.isArray(data)) {\n        const models = data.map((item: any) => item.id || item.name || item).filter(Boolean);\n        if (models.length > 0) {\n          console.log(`  ${models.length} :`, models);\n          return models;\n        }\n      }\n\n      if (data.models && Array.isArray(data.models)) {\n        const models = data.models.map((item: any) => item.id || item.name || item).filter(Boolean);\n        if (models.length > 0) {\n          console.log(`  ${models.length} :`, models);\n          return models;\n        }\n      }\n\n      errors.push(`${endpoint}:  - ${JSON.stringify(data).substring(0, 100)}`);\n      console.log(' ');\n\n    } catch (error) {\n      const errorMessage = (error as Error).message;\n      if (errorMessage.includes('Failed to fetch') || errorMessage.includes('CORS')) {\n        hasCorsError = true;\n      }\n      errors.push(`${endpoint}: ${errorMessage}`);\n      console.log(' :', error);\n      continue;\n    }\n  }\n\n  console.error(' :');\n  errors.forEach((error, index) => console.error(`  ${index + 1}. ${error}`));\n\n  let errorMessage = ` API  ${possibleEndpoints.length} \\n\\n\\n${errors.join('\\n\\n')}\\n\\n\\n1. API ${endpoint}\\n2. API Key \\n3.  API  /v1/models \\n`;\n\n  if (hasCorsError) {\n    errorMessage += `\\n  CORS \\n API ${new URL(endpoint).origin} CORS \\n\\n  Zeabur  CORS\\n  API  CORS \\n  API\\n\\n`;\n  }\n\n  errorMessage += ' API ';\n\n  throw new Error(errorMessage);\n}\n\n// \nexport async function summarizeMessages(startId: number, endId: number, settings: APISettings): Promise<string> {\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  const endpoint = settings.api_endpoint.trim();\n  let apiUrl: string;\n\n  try {\n    apiUrl = normalizeApiEndpoint(endpoint);\n    console.log(' :', endpoint);\n    console.log('  API URL:', apiUrl);\n  } catch (error) {\n    throw new Error(`API : ${endpoint}`);\n  }\n\n  try {\n    new URL(apiUrl);\n  } catch (error) {\n    throw new Error(`API : ${apiUrl}`);\n  }\n\n  // \n  const messages: ChatMessage[] = [];\n  for (let messageId = startId; messageId <= endId; messageId++) {\n    const messageList = getChatMessages(messageId);\n    if (messageList.length > 0) {\n      messages.push(...messageList);\n    }\n  }\n\n  if (messages.length === 0) {\n    throw new Error('');\n  }\n\n  const prompt = `****\n\n\n- \n- \n- \n- \n- \n- XML\n- \n-  ${settings.max_tokens / 4} \n- ****\n\n\n\n\n: []\n: []\n\n 1: \n 2: \n 3: \n...\n\n\n${messages.map(msg => `[${msg.role}]: ${msg.message}`).join('\\n\\n')}\n\n`;\n\n  let response: Response;\n\n  console.log(' APIURL:', apiUrl);\n  console.log(':', {\n    model: settings.model,\n    messages: [{ role: 'user', content: prompt }],\n    max_tokens: settings.max_tokens,\n    temperature: settings.temperature\n  });\n\n  try {\n    response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${settings.api_key}`\n      },\n      body: JSON.stringify({\n        model: settings.model,\n        messages: [{ role: 'user', content: prompt }],\n        max_tokens: settings.max_tokens,\n        temperature: settings.temperature,\n        top_p: settings.top_p,\n        presence_penalty: settings.presence_penalty,\n        frequency_penalty: settings.frequency_penalty\n      })\n    });\n  } catch (error) {\n    console.error('fetch :', error);\n    throw new Error(` API: ${(error as Error).message}`);\n  }\n\n  if (!response.ok) {\n    let errorMessage = `API : ${response.status}`;\n    let errorDetails = '';\n\n    try {\n      const errorData = await response.json();\n      errorMessage = errorData.error?.message || errorData.message || errorMessage;\n      errorDetails = JSON.stringify(errorData, null, 2);\n    } catch (error) {\n      try {\n        errorDetails = await response.text();\n      } catch {\n        // \n      }\n    }\n\n    let userFriendlyMessage = errorMessage;\n\n    if (response.status === 500) {\n      userFriendlyMessage = `API  (500)${errorMessage}\\n\\n\\n API \\n \\n `;\n    } else if (response.status === 429) {\n      userFriendlyMessage = 'API  (429)';\n    } else if (response.status === 401) {\n      userFriendlyMessage = 'API  (401) API ';\n    } else if (response.status === 400) {\n      userFriendlyMessage = `API  (400)${errorMessage}`;\n    }\n\n    console.error(' API :', {\n      status: response.status,\n      statusText: response.statusText,\n      errorMessage,\n      errorDetails: errorDetails.substring(0, 500)\n    });\n\n    throw new Error(userFriendlyMessage);\n  }\n\n  const data = await response.json();\n\n  if (!data.choices || !data.choices[0] || !data.choices[0].message?.content) {\n    throw new Error('API ');\n  }\n\n  return data.choices[0].message.content;\n}","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { style: { \"color\": \"#667eea\", \"margin\": \"0 0 15px 0\" } };\nconst _hoisted_2 = { style: { \"color\": \"#888\", \"margin\": \"0 0 25px 0\", \"line-height\": \"1.6\" } };\nconst _hoisted_3 = [\"placeholder\"];\nconst _hoisted_4 = {\n    key: 1,\n    style: { \"margin-bottom\": \"25px\" }\n};\nconst _hoisted_5 = { style: { \"display\": \"flex\", \"gap\": \"12px\" } };\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = [\"disabled\"];\nimport { ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AIGenerateDialog',\n    props: {\n        show: { type: Boolean },\n        title: {},\n        description: {},\n        placeholder: {},\n        isGenerating: { type: Boolean },\n        showInput: { type: Boolean }\n    },\n    emits: [\"close\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const localInput = ref('');\n        // \n        watch(() => props.show, newVal => {\n            if (newVal) {\n                localInput.value = '';\n            }\n        });\n        const handleConfirm = () => {\n            if (!props.isGenerating) {\n                if (props.showInput) {\n                    emit('confirm', localInput.value);\n                }\n                else {\n                    emit('confirm');\n                }\n            }\n        };\n        const handleClose = () => {\n            if (!props.isGenerating) {\n                emit('close');\n            }\n        };\n        return (_ctx, _cache) => {\n            return (__props.show)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    onClick: _withModifiers(handleClose, [\"self\"]),\n                    style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"z-index\": \"1000000\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"padding\": \"20px\" }\n                }, [\n                    _createElementVNode(\"div\", {\n                        style: { \"background\": \"#2a2a2a\", \"border\": \"2px solid #667eea\", \"border-radius\": \"12px\", \"padding\": \"30px\", \"max-width\": \"500px\", \"width\": \"100%\", \"text-align\": \"center\" },\n                        onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                    }, [\n                        _createElementVNode(\"h3\", _hoisted_1, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" \" + _toDisplayString(__props.title || 'AI '), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"p\", _hoisted_2, _toDisplayString(__props.description || 'AI ...'), 1 /* TEXT */),\n                        _createCommentVNode(\"  \"),\n                        (__props.showInput)\n                            ? _withDirectives((_openBlock(), _createElementBlock(\"textarea\", {\n                                key: 0,\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localInput).value = $event)),\n                                placeholder: __props.placeholder || '...',\n                                style: { \"width\": \"100%\", \"min-height\": \"120px\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\", \"margin-bottom\": \"20px\", \"resize\": \"vertical\", \"box-sizing\": \"border-box\" }\n                            }, null, 8 /* PROPS */, _hoisted_3)), [\n                                [_vModelText, localInput.value]\n                            ])\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (__props.isGenerating)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"div\", { style: { \"display\": \"inline-block\", \"width\": \"50px\", \"height\": \"50px\", \"border\": \"4px solid #3a3a3a\", \"border-top-color\": \"#667eea\", \"border-radius\": \"50%\", \"animation\": \"spin 1s linear infinite\" } }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"margin-top\": \"15px\", \"font-size\": \"14px\" } }, \"...\", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            (!__props.isGenerating)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    onClick: handleConfirm,\n                                    disabled: __props.showInput && !localInput.value,\n                                    style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#667eea\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\" }, { opacity: __props.showInput && !localInput.value ? 0.5 : 1 }])\n                                }, [...(_cache[4] || (_cache[4] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-check\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))], 12 /* STYLE, PROPS */, _hoisted_6))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"button\", {\n                                onClick: handleClose,\n                                disabled: __props.isGenerating,\n                                style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#666\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\" }, { opacity: __props.isGenerating ? 0.5 : 1 }])\n                            }, _toDisplayString(__props.isGenerating ? '...' : ''), 13 /* TEXT, STYLE, PROPS */, _hoisted_7)\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AIGenerateDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AIGenerateDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AIGenerateDialog.vue?vue&type=style&index=0&id=4dab0e4d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4dab0e4d\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { style: { \"color\": \"#ffc107\", \"margin\": \"0 0 20px 0\" } };\nconst _hoisted_2 = { style: { \"color\": \"#888\", \"margin\": \"0 0 15px 0\", \"line-height\": \"1.6\" } };\nconst _hoisted_3 = {\n    key: 0,\n    style: { \"color\": \"#888\", \"margin\": \"0 0 20px 0\", \"padding-left\": \"20px\", \"line-height\": \"1.8\" }\n};\nconst _hoisted_4 = [\"placeholder\"];\nconst _hoisted_5 = {\n    key: 1,\n    style: { \"margin-bottom\": \"20px\", \"background\": \"#1a1a1a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"border\": \"1px solid #444\" }\n};\nconst _hoisted_6 = { style: { \"display\": \"flex\", \"gap\": \"12px\" } };\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = [\"disabled\"];\nimport { ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AIModifyDialog',\n    props: {\n        show: { type: Boolean },\n        title: {},\n        description: {},\n        examples: {},\n        placeholder: {},\n        isModifying: { type: Boolean }\n    },\n    emits: [\"close\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const localInstruction = ref('');\n        // \n        watch(() => props.show, newVal => {\n            if (newVal) {\n                localInstruction.value = '';\n            }\n        });\n        const handleConfirm = () => {\n            if (localInstruction.value && !props.isModifying) {\n                emit('confirm', localInstruction.value);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (__props.show)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (_ctx.$emit('close')), [\"self\"])),\n                    style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"z-index\": \"1000000\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"padding\": \"20px\" }\n                }, [\n                    _createElementVNode(\"div\", {\n                        style: { \"background\": \"#2a2a2a\", \"border\": \"2px solid #ffc107\", \"border-radius\": \"12px\", \"padding\": \"30px\", \"max-width\": \"600px\", \"width\": \"100%\", \"max-height\": \"80vh\", \"overflow-y\": \"auto\" },\n                        onClick: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"]))\n                    }, [\n                        _createElementVNode(\"h3\", _hoisted_1, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" \" + _toDisplayString(__props.title || 'AI '), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"p\", _hoisted_2, _toDisplayString(__props.description || 'AI '), 1 /* TEXT */),\n                        (__props.examples && __props.examples.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_3, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.examples, (example, index) => {\n                                    return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(example), 1 /* TEXT */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _withDirectives(_createElementVNode(\"textarea\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localInstruction).value = $event)),\n                            placeholder: __props.placeholder || '...',\n                            style: { \"width\": \"100%\", \"min-height\": \"150px\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\", \"margin-bottom\": \"20px\", \"resize\": \"vertical\", \"box-sizing\": \"border-box\" }\n                        }, null, 8 /* PROPS */, _hoisted_4), [\n                            [_vModelText, localInstruction.value]\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (__props.isModifying)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[5] || (_cache[5] = [\n                                    _createStaticVNode(\"<div style=\\\"display:flex;align-items:center;gap:12px;margin-bottom:10px;\\\" data-v-9bd7a892><i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"color:#ffc107;font-size:18px;animation:pulse 1.5s infinite;\\\" data-v-9bd7a892></i><span style=\\\"color:#ffc107;font-weight:600;font-size:14px;\\\" data-v-9bd7a892>AI ...</span></div><div style=\\\"width:100%;height:6px;background:#333;border-radius:3px;overflow:hidden;position:relative;\\\" data-v-9bd7a892><div class=\\\"progress-bar\\\" data-v-9bd7a892></div></div><p style=\\\"color:#888;font-size:12px;margin:8px 0 0 0;text-align:center;\\\" data-v-9bd7a892></p>\", 3)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"button\", {\n                                onClick: handleConfirm,\n                                disabled: !localInstruction.value || __props.isModifying,\n                                style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#ffc107\", \"color\": \"#000\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\", \"position\": \"relative\", \"overflow\": \"hidden\" }, { opacity: !localInstruction.value || __props.isModifying ? 0.5 : 1 }])\n                            }, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass([\"fa-solid fa-wand-magic-sparkles\", { 'icon-spin': __props.isModifying }])\n                                }, null, 2 /* CLASS */),\n                                _createTextVNode(\" \" + _toDisplayString(__props.isModifying ? '...' : ''), 1 /* TEXT */)\n                            ], 12 /* STYLE, PROPS */, _hoisted_7),\n                            _createElementVNode(\"button\", {\n                                onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('close'))),\n                                disabled: __props.isModifying,\n                                style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#666\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\" }, { opacity: __props.isModifying ? 0.5 : 1 }])\n                            }, \"  \", 12 /* STYLE, PROPS */, _hoisted_8)\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AIModifyDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AIModifyDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AIModifyDialog.vue?vue&type=style&index=0&id=9bd7a892&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9bd7a892\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, Fragment as _Fragment, renderList as _renderList, vModelText as _vModelText, withDirectives as _withDirectives, createVNode as _createVNode, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"greetings-tab\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"height\": \"100%\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_3 = {\n    class: \"header-actions\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#667eea\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_5 = { style: { \"flex\": \"1\", \"display\": \"flex\", \"gap\": \"20px\", \"padding\": \"20px\", \"overflow\": \"hidden\" } };\nconst _hoisted_6 = { style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"padding-right\": \"10px\" } };\nconst _hoisted_7 = {\n    key: 0,\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"align-items\": \"center\", \"justify-content\": \"center\", \"padding\": \"60px 20px\", \"text-align\": \"center\", \"color\": \"#888\" }\n};\nconst _hoisted_8 = { style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #667eea\", \"border-radius\": \"8px\", \"padding\": \"20px\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_9 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"15px\" } };\nconst _hoisted_10 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\" } };\nconst _hoisted_11 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"10px\", \"border-bottom\": \"1px solid #3a3a3a\" } };\nconst _hoisted_12 = { style: { \"background\": \"#667eea\", \"color\": \"white\", \"padding\": \"4px 10px\", \"border-radius\": \"6px\", \"font-size\": \"12px\", \"font-weight\": \"bold\", \"min-width\": \"35px\", \"text-align\": \"center\" } };\nconst _hoisted_13 = [\"onUpdate:modelValue\"];\nconst _hoisted_14 = [\"onUpdate:modelValue\", \"placeholder\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = [\"onUpdate:modelValue\"];\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = {\n    key: 3,\n    style: { \"position\": \"sticky\", \"bottom\": \"0\", \"padding\": \"20px\", \"background\": \"linear-gradient(to top, #1a1a1a 80%, transparent)\", \"border-top\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"center\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_20 = { style: { \"flex\": \"1\", \"display\": \"flex\", \"flex-direction\": \"column\", \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"overflow\": \"hidden\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 4px 12px rgba(0, 0, 0, 0.3)\" } };\nconst _hoisted_21 = { style: { \"padding\": \"15px 20px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_22 = { style: { \"flex\": \"1\", \"position\": \"relative\", \"overflow\": \"hidden\", \"background\": \"#1e1e1e\" } };\nconst _hoisted_23 = [\"srcdoc\"];\nconst _hoisted_24 = {\n    key: 1,\n    style: { \"width\": \"100%\", \"height\": \"100%\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"color\": \"#666\", \"font-size\": \"14px\", \"padding\": \"20px\", \"text-align\": \"center\", \"line-height\": \"1.8\" }\n};\nconst _hoisted_25 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"16px\" } };\nconst _hoisted_26 = { style: { \"background\": \"#1a1a1a\", \"border-radius\": \"8px\", \"padding\": \"16px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"line-height\": \"1.6\", \"overflow-y\": \"auto\", \"flex\": \"1\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\" } };\nconst _hoisted_27 = { style: { \"display\": \"flex\", \"justify-content\": \"flex-end\", \"margin-top\": \"16px\" } };\nconst _hoisted_28 = { style: { \"padding\": \"20px\", \"overflow-y\": \"auto\", \"flex\": \"1\" } };\nconst _hoisted_29 = { style: { \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"max-height\": \"400px\", \"overflow-y\": \"auto\", \"margin-bottom\": \"15px\" } };\nconst _hoisted_30 = { style: { \"margin\": \"0\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\" } };\nconst _hoisted_31 = { style: { \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"12px\", \"line-height\": \"1.6\" } };\nimport { klona } from 'klona';\nimport { storeToRefs } from 'pinia';\nimport toastr from 'toastr';\nimport { onMounted, ref } from 'vue';\nimport { z } from 'zod';\nimport { useSettingsStore } from '../settings';\nimport { copyToClipboard } from '../utils';\nimport { normalizeApiEndpoint } from '../utils/api';\nimport AIGenerateDialog from './AIGenerateDialog.vue';\nimport AIModifyDialog from './AIModifyDialog.vue';\n// settings store\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GreetingsTab',\n    setup(__props) {\n        const GreetingConfig = z.object({\n            icon: z.string().default(''),\n            title: z.string().default(''),\n            description: z.string().default(''),\n        });\n        const UIConfig = z.object({\n            customHtml: z.string().default(''), // AIHTML\n        });\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // \n        const greetings = ref([]);\n        const uiConfig = ref(UIConfig.parse({})); // UI\n        const showCodeDialog = ref(false);\n        const generatedCode = ref('');\n        const copyButtonText = ref('');\n        const showAiGenerateDialog = ref(false);\n        const showAiEditDialog = ref(false);\n        const isGeneratingAi = ref(false);\n        const isEditingAi = ref(false);\n        const currentEditingIndex = ref(-1);\n        const showHelp = ref(false); // \n        const previewHtml = ref('');\n        const currentCharacter = ref(null);\n        const showOriginalDialog = ref(false);\n        const originalGreetingContent = ref('');\n        const showAiStyleDialog = ref(false); // AI\n        const isGeneratingStyle = ref(false); // \n        // \n        function getCurrentCharacter() {\n            try {\n                const char = getCharData('current');\n                if (char) {\n                    console.log(':', char.name);\n                }\n                else {\n                    console.log('');\n                }\n                return char;\n            }\n            catch (error) {\n                console.error(':', error);\n                return null;\n            }\n        }\n        // \n        async function loadConfig() {\n            try {\n                const character = getCurrentCharacter();\n                if (!character) {\n                    greetings.value = [];\n                    console.log('');\n                    return;\n                }\n                console.log(':', character.name);\n                // \n                const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n                console.log('', allGreetings.length, '');\n                // \n                const savedConfig = getVariables({ type: 'character' });\n                const configs = savedConfig?.greetings_config || [];\n                const savedUIConfig = savedConfig?.ui_config;\n                // \n                greetings.value = allGreetings.map((_, index) => {\n                    const saved = configs[index];\n                    return GreetingConfig.parse(saved || {});\n                });\n                // UI\n                uiConfig.value = UIConfig.parse(savedUIConfig || {});\n                console.log(':', greetings.value.length, '');\n                console.log('UI, HTML:', uiConfig.value.customHtml.length);\n                currentCharacter.value = character;\n                updatePreview();\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(': ' + error.message);\n            }\n        }\n        // \n        function saveConfig() {\n            try {\n                replaceVariables({\n                    greetings_config: klona(greetings.value),\n                    ui_config: klona(uiConfig.value),\n                }, { type: 'character' });\n                updatePreview(); // \n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        }\n        // \n        function clearAllConfig() {\n            if (!confirm(`\\n\\n ${greetings.value.length} \\n\\n `)) {\n                return;\n            }\n            try {\n                // \n                greetings.value = greetings.value.map(() => {\n                    return GreetingConfig.parse({\n                        icon: '',\n                        title: '',\n                        description: '',\n                    });\n                });\n                // UI\n                uiConfig.value.customHtml = '';\n                // \n                saveConfig();\n                // \n                updatePreview();\n                toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(': ' + error.message);\n            }\n        }\n        // \n        function viewOriginalGreeting(index) {\n            try {\n                const character = getCurrentCharacter();\n                if (!character) {\n                    toastr.error('');\n                    return;\n                }\n                const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n                const greetingContent = allGreetings[index] || '';\n                if (!greetingContent.trim()) {\n                    toastr.warning('');\n                    return;\n                }\n                originalGreetingContent.value = greetingContent;\n                showOriginalDialog.value = true;\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(': ' + error.message);\n            }\n        }\n        // AI\n        function closeAiGenerateDialog() {\n            if (!isGeneratingAi.value) {\n                showAiGenerateDialog.value = false;\n            }\n        }\n        // AI\n        async function generateDescription(index) {\n            currentEditingIndex.value = index;\n            // \n            showAiGenerateDialog.value = true;\n            isGeneratingAi.value = true;\n            const idx = index;\n            if (idx < 0 || idx >= greetings.value.length) {\n                isGeneratingAi.value = false;\n                showAiGenerateDialog.value = false;\n                return;\n            }\n            try {\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    toastr.error(' API  API Key');\n                    showAiGenerateDialog.value = false;\n                    isGeneratingAi.value = false;\n                    return;\n                }\n                // \n                const character = getCurrentCharacter();\n                if (!character) {\n                    toastr.error('');\n                    showAiGenerateDialog.value = false;\n                    isGeneratingAi.value = false;\n                    return;\n                }\n                const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n                const greetingContent = allGreetings[idx] || '';\n                if (!greetingContent.trim()) {\n                    toastr.warning('');\n                    showAiGenerateDialog.value = false;\n                    isGeneratingAi.value = false;\n                    return;\n                }\n                // \n                const systemPrompt = `\n\n\n1.  20-50 \n2. \n3. \n4. \"...\"\"...\"\n5. `;\n                const userPrompt = `\n\n${greetingContent}\n\n`;\n                console.log(' AI ...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\n                console.log(' :', apiUrl);\n                //  AI API\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature,\n                        max_tokens: settings.value.max_tokens,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API : ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' [] API :', result);\n                let aiDescription = result.choices?.[0]?.message?.content?.trim() || '';\n                console.log(' [] AI :', aiDescription);\n                if (!aiDescription) {\n                    console.error(' [] AI ');\n                    console.error(':', JSON.stringify(result, null, 2));\n                    // \n                    if (result.error) {\n                        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\n                    }\n                    // \n                    if (!result.choices || result.choices.length === 0) {\n                        throw new Error('API  choices  API ');\n                    }\n                    throw new Error('AI \\n1. API Key \\n2. \\n3. ');\n                }\n                // AI\n                // \n                aiDescription = aiDescription.replace(/^[\"']|[\"']$/g, '');\n                // markdown\n                aiDescription = aiDescription.replace(/^```.*?\\n?|```$/g, '').trim();\n                if (!aiDescription) {\n                    throw new Error('AI ');\n                }\n                console.log(' [] AI :', aiDescription);\n                // \n                greetings.value[idx].description = aiDescription;\n                saveConfig();\n                toastr.success('');\n                showAiGenerateDialog.value = false;\n            }\n            catch (error) {\n                console.error(' [] AI :', error);\n                const errorMsg = ': ' + error.message;\n                toastr.error(errorMsg);\n                // \n                setTimeout(() => { }, 5000);\n            }\n            finally {\n                isGeneratingAi.value = false;\n            }\n        }\n        // AI\n        function editDescription(index) {\n            currentEditingIndex.value = index;\n            showAiEditDialog.value = true;\n        }\n        // AI\n        async function confirmEditDescription(requirement) {\n            const index = currentEditingIndex.value;\n            if (index < 0 || index >= greetings.value.length)\n                return;\n            isEditingAi.value = true;\n            try {\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    toastr.error(' API  API Key');\n                    showAiEditDialog.value = false;\n                    isEditingAi.value = false;\n                    return;\n                }\n                const currentDesc = greetings.value[index].description;\n                if (!currentDesc.trim()) {\n                    toastr.warning(' AI ');\n                    showAiEditDialog.value = false;\n                    isEditingAi.value = false;\n                    return;\n                }\n                // \n                const systemPrompt = `\n\n\n1. \n2.  20-50 \n3. \n4. `;\n                const userPrompt = `\n${currentDesc}\n\n\n${requirement}\n\n`;\n                console.log(' AI ...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\n                console.log(' :', apiUrl);\n                //  AI API\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature,\n                        max_tokens: settings.value.max_tokens,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API : ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' [] API :', result);\n                let aiDescription = result.choices?.[0]?.message?.content?.trim() || '';\n                console.log(' [] AI :', aiDescription);\n                if (!aiDescription) {\n                    console.error(' [] AI ');\n                    console.error(':', JSON.stringify(result, null, 2));\n                    // \n                    if (result.error) {\n                        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\n                    }\n                    // \n                    if (!result.choices || result.choices.length === 0) {\n                        throw new Error('API  choices  API ');\n                    }\n                    throw new Error('AI \\n1. API Key \\n2. \\n3. ');\n                }\n                // AI\n                // \n                aiDescription = aiDescription.replace(/^[\"']|[\"']$/g, '');\n                // markdown\n                aiDescription = aiDescription.replace(/^```.*?\\n?|```$/g, '').trim();\n                if (!aiDescription) {\n                    throw new Error('AI ');\n                }\n                console.log(' [] AI :', aiDescription);\n                // \n                greetings.value[index].description = aiDescription;\n                saveConfig();\n                toastr.success('');\n                showAiEditDialog.value = false;\n            }\n            catch (error) {\n                console.error(' [] AI :', error);\n                const errorMsg = ': ' + error.message;\n                toastr.error(errorMsg);\n            }\n            finally {\n                isEditingAi.value = false;\n            }\n        }\n        // AI\n        async function generateStyleWithAI(styleDescription) {\n            if (!styleDescription.trim()) {\n                toastr.warning('');\n                return;\n            }\n            //  API \n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                toastr.error(' API  API Key');\n                showAiStyleDialog.value = false;\n                return;\n            }\n            isGeneratingStyle.value = true;\n            try {\n                // HTML\n                const cards = greetings.value\n                    .map((g, index) => {\n                    const icon = g.icon || '';\n                    const title = g.title || (index === 0 ? '' : ` ${index}`);\n                    const desc = g.description || '';\n                    const badge = index === 0 ? '' : String(index).padStart(2, '0');\n                    return '      <' + 'div class=\"scene-card\" onclick=\"switchGreeting(' + index + ')\">' +\n                        '<' + 'div class=\"card-badge\">' + badge + '<' + '/div>' +\n                        '<' + 'div class=\"card-icon\">' + icon + '<' + '/div>' +\n                        '<' + 'div class=\"card-title\">' + title + '<' + '/div>' +\n                        '<' + 'div class=\"card-desc\">' + desc + '<' + '/div>' +\n                        '<' + '/div>';\n                })\n                    .join('\\n');\n                const systemPrompt = `HTML/CSS\n\nHTML\n\n\n1.  HTML ` + '<' + `html>` + '<' + `head>` + '<' + `body>\n2.  ` + '<' + `head>  Font Awesome ` + '<' + `link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n3.  ` + '<' + `style>  CSS \n4. HTML\n   - body\n   - .container\n   - .header\n     - h1\n     - p\n   - .scene-grid\n   - .scene-card onclick \n   - .card-badge\n   - .card-icon\n   - .card-title\n   - .card-desc\n   - .loading\n5.  switchGreeting(id)  JavaScript \n6. \n7. \n8. HTMLmarkdown`;\n                //  switchGreeting \n                const switchGreetingCode = `async function switchGreeting(id) {\n      try {\n        const loading = document.getElementById(\"loading\");\n        const mainContainer = document.getElementById(\"mainContainer\");\n        if (loading) loading.classList.add(\"active\");\n        if (mainContainer) mainContainer.style.display = \"none\";\n        \n        if (typeof window.getChatMessages !== \"function\") {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n        \n        const messages = await window.getChatMessages(0, { include_swipe: true });\n        if (!messages || messages.length === 0) {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n        \n        const content = messages[0].swipes[id];\n        if (!content) {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n        \n        await window.setChatMessage(content, 0, { swipe_id: id, refresh: \"display_and_render_current\" });\n        \n        setTimeout(() => {\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n        }, 500);\n      } catch (err) {\n        console.error(\":\", err);\n        alert(\": \" + err.message);\n        const loading = document.getElementById(\"loading\");\n        const mainContainer = document.getElementById(\"mainContainer\");\n        if (loading) loading.classList.remove(\"active\");\n        if (mainContainer) mainContainer.style.display = \"block\";\n      }\n    }`;\n                const userPrompt = `${styleDescription}\n\n onclick=\"switchGreeting()\" \n${cards}\n\n ` + '<' + `/body>  JavaScript \n` + '<' + `script>\n${switchGreetingCode}\n` + '<' + `/script>\n\n .scene-card  onclick=\"switchGreeting()\" \n` + '<' + `div class=\"scene-card\" onclick=\"switchGreeting(0)\">\n\n loading \n` + '<' + `div class=\"loading\" id=\"loading\" style=\"display: none; text-align: center; padding: 40px;\">\n  ` + '<' + `p style=\"color: #888; font-size: 18px;\">...` + '<' + `/p>\n` + '<' + `/div>\n\nHTML`;\n                console.log(' AI ...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\n                console.log(' :', apiUrl);\n                //  AI API\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature,\n                        max_tokens: settings.value.max_tokens,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API : ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' [] API :', result);\n                let generatedHtml = result.choices?.[0]?.message?.content?.trim() || '';\n                console.log(' [] AI :', generatedHtml ? generatedHtml.substring(0, 500) : '()');\n                if (!generatedHtml) {\n                    console.error(' [] AI ');\n                    console.error(':', JSON.stringify(result, null, 2));\n                    // \n                    if (result.error) {\n                        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\n                    }\n                    throw new Error('AI  API ');\n                }\n                // AI\n                // markdown\n                generatedHtml = generatedHtml.replace(/^```html\\n?|^```\\n?|```$/gm, '').trim();\n                if (!generatedHtml) {\n                    throw new Error('AI ');\n                }\n                console.log(' [] AI HTML:', generatedHtml.length);\n                // HTML\n                uiConfig.value.customHtml = generatedHtml;\n                saveConfig();\n                toastr.success('');\n                showAiStyleDialog.value = false;\n                // \n                updatePreview();\n            }\n            catch (error) {\n                console.error(' [] AI :', error);\n                toastr.error(': ' + error.message, '', { timeOut: 5000 });\n            }\n            finally {\n                isGeneratingStyle.value = false;\n            }\n        }\n        // \n        async function generateFrontendCode() {\n            const character = getCurrentCharacter();\n            if (!character) {\n                toastr.warning('');\n                return;\n            }\n            // AIHTML\n            if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\n                generatedCode.value = uiConfig.value.customHtml;\n                showCodeDialog.value = true;\n                return;\n            }\n            // \n            // \n            const cards = greetings.value\n                .map((g, index) => {\n                const icon = g.icon || '<' + 'i class=\"fa-solid fa-comment\"><' + '/i>';\n                const title = g.title || (index === 0 ? '' : ` ${index}`);\n                const desc = g.description || '';\n                const badge = index === 0 ? '' : String(index).padStart(2, '0');\n                return '        <' + 'div class=\"scene-card\" onclick=\"switchGreeting(' + index + ')\">' +\n                    '<' + 'div class=\"card-badge\">' + badge + '<' + '/div>' +\n                    '<' + 'div class=\"card-icon\">' + icon + '<' + '/div>' +\n                    '<' + 'div class=\"card-title\">' + title + '<' + '/div>' +\n                    '<' + 'div class=\"card-desc\">' + desc + '<' + '/div>' +\n                    '<' + '/div>';\n            })\n                .join('\\n\\n');\n            // HTML\n            const htmlCode = [\n                '<' + 'html>',\n                '<' + 'head>',\n                '  <' + 'meta charset=\"UTF-8\">',\n                '  <' + 'link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">',\n                '  <' + 'style>',\n                '    * { margin: 0; padding: 0; box-sizing: border-box; }',\n                '    body {',\n                '      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;',\n                '      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);',\n                '      padding: 20px; min-height: 100vh; display: flex; align-items: center; justify-content: center;',\n                '    }',\n                '    .container { max-width: 900px; width: 100%; background: rgba(255, 255, 255, 0.95);',\n                '      border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }',\n                '    .header { text-align: center; margin-bottom: 40px; }',\n                '    .header h1 { font-size: 32px; color: #333; margin-bottom: 10px; }',\n                '    .header p { color: #666; font-size: 16px; }',\n                '    .scene-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }',\n                '    .scene-card { background: white; border: 2px solid #e0e0e0; border-radius: 15px;',\n                '      padding: 25px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }',\n                '    .scene-card:hover { transform: translateY(-5px); border-color: #667eea;',\n                '      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }',\n                '    .card-badge { position: absolute; top: 10px; right: 10px; background: #667eea;',\n                '      color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; }',\n                '    .card-icon { font-size: 48px; margin-bottom: 15px; text-align: center; }',\n                '    .card-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 10px; }',\n                '    .card-desc { font-size: 14px; color: #666; line-height: 1.5; }',\n                '    .loading { display: none; text-align: center; padding: 40px; }',\n                '    .loading.active { display: block; }',\n                '  <' + '/style>',\n                '<' + '/head>',\n                '<' + 'body>',\n                '  <' + 'div class=\"container\" id=\"mainContainer\">',\n                '    <' + 'div class=\"header\">',\n                '      <' + 'h1><' + '/h1>',\n                '      <' + 'p><' + '/p>',\n                '    <' + '/div>',\n                '    <' + 'div class=\"scene-grid\" id=\"sceneGrid\">',\n                cards,\n                '    <' + '/div>',\n                '  <' + '/div>',\n                '  <' + 'div class=\"loading\" id=\"loading\"><' + 'p>...<' + '/p><' + '/div>',\n                '  <' + 'script>',\n                '    async function switchGreeting(id) {',\n                '      try {',\n                '        const loading = document.getElementById(\"loading\");',\n                '        const mainContainer = document.getElementById(\"mainContainer\");',\n                '        loading.classList.add(\"active\"); mainContainer.style.display = \"none\";',\n                '        const messages = await getChatMessages(0, { include_swipe: true });',\n                '        if (!messages || messages.length === 0) { alert(\"\"); return; }',\n                '        const content = messages[0].swipes[id];',\n                '        if (!content) { alert(\"\"); return; }',\n                '        await setChatMessage(content, 0, { swipe_id: id, refresh: \"display_and_render_current\" });',\n                '        setTimeout(() => { loading.classList.remove(\"active\"); mainContainer.style.display = \"block\"; }, 500);',\n                '      } catch (err) { console.error(\":\", err); alert(\": \" + err.message); }',\n                '    }',\n                '  </' + 'script>',\n                '<' + '/body>',\n                '<' + '/html>',\n            ].join('\\n');\n            // API\n            const fixedHtmlCode = htmlCode\n                .replace('const messages = await getChatMessages', 'if (typeof window.getChatMessages !== \"function\") { alert(\"\"); loading.classList.remove(\"active\"); mainContainer.style.display = \"block\"; return; }\\n        const messages = await window.getChatMessages')\n                .replace('await setChatMessage', 'await window.setChatMessage')\n                .replace('alert(\"\"); return;', 'alert(\"\"); loading.classList.remove(\"active\"); mainContainer.style.display = \"block\"; return;')\n                .replace('alert(\"\"); return;', 'alert(\"\"); loading.classList.remove(\"active\"); mainContainer.style.display = \"block\"; return;');\n            generatedCode.value = fixedHtmlCode;\n            showCodeDialog.value = true;\n            copyButtonText.value = '';\n        }\n        // \n        async function copyCode() {\n            const success = await copyToClipboard(generatedCode.value, ' ');\n            if (success) {\n                copyButtonText.value = ' ';\n                setTimeout(() => {\n                    copyButtonText.value = '';\n                }, 2000);\n            }\n        }\n        // \n        function closeCodeDialog() {\n            showCodeDialog.value = false;\n        }\n        // API\n        function updatePreview() {\n            if (greetings.value.length === 0) {\n                previewHtml.value = '';\n                return;\n            }\n            const character = getCurrentCharacter();\n            const characterName = character?.name || '';\n            // AIHTML\n            if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\n                console.log(' AIHTML');\n                try {\n                    // HTML\n                    const cardsHtml = greetings.value\n                        .map((g, index) => {\n                        const icon = g.icon || '';\n                        const title = g.title || (index === 0 ? '' : ` ${index}`);\n                        const desc = g.description || '';\n                        const badge = index === 0 ? '' : String(index).padStart(2, '0');\n                        return `\n        <div class=\"scene-card\">\n          <div class=\"card-badge\">${badge}</div>\n          <div class=\"card-icon\">${icon}</div>\n          <div class=\"card-title\">${title}</div>\n          <div class=\"card-desc\">${desc}</div>\n        </div>`;\n                    })\n                        .join('\\n');\n                    //  scene-grid \n                    let customHtml = uiConfig.value.customHtml;\n                    //  scene-grid \n                    const sceneGridPattern = /(<div[^>]*class=\"scene-grid\"[^>]*>)([\\s\\S]*?)(<\\/div>)/i;\n                    const match = customHtml.match(sceneGridPattern);\n                    if (match) {\n                        //  scene-grid \n                        customHtml = customHtml.replace(sceneGridPattern, `$1\\n${cardsHtml}\\n      $3`);\n                        previewHtml.value = customHtml;\n                        console.log(' HTML');\n                        return;\n                    }\n                    else {\n                        console.warn(' HTML .scene-grid HTML');\n                        previewHtml.value = uiConfig.value.customHtml;\n                        return;\n                    }\n                }\n                catch (error) {\n                    console.error(' HTML:', error);\n                    toastr.warning('HTML');\n                    // \n                }\n            }\n            console.log(' ');\n            //  - \n            const cards = greetings.value\n                .map((g, index) => {\n                const icon = g.icon || '<' + 'i class=\"fa-solid fa-comment\"><' + '/i>';\n                const title = g.title || (index === 0 ? '' : ` ${index}`);\n                const desc = g.description || '';\n                const badge = index === 0 ? '' : String(index).padStart(2, '0');\n                return '        <' + 'div class=\"scene-card\">' +\n                    '<' + 'div class=\"card-badge\">' + badge + '<' + '/div>' +\n                    '<' + 'div class=\"card-icon\">' + icon + '<' + '/div>' +\n                    '<' + 'div class=\"card-title\">' + title + '<' + '/div>' +\n                    '<' + 'div class=\"card-desc\">' + desc + '<' + '/div>' +\n                    '<' + '/div>';\n            })\n                .join('\\n\\n');\n            // HTML\n            const htmlCode = [\n                '<' + 'html>',\n                '<' + 'head>',\n                '  <' + 'meta charset=\"UTF-8\">',\n                '  <' + 'link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">',\n                '  <' + 'style>',\n                '    * { margin: 0; padding: 0; box-sizing: border-box; }',\n                '    body {',\n                '      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;',\n                '      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);',\n                '      padding: 20px; min-height: 100vh; display: flex; align-items: center; justify-content: center;',\n                '    }',\n                '    .container { max-width: 900px; width: 100%; background: rgba(255, 255, 255, 0.95);',\n                '      border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }',\n                '    .header { text-align: center; margin-bottom: 40px; }',\n                '    .header h1 { font-size: 32px; color: #333; margin-bottom: 10px; }',\n                '    .header p { color: #666; font-size: 16px; }',\n                '    .scene-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }',\n                '    .scene-card { background: white; border: 2px solid #e0e0e0; border-radius: 15px;',\n                '      padding: 25px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }',\n                '    .scene-card:hover { transform: translateY(-5px); border-color: #667eea;',\n                '      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }',\n                '    .scene-card:active { transform: translateY(-2px); }',\n                '    .card-badge { position: absolute; top: 10px; right: 10px; background: #667eea;',\n                '      color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; }',\n                '    .card-icon { font-size: 48px; margin-bottom: 15px; text-align: center; }',\n                '    .card-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 10px; }',\n                '    .card-desc { font-size: 14px; color: #666; line-height: 1.5; }',\n                '  <' + '/style>',\n                '<' + '/head>',\n                '<' + 'body>',\n                '  <' + 'div class=\"container\">',\n                '    <' + 'div class=\"header\">',\n                `      <` + `h1>${characterName} <` + '/h1>',\n                '      <' + 'p><' + '/p>',\n                '    <' + '/div>',\n                '    <' + 'div class=\"scene-grid\">',\n                cards,\n                '    <' + '/div>',\n                '  <' + '/div>',\n                '<' + '/body>',\n                '<' + '/html>',\n            ].join('\\n');\n            previewHtml.value = htmlCode;\n        }\n        // \n        function openPreviewInNewWindow() {\n            if (!previewHtml.value) {\n                toastr.error('');\n                return;\n            }\n            const character = getCurrentCharacter();\n            const windowTitle = character ? `${character.name} - ` : '';\n            // \n            const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\n            if (newWindow) {\n                newWindow.document.write(previewHtml.value);\n                newWindow.document.close();\n                newWindow.document.title = windowTitle;\n                toastr.success('');\n            }\n            else {\n                toastr.error('');\n            }\n        }\n        // STScript JSON\n        async function downloadAsJson() {\n            try {\n                await generateFrontendCode();\n                if (!generatedCode.value) {\n                    toastr.error('');\n                    return;\n                }\n                const character = getCurrentCharacter();\n                const characterName = character?.name || '';\n                // UUID\n                const uuid = crypto.randomUUID();\n                // STScript JSON\n                const stscriptJson = {\n                    id: uuid,\n                    scriptName: `${characterName}-`,\n                    disabled: false,\n                    runOnEdit: true,\n                    findRegex: '//g',\n                    replaceString: '```html\\n' + generatedCode.value + '\\n```',\n                    trimStrings: [],\n                    placement: [1, 2],\n                    substituteRegex: 0,\n                    minDepth: null,\n                    maxDepth: null,\n                    markdownOnly: true,\n                    promptOnly: false,\n                };\n                // JSON\n                const jsonString = JSON.stringify(stscriptJson, null, 4);\n                // Blob\n                const blob = new Blob([jsonString], { type: 'application/json' });\n                // \n                const url = URL.createObjectURL(blob);\n                const link = document.createElement('a');\n                link.href = url;\n                link.download = `${characterName}-.json`;\n                // \n                document.body.appendChild(link);\n                link.click();\n                // \n                document.body.removeChild(link);\n                URL.revokeObjectURL(url);\n                toastr.success('JSON');\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(': ' + error.message);\n            }\n        }\n        // \n        onMounted(() => {\n            loadConfig();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[32] || (_cache[32] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-comments\",\n                            style: { \"color\": \"#667eea\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(greetings.value.length) + \"  \", 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                class: \"mini-button\",\n                                style: _normalizeStyle([{ \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" }, { color: showHelp.value ? '#667eea' : '#e0e0e0', borderColor: showHelp.value ? '#667eea' : '#3a3a3a' }]),\n                                onClick: _cache[0] || (_cache[0] = ($event) => (showHelp.value = !showHelp.value))\n                            }, [\n                                _cache[28] || (_cache[28] = _createElementVNode(\"i\", { class: \"fa-solid fa-circle-question\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\" \" + _toDisplayString(showHelp.value ? '' : ''), 1 /* TEXT */)\n                            ], 4 /* STYLE */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 2,\n                                class: \"mini-button\",\n                                style: { \"padding\": \"6px 12px\", \"background\": \"#dc2626\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                                onClick: clearAllConfig,\n                                onMouseenter: _cache[1] || (_cache[1] = ($event) => ($event.currentTarget.style.transform = 'translateY(-2px)')),\n                                onMouseleave: _cache[2] || (_cache[2] = ($event) => ($event.currentTarget.style.transform = 'translateY(0)'))\n                            }, [...(_cache[29] || (_cache[29] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-eraser\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 3,\n                                class: \"mini-button\",\n                                style: { \"padding\": \"6px 12px\", \"background\": \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                                onClick: _cache[3] || (_cache[3] = ($event) => (showAiStyleDialog.value = true)),\n                                onMouseenter: _cache[4] || (_cache[4] = ($event) => ($event.currentTarget.style.transform = 'translateY(-2px)')),\n                                onMouseleave: _cache[5] || (_cache[5] = ($event) => ($event.currentTarget.style.transform = 'translateY(0)'))\n                            }, [...(_cache[30] || (_cache[30] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\" AI \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button refresh-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: loadConfig\n                        }, [...(_cache[31] || (_cache[31] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createCommentVNode(\"  /  \"),\n                        (greetings.value.length === 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [...(_cache[33] || (_cache[33] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-comment-dots\",\n                                        style: { \"font-size\": \"64px\", \"margin-bottom\": \"20px\", \"opacity\": \"0.3\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"div\", { style: { \"font-size\": \"18px\", \"font-weight\": \"600\", \"color\": \"#e0e0e0\", \"margin-bottom\": \"10px\" } }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"div\", { style: { \"font-size\": \"14px\", \"color\": \"#888\", \"max-width\": \"400px\", \"line-height\": \"1.6\" } }, \"  \", -1 /* CACHED */)\n                                ]))]))\n                            : (showHelp.value)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _createElementVNode(\"div\", _hoisted_9, [\n                                            _cache[35] || (_cache[35] = _createElementVNode(\"h4\", { style: { \"color\": \"#667eea\", \"margin\": \"0\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-circle-info\" }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"button\", {\n                                                style: { \"background\": \"transparent\", \"border\": \"none\", \"color\": \"#888\", \"cursor\": \"pointer\", \"font-size\": \"18px\", \"padding\": \"4px\" },\n                                                onClick: _cache[6] || (_cache[6] = ($event) => (showHelp.value = false))\n                                            }, [...(_cache[34] || (_cache[34] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ]),\n                                        _cache[36] || (_cache[36] = _createStaticVNode(\"<ol style=\\\"color:#ccc;margin:0;padding-left:20px;line-height:1.8;\\\" data-v-3b4dcffa><li data-v-3b4dcffa></li><li data-v-3b4dcffa></li><li data-v-3b4dcffa>AI</li><li data-v-3b4dcffa>&quot;AI&quot;</li><li data-v-3b4dcffa>AIHTML</li><li data-v-3b4dcffa></li><li data-v-3b4dcffa>&quot;&quot;</li><li data-v-3b4dcffa>&quot;STScript JSON&quot;</li><li data-v-3b4dcffa>JSON / </li></ol><div style=\\\"margin-top:15px;padding-top:15px;border-top:1px solid #3a3a3a;\\\" data-v-3b4dcffa><p style=\\\"color:#888;font-size:13px;margin:0;\\\" data-v-3b4dcffa><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"color:#ffc107;\\\" data-v-3b4dcffa></i><strong data-v-3b4dcffa></strong>0 </p></div>\", 2))\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(greetings.value, (greeting, index) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: index,\n                                                class: \"greeting-item\",\n                                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                                            }, [\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_11, [\n                                                    _createElementVNode(\"span\", _hoisted_12, \" #\" + _toDisplayString(index), 1 /* TEXT */),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": ($event) => ((greeting.icon) = $event),\n                                                        style: { \"width\": \"60px\", \"text-align\": \"center\", \"font-size\": \"20px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"6px\", \"color\": \"#e0e0e0\" },\n                                                        placeholder: \"\",\n                                                        maxlength: \"4\",\n                                                        onInput: saveConfig\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_13), [\n                                                        [_vModelText, greeting.icon]\n                                                    ]),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": ($event) => ((greeting.title) = $event),\n                                                        style: { \"flex\": \"1\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"8px 12px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" },\n                                                        placeholder: index === 0 ? '' : ` ${index}`,\n                                                        onInput: saveConfig\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_14), [\n                                                        [_vModelText, greeting.title]\n                                                    ]),\n                                                    _createElementVNode(\"button\", {\n                                                        style: { \"background\": \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\", \"border\": \"none\", \"color\": \"white\", \"padding\": \"8px 16px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"box-shadow\": \"0 2px 8px rgba(251, 191, 36, 0.3)\" },\n                                                        title: \"\",\n                                                        onClick: ($event) => (generateDescription(index)),\n                                                        onMouseenter: _cache[7] || (_cache[7] = ($event) => {\n                                                            $event.currentTarget.style.transform = 'translateY(-2px)';\n                                                            $event.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\n                                                        }),\n                                                        onMouseleave: _cache[8] || (_cache[8] = ($event) => {\n                                                            $event.currentTarget.style.transform = 'translateY(0)';\n                                                            $event.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.3)';\n                                                        })\n                                                    }, [...(_cache[37] || (_cache[37] = [\n                                                            _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */),\n                                                            _createElementVNode(\"span\", null, \"AI \", -1 /* CACHED */)\n                                                        ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_15),\n                                                    (greeting.description)\n                                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                                            key: 0,\n                                                            style: { \"background\": \"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)\", \"border\": \"none\", \"color\": \"white\", \"padding\": \"8px 16px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"box-shadow\": \"0 2px 8px rgba(59, 130, 246, 0.3)\" },\n                                                            title: \"\",\n                                                            onClick: ($event) => (editDescription(index)),\n                                                            onMouseenter: _cache[9] || (_cache[9] = ($event) => {\n                                                                $event.currentTarget.style.transform = 'translateY(-2px)';\n                                                                $event.currentTarget.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.5)';\n                                                            }),\n                                                            onMouseleave: _cache[10] || (_cache[10] = ($event) => {\n                                                                $event.currentTarget.style.transform = 'translateY(0)';\n                                                                $event.currentTarget.style.boxShadow = '0 2px 8px rgba(59, 130, 246, 0.3)';\n                                                            })\n                                                        }, [...(_cache[38] || (_cache[38] = [\n                                                                _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }, null, -1 /* CACHED */),\n                                                                _createElementVNode(\"span\", null, \"AI \", -1 /* CACHED */)\n                                                            ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_16))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _withDirectives(_createElementVNode(\"textarea\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((greeting.description) = $event),\n                                                    style: { \"width\": \"100%\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"10px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-family\": \"inherit\", \"resize\": \"vertical\", \"min-height\": \"60px\" },\n                                                    placeholder: \"...\",\n                                                    onInput: saveConfig\n                                                }, \"            \", 40 /* PROPS, NEED_HYDRATION */, _hoisted_17), [\n                                                    [_vModelText, greeting.description]\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"button\", {\n                                                    style: { \"width\": \"100%\", \"padding\": \"10px\", \"background\": \"transparent\", \"border\": \"1px solid #667eea\", \"border-radius\": \"6px\", \"color\": \"#667eea\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"margin-top\": \"10px\" },\n                                                    onClick: ($event) => (viewOriginalGreeting(index)),\n                                                    onMouseenter: _cache[11] || (_cache[11] = ($event) => ($event.currentTarget.style.background = 'rgba(102, 126, 234, 0.1)')),\n                                                    onMouseleave: _cache[12] || (_cache[12] = ($event) => ($event.currentTarget.style.background = 'transparent'))\n                                                }, [...(_cache[39] || (_cache[39] = [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-file-lines\" }, null, -1 /* CACHED */),\n                                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                                    ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_18)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)),\n                        _createCommentVNode(\"  \"),\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"15px 35px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"10px\", \"color\": \"white\", \"font-size\": \"15px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"box-shadow\": \"0 4px 15px rgba(102, 126, 234, 0.4)\" },\n                                    onClick: generateFrontendCode,\n                                    onMouseenter: _cache[13] || (_cache[13] = ($event) => {\n                                        $event.currentTarget.style.transform = 'translateY(-3px)';\n                                        $event.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.6)';\n                                    }),\n                                    onMouseleave: _cache[14] || (_cache[14] = ($event) => {\n                                        $event.currentTarget.style.transform = 'translateY(0)';\n                                        $event.currentTarget.style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';\n                                    })\n                                }, [...(_cache[40] || (_cache[40] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-code\",\n                                            style: { \"font-size\": \"16px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\" HTML \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"15px 35px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"10px\", \"color\": \"white\", \"font-size\": \"15px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"box-shadow\": \"0 4px 15px rgba(16, 185, 129, 0.4)\" },\n                                    onClick: downloadAsJson,\n                                    onMouseenter: _cache[15] || (_cache[15] = ($event) => {\n                                        $event.currentTarget.style.transform = 'translateY(-3px)';\n                                        $event.currentTarget.style.boxShadow = '0 6px 20px rgba(16, 185, 129, 0.6)';\n                                    }),\n                                    onMouseleave: _cache[16] || (_cache[16] = ($event) => {\n                                        $event.currentTarget.style.transform = 'translateY(0)';\n                                        $event.currentTarget.style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.4)';\n                                    })\n                                }, [...(_cache[41] || (_cache[41] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-download\",\n                                            style: { \"font-size\": \"16px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\" STScript JSON \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_20, [\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _cache[43] || (_cache[43] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"white\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            (previewHtml.value)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    title: \"\",\n                                    style: { \"width\": \"32px\", \"height\": \"32px\", \"background\": \"rgba(255, 255, 255, 0.2)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"14px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\" },\n                                    onClick: openPreviewInNewWindow\n                                }, [...(_cache[42] || (_cache[42] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-external-link-alt\" }, null, -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_22, [\n                            (previewHtml.value)\n                                ? (_openBlock(), _createElementBlock(\"iframe\", {\n                                    key: 0,\n                                    srcdoc: previewHtml.value,\n                                    sandbox: \"allow-scripts allow-same-origin allow-modals allow-forms\",\n                                    style: { \"width\": \"100%\", \"height\": \"100%\", \"border\": \"none\", \"background\": \"white\" }\n                                }, null, 8 /* PROPS */, _hoisted_23))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [...(_cache[44] || (_cache[44] = [\n                                        _createElementVNode(\"div\", null, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-eye-slash\",\n                                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"15px\", \"opacity\": \"0.3\" }\n                                            }),\n                                            _createElementVNode(\"p\", { style: { \"margin\": \"0\" } }, \"\")\n                                        ], -1 /* CACHED */)\n                                    ]))]))\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" AI \"),\n                _createVNode(AIGenerateDialog, {\n                    show: showAiGenerateDialog.value,\n                    \"is-generating\": isGeneratingAi.value,\n                    title: \"AI \",\n                    description: \"AI 20-50...\",\n                    \"show-input\": false,\n                    onClose: closeAiGenerateDialog,\n                    onConfirm: () => { }\n                }, null, 8 /* PROPS */, [\"show\", \"is-generating\"]),\n                _createCommentVNode(\" AI \"),\n                _createVNode(AIModifyDialog, {\n                    show: showAiEditDialog.value,\n                    \"is-modifying\": isEditingAi.value,\n                    title: \"AI \",\n                    description: \"AI \",\n                    examples: ['', '', '', ''],\n                    onClose: _cache[17] || (_cache[17] = ($event) => (showAiEditDialog.value = false)),\n                    onConfirm: confirmEditDescription\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\" AI \"),\n                _createVNode(AIModifyDialog, {\n                    show: showAiStyleDialog.value,\n                    \"is-modifying\": isGeneratingStyle.value,\n                    title: \"AI \",\n                    description: \"AI HTML\",\n                    examples: [\n                        '',\n                        '',\n                        '',\n                        '',\n                        '',\n                    ],\n                    onClose: _cache[18] || (_cache[18] = ($event) => (showAiStyleDialog.value = false)),\n                    onConfirm: generateStyleWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\"  \"),\n                (showOriginalDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"padding\": \"20px\" },\n                        onClick: _cache[26] || (_cache[26] = _withModifiers(($event) => (showOriginalDialog.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            style: { \"background\": \"linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"max-width\": \"700px\", \"width\": \"100%\", \"max-height\": \"80vh\", \"display\": \"flex\", \"flex-direction\": \"column\", \"box-shadow\": \"0 8px 32px rgba(0, 0, 0, 0.5)\" },\n                            onClick: _cache[25] || (_cache[25] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_25, [\n                                _cache[46] || (_cache[46] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"white\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-file-lines\" }),\n                                    _createElementVNode(\"span\", null, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"background\": \"transparent\", \"border\": \"none\", \"color\": \"rgba(255, 255, 255, 0.7)\", \"cursor\": \"pointer\", \"font-size\": \"20px\", \"padding\": \"4px 8px\", \"transition\": \"all 0.2s\" },\n                                    onClick: _cache[19] || (_cache[19] = ($event) => (showOriginalDialog.value = false)),\n                                    onMouseenter: _cache[20] || (_cache[20] = ($event) => ($event.currentTarget.style.color = 'white')),\n                                    onMouseleave: _cache[21] || (_cache[21] = ($event) => ($event.currentTarget.style.color = 'rgba(255, 255, 255, 0.7)'))\n                                }, [...(_cache[45] || (_cache[45] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_26, _toDisplayString(originalGreetingContent.value), 1 /* TEXT */),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 24px\", \"background\": \"white\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#1e3a8a\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                    onClick: _cache[22] || (_cache[22] = ($event) => (showOriginalDialog.value = false)),\n                                    onMouseenter: _cache[23] || (_cache[23] = ($event) => ($event.currentTarget.style.transform = 'translateY(-2px)')),\n                                    onMouseleave: _cache[24] || (_cache[24] = ($event) => ($event.currentTarget.style.transform = 'translateY(0)'))\n                                }, \"  \", 32 /* NEED_HYDRATION */)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (showCodeDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"backdrop-filter\": \"blur(5px)\" },\n                        onClick: closeCodeDialog\n                    }, [\n                        _createElementVNode(\"div\", {\n                            style: { \"background\": \"#2a2a2a\", \"border-radius\": \"15px\", \"max-width\": \"800px\", \"width\": \"90%\", \"max-height\": \"80vh\", \"display\": \"flex\", \"flex-direction\": \"column\", \"box-shadow\": \"0 20px 60px rgba(0, 0, 0, 0.5)\" },\n                            onClick: _cache[27] || (_cache[27] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", { style: { \"padding\": \"20px\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } }, [\n                                _cache[48] || (_cache[48] = _createElementVNode(\"h3\", { style: { \"color\": \"#e0e0e0\", \"font-size\": \"18px\", \"margin\": \"0\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-code\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"background\": \"transparent\", \"border\": \"none\", \"color\": \"#888\", \"font-size\": \"20px\", \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"transition\": \"color 0.2s ease\" },\n                                    onClick: closeCodeDialog\n                                }, [...(_cache[47] || (_cache[47] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_28, [\n                                _cache[50] || (_cache[50] = _createElementVNode(\"div\", { style: { \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"margin-bottom\": \"20px\", \"color\": \"#e0e0e0\" } }, [\n                                    _createElementVNode(\"p\", { style: { \"margin-bottom\": \"10px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"strong\", null, \"\")\n                                    ]),\n                                    _createElementVNode(\"ol\", { style: { \"margin-left\": \"20px\", \"color\": \"#aaa\", \"line-height\": \"1.8\" } }, [\n                                        _createElementVNode(\"li\", null, \"\"),\n                                        _createElementVNode(\"li\", null, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"code\", { style: { \"background\": \"#2a2a2a\", \"padding\": \"2px 6px\", \"border-radius\": \"4px\", \"color\": \"#667eea\" } }, \"\"),\n                                            _createTextVNode(\" \")\n                                        ]),\n                                        _createElementVNode(\"li\", null, \"\")\n                                    ])\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_29, [\n                                    _createElementVNode(\"pre\", _hoisted_30, [\n                                        _createElementVNode(\"code\", _hoisted_31, _toDisplayString(generatedCode.value), 1 /* TEXT */)\n                                    ])\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    style: { \"width\": \"100%\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px\", \"border-radius\": \"8px\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"8px\" },\n                                    onClick: copyCode\n                                }, [\n                                    _cache[49] || (_cache[49] = _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(copyButtonText.value), 1 /* TEXT */)\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GreetingsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GreetingsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GreetingsTab.vue?vue&type=style&index=0&id=3b4dcffa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3b4dcffa\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vShow as _vShow, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n    class: \"help-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { style: { \"padding\": \"0 10px 20px 10px\" } };\nconst _hoisted_3 = { style: { \"padding\": \"0 10px 20px 10px\" } };\nimport { ref } from 'vue';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HelpTab',\n    setup(__props) {\n        const expandedSections = ref({\n            usage: false,\n            changelog: false,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _cache[10] || (_cache[10] = _createStaticVNode(\"<div style=\\\"padding:20px 28px;background:linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );backdrop-filter:blur(12px);border-radius:14px;margin-bottom:20px;border:1px solid rgba(255, 255, 255, 0.06);box-shadow:0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);text-align:center;\\\" data-v-ae7cd18e><div style=\\\"font-size:48px;margin-bottom:10px;\\\" data-v-ae7cd18e></div><h2 style=\\\"margin:0 0 10px 0;color:#4a9eff;font-size:24px;font-weight:600;\\\" data-v-ae7cd18e>mzrodyu</h2><div style=\\\"color:#888;font-size:14px;margin-bottom:15px;\\\" data-v-ae7cd18e> v1.33</div><!--  --><div style=\\\"margin-top:20px;padding:15px 20px;background:rgba(220, 53, 69, 0.1);border:1px solid rgba(220, 53, 69, 0.3);border-radius:8px;text-align:left;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:8px;margin-bottom:10px;\\\" data-v-ae7cd18e><i class=\\\"fa-solid fa-shield-halved\\\" style=\\\"color:#dc3545;font-size:16px;\\\" data-v-ae7cd18e></i><span style=\\\"color:#dc3545;font-weight:600;font-size:14px;\\\" data-v-ae7cd18e></span></div><div style=\\\"color:#e0e0e0;font-size:13px;line-height:1.6;\\\" data-v-ae7cd18e><div style=\\\"margin-bottom:5px;\\\" data-v-ae7cd18e> <strong style=\\\"color:#ffc107;\\\" data-v-ae7cd18e>/</strong></div><div style=\\\"margin-bottom:5px;\\\" data-v-ae7cd18e> <strong style=\\\"color:#dc3545;\\\" data-v-ae7cd18e></strong></div><div style=\\\"margin-bottom:5px;\\\" data-v-ae7cd18e> </div><div data-v-ae7cd18e> <strong style=\\\"color:#dc3545;\\\" data-v-ae7cd18e></strong></div></div></div></div>\", 1)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                    onClick: _cache[0] || (_cache[0] = ($event) => (expandedSections.value.usage = !expandedSections.value.usage)),\n                    onMouseenter: _cache[1] || (_cache[1] = ($event) => {\n                        $event.currentTarget.style.background =\n                            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                        $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                        $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                    }),\n                    onMouseleave: _cache[2] || (_cache[2] = ($event) => {\n                        $event.currentTarget.style.background =\n                            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                        $event.currentTarget.style.transform = 'none';\n                        $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                    })\n                }, [\n                    _cache[6] || (_cache[6] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-book-open\",\n                            style: { \"color\": \"#4a9eff\", \"font-size\": \"18px\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"i\", {\n                        class: _normalizeClass([expandedSections.value.usage ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                        style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                    }, null, 2 /* CLASS */)\n                ], 32 /* NEED_HYDRATION */),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_2, [...(_cache[7] || (_cache[7] = [\n                        _createStaticVNode(\"<div style=\\\"background:#2a2a2a;border:1px solid #3a3a3a;border-radius:8px;padding:20px;color:#e0e0e0;line-height:1.8;\\\" data-v-ae7cd18e><h4 style=\\\"color:#4a9eff;margin-top:0;margin-bottom:15px;font-size:16px;\\\" data-v-ae7cd18e> </h4><ul style=\\\"margin:5px 0;padding-left:20px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e><strong data-v-ae7cd18e></strong>/</li><li data-v-ae7cd18e><strong data-v-ae7cd18e></strong> AI </li><li data-v-ae7cd18e><strong data-v-ae7cd18e></strong> JSON </li><li data-v-ae7cd18e><strong data-v-ae7cd18e>MVU Beta</strong>$meta </li><li data-v-ae7cd18e><strong data-v-ae7cd18e></strong></li></ul><h4 style=\\\"color:#4a9eff;margin-top:25px;margin-bottom:15px;font-size:16px;\\\" data-v-ae7cd18e> </h4><div style=\\\"margin-bottom:15px;padding:12px 15px;background:rgba(220, 53, 69, 0.1);border-left:3px solid #dc3545;border-radius:4px;\\\" data-v-ae7cd18e><div style=\\\"color:#dc3545;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> API </div><div style=\\\"font-size:13px;color:#e0e0e0;line-height:1.6;\\\" data-v-ae7cd18e><div style=\\\"margin-bottom:8px;\\\" data-v-ae7cd18e><strong data-v-ae7cd18e></strong><ul style=\\\"margin:5px 0;padding-left:20px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e><code data-v-ae7cd18e>https://api.openai.com</code>   <code data-v-ae7cd18e>/v1</code></li><li data-v-ae7cd18e><code data-v-ae7cd18e>https://api.openai.com/v1</code>  </li><li data-v-ae7cd18e><code data-v-ae7cd18e>https://your-proxy.com/v1/chat/completions</code>  </li></ul></div><div style=\\\"margin-bottom:5px;\\\" data-v-ae7cd18e><strong data-v-ae7cd18e>OpenAI </strong><code style=\\\"background:rgba(220, 53, 69, 0.2);padding:2px 6px;border-radius:4px;\\\" data-v-ae7cd18e>https://api.openai.com</code></div><div data-v-ae7cd18e><strong data-v-ae7cd18e>Gemini AI Studio</strong><code style=\\\"background:rgba(220, 53, 69, 0.2);padding:2px 6px;border-radius:4px;\\\" data-v-ae7cd18e>https://generativelanguage.googleapis.com/v1beta/openai/</code></div></div></div><ul style=\\\"margin:5px 0;padding-left:20px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e><strong data-v-ae7cd18e></strong>      </li><li data-v-ae7cd18e><strong data-v-ae7cd18e></strong>&quot;&quot; API</li><li data-v-ae7cd18e><strong data-v-ae7cd18e></strong> 20-30 </li></ul></div>\", 1)\n                    ]))], 512 /* NEED_PATCH */), [\n                    [_vShow, expandedSections.value.usage]\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                    onClick: _cache[3] || (_cache[3] = ($event) => (expandedSections.value.changelog = !expandedSections.value.changelog)),\n                    onMouseenter: _cache[4] || (_cache[4] = ($event) => {\n                        $event.currentTarget.style.background =\n                            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                        $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                        $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                    }),\n                    onMouseleave: _cache[5] || (_cache[5] = ($event) => {\n                        $event.currentTarget.style.background =\n                            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                        $event.currentTarget.style.transform = 'none';\n                        $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                    })\n                }, [\n                    _cache[8] || (_cache[8] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-clock-rotate-left\",\n                            style: { \"color\": \"#28a745\", \"font-size\": \"18px\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"i\", {\n                        class: _normalizeClass([expandedSections.value.changelog ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                        style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                    }, null, 2 /* CLASS */)\n                ], 32 /* NEED_HYDRATION */),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_3, [...(_cache[9] || (_cache[9] = [\n                        _createStaticVNode(\"<div style=\\\"background:#2a2a2a;border:1px solid #3a3a3a;border-radius:8px;padding:20px;color:#e0e0e0;line-height:1.8;\\\" data-v-ae7cd18e><!-- v1.33 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:linear-gradient(135deg, #10b981 0%, #059669 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.33</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-11-06</span></div><ul class=\\\"update-list\\\" data-v-ae7cd18e><li class=\\\"update-item\\\" data-v-ae7cd18e></li><li class=\\\"update-item\\\" data-v-ae7cd18e></li><li class=\\\"update-item\\\" data-v-ae7cd18e></li><li class=\\\"update-item\\\" data-v-ae7cd18e>AI </li><li class=\\\"update-item\\\" data-v-ae7cd18e>AI </li><li class=\\\"update-item\\\" data-v-ae7cd18e> AI AIHTML</li><li class=\\\"update-item\\\" data-v-ae7cd18e></li><li class=\\\"update-item\\\" data-v-ae7cd18e> STScript JSON </li><li class=\\\"update-item\\\" data-v-ae7cd18e></li></ul></div><!-- v1.32 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:linear-gradient(135deg, #10b981 0%, #059669 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.32</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-11-06</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#6366f1;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e></li></ul></div></div><!-- v1.31 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:linear-gradient(135deg, #64748b 0%, #475569 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.31</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-11-05</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#10b981;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e>AI </li><li data-v-ae7cd18e> AI  XML </li></ul></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#6366f1;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e></li><li data-v-ae7cd18e> AI  API </li></ul></div></div><!-- v1.27 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:linear-gradient(135deg, #64748b 0%, #475569 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.27</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-11-05</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#10b981;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e> MVU Beta $meta </li><li data-v-ae7cd18e> JSON </li><li data-v-ae7cd18e> ABO </li></ul></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#6366f1;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e> AI  max_tokens  temperature</li><li data-v-ae7cd18e>MVU Beta </li></ul></div></div><!-- v1.26 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:linear-gradient(135deg, #64748b 0%, #475569 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.26</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-11-02</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#10b981;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e></li></ul></div></div><!-- v1.23 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:linear-gradient(135deg, #10b981 0%, #059669 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.23</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-11-02</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#10b981;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e> AI </li><li data-v-ae7cd18e> 50 </li><li data-v-ae7cd18e></li></ul></div></div><!-- v1.15 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.15</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-10-31</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#28a745;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e> AI </li><li data-v-ae7cd18e></li><li data-v-ae7cd18e> AI </li></ul></div></div><!-- v1.2 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:linear-gradient(135deg, #a855f7 0%, #9333ea 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.2</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-10-30</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#28a745;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e>AI </li><li data-v-ae7cd18e></li></ul></div></div><!-- v1.05 --><div style=\\\"margin-bottom:25px;\\\" data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:#4a9eff;color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.05</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-10-30</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-ae7cd18e><div style=\\\"color:#28a745;font-weight:600;margin-bottom:8px;\\\" data-v-ae7cd18e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e></li></ul></div></div><!-- v1.00 --><div data-v-ae7cd18e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-ae7cd18e><span style=\\\"background:#888;color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-ae7cd18e>v1.00</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-ae7cd18e>2025-10-29</span></div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-ae7cd18e><li data-v-ae7cd18e> </li><li data-v-ae7cd18e>//</li></ul></div></div>\", 1)\n                    ]))], 512 /* NEED_PATCH */), [\n                    [_vShow, expandedSections.value.changelog]\n                ]),\n                _createCommentVNode(\"  \"),\n                _cache[11] || (_cache[11] = _createStaticVNode(\"<div style=\\\"padding:15px 20px;background:rgba(30, 30, 30, 0.5);border:1px solid #3a3a3a;border-radius:8px;text-align:center;color:#888;font-size:13px;\\\" data-v-ae7cd18e><div style=\\\"margin-bottom:8px;\\\" data-v-ae7cd18e>Made with <span style=\\\"color:#dc3545;\\\" data-v-ae7cd18e></span> by mzrodyu</div><div style=\\\"font-size:12px;\\\" data-v-ae7cd18e>  <a href=\\\"https://github.com/SillyTavern/SillyTavern\\\" target=\\\"_blank\\\" style=\\\"color:#4a9eff;text-decoration:none;\\\" data-v-ae7cd18e>SillyTavern</a>  <a href=\\\"https://n0vi028.github.io/JS-Slash-Runner-Doc/\\\" target=\\\"_blank\\\" style=\\\"color:#4a9eff;text-decoration:none;\\\" data-v-ae7cd18e>Tavern Helper</a></div></div>\", 1))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HelpTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HelpTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HelpTab.vue?vue&type=style&index=0&id=ae7cd18e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ae7cd18e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, createStaticVNode as _createStaticVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n    class: \"tools-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { class: \"tool-section\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_4 = { style: { \"background\": \"linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(118, 75, 162, 0.08))\", \"border\": \"1px solid rgba(102, 126, 234, 0.3)\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_5 = {\n    class: \"form-group\",\n    style: { \"margin\": \"0 0 12px 0\" }\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = { style: { \"position\": \"relative\", \"z-index\": \"1\" } };\nconst _hoisted_8 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_9 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_10 = {\n    key: 0,\n    class: \"output-section\"\n};\nconst _hoisted_11 = { class: \"code-output\" };\nconst _hoisted_12 = { style: { \"margin-top\": \"15px\", \"padding\": \"12px\", \"background\": \"rgba(74, 158, 255, 0.05)\", \"border\": \"1px solid rgba(74, 158, 255, 0.2)\", \"border-radius\": \"8px\" } };\nconst _hoisted_13 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"flex-wrap\": \"wrap\" } };\nconst _hoisted_14 = { class: \"tool-section\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_16 = { style: { \"background\": \"linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(245, 158, 11, 0.08))\", \"border\": \"1px solid rgba(251, 191, 36, 0.3)\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_17 = {\n    class: \"form-group\",\n    style: { \"margin\": \"0 0 12px 0\" }\n};\nconst _hoisted_18 = [\"disabled\"];\nconst _hoisted_19 = { style: { \"position\": \"relative\", \"z-index\": \"1\" } };\nconst _hoisted_20 = {\n    key: 0,\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_21 = {\n    key: 1,\n    class: \"output-section\"\n};\nconst _hoisted_22 = { class: \"code-output\" };\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { getScriptIdSafe } from '../utils';\nimport AIModifyDialog from './AIModifyDialog.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MvuBetaTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        const expanded = ref({\n            structure: true,\n            prompt: false,\n        });\n        function toggleExpanded(key) {\n            expanded.value[key] = !expanded.value[key];\n        }\n        // AI\n        const aiStructurePrompt = ref('');\n        const isGeneratingAI = ref(false);\n        const aiPromptDescription = ref('');\n        const isGeneratingPrompt = ref(false);\n        // \n        const originalStructurePrompt = ref('');\n        const originalPromptDescription = ref('');\n        // \n        const showStructureModifyDialog = ref(false);\n        const isModifyingStructure = ref(false);\n        const showPromptModifyDialog = ref(false);\n        const isModifyingPrompt = ref(false);\n        // \n        const varName = ref('');\n        const subFields = ref('');\n        const generatedStructure = ref('');\n        const variableCategories = ref('');\n        const generatedPrompt = ref('');\n        function copyToClipboard(text) {\n            navigator.clipboard.writeText(text).then(() => {\n                window.toastr.success('');\n            });\n        }\n        function generateStructure() {\n            if (!varName.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            const result = {\n                $meta: {\n                    extensible: false,\n                    strictSet: true,\n                },\n            };\n            result[varName.value] = parseSubFields();\n            generatedStructure.value = JSON.stringify(result, null, 2);\n        }\n        function parseSubFields() {\n            const lines = subFields.value.split('\\n').filter(l => l.trim());\n            const obj = {};\n            lines.forEach(line => {\n                const parts = line.split(':').map(s => s.trim());\n                const name = parts[0];\n                const type = parts[1] || 'string';\n                const desc = parts[2] || '...';\n                if (!name)\n                    return;\n                if (type === 'number') {\n                    obj[name] = [0, desc];\n                }\n                else if (type === 'string') {\n                    obj[name] = ['', desc];\n                }\n                else if (type === 'array') {\n                    obj[name] = [[], desc];\n                }\n                else if (type === 'object') {\n                    obj[name] = [{}, desc];\n                }\n                else {\n                    obj[name] = [null, desc];\n                }\n            });\n            return obj;\n        }\n        function copyGenerated() {\n            copyToClipboard(generatedStructure.value);\n        }\n        // AI\n        async function handleAIGenerateStructure() {\n            if (!aiStructurePrompt.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                window.toastr.error(' API  API Key');\n                return;\n            }\n            // \n            originalStructurePrompt.value = aiStructurePrompt.value;\n            isGeneratingAI.value = true;\n            try {\n                const systemPrompt = ` MVU Beta  [InitVar] JSON\r\n\r\n\r\n1.  \"stat_data\" \r\n2. : [, \"\"]\r\n3. $meta \r\n4. \r\n5. 20\r\n\r\n\r\n{\r\n  \"$meta\": {\"extensible\": false, \"strictSet\": true},\r\n  \"\": {\r\n    \"\": [, \"\"]\r\n  }\r\n}\r\n\r\n JSON`;\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: `${aiStructurePrompt.value}\\n\\n [InitVar] JSON` },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 4000,\n                    }),\n                });\n                // \n                const responseText = await response.text();\n                if (!response.ok) {\n                    // \n                    let errorMessage = `API : ${response.status}`;\n                    try {\n                        const errorData = JSON.parse(responseText);\n                        if (errorData.error) {\n                            errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\n                        }\n                        else if (errorData.message) {\n                            errorMessage = `${errorMessage} - ${errorData.message}`;\n                        }\n                        else {\n                            errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\n                        }\n                    }\n                    catch (e) {\n                        errorMessage = `${errorMessage} - ${responseText.slice(0, 200)}`;\n                    }\n                    console.error('API :', errorMessage);\n                    console.error(' URL:', settings.value.api_endpoint);\n                    console.error(':', JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\n                            { role: 'user', content: `${aiStructurePrompt.value.substring(0, 100)}...` },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 4000,\n                    }, null, 2));\n                    throw new Error(errorMessage);\n                }\n                // \n                const data = JSON.parse(responseText);\n                // \n                let result = '';\n                if (data.choices && data.choices[0] && data.choices[0].message) {\n                    result = data.choices[0].message.content || '';\n                }\n                else if (data.data && data.data.choices && data.data.choices[0]) {\n                    //  API  data.data.choices \n                    result = data.data.choices[0].message?.content || '';\n                }\n                else if (data.content) {\n                    result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\n                }\n                console.log('AI :', result);\n                //  JSON\n                let jsonText = result;\n                // \n                jsonText = jsonText.replace(/```json\\s*/gi, '').replace(/```\\s*$/g, '');\n                //  JSON \n                const jsonMatch = jsonText.match(/\\{[\\s\\S]*$/);\n                if (!jsonMatch) {\n                    throw new Error(' JSON ');\n                }\n                jsonText = jsonMatch[0];\n                //  JSON\n                let bracketCount = 0;\n                let inString = false;\n                let escapeNext = false;\n                let lastValidPos = jsonText.length;\n                for (let i = 0; i < jsonText.length; i++) {\n                    const char = jsonText[i];\n                    if (escapeNext) {\n                        escapeNext = false;\n                        continue;\n                    }\n                    if (char === '\\\\') {\n                        escapeNext = true;\n                        continue;\n                    }\n                    if (char === '\"' && !inString) {\n                        inString = true;\n                        continue;\n                    }\n                    else if (char === '\"' && inString) {\n                        inString = false;\n                        continue;\n                    }\n                    if (inString)\n                        continue;\n                    if (char === '{')\n                        bracketCount++;\n                    else if (char === '}')\n                        bracketCount--;\n                    if (bracketCount === 0) {\n                        lastValidPos = i + 1;\n                        break;\n                    }\n                }\n                jsonText = jsonText.substring(0, lastValidPos);\n                // \n                if (bracketCount > 0) {\n                    console.warn(`JSON  ${bracketCount} ...`);\n                    jsonText += '}'.repeat(bracketCount);\n                }\n                //  JSON\n                // \n                jsonText = jsonText.replace(/,(\\s*[}\\]])/g, '$1');\n                // \n                jsonText = jsonText.replace(/\\/\\/[^\\n]*/g, '');\n                jsonText = jsonText.replace(/\\/\\*[\\s\\S]*?\\*\\//g, '');\n                let parsed;\n                try {\n                    parsed = JSON.parse(jsonText);\n                }\n                catch (e) {\n                    console.error('JSON :', jsonText);\n                    throw new Error(`JSON : ${e.message} AI  JSON`);\n                }\n                const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\n                varName.value = varNameParsed;\n                const varData = parsed[varNameParsed] || {};\n                const fields = [];\n                for (const key in varData) {\n                    if (key === '$meta')\n                        continue;\n                    const value = varData[key];\n                    if (Array.isArray(value) && value.length === 2) {\n                        const val = value[0];\n                        const type = typeof val === 'number'\n                            ? 'number'\n                            : typeof val === 'string'\n                                ? 'string'\n                                : Array.isArray(val)\n                                    ? 'array'\n                                    : 'object';\n                        const desc = value[1] || '...';\n                        fields.push(`${key}:${type}:${desc}`);\n                    }\n                }\n                subFields.value = fields.join('\\n');\n                generatedStructure.value = JSON.stringify(parsed, null, 2);\n                window.toastr.success('AI ');\n            }\n            catch (error) {\n                console.error('AI:', error);\n                window.toastr.error(`AI: ${error.message}`);\n            }\n            finally {\n                isGeneratingAI.value = false;\n            }\n        }\n        function autoGeneratePrompt() {\n            if (!generatedStructure.value) {\n                window.toastr.error(' [InitVar] ');\n                return;\n            }\n            try {\n                const structure = JSON.parse(generatedStructure.value);\n                const varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\n                const varData = structure[varNameParsed] || {};\n                let fieldCount = 0;\n                for (const key in varData) {\n                    if (key === '$meta')\n                        continue;\n                    fieldCount++;\n                }\n                variableCategories.value = `${varNameParsed} - ${fieldCount} fields`;\n                expanded.value.prompt = true;\n                generatePrompt();\n                window.toastr.success(' COT ');\n                setTimeout(() => {\n                    const promptSection = document.querySelector('.tool-section:nth-child(2)');\n                    promptSection?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n                }, 100);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('');\n            }\n        }\n        function generatePrompt() {\n            const categories = variableCategories.value.trim() || ' - X fields';\n            const promptTemplate = `<%_ setLocalVar('initialized_lorebooks.-YourLorebook[0]', true); _%>\r\n\r\n\r\n\r\n\r\n\r\n<status_current_variables>\r\n{{get_message_variable::stat_data}}\r\n</status_current_variables>\r\n\r\n\r\n\r\nrule:\r\n  description:\r\n    - Output update analysis at the end of response\r\n    - Variable updates are omitted in context but you must still add them\r\n    - **CRITICAL**: For MVU format [value, description], ALWAYS use [0] suffix to access the value part\r\n    - 4 commands available: \\\\\\`_.set\\\\\\` (2-3 args), \\\\\\`_.insert\\\\\\` (2-3 args), \\\\\\`_.remove\\\\\\` (1-2 args), \\\\\\`_.add\\\\\\` (2 args)\r\n    - **RECOMMENDED**: Use \\\\\\`_.insert\\\\\\` instead of \\\\\\`_.assign\\\\\\`\r\n    - strictSet enabled: [0] suffix is mandatory for all value access\r\n\r\n  command_usage:\r\n    - \\\\\\`_.set('path[0]', old?, new);//reason\\\\\\` - Replace value\r\n    - \\\\\\`_.add('path[0]', delta);//reason\\\\\\` - Add/subtract numbers only\r\n    - \\\\\\`_.insert('path[0]', value);//reason\\\\\\` - Add to array end\r\n    - \\\\\\`_.insert('path[0]', index, value);//reason\\\\\\` - Insert to array at position\r\n    - \\\\\\`_.insert('path', key, value);//reason\\\\\\` - Add key-value to object\r\n    - \\\\\\`_.remove('path[0]', value);//reason\\\\\\` - Remove from array/object\r\n\r\n  analysis:\r\n    You MUST follow this Chain-of-Thought (COT) analysis process step by step:\r\n\r\n    **STEP 1: Scene Analysis (50 words max, IN ENGLISH)**\r\n    - Identify current scene/stage/phase\r\n    - Describe what happened\r\n    - Determine what changes occurred (time/location/status/progress)\r\n\r\n    **STEP 2: Time & Key Status Check**\r\n    - Extract current time/status from story context\r\n    - Read key variables from <status_current_variables>\r\n    - Calculate changes\r\n    - Decision: What needs to be updated?\r\n\r\n    **STEP 3: Systematic Variable Review (check EVERY variable category)**\r\n    Go through each variable category systematically and mark Y or N:\r\n\r\n    ${categories}:\r\n      - 1[0]: [Y/N] - explain\r\n      - 2[0]: [Y/N] - explain\r\n\r\n    **STEP 4: Command Selection**\r\n    For each variable marked Y, determine which command to use\r\n\r\n    **STEP 5: Analyze Other Variable Systems**\r\n    - stat_data detailed COT: COMPLETED\r\n    - Other variable groups? [YES/NO]\r\n\r\n    **STEP 6: Final Validation Checklist**\r\n    - All [0] suffixes present? [YES/NO]\r\n    - All Y variables have corresponding commands? [YES/NO]\r\n    - All commands have clear Chinese comments? [YES/NO]\r\n\r\n  format: |-\r\n    <UpdateVariable>\r\n        <ThinkingProcess>\r\n            **STEP 1: Scene Analysis**\r\n            [50 words]\r\n\r\n            **STEP 2: Time & Key Status Check**\r\n            - Current status: ...\r\n            - Stored variable[0]: ...\r\n            - Changes: ...\r\n            - Update decision: ...\r\n\r\n            **STEP 3: Variable Review (stat_data)**\r\n            [List categories with Y/N]\r\n\r\n            **STEP 4: Command Selection**\r\n            [For each Y variable, state which command]\r\n\r\n            **STEP 5: Other Systems**\r\n            - stat_data COT: COMPLETED\r\n            - Other groups? NO\r\n\r\n            **STEP 6: Final Check**\r\n            - [0] suffixes? YES\r\n            - All Y have commands? YES\r\n            - Chinese comments? YES\r\n        </ThinkingProcess>\r\n\r\n        _.set('path[0]', old?, new);//reason\r\n        _.add('path[0]', delta);//reason\r\n        _.insert('path[0]', value);//reason\r\n        _.remove('path[0]', value);//reason\r\n    </UpdateVariable>\r\n\r\n  example: |-\r\n    <UpdateVariable>\r\n        <ThinkingProcess>\r\n            **STEP 1: Scene Analysis**\r\n            User and character had conversation at library. User helped find a book. Time advanced from 10:00 to 10:30. Character's impression improved.\r\n\r\n            **STEP 2: Time & Key Status Check**\r\n            - Current time: 10:30\r\n            - Stored [0]: \"10:00\"\r\n            - Time passed: 30 minutes\r\n            - Update decision: Time, Favor\r\n\r\n            **STEP 3: Variable Review (stat_data)**\r\n             - 3 fields:\r\n              - [0]: Y - Time advanced\r\n              - [0]: N - Same day\r\n              - [0]: N - Still at library\r\n\r\n             - 1 field:\r\n              - [0]: Y - Positive interaction\r\n\r\n            **STEP 4: Command Selection**\r\n            - : use _.set\r\n            - : use _.add\r\n\r\n            **STEP 5: Other Systems**\r\n            - stat_data COT: COMPLETED\r\n            - Other groups? NO\r\n\r\n            **STEP 6: Final Check**\r\n            - [0] suffixes? YES\r\n            - All Y have commands? YES\r\n            - Chinese comments? YES\r\n        </ThinkingProcess>\r\n\r\n        _.set('[0]', '10:00', '10:30');//30\r\n        _.add('.[0]', 3);//\r\n    </UpdateVariable>\r\n\r\n  specific_rules:\r\n    -  _.set \r\n    - /\r\n    -  _.add \r\n    -  _.insert _.remove\r\n    - [0][0]\r\n    -  $__META_EXTENSIBLE__$  _.insert \r\n    -  _.insert('', , ) `;\n            generatedPrompt.value = promptTemplate;\n        }\n        function copyPrompt() {\n            copyToClipboard(generatedPrompt.value);\n        }\n        // AI\n        async function handleAIGeneratePrompt() {\n            if (!aiPromptDescription.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                window.toastr.error(' API  API Key');\n                return;\n            }\n            // \n            originalPromptDescription.value = aiPromptDescription.value;\n            isGeneratingPrompt.value = true;\n            try {\n                const systemPrompt = ` MVU Beta COT  6 \r\n\r\n## \r\n1.  {{get_message_variable::stat_data}}\r\n2.  _.insert  _.assign\r\n3.  [0] \r\n4. 6  COT \r\n\r\n EJS `;\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: `${aiPromptDescription.value}\\n\\n COT ` },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 3000,\n                    }),\n                });\n                // \n                const responseText2 = await response.text();\n                if (!response.ok) {\n                    // \n                    let errorMessage = `API : ${response.status}`;\n                    try {\n                        const errorData = JSON.parse(responseText2);\n                        if (errorData.error) {\n                            errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\n                        }\n                        else if (errorData.message) {\n                            errorMessage = `${errorMessage} - ${errorData.message}`;\n                        }\n                        else {\n                            errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\n                        }\n                    }\n                    catch (e) {\n                        errorMessage = `${errorMessage} - ${responseText2.slice(0, 200)}`;\n                    }\n                    console.error('API :', errorMessage);\n                    console.error(' URL:', settings.value.api_endpoint);\n                    console.error(':', JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\n                            { role: 'user', content: `${aiPromptDescription.value.substring(0, 100)}...` },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 3000,\n                    }, null, 2));\n                    throw new Error(errorMessage);\n                }\n                // \n                const data = JSON.parse(responseText2);\n                // \n                let result = '';\n                if (data.choices && data.choices[0] && data.choices[0].message) {\n                    result = data.choices[0].message.content || '';\n                }\n                else if (data.data && data.data.choices && data.data.choices[0]) {\n                    //  API  data.data.choices \n                    result = data.data.choices[0].message?.content || '';\n                }\n                else if (data.content) {\n                    result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\n                }\n                generatedPrompt.value = result.trim();\n                window.toastr.success('AI ');\n            }\n            catch (error) {\n                console.error('AI:', error);\n                window.toastr.error(`AI: ${error.message}`);\n            }\n            finally {\n                isGeneratingPrompt.value = false;\n            }\n        }\n        // AI \n        async function modifyStructureWithAI(modifyInstruction) {\n            if (!originalStructurePrompt.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifyingStructure.value = true;\n            try {\n                window.toastr.info('AI ...');\n                const systemPrompt = ` MVU Beta  [InitVar] JSON\r\n\r\n\r\n1.  \"stat_data\" \r\n2. : [, \"\"]\r\n3. $meta \r\n4. \r\n5. 20\r\n\r\n JSON`;\n                const userPrompt = `# \r\n${originalStructurePrompt.value}\r\n\r\n# \r\n${modifyInstruction}\r\n\r\n [InitVar] JSON`;\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 4000,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.status}`);\n                }\n                const data = await response.json();\n                let result = data.choices?.[0]?.message?.content || '';\n                //  JSON\n                let jsonText = result.replace(/```json\\s*/gi, '').replace(/```\\s*$/g, '');\n                const jsonMatch = jsonText.match(/\\{[\\s\\S]*$/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                // \n                jsonText = jsonText.replace(/,(\\s*[}\\]])/g, '$1');\n                const parsed = JSON.parse(jsonText);\n                const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\n                varName.value = varNameParsed;\n                const varData = parsed[varNameParsed] || {};\n                const fields = [];\n                for (const key in varData) {\n                    if (key === '$meta')\n                        continue;\n                    const value = varData[key];\n                    if (Array.isArray(value) && value.length === 2) {\n                        const val = value[0];\n                        const type = typeof val === 'number'\n                            ? 'number'\n                            : typeof val === 'string'\n                                ? 'string'\n                                : Array.isArray(val)\n                                    ? 'array'\n                                    : 'object';\n                        const desc = value[1] || '...';\n                        fields.push(`${key}:${type}:${desc}`);\n                    }\n                }\n                subFields.value = fields.join('\\n');\n                generatedStructure.value = JSON.stringify(parsed, null, 2);\n                // \n                originalStructurePrompt.value += `\\n\\n${modifyInstruction}`;\n                window.toastr.success(' AI ');\n                showStructureModifyDialog.value = false;\n            }\n            catch (error) {\n                console.error('AI :', error);\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingStructure.value = false;\n            }\n        }\n        // AI \n        async function modifyPromptWithAI(modifyInstruction) {\n            if (!originalPromptDescription.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifyingPrompt.value = true;\n            try {\n                window.toastr.info('AI ...');\n                const systemPrompt = ` MVU Beta COT  6 \r\n\r\n## \r\n1.  {{get_message_variable::stat_data}}\r\n2.  _.insert  _.assign\r\n3.  [0] \r\n4. 6  COT \r\n\r\n EJS `;\n                const userPrompt = `# \r\n${originalPromptDescription.value}\r\n\r\n# \r\n${modifyInstruction}\r\n\r\n COT `;\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 3000,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.status}`);\n                }\n                const data = await response.json();\n                let result = data.choices?.[0]?.message?.content || '';\n                generatedPrompt.value = result.trim();\n                // \n                originalPromptDescription.value += `\\n\\n${modifyInstruction}`;\n                window.toastr.success(' AI ');\n                showPromptModifyDialog.value = false;\n            }\n            catch (error) {\n                console.error('AI :', error);\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingPrompt.value = false;\n            }\n        }\n        function exportWorldbook() {\n            if (!generatedStructure.value) {\n                window.toastr.error(' [InitVar] ');\n                return;\n            }\n            if (!generatedPrompt.value) {\n                autoGeneratePrompt();\n            }\n            setTimeout(() => {\n                exportAsWorldbook();\n            }, 100);\n        }\n        function exportAsWorldbook() {\n            if (!generatedStructure.value || !generatedPrompt.value) {\n                window.toastr.error(' [InitVar]  COT ');\n                return;\n            }\n            let varNameParsed = 'myVar';\n            try {\n                const structure = JSON.parse(generatedStructure.value);\n                varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\n            }\n            catch (e) {\n                console.error(':', e);\n            }\n            const worldbookEntries = [\n                {\n                    uid: generateUID(),\n                    key: [],\n                    keysecondary: [],\n                    comment: '[InitVar]',\n                    content: generatedStructure.value,\n                    constant: false,\n                    vectorized: false,\n                    selective: true,\n                    selectiveLogic: 0,\n                    addMemo: false,\n                    order: 100,\n                    position: 0,\n                    disable: false,\n                    excludeRecursion: false,\n                    delayUntilRecursion: false,\n                    probability: 100,\n                    useProbability: true,\n                    depth: 4,\n                    group: '',\n                    groupOverride: false,\n                    groupWeight: 100,\n                    scanDepth: null,\n                    caseSensitive: null,\n                    matchWholeWords: null,\n                    useGroupScoring: false,\n                    automationId: '',\n                    role: 0,\n                    sticky: 0,\n                    cooldown: 0,\n                    delay: 0,\n                },\n                {\n                    uid: generateUID(),\n                    key: [],\n                    keysecondary: [],\n                    comment: '',\n                    content: generatedPrompt.value,\n                    constant: true,\n                    vectorized: false,\n                    selective: false,\n                    selectiveLogic: 0,\n                    addMemo: false,\n                    order: 100,\n                    position: 1,\n                    disable: false,\n                    excludeRecursion: false,\n                    delayUntilRecursion: false,\n                    probability: 100,\n                    useProbability: true,\n                    depth: 0,\n                    group: '',\n                    groupOverride: false,\n                    groupWeight: 100,\n                    scanDepth: null,\n                    caseSensitive: null,\n                    matchWholeWords: null,\n                    useGroupScoring: false,\n                    automationId: '',\n                    role: 0,\n                    sticky: 0,\n                    cooldown: 0,\n                    delay: 0,\n                },\n            ];\n            const jsonStr = JSON.stringify(worldbookEntries, null, 2);\n            const blob = new Blob([jsonStr], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `${varNameParsed}_MVU_worldbook.json`;\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            URL.revokeObjectURL(url);\n            window.toastr.success(`  JSON[InitVar] + `);\n        }\n        function generateUID() {\n            return Date.now() + Math.floor(Math.random() * 1000);\n        }\n        // ====================  ====================\n        // \n        function loadSavedData() {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id  MVU ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                const savedData = scriptVars.mvu_beta_config;\n                if (savedData) {\n                    if (savedData.varName)\n                        varName.value = savedData.varName;\n                    if (savedData.subFields)\n                        subFields.value = savedData.subFields;\n                    if (savedData.generatedStructure)\n                        generatedStructure.value = savedData.generatedStructure;\n                    if (savedData.variableCategories)\n                        variableCategories.value = savedData.variableCategories;\n                    if (savedData.generatedPrompt)\n                        generatedPrompt.value = savedData.generatedPrompt;\n                    console.log('  MVU Beta ');\n                }\n            }\n            catch (error) {\n                console.error(' MVU Beta :', error);\n            }\n        }\n        // \n        function saveData() {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id  MVU ');\n                    return;\n                }\n                insertOrAssignVariables({\n                    mvu_beta_config: {\n                        varName: varName.value,\n                        subFields: subFields.value,\n                        generatedStructure: generatedStructure.value,\n                        variableCategories: variableCategories.value,\n                        generatedPrompt: generatedPrompt.value,\n                    },\n                }, { type: 'script', script_id: scriptId });\n            }\n            catch (error) {\n                console.error(' MVU Beta :', error);\n            }\n        }\n        // \n        onMounted(() => {\n            loadSavedData();\n        });\n        // \n        let saveTimer = null;\n        watch([varName, subFields, generatedStructure, variableCategories, generatedPrompt], () => {\n            if (saveTimer)\n                clearTimeout(saveTimer);\n            saveTimer = window.setTimeout(() => {\n                saveData();\n            }, 1000); // 1\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"div\", {\n                            class: \"section-header\",\n                            style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\r\\n            135deg,\\r\\n            rgba(30, 30, 30, 0.95) 0%,\\r\\n            rgba(38, 38, 38, 0.9) 50%,\\r\\n            rgba(30, 30, 30, 0.95) 100%\\r\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\r\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\r\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: _cache[0] || (_cache[0] = ($event) => (toggleExpanded('structure'))),\n                            onMouseenter: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                            onMouseleave: _cache[2] || (_cache[2] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [\n                            _cache[41] || (_cache[41] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-database\",\n                                    style: { \"color\": \"#4a9eff\", \"font-size\": \"18px\" }\n                                }),\n                                _createTextVNode(\" [InitVar]  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(expanded.value.structure ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                                style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                            }, null, 2 /* CLASS */)\n                        ], 32 /* NEED_HYDRATION */),\n                        (expanded.value.structure)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                                _cache[57] || (_cache[57] = _createStaticVNode(\"<div class=\\\"tool-instructions\\\" style=\\\"margin-bottom:15px;\\\" data-v-1cb40cd0><p style=\\\"margin:0 0 8px 0;color:#ccc;font-size:12px;\\\" data-v-1cb40cd0><i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right:6px;color:#17a2b8;\\\" data-v-1cb40cd0></i>  MVU Beta  <strong style=\\\"color:#4a9eff;\\\" data-v-1cb40cd0>[InitVar]</strong>  </p><p style=\\\"margin:0;color:#ffa500;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #ffa500;\\\" data-v-1cb40cd0>  InitVar JSON <strong data-v-1cb40cd0> &quot;stat_data&quot; </strong> </p></div>\", 1)),\n                                _createCommentVNode(\" AI \"),\n                                _createElementVNode(\"div\", _hoisted_4, [\n                                    _cache[46] || (_cache[46] = _createElementVNode(\"h4\", { style: { \"color\": \"#667eea\", \"font-size\": \"14px\", \"margin\": \"0 0 12px 0\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }),\n                                        _createTextVNode(\" AI  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_5, [\n                                        _cache[42] || (_cache[42] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((aiStructurePrompt).value = $event)),\n                                            placeholder: \"1-30100\",\n                                            rows: \"4\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"line-height\": \"1.5\", \"transition\": \"all 0.2s ease\" },\n                                            onFocus: _cache[4] || (_cache[4] = (e) => (e.target.style.borderColor = '#667eea')),\n                                            onBlur: _cache[5] || (_cache[5] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [_vModelText, aiStructurePrompt.value]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"ai-generate-btn\",\n                                        disabled: isGeneratingAI.value || !aiStructurePrompt.value.trim(),\n                                        style: _normalizeStyle([{ \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" }, {\n                                                opacity: isGeneratingAI.value || !aiStructurePrompt.value.trim() ? 0.6 : 1,\n                                                cursor: isGeneratingAI.value || !aiStructurePrompt.value.trim() ? 'not-allowed' : 'pointer',\n                                            }]),\n                                        onClick: handleAIGenerateStructure,\n                                        onMouseenter: _cache[6] || (_cache[6] =\n                                            (e) => {\n                                                if (!isGeneratingAI.value && aiStructurePrompt.value.trim()) {\n                                                    e.currentTarget.style.transform = 'translateY(-2px)';\n                                                    e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n                                                }\n                                            }),\n                                        onMouseleave: _cache[7] || (_cache[7] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n                                            })\n                                    }, [\n                                        _cache[43] || (_cache[43] = _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[44] || (_cache[44] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-wand-magic-sparkles\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\", \"position\": \"relative\", \"z-index\": \"1\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(isGeneratingAI.value ? 'AI ...' : 'AI '), 1 /* TEXT */)\n                                    ], 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_6),\n                                    _createCommentVNode(\" AI  \"),\n                                    (generatedStructure.value && originalStructurePrompt.value)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            style: { \"margin-left\": \"12px\", \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))\", \"border\": \"1px solid rgba(251, 191, 36, 0.4)\", \"border-radius\": \"8px\", \"color\": \"#fbbf24\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 8px rgba(251, 191, 36, 0.2)\" },\n                                            onClick: _cache[8] || (_cache[8] = ($event) => (showStructureModifyDialog.value = true)),\n                                            onMouseenter: _cache[9] || (_cache[9] =\n                                                (e) => {\n                                                    e.currentTarget.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\n                                                    e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\n                                                    e.currentTarget.style.transform = 'translateY(-2px)';\n                                                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\n                                                }),\n                                            onMouseleave: _cache[10] || (_cache[10] =\n                                                (e) => {\n                                                    e.currentTarget.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\n                                                    e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\n                                                    e.currentTarget.style.transform = 'translateY(0)';\n                                                    e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\n                                                })\n                                        }, [...(_cache[45] || (_cache[45] = [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-edit\",\n                                                    style: { \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" AI  \", -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _cache[47] || (_cache[47] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin\": \"8px 0 0 0\" } }, \"  AI  $meta \", -1 /* CACHED */))\n                                ]),\n                                _cache[58] || (_cache[58] = _createElementVNode(\"div\", { style: { \"text-align\": \"center\", \"margin\": \"20px 0\", \"position\": \"relative\" } }, [\n                                    _createElementVNode(\"span\", { style: { \"background\": \"#1a1a1a\", \"padding\": \"0 12px\", \"color\": \"#666\", \"font-size\": \"12px\", \"position\": \"relative\", \"z-index\": \"1\" } }, \"\"),\n                                    _createElementVNode(\"div\", { style: { \"position\": \"absolute\", \"top\": \"50%\", \"left\": \"0\", \"right\": \"0\", \"height\": \"1px\", \"background\": \"rgba(255, 255, 255, 0.1)\", \"z-index\": \"0\" } })\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_8, [\n                                    _cache[48] || (_cache[48] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((varName).value = $event)),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"all 0.2s ease\" },\n                                        onFocus: _cache[12] || (_cache[12] = (e) => (e.target.style.borderColor = '#4a9eff')),\n                                        onBlur: _cache[13] || (_cache[13] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, varName.value]\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_9, [\n                                    _cache[49] || (_cache[49] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \" :: \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((subFields).value = $event)),\n                                        placeholder: \"\\n:number:[-30,100]\\n:string:\\n:array:\",\n                                        rows: \"5\",\n                                        style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"'Courier New', monospace\", \"line-height\": \"1.5\", \"transition\": \"all 0.2s ease\" },\n                                        onFocus: _cache[15] || (_cache[15] = (e) => (e.target.style.borderColor = '#4a9eff')),\n                                        onBlur: _cache[16] || (_cache[16] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, subFields.value]\n                                    ]),\n                                    _cache[50] || (_cache[50] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin\": \"6px 0 0 0\" } }, \" numberstringarrayobject\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-btn\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: generateStructure,\n                                    onMouseenter: _cache[17] || (_cache[17] =\n                                        (e) => {\n                                            e.currentTarget.style.transform = 'translateY(-2px)';\n                                            e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n                                        }),\n                                    onMouseleave: _cache[18] || (_cache[18] =\n                                        (e) => {\n                                            e.currentTarget.style.transform = 'translateY(0)';\n                                            e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n                                        })\n                                }, [...(_cache[51] || (_cache[51] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-magic\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\", \"position\": \"relative\", \"z-index\": \"1\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { style: { \"position\": \"relative\", \"z-index\": \"1\" } }, \" [InitVar] \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */),\n                                (generatedStructure.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                        _cache[56] || (_cache[56] = _createElementVNode(\"h4\", { style: { \"color\": \"#4a9eff\", \"font-size\": \"14px\", \"margin-bottom\": \"10px\" } }, \" [InitVar] \", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"pre\", null, _toDisplayString(generatedStructure.value), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-btn-abs\",\n                                                onClick: copyGenerated\n                                            }, [...(_cache[52] || (_cache[52] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _cache[55] || (_cache[55] = _createElementVNode(\"p\", { style: { \"margin\": \"0 0 10px 0\", \"color\": \"#4a9eff\", \"font-size\": \"12px\", \"font-weight\": \"600\" } }, [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-link\" }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_13, [\n                                                _createElementVNode(\"button\", {\n                                                    style: { \"flex\": \"1\", \"min-width\": \"140px\", \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.3))\", \"color\": \"#10b981\", \"border\": \"1px solid rgba(16, 185, 129, 0.4)\", \"border-radius\": \"6px\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                    onClick: autoGeneratePrompt,\n                                                    onMouseenter: _cache[19] || (_cache[19] =\n                                                        (e) => {\n                                                            e.currentTarget.style.transform = 'translateY(-1px)';\n                                                            e.currentTarget.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.3)';\n                                                        }),\n                                                    onMouseleave: _cache[20] || (_cache[20] =\n                                                        (e) => {\n                                                            e.currentTarget.style.transform = 'translateY(0)';\n                                                            e.currentTarget.style.boxShadow = 'none';\n                                                        })\n                                                }, [...(_cache[53] || (_cache[53] = [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-file-alt\" }, null, -1 /* CACHED */),\n                                                        _createTextVNode(\"  COT  \", -1 /* CACHED */)\n                                                    ]))], 32 /* NEED_HYDRATION */),\n                                                _createElementVNode(\"button\", {\n                                                    style: { \"flex\": \"1\", \"min-width\": \"140px\", \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.3))\", \"color\": \"#f59e0b\", \"border\": \"1px solid rgba(245, 158, 11, 0.4)\", \"border-radius\": \"6px\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                    onClick: exportWorldbook,\n                                                    onMouseenter: _cache[21] || (_cache[21] =\n                                                        (e) => {\n                                                            e.currentTarget.style.transform = 'translateY(-1px)';\n                                                            e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.3)';\n                                                        }),\n                                                    onMouseleave: _cache[22] || (_cache[22] =\n                                                        (e) => {\n                                                            e.currentTarget.style.transform = 'translateY(0)';\n                                                            e.currentTarget.style.boxShadow = 'none';\n                                                        })\n                                                }, [...(_cache[54] || (_cache[54] = [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-book\" }, null, -1 /* CACHED */),\n                                                        _createTextVNode(\"  JSON \", -1 /* CACHED */)\n                                                    ]))], 32 /* NEED_HYDRATION */)\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\" COT  \"),\n                    _createElementVNode(\"div\", _hoisted_14, [\n                        _createElementVNode(\"div\", {\n                            class: \"section-header\",\n                            style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\r\\n            135deg,\\r\\n            rgba(30, 30, 30, 0.95) 0%,\\r\\n            rgba(38, 38, 38, 0.9) 50%,\\r\\n            rgba(30, 30, 30, 0.95) 100%\\r\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\r\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\r\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: _cache[23] || (_cache[23] = ($event) => (toggleExpanded('prompt'))),\n                            onMouseenter: _cache[24] || (_cache[24] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                            onMouseleave: _cache[25] || (_cache[25] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [\n                            _cache[59] || (_cache[59] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-file-code\",\n                                    style: { \"color\": \"#fbbf24\", \"font-size\": \"18px\" }\n                                }),\n                                _createTextVNode(\" COT 6  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(expanded.value.prompt ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                                style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                            }, null, 2 /* CLASS */)\n                        ], 32 /* NEED_HYDRATION */),\n                        (expanded.value.prompt)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                _cache[71] || (_cache[71] = _createElementVNode(\"div\", {\n                                    class: \"tool-instructions\",\n                                    style: { \"margin-bottom\": \"15px\" }\n                                }, [\n                                    _createElementVNode(\"p\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#ccc\", \"font-size\": \"12px\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-info-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#17a2b8\" }\n                                        }),\n                                        _createTextVNode(\"  MVU Beta  \"),\n                                        _createElementVNode(\"strong\", { style: { \"color\": \"#fbbf24\" } }, \"COT\"),\n                                        _createTextVNode(\" 6  \")\n                                    ])\n                                ], -1 /* CACHED */)),\n                                _createCommentVNode(\" AI \"),\n                                _createElementVNode(\"div\", _hoisted_16, [\n                                    _cache[64] || (_cache[64] = _createElementVNode(\"h4\", { style: { \"color\": \"#fbbf24\", \"font-size\": \"14px\", \"margin\": \"0 0 12px 0\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }),\n                                        _createTextVNode(\" AI  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_17, [\n                                        _cache[60] || (_cache[60] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                            \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event) => ((aiPromptDescription).value = $event)),\n                                            placeholder: \" AI \",\n                                            rows: \"4\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"line-height\": \"1.5\", \"transition\": \"all 0.2s ease\" },\n                                            onFocus: _cache[27] || (_cache[27] = (e) => (e.target.style.borderColor = '#fbbf24')),\n                                            onBlur: _cache[28] || (_cache[28] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [_vModelText, aiPromptDescription.value]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"ai-generate-btn\",\n                                        disabled: isGeneratingPrompt.value || !aiPromptDescription.value.trim(),\n                                        style: _normalizeStyle([{ \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(251, 191, 36, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" }, {\n                                                opacity: isGeneratingPrompt.value || !aiPromptDescription.value.trim() ? 0.6 : 1,\n                                                cursor: isGeneratingPrompt.value || !aiPromptDescription.value.trim() ? 'not-allowed' : 'pointer',\n                                            }]),\n                                        onClick: handleAIGeneratePrompt,\n                                        onMouseenter: _cache[29] || (_cache[29] =\n                                            (e) => {\n                                                if (!isGeneratingPrompt.value && aiPromptDescription.value.trim()) {\n                                                    e.currentTarget.style.transform = 'translateY(-2px)';\n                                                    e.currentTarget.style.boxShadow = '0 6px 20px rgba(251, 191, 36, 0.4)';\n                                                }\n                                            }),\n                                        onMouseleave: _cache[30] || (_cache[30] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.boxShadow = '0 3px 12px rgba(251, 191, 36, 0.3)';\n                                            })\n                                    }, [\n                                        _cache[61] || (_cache[61] = _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[62] || (_cache[62] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-wand-magic-sparkles\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\", \"position\": \"relative\", \"z-index\": \"1\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_19, _toDisplayString(isGeneratingPrompt.value ? 'AI ...' : 'AI '), 1 /* TEXT */)\n                                    ], 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_18),\n                                    _createCommentVNode(\" AI  \"),\n                                    (generatedPrompt.value && originalPromptDescription.value)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            style: { \"margin-left\": \"12px\", \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))\", \"border\": \"1px solid rgba(251, 191, 36, 0.4)\", \"border-radius\": \"8px\", \"color\": \"#fbbf24\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 8px rgba(251, 191, 36, 0.2)\" },\n                                            onClick: _cache[31] || (_cache[31] = ($event) => (showPromptModifyDialog.value = true)),\n                                            onMouseenter: _cache[32] || (_cache[32] =\n                                                (e) => {\n                                                    e.currentTarget.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\n                                                    e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\n                                                    e.currentTarget.style.transform = 'translateY(-2px)';\n                                                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\n                                                }),\n                                            onMouseleave: _cache[33] || (_cache[33] =\n                                                (e) => {\n                                                    e.currentTarget.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\n                                                    e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\n                                                    e.currentTarget.style.transform = 'translateY(0)';\n                                                    e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\n                                                })\n                                        }, [...(_cache[63] || (_cache[63] = [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-edit\",\n                                                    style: { \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" AI  \", -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _cache[65] || (_cache[65] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin\": \"8px 0 0 0\" } }, \"  AI  6  COT  \", -1 /* CACHED */))\n                                ]),\n                                _cache[72] || (_cache[72] = _createElementVNode(\"div\", { style: { \"text-align\": \"center\", \"margin\": \"20px 0\", \"position\": \"relative\" } }, [\n                                    _createElementVNode(\"span\", { style: { \"background\": \"#1a1a1a\", \"padding\": \"0 12px\", \"color\": \"#666\", \"font-size\": \"12px\", \"position\": \"relative\", \"z-index\": \"1\" } }, \"\"),\n                                    _createElementVNode(\"div\", { style: { \"position\": \"absolute\", \"top\": \"50%\", \"left\": \"0\", \"right\": \"0\", \"height\": \"1px\", \"background\": \"rgba(255, 255, 255, 0.1)\", \"z-index\": \"0\" } })\n                                ], -1 /* CACHED */)),\n                                (generatedStructure.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                                        _cache[66] || (_cache[66] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  STEP 3 \", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                            \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event) => ((variableCategories).value = $event)),\n                                            placeholder: \"\\n - 3 fields\\n - 2 fields\\n - 1 field\",\n                                            rows: \"4\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"'Courier New', monospace\", \"line-height\": \"1.5\", \"transition\": \"all 0.2s ease\" },\n                                            onFocus: _cache[35] || (_cache[35] = (e) => (e.target.style.borderColor = '#fbbf24')),\n                                            onBlur: _cache[36] || (_cache[36] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [_vModelText, variableCategories.value]\n                                        ]),\n                                        _cache[67] || (_cache[67] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin\": \"6px 0 0 0\" } }, \" AI  STEP 3 \", -1 /* CACHED */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-btn\",\n                                    style: { \"margin-top\": \"10px\", \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: generatePrompt,\n                                    onMouseenter: _cache[37] || (_cache[37] =\n                                        (e) => {\n                                            e.currentTarget.style.transform = 'translateY(-2px)';\n                                            e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n                                        }),\n                                    onMouseleave: _cache[38] || (_cache[38] =\n                                        (e) => {\n                                            e.currentTarget.style.transform = 'translateY(0)';\n                                            e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n                                        })\n                                }, [...(_cache[68] || (_cache[68] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-magic\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\", \"position\": \"relative\", \"z-index\": \"1\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { style: { \"position\": \"relative\", \"z-index\": \"1\" } }, \" COT \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */),\n                                (generatedPrompt.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                        _cache[70] || (_cache[70] = _createElementVNode(\"h4\", { style: { \"color\": \"#fbbf24\", \"font-size\": \"14px\", \"margin-bottom\": \"10px\" } }, \" COT \", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_22, [\n                                            _createElementVNode(\"pre\", null, _toDisplayString(generatedPrompt.value), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-btn-abs\",\n                                                onClick: copyPrompt\n                                            }, [...(_cache[69] || (_cache[69] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]),\n                _createCommentVNode(\" AI  -  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showStructureModifyDialog.value,\n                    \"is-modifying\": isModifyingStructure.value,\n                    title: \"AI  [InitVar] \",\n                    description: \" AI  MVU \",\n                    examples: [\n                        ' number',\n                        '',\n                        '',\n                        '',\n                    ],\n                    onClose: _cache[39] || (_cache[39] = ($event) => (showStructureModifyDialog.value = false)),\n                    onConfirm: modifyStructureWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\" AI  -  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showPromptModifyDialog.value,\n                    \"is-modifying\": isModifyingPrompt.value,\n                    title: \"AI  COT \",\n                    description: \" AI \",\n                    examples: [\n                        ' STEP 2 ',\n                        '',\n                        '',\n                        ' STEP 3 ',\n                    ],\n                    onClose: _cache[40] || (_cache[40] = ($event) => (showPromptModifyDialog.value = false)),\n                    onConfirm: modifyPromptWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"])\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MvuBetaTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MvuBetaTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MvuBetaTab.vue?vue&type=style&index=0&id=1cb40cd0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1cb40cd0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"progress-overlay\",\n    style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.85)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"999999\", \"animation\": \"fadeIn 0.2s ease\" }\n};\nconst _hoisted_2 = {\n    class: \"progress-card\",\n    style: { \"background\": \"linear-gradient(145deg, #2a2a2a, #1e1e1e)\", \"border-radius\": \"16px\", \"padding\": \"35px\", \"width\": \"520px\", \"max-width\": \"90vw\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\", \"border\": \"1px solid #3a3a3a\", \"animation\": \"slideUp 0.3s ease\" }\n};\nconst _hoisted_3 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin-bottom\": \"24px\" } };\nconst _hoisted_4 = { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\" } };\nconst _hoisted_5 = {\n    class: \"progress-bar-container\",\n    style: { \"width\": \"100%\", \"height\": \"10px\", \"background\": \"rgba(30, 30, 30, 0.8)\", \"border-radius\": \"5px\", \"overflow\": \"hidden\", \"margin-bottom\": \"20px\", \"box-shadow\": \"inset 0 1px 3px rgba(0, 0, 0, 0.3)\" }\n};\nconst _hoisted_6 = {\n    class: \"current-stage\",\n    style: { \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"margin-bottom\": \"12px\", \"min-height\": \"20px\" }\n};\nconst _hoisted_7 = {\n    key: 0,\n    class: \"details-area\",\n    style: { \"max-height\": \"150px\", \"overflow-y\": \"auto\", \"background\": \"rgba(10, 10, 10, 0.5)\", \"border-radius\": \"8px\", \"padding\": \"12px\", \"margin-bottom\": \"16px\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"11px\", \"color\": \"#a0a0a0\", \"line-height\": \"1.6\" }\n};\nconst _hoisted_8 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_9 = {\n    class: \"progress-percent\",\n    style: { \"color\": \"#4a9eff\", \"font-size\": \"16px\", \"font-weight\": \"600\" }\n};\nconst _hoisted_10 = {\n    class: \"elapsed-time\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nimport { ref, watch, onUnmounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ProgressDialog',\n    props: {\n        show: { type: Boolean },\n        title: { default: 'AI ' },\n        initialMessage: { default: '...' },\n        cancellable: { type: Boolean, default: false }\n    },\n    emits: [\"cancel\"],\n    setup(__props, { expose: __expose }) {\n        const props = __props;\n        // \n        const progress = ref(0);\n        const currentMessage = ref(props.initialMessage);\n        const details = ref([]);\n        const startTime = ref(0);\n        const elapsedSeconds = ref(0);\n        let elapsedInterval = null;\n        // \n        watch(() => props.show, newVal => {\n            if (newVal) {\n                // \n                progress.value = 0;\n                currentMessage.value = props.initialMessage;\n                details.value = [];\n                startTime.value = Date.now();\n                elapsedSeconds.value = 0;\n                // \n                if (elapsedInterval) {\n                    clearInterval(elapsedInterval);\n                }\n                elapsedInterval = window.setInterval(() => {\n                    elapsedSeconds.value = Math.floor((Date.now() - startTime.value) / 1000);\n                }, 1000);\n            }\n            else {\n                // \n                if (elapsedInterval) {\n                    clearInterval(elapsedInterval);\n                    elapsedInterval = null;\n                }\n            }\n        });\n        onUnmounted(() => {\n            if (elapsedInterval) {\n                clearInterval(elapsedInterval);\n            }\n        });\n        // \n        function setProgress(percent) {\n            progress.value = Math.min(100, Math.max(0, percent));\n        }\n        function setMessage(message) {\n            currentMessage.value = message;\n        }\n        function addDetail(detail) {\n            details.value.push(detail);\n            // \n            setTimeout(() => {\n                const detailsArea = document.querySelector('.details-area');\n                if (detailsArea) {\n                    detailsArea.scrollTop = detailsArea.scrollHeight;\n                }\n            }, 50);\n        }\n        function clearDetails() {\n            details.value = [];\n        }\n        function complete() {\n            progress.value = 100;\n            currentMessage.value = '';\n        }\n        __expose({\n            setProgress,\n            setMessage,\n            addDetail,\n            clearDetails,\n            complete,\n        });\n        return (_ctx, _cache) => {\n            return (__props.show)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n                                class: \"spinner\",\n                                style: { \"width\": \"28px\", \"height\": \"28px\", \"border\": \"3px solid #3a3a3a\", \"border-top-color\": \"#4a9eff\", \"border-radius\": \"50%\", \"animation\": \"spin 0.8s linear infinite\" }\n                            }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"h3\", _hoisted_4, _toDisplayString(__props.title), 1 /* TEXT */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"div\", {\n                                class: \"progress-bar\",\n                                style: _normalizeStyle({\n                                    width: progress.value + '%',\n                                    height: '100%',\n                                    background: 'linear-gradient(90deg, #4a9eff 0%, #7c3aed 50%, #10b981 100%)',\n                                    transition: 'width 0.3s ease',\n                                    boxShadow: '0 0 10px rgba(74, 158, 255, 0.5)',\n                                })\n                            }, null, 4 /* STYLE */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_6, _toDisplayString(currentMessage.value), 1 /* TEXT */),\n                        _createCommentVNode(\"  \"),\n                        (details.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(details.value, (detail, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        style: { \"margin-bottom\": \"4px\" }\n                                    }, [\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"span\", { style: { \"color\": \"#4a9eff\" } }, \"\", -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(detail), 1 /* TEXT */)\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _createElementVNode(\"div\", _hoisted_9, _toDisplayString(Math.round(progress.value)) + \"% \", 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_10, \" : \" + _toDisplayString(elapsedSeconds.value) + \" \", 1 /* TEXT */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (__props.cancellable)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                style: { \"width\": \"100%\", \"margin-top\": \"20px\", \"padding\": \"10px\", \"background\": \"#3a3a3a\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onMouseenter: _cache[0] || (_cache[0] = (e) => (e.currentTarget.style.background = '#4a4a4a')),\n                                onMouseleave: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.background = '#3a3a3a')),\n                                onClick: _cache[2] || (_cache[2] = ($event) => (_ctx.$emit('cancel')))\n                            }, \"  \", 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ProgressDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProgressDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ProgressDialog.vue?vue&type=style&index=0&id=0fa52109&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0fa52109\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, vModelSelect as _vModelSelect, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"project-tab\" };\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 28px\", \"background\": \"#2a2a2a\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid #333\", \"box-shadow\": \"0 2px 8px rgba(0, 0, 0, 0.3)\" }\n};\nconst _hoisted_3 = {\n    class: \"project-action-buttons\",\n    style: { \"display\": \"flex\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"220px 1fr 650px\", \"gap\": \"20px\", \"min-height\": \"500px\" } };\nconst _hoisted_5 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_6 = {\n    key: 0,\n    style: { \"text-align\": \"center\", \"color\": \"#666\", \"font-size\": \"12px\", \"padding\": \"20px 10px\" }\n};\nconst _hoisted_7 = [\"onClick\", \"onMouseenter\", \"onMouseleave\"];\nconst _hoisted_8 = { style: { \"font-size\": \"13px\", \"flex\": \"1\" } };\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n    key: 1,\n    style: { \"margin-top\": \"20px\", \"border-top\": \"1px solid #3a3a3a\", \"padding-top\": \"15px\" }\n};\nconst _hoisted_11 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"10px\" } };\nconst _hoisted_12 = { style: { \"display\": \"flex\", \"gap\": \"5px\" } };\nconst _hoisted_13 = [\"onClick\", \"onMouseenter\", \"onMouseleave\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_16 = {\n    key: 0,\n    style: { \"flex\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"color\": \"#666\", \"font-size\": \"14px\" }\n};\nconst _hoisted_17 = {\n    key: 1,\n    style: { \"flex\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"color\": \"#666\", \"font-size\": \"14px\" }\n};\nconst _hoisted_18 = {\n    key: 2,\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"height\": \"100%\" }\n};\nconst _hoisted_19 = { style: { \"margin-bottom\": \"10px\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_20 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } };\nconst _hoisted_21 = { style: { \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"500\" } };\nconst _hoisted_22 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } };\nconst _hoisted_23 = [\"placeholder\"];\nconst _hoisted_24 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_25 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"15px\" } };\nconst _hoisted_26 = { style: { \"display\": \"flex\", \"gap\": \"8px\" } };\nconst _hoisted_27 = { style: { \"flex\": \"1\", \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"overflow\": \"auto\", \"position\": \"relative\", \"min-height\": \"400px\" } };\nconst _hoisted_28 = [\"srcdoc\"];\nconst _hoisted_29 = {\n    key: 1,\n    style: { \"position\": \"absolute\", \"top\": \"50%\", \"left\": \"50%\", \"transform\": \"translate(-50%, -50%)\", \"color\": \"#666\", \"font-size\": \"12px\", \"text-align\": \"center\" }\n};\nconst _hoisted_30 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"25px\", \"width\": \"90%\", \"max-width\": \"600px\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_31 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_32 = { style: { \"margin-top\": \"12px\" } };\nconst _hoisted_33 = { style: { \"display\": \"flex\", \"flex-wrap\": \"wrap\", \"gap\": \"8px\" } };\nconst _hoisted_34 = [\"onClick\"];\nconst _hoisted_35 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"margin-bottom\": \"15px\", \"padding\": \"10px\", \"background\": \"#252525\", \"border-radius\": \"6px\" } };\nconst _hoisted_36 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"cursor\": \"pointer\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"user-select\": \"none\" } };\nconst _hoisted_37 = {\n    key: 0,\n    style: { \"margin-bottom\": \"15px\", \"padding\": \"15px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"max-height\": \"200px\", \"overflow-y\": \"auto\", \"font-family\": \"'Consolas', monospace\", \"font-size\": \"12px\", \"color\": \"#e0e0e0\", \"line-height\": \"1.5\", \"white-space\": \"pre-wrap\" }\n};\nconst _hoisted_38 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_39 = [\"disabled\"];\nconst _hoisted_40 = {\n    key: 0,\n    class: \"fa-solid fa-wand-magic-sparkles\",\n    style: { \"margin-right\": \"6px\" }\n};\nconst _hoisted_41 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\",\n    style: { \"margin-right\": \"6px\" }\n};\nconst _hoisted_42 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"25px\", \"width\": \"90%\", \"max-width\": \"650px\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_43 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_44 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_45 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_46 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_47 = [\"disabled\"];\nconst _hoisted_48 = {\n    key: 0,\n    class: \"fa-solid fa-wrench\",\n    style: { \"margin-right\": \"6px\" }\n};\nconst _hoisted_49 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\",\n    style: { \"margin-right\": \"6px\" }\n};\nconst _hoisted_50 = {\n    key: 2,\n    style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.9)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10001\", \"padding\": \"20px\" }\n};\nconst _hoisted_51 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"width\": \"95%\", \"height\": \"90%\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_52 = { style: { \"padding\": \"20px 25px\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_53 = { style: { \"display\": \"flex\", \"gap\": \"10px\" } };\nconst _hoisted_54 = { style: { \"flex\": \"1\", \"display\": \"grid\", \"grid-template-columns\": \"1fr 1fr 1.5fr\", \"gap\": \"15px\", \"padding\": \"20px\", \"overflow\": \"hidden\" } };\nconst _hoisted_55 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"overflow\": \"hidden\" } };\nconst _hoisted_56 = { style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"padding\": \"15px\" } };\nconst _hoisted_57 = { style: { \"color\": \"#4a9eff\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"margin-bottom\": \"8px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_58 = { style: { \"margin\": \"0\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"12px\", \"line-height\": \"1.5\", \"overflow-x\": \"auto\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_59 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"overflow\": \"hidden\" } };\nconst _hoisted_60 = { style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"padding\": \"15px\" } };\nconst _hoisted_61 = { style: { \"color\": \"#4a9eff\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"margin-bottom\": \"8px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_62 = { style: { \"margin\": \"0\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"12px\", \"line-height\": \"1.5\", \"overflow-x\": \"auto\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_63 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"overflow\": \"hidden\" } };\nconst _hoisted_64 = { style: { \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_65 = { style: { \"display\": \"flex\", \"gap\": \"8px\" } };\nconst _hoisted_66 = { style: { \"flex\": \"1\", \"background\": \"white\", \"overflow\": \"hidden\" } };\nconst _hoisted_67 = [\"srcdoc\"];\nconst _hoisted_68 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"width\": \"90%\", \"max-width\": \"900px\", \"max-height\": \"80%\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_69 = { style: { \"padding\": \"20px 25px\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_70 = { style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"padding\": \"20px\" } };\nconst _hoisted_71 = {\n    key: 0,\n    style: { \"text-align\": \"center\", \"color\": \"#666\", \"padding\": \"40px 20px\" }\n};\nconst _hoisted_72 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"start\", \"margin-bottom\": \"10px\" } };\nconst _hoisted_73 = { style: { \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"margin-bottom\": \"5px\" } };\nconst _hoisted_74 = { style: { \"color\": \"#888\", \"font-size\": \"12px\" } };\nconst _hoisted_75 = [\"onClick\"];\nconst _hoisted_76 = { style: { \"color\": \"#ccc\", \"font-size\": \"13px\", \"margin-top\": \"10px\" } };\nconst _hoisted_77 = { style: { \"margin-top\": \"5px\", \"display\": \"flex\", \"flex-wrap\": \"wrap\", \"gap\": \"8px\" } };\nconst _hoisted_78 = { style: { \"background\": \"#1e1e1e\", \"border-radius\": \"16px\", \"max-width\": \"850px\", \"width\": \"100%\", \"max-height\": \"90vh\", \"overflow-y\": \"auto\", \"box-shadow\": \"0 20px 60px rgba(0, 0, 0, 0.8)\", \"border\": \"1px solid #333\" } };\nconst _hoisted_79 = { style: { \"padding\": \"24px 28px\", \"border-bottom\": \"1px solid #2a2a2a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_80 = { style: { \"padding\": \"28px\" } };\nconst _hoisted_81 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"repeat(auto-fit, minmax(240px, 1fr))\", \"gap\": \"20px\" } };\nimport { computed, onBeforeUnmount, ref, watch, watchEffect } from 'vue';\nimport { normalizeApiEndpoint } from '../settings';\nimport { getScriptIdSafe } from '../utils';\nimport ProgressDialog from './ProgressDialog.vue';\n\nimport { klona } from 'klona';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ProjectManager',\n    setup(__props) {\n        const projects = ref([]);\n        const currentId = ref('');\n        const currentFile = ref('');\n        const code = ref('');\n        const previewHtml = ref('');\n        const showAI = ref(false);\n        const aiPrompt = ref('');\n        const aiGenerating = ref(false);\n        const enableStream = ref(false); // \n        const streamingText = ref(''); // \n        const showComparison = ref(false);\n        const aiChanges = ref([]);\n        const previewMode = ref('after');\n        const showHistory = ref(false);\n        const aiHistory = ref({});\n        // AI \n        const quickSuggestions = [\n            '',\n            '/',\n            '',\n            '',\n            '',\n            '',\n            '',\n            'ARIA',\n        ];\n        // \n        const showProgress = ref(false);\n        const progressDialogRef = ref(null);\n        // \n        const showProjectTemplate = ref(false);\n        // Bug \n        const showBugFix = ref(false);\n        const bugDescription = ref('');\n        const consoleError = ref('');\n        const bugFile = ref('');\n        // \n        const folderInputRef = ref(null);\n        const currentProject = computed(() => {\n            return projects.value.find(p => p.id === currentId.value);\n        });\n        const currentProjectHistory = computed(() => {\n            return aiHistory.value[currentId.value] || [];\n        });\n        const comparisonPreviewHtml = computed(() => {\n            if (aiChanges.value.length === 0)\n                return '';\n            const proj = currentProject.value;\n            if (!proj)\n                return '';\n            // \n            const tempFiles = proj.files.map(f => {\n                const change = aiChanges.value.find(c => c.path === f.path);\n                return {\n                    ...f,\n                    content: change ? (previewMode.value === 'after' ? change.newContent : change.oldContent) : f.content,\n                };\n            });\n            return buildPreviewFromFiles(tempFiles);\n        });\n        // \n        const projectTemplates = {\n            : {\n                name: '',\n                description: '',\n                icon: '',\n                color: '#4a9eff',\n                files: {\n                    'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"chat-container\">\n      <div class=\"message-list\" id=\"messageList\"></div>\n      <div class=\"input-area\">\n        <textarea id=\"userInput\" placeholder=\"...\"></textarea>\n        <button id=\"sendBtn\"></button>\n      </div>\n    </div>\n  </div>\n  <${'script'} src=\"https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js\"></${'script'}>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n                    'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n}\n\n.chat-container {\n  max-width: 800px;\n  margin: 20px auto;\n  height: calc(100vh - 40px);\n  display: flex;\n  flex-direction: column;\n  background: #2a2a2a;\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.message-list {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.message {\n  margin-bottom: 15px;\n  padding: 10px 15px;\n  border-radius: 8px;\n  max-width: 70%;\n}\n\n.message.user {\n  background: #4a9eff;\n  margin-left: auto;\n  text-align: right;\n}\n\n.message.assistant {\n  background: #3a3a3a;\n}\n\n.input-area {\n  padding: 15px;\n  background: #2a2a2a;\n  border-top: 1px solid #3a3a3a;\n  display: flex;\n  gap: 10px;\n}\n\n#userInput {\n  flex: 1;\n  padding: 10px;\n  background: #1a1a1a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  color: #e0e0e0;\n  resize: none;\n  height: 60px;\n}\n\n#sendBtn {\n  padding: 10px 20px;\n  background: #4a9eff;\n  border: none;\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  font-weight: 600;\n}\n\n#sendBtn:hover {\n  background: #357abd;\n}`,\n                    'script.js': `// \nlet chatHistory = [];\n\n// \nfunction loadHistory() {\n  const saved = getVariables({ type: 'chat' });\n  chatHistory = saved.chatHistory || [];\n  renderMessages();\n}\n\n// \nfunction saveHistory() {\n  insertOrAssignVariables({ chatHistory }, { type: 'chat' });\n}\n\n// \nfunction renderMessages() {\n  const list = document.getElementById('messageList');\n  list.innerHTML = '';\n  chatHistory.forEach(msg => {\n    const div = document.createElement('div');\n    div.className = 'message ' + msg.sender;\n    div.textContent = msg.content;\n    list.appendChild(div);\n  });\n  list.scrollTop = list.scrollHeight;\n}\n\n// \nasync function sendMessage() {\n  const input = document.getElementById('userInput');\n  const text = input.value.trim();\n  if (!text) return;\n\n  // \n  chatHistory.push({\n    id: Date.now(),\n    sender: 'user',\n    content: text,\n    timestamp: new Date().toLocaleTimeString()\n  });\n  input.value = '';\n  renderMessages();\n  saveHistory();\n\n  //  AI\n  const prompt = '\\\\n' + chatHistory.map(m => m.sender + ': ' + m.content).join('\\\\n');\n\n  let aiText = '';\n  await generate({\n    should_stream: true,\n    prompt: prompt,\n    on_stream_chunk: (chunk) => {\n      aiText += chunk;\n      // \n      const tempMsg = { id: 'temp', sender: 'assistant', content: aiText };\n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\n      if (tempIndex >= 0) {\n        chatHistory[tempIndex] = tempMsg;\n      } else {\n        chatHistory.push(tempMsg);\n      }\n      renderMessages();\n    },\n    on_stream_end: () => {\n      // \n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\n      if (tempIndex >= 0) {\n        chatHistory[tempIndex] = {\n          id: Date.now(),\n          sender: 'assistant',\n          content: aiText,\n          timestamp: new Date().toLocaleTimeString()\n        };\n      }\n      renderMessages();\n      saveHistory();\n    }\n  });\n}\n\n// \n$(() => {\n  loadHistory();\n  document.getElementById('sendBtn').addEventListener('click', sendMessage);\n  document.getElementById('userInput').addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  });\n});`,\n                },\n            },\n            : {\n                name: '',\n                description: 'HP/MP/',\n                icon: '',\n                color: '#10b981',\n                files: {\n                    'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"status-panel\">\n      <h2></h2>\n      <div class=\"stat-item\">\n        <label> (HP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill hp\" id=\"hpBar\"></div>\n        </div>\n        <span id=\"hpText\">0/0</span>\n      </div>\n      <div class=\"stat-item\">\n        <label> (MP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill mp\" id=\"mpBar\"></div>\n        </div>\n        <span id=\"mpText\">0/0</span>\n      </div>\n      <div class=\"stat-item\">\n        <label> (EXP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill exp\" id=\"expBar\"></div>\n        </div>\n        <span id=\"expText\">0/0</span>\n      </div>\n    </div>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n                    'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n  padding: 20px;\n}\n\n.status-panel {\n  max-width: 500px;\n  margin: 0 auto;\n  background: #2a2a2a;\n  border-radius: 12px;\n  padding: 25px;\n  border: 1px solid #3a3a3a;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #4a9eff;\n}\n\n.stat-item {\n  margin-bottom: 20px;\n}\n\n.stat-item label {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.progress-bar {\n  width: 100%;\n  height: 24px;\n  background: #1a1a1a;\n  border-radius: 12px;\n  overflow: hidden;\n  margin-bottom: 5px;\n}\n\n.progress-fill {\n  height: 100%;\n  transition: width 0.5s ease;\n  border-radius: 12px;\n}\n\n.progress-fill.hp {\n  background: linear-gradient(90deg, #ef4444, #10b981);\n}\n\n.progress-fill.mp {\n  background: linear-gradient(90deg, #3b82f6, #06b6d4);\n}\n\n.progress-fill.exp {\n  background: linear-gradient(90deg, #fbbf24, #f59e0b);\n}\n\n.stat-item span {\n  font-size: 13px;\n  color: #94a3b8;\n}`,\n                    'script.js': `// \nfunction loadStats() {\n  const data = getVariables({ type: 'chat' });\n\n  const hp = data.hp || 850;\n  const maxHp = data.maxHp || 1000;\n  const mp = data.mp || 340;\n  const maxMp = data.maxMp || 500;\n  const exp = data.exp || 1250;\n  const maxExp = data.maxExp || 2000;\n\n  // \n  updateBar('hp', hp, maxHp);\n  updateBar('mp', mp, maxMp);\n  updateBar('exp', exp, maxExp);\n}\n\nfunction updateBar(type, current, max) {\n  const percent = (current / max) * 100;\n  document.getElementById(type + 'Bar').style.width = percent + '%';\n  document.getElementById(type + 'Text').textContent = current + '/' + max;\n}\n\n// \ndocument.addEventListener('DOMContentLoaded', loadStats);`,\n                },\n            },\n            : {\n                name: '',\n                description: '',\n                icon: '',\n                color: '#ec4899',\n                files: {\n                    'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"affection-container\">\n      <h2></h2>\n      <div class=\"character-grid\" id=\"characterGrid\"></div>\n    </div>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n                    'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n  padding: 20px;\n}\n\n.affection-container {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 25px;\n  color: #ec4899;\n  text-align: center;\n}\n\n.character-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 20px;\n}\n\n.character-card {\n  background: #2a2a2a;\n  border-radius: 12px;\n  padding: 20px;\n  border: 2px solid #3a3a3a;\n  transition: all 0.3s ease;\n}\n\n.character-card:hover {\n  transform: translateY(-5px);\n  border-color: #ec4899;\n  box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);\n}\n\n.character-name {\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 15px;\n  color: #e0e0e0;\n}\n\n.affection-bar {\n  width: 100%;\n  height: 20px;\n  background: #1a1a1a;\n  border-radius: 10px;\n  overflow: hidden;\n  margin-bottom: 8px;\n}\n\n.affection-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #ec4899, #f472b6);\n  transition: width 0.5s ease;\n  border-radius: 10px;\n}\n\n.affection-text {\n  font-size: 13px;\n  color: #94a3b8;\n}`,\n                    'script.js': `// \nfunction loadCharacters() {\n  const data = getVariables({ type: 'chat' });\n  const characters = data.characters || [\n    { name: ' A', affection: 75 },\n    { name: ' B', affection: 50 },\n    { name: ' C', affection: 90 }\n  ];\n\n  const grid = document.getElementById('characterGrid');\n  grid.innerHTML = '';\n\n  characters.forEach(char => {\n    const card = document.createElement('div');\n    card.className = 'character-card';\n    card.innerHTML = \\`\n      <div class=\"character-name\">\\${char.name}</div>\n      <div class=\"affection-bar\">\n        <div class=\"affection-fill\" style=\"width: \\${char.affection}%\"></div>\n      </div>\n      <div class=\"affection-text\">: \\${char.affection}/100</div>\n    \\`;\n    grid.appendChild(card);\n  });\n}\n\n// \ndocument.addEventListener('DOMContentLoaded', loadCharacters);`,\n                },\n            },\n        };\n        // \n        function showProjectTemplateDialog() {\n            showProjectTemplate.value = true;\n        }\n        // \n        function createProjectFromTemplate(templateKey) {\n            const template = projectTemplates[templateKey];\n            if (!template)\n                return;\n            const name = prompt(':', template.name);\n            if (!name || !name.trim())\n                return;\n            const newProj = {\n                id: Date.now().toString(),\n                name: name.trim(),\n                files: Object.entries(template.files).map(([filename, content]) => ({\n                    path: filename,\n                    name: filename,\n                    content: content,\n                })),\n            };\n            projects.value.push(newProj);\n            currentId.value = newProj.id;\n            currentFile.value = newProj.files[0]?.name || '';\n            code.value = newProj.files[0]?.content || '';\n            saveToChatVar();\n            showProjectTemplate.value = false;\n            window.toastr.success(' \"' + name.trim() + '\"');\n        }\n        // \n        function triggerFolderImport() {\n            if (folderInputRef.value) {\n                folderInputRef.value.value = ''; // \n                folderInputRef.value.click();\n            }\n        }\n        async function handleFolderImport(event) {\n            const input = event.target;\n            const files = input.files;\n            if (!files || files.length === 0) {\n                return;\n            }\n            try {\n                // \n                const firstFile = files[0];\n                const pathParts = firstFile.webkitRelativePath.split('/');\n                const folderName = pathParts[0] || '';\n                // \n                const projectName = prompt(':', folderName);\n                if (!projectName || !projectName.trim()) {\n                    return;\n                }\n                // \n                const supportedExtensions = ['.html', '.css', '.js', '.ts', '.scss', '.sass', '.json', '.txt', '.md'];\n                // \n                const projectFiles = [];\n                const fileReadPromises = [];\n                for (let i = 0; i < files.length; i++) {\n                    const file = files[i];\n                    const relativePath = file.webkitRelativePath.split('/').slice(1).join('/'); // \n                    // /\n                    if (!relativePath || relativePath.startsWith('.') || relativePath.includes('/.')) {\n                        continue;\n                    }\n                    //  node_modulesdist \n                    if (relativePath.includes('node_modules/') ||\n                        relativePath.includes('dist/') ||\n                        relativePath.includes('.git/') ||\n                        relativePath.includes('build/')) {\n                        continue;\n                    }\n                    // \n                    const extension = '.' + relativePath.split('.').pop()?.toLowerCase();\n                    if (!supportedExtensions.includes(extension)) {\n                        continue;\n                    }\n                    // \n                    const readPromise = new Promise((resolve, reject) => {\n                        const reader = new FileReader();\n                        reader.onload = e => {\n                            const content = e.target?.result;\n                            const fileName = relativePath.split('/').pop() || relativePath;\n                            projectFiles.push({\n                                path: relativePath,\n                                name: fileName,\n                                content: content || '',\n                            });\n                            resolve();\n                        };\n                        reader.onerror = () => reject(new Error(`: ${relativePath}`));\n                        reader.readAsText(file);\n                    });\n                    fileReadPromises.push(readPromise);\n                }\n                // \n                await Promise.all(fileReadPromises);\n                if (projectFiles.length === 0) {\n                    window.toastr.warning('HTMLCSSJSTSSCSS ');\n                    return;\n                }\n                // \n                const newProj = {\n                    id: Date.now().toString(),\n                    name: projectName.trim(),\n                    files: projectFiles,\n                };\n                projects.value.push(newProj);\n                currentId.value = newProj.id;\n                currentFile.value = newProj.files[0]?.path || '';\n                code.value = newProj.files[0]?.content || '';\n                saveToChatVar();\n                updatePreview();\n                window.toastr.success(`\"${projectName}\" ${projectFiles.length} `);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        }\n        function createProject() {\n            const name = prompt(':');\n            if (!name || !name.trim())\n                return;\n            const htmlContent = `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>${name.trim()}</title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div class=\"container\">\n    <h1> ${name.trim()}!</h1>\n    <p></p>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`;\n            const cssContent = `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: #333;\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.container {\n  background: white;\n  padding: 60px 40px;\n  border-radius: 20px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  text-align: center;\n  max-width: 600px;\n}\n\nh1 {\n  font-size: 2.5em;\n  color: #667eea;\n  margin-bottom: 20px;\n}\n\np {\n  font-size: 1.2em;\n  color: #666;\n  line-height: 1.6;\n}`;\n            const jsContent = `console.log('');\n\n//  jQuery  DOM \n$(function() {\n  console.log('');\n\n  // ==========  ==========\n  const isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\n\n  if (!isInTavern) {\n    console.log(' API ');\n    //  localStorage \n  }\n\n  // ========== ==========\n  const storageKey = 'my_project_data'; // \n\n  // \n  function loadData() {\n    if (isInTavern) {\n      const data = getVariables({ type: 'chat' });\n      return data[storageKey] || { count: 0 };\n    } else {\n      //  localStorage\n      const stored = localStorage.getItem(storageKey);\n      return stored ? JSON.parse(stored) : { count: 0 };\n    }\n  }\n\n  // \n  function saveData(data) {\n    if (isInTavern) {\n      insertOrAssignVariables({ [storageKey]: data }, { type: 'chat' });\n      console.log(':', data);\n    } else {\n      //  localStorage\n      localStorage.setItem(storageKey, JSON.stringify(data));\n      console.log(' localStorage:', data);\n    }\n  }\n\n  // \n  let myData = loadData();\n  console.log(':', myData);\n\n  // ==========  ==========\n  const container = $('.container');\n  if (container.length) {\n    container.on('click', function() {\n      myData.count++;\n      saveData(myData);\n      if (typeof toastr !== 'undefined') {\n        toastr.success(\\`: \\${myData.count}\\`);\n      } else {\n        alert(\\`: \\${myData.count}\\`);\n      }\n    });\n  }\n\n  // \n  $(window).on('pagehide', function() {\n    saveData(myData);\n  });\n});`;\n            const newProj = {\n                id: Date.now().toString(),\n                name: name.trim(),\n                files: [\n                    { path: 'index.html', name: 'index.html', content: htmlContent },\n                    { path: 'style.css', name: 'style.css', content: cssContent },\n                    { path: 'script.js', name: 'script.js', content: jsContent },\n                ],\n            };\n            projects.value.push(newProj);\n            console.log(':', newProj.name, ':', projects.value.length);\n            // \n            saveToChatVar();\n            currentId.value = newProj.id;\n            currentFile.value = 'index.html';\n            code.value = htmlContent;\n            updatePreview();\n            toastr.success(` \"${newProj.name}\" `);\n        }\n        function selectProject(id) {\n            currentId.value = id;\n            const proj = currentProject.value;\n            if (proj && proj.files.length > 0) {\n                currentFile.value = proj.files[0].path;\n                code.value = proj.files[0].content;\n                updatePreview();\n            }\n            else {\n                currentFile.value = '';\n                code.value = '';\n                previewHtml.value = '';\n            }\n        }\n        function selectFile(path) {\n            currentFile.value = path;\n            const proj = currentProject.value;\n            if (proj) {\n                const file = proj.files.find(f => f.path === path);\n                if (file) {\n                    code.value = file.content;\n                }\n            }\n        }\n        function saveCode() {\n            const proj = currentProject.value;\n            if (!proj || !currentFile.value) {\n                toastr.error('');\n                return;\n            }\n            const file = proj.files.find(f => f.path === currentFile.value);\n            if (file) {\n                file.content = code.value;\n                // \n                if (autoSaveTimer) {\n                    clearTimeout(autoSaveTimer);\n                    autoSaveTimer = null;\n                }\n                saveToChatVar();\n                updatePreview();\n                toastr.success('');\n            }\n        }\n        function deleteProject(id) {\n            const proj = projects.value.find(p => p.id === id);\n            if (!proj)\n                return;\n            if (!confirm(` \"${proj.name}\" `))\n                return;\n            projects.value = projects.value.filter(p => p.id !== id);\n            console.log(':', projects.value.length);\n            if (currentId.value === id) {\n                currentId.value = '';\n                currentFile.value = '';\n                code.value = '';\n                previewHtml.value = '';\n            }\n            // \n            saveToChatVar();\n            toastr.success(` \"${proj.name}\" `);\n        }\n        // \n        function createNewFolder() {\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            const folderPath = prompt('\\ncss  js/utils', '');\n            if (!folderPath || !folderPath.trim())\n                return;\n            const trimmedPath = folderPath.trim().replace(/\\/$/, ''); // \n            //  .gitkeep \n            const gitkeepPath = `${trimmedPath}/.gitkeep`;\n            // \n            if (proj.files.some(f => f.path.startsWith(`${trimmedPath}/`))) {\n                window.toastr.warning(` \"${trimmedPath}\" `);\n                return;\n            }\n            // \n            const newFile = {\n                path: gitkeepPath,\n                name: '.gitkeep',\n                content: '# \\n',\n            };\n            proj.files.push(newFile);\n            saveToChatVar();\n            window.toastr.success(` \"${trimmedPath}\" `);\n        }\n        // \n        function showNewFileDialog() {\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            // \n            const folders = new Set();\n            folders.add(''); // \n            proj.files.forEach(file => {\n                const parts = file.path.split('/');\n                if (parts.length > 1) {\n                    // \n                    for (let i = 1; i < parts.length; i++) {\n                        const folderPath = parts.slice(0, i).join('/');\n                        if (folderPath)\n                            folders.add(folderPath);\n                    }\n                }\n            });\n            const folderList = Array.from(folders).sort();\n            // 1. \n            const fileTypes = [\n                { name: 'HTML ', ext: '.html', icon: '' },\n                { name: 'CSS ', ext: '.css', icon: '' },\n                { name: 'JavaScript ', ext: '.js', icon: '' },\n                { name: 'TypeScript ', ext: '.ts', icon: '' },\n                { name: 'JSON ', ext: '.json', icon: '' },\n                { name: 'Markdown ', ext: '.md', icon: '' },\n                { name: '', ext: '', icon: '' },\n            ];\n            const typeOptions = fileTypes.map((t, i) => `${i + 1}. ${t.icon} ${t.name} (${t.ext || ''})`).join('\\n');\n            const typeChoice = prompt(` 1-${fileTypes.length}\\n\\n${typeOptions}`, '1');\n            if (!typeChoice)\n                return;\n            const typeIndex = parseInt(typeChoice) - 1;\n            if (typeIndex < 0 || typeIndex >= fileTypes.length) {\n                window.toastr.error('');\n                return;\n            }\n            const selectedType = fileTypes[typeIndex];\n            // 2. \n            let targetFolder = '';\n            if (folderList.length > 1) {\n                const folderOptions = folderList.length > 5\n                    ? ''\n                    : `\\n\\n${folderList.map((f, i) => `${i + 1}. ${f || ''}`).join('\\n')}\\n\\n`;\n                const folderChoice = prompt(folderOptions, '1');\n                if (!folderChoice)\n                    return;\n                // \n                const folderIndex = parseInt(folderChoice) - 1;\n                if (folderIndex >= 0 && folderIndex < folderList.length) {\n                    targetFolder = folderList[folderIndex];\n                }\n                else {\n                    // \n                    targetFolder = folderChoice.trim().replace(/\\/$/, '');\n                }\n            }\n            // 3. \n            const fileName = prompt(`${selectedType.ext ? ` ${selectedType.ext}` : ''}`, selectedType.ext ? `new-file` : 'newfile.txt');\n            if (!fileName || !fileName.trim())\n                return;\n            let trimmedName = fileName.trim();\n            // \n            if (selectedType.ext && !trimmedName.endsWith(selectedType.ext)) {\n                trimmedName += selectedType.ext;\n            }\n            // \n            const fullPath = targetFolder ? `${targetFolder}/${trimmedName}` : trimmedName;\n            // \n            if (proj.files.some(f => f.path === fullPath)) {\n                window.toastr.error(` \"${fullPath}\" `);\n                return;\n            }\n            // \n            const extension = trimmedName.split('.').pop()?.toLowerCase();\n            let defaultContent = '';\n            switch (extension) {\n                case 'html':\n                    defaultContent =\n                        '<!DOCTYPE html>\\n' +\n                            '<html lang=\"zh-CN\">\\n' +\n                            '<head>\\n' +\n                            '  <meta charset=\"UTF-8\">\\n' +\n                            '  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n' +\n                            '  <title>' +\n                            trimmedName.replace('.html', '') +\n                            '</title>\\n' +\n                            '  <link rel=\"stylesheet\" href=\"style.css\">\\n' +\n                            '</head>\\n' +\n                            '<body>\\n' +\n                            '  <div class=\"container\">\\n' +\n                            '    <h1></h1>\\n' +\n                            '  </div>\\n' +\n                            '  <' +\n                            'script src=\"script.js\"></' +\n                            'script>\\n' +\n                            '</body>\\n' +\n                            '</html>';\n                    break;\n                case 'css':\n                case 'scss':\n                case 'sass':\n                    defaultContent = `/* ${trimmedName} */\\n\\n* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n`;\n                    break;\n                case 'js':\n                case 'ts':\n                    defaultContent =\n                        `// ${trimmedName}\\n\\nconsole.log('${trimmedName} ');\\n\\n$` + `(function() {\\n  // \\n});\\n`;\n                    break;\n                case 'json':\n                    defaultContent = `{\\n  \"name\": \"${trimmedName.replace('.json', '')}\",\\n  \"version\": \"1.0.0\"\\n}`;\n                    break;\n                case 'md':\n                    defaultContent = `# ${trimmedName.replace(/\\.md$/, '')}\\n\\n`;\n                    break;\n                default:\n                    defaultContent = '';\n            }\n            // \n            const newFile = {\n                path: fullPath,\n                name: trimmedName,\n                content: defaultContent,\n            };\n            proj.files.push(newFile);\n            currentFile.value = fullPath;\n            code.value = defaultContent;\n            saveToChatVar();\n            updatePreview();\n            window.toastr.success(` \"${fullPath}\" `);\n        }\n        // \n        function deleteFile(filePath) {\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            const file = proj.files.find(f => f.path === filePath);\n            if (!file)\n                return;\n            if (!confirm(` \"${file.path}\" `))\n                return;\n            proj.files = proj.files.filter(f => f.path !== filePath);\n            // \n            if (currentFile.value === filePath) {\n                if (proj.files.length > 0) {\n                    currentFile.value = proj.files[0].path;\n                    code.value = proj.files[0].content;\n                }\n                else {\n                    currentFile.value = '';\n                    code.value = '';\n                }\n            }\n            saveToChatVar();\n            updatePreview();\n            window.toastr.success(` \"${file.path}\" `);\n        }\n        function getFileIcon(path) {\n            const ext = path.split('.').pop()?.toLowerCase();\n            if (ext === 'html')\n                return 'fa-brands fa-html5';\n            if (ext === 'css')\n                return 'fa-brands fa-css3-alt';\n            if (ext === 'js')\n                return 'fa-brands fa-js';\n            return 'fa-solid fa-file-code';\n        }\n        function buildPreviewFromFiles(files) {\n            const htmlFile = files.find(f => f.path.endsWith('.html'));\n            const cssFile = files.find(f => f.path.endsWith('.css'));\n            const jsFile = files.find(f => f.path.endsWith('.js'));\n            if (!htmlFile)\n                return '';\n            const html = htmlFile.content;\n            const headTag = 'head';\n            const bodyTag = 'body';\n            const headMatch = html.match(new RegExp(`<${headTag}[^>]*>([\\\\s\\\\S]*?)</${headTag}>`, 'i'));\n            const bodyMatch = html.match(new RegExp(`<${bodyTag}[^>]*>([\\\\s\\\\S]*?)</${bodyTag}>`, 'i'));\n            let headContent = headMatch ? headMatch[1] : '';\n            let bodyContent = bodyMatch ? bodyMatch[1] : html;\n            const linkTagRegex = /<link[^>]*rel=[\"']stylesheet[\"'][^>]*>/gi;\n            const scriptTagRegex = new RegExp('<' + 'script[^>]*></' + 'script>', 'gi');\n            headContent = headContent.replace(linkTagRegex, '');\n            bodyContent = bodyContent.replace(scriptTagRegex, '');\n            const scriptTag = 'script';\n            const styleTag = 'style';\n            return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  ${headContent}\n  <${styleTag}>\n    html, body {\n      margin: 0 !important;\n      padding: 0 !important;\n      width: 100% !important;\n      height: auto !important;\n      min-height: 800px !important;\n      overflow: visible !important;\n    }\n    ${cssFile?.content || ''}\n  </${styleTag}>\n  <${scriptTag} src=\"https://code.jquery.com/jquery-3.7.1.min.js\"></${scriptTag}>\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\">\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\"></${scriptTag}>\n</head>\n<body>\n  ${bodyContent}\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\n</body>\n</html>`;\n        }\n        function updatePreview() {\n            const proj = currentProject.value;\n            if (!proj) {\n                previewHtml.value = '';\n                return;\n            }\n            previewHtml.value = buildPreviewFromFiles(proj.files);\n        }\n        function saveToChatVar() {\n            try {\n                const chatId = SillyTavern.getCurrentChatId();\n                console.log(' ID:', chatId);\n                const dataToSave = {\n                    frontend_projects_files: projects.value,\n                    frontend_ai_history: aiHistory.value,\n                };\n                if (chatId) {\n                    console.log(':', dataToSave.frontend_projects_files.length, '');\n                    insertOrAssignVariables(dataToSave, { type: 'chat' });\n                    console.log('');\n                    // \n                    const verify = getVariables({ type: 'chat' });\n                    if (verify?.frontend_projects_files) {\n                        console.log('', verify.frontend_projects_files.length, '');\n                    }\n                    else {\n                        console.error('');\n                    }\n                }\n                else {\n                    // \n                    console.log(' ID:', dataToSave.frontend_projects_files.length, '');\n                    insertOrAssignVariables(dataToSave, { type: 'global' });\n                    console.log('');\n                    toastr.info('');\n                }\n            }\n            catch (e) {\n                console.error(':', e);\n            }\n        }\n        function loadFromChatVar() {\n            try {\n                const chatId = SillyTavern.getCurrentChatId();\n                console.log(' ID:', chatId);\n                let data;\n                if (chatId) {\n                    data = getVariables({ type: 'chat' });\n                    console.log(':', data);\n                }\n                else {\n                    data = getVariables({ type: 'global' });\n                    console.log(' ID:', data);\n                }\n                if (data?.frontend_projects_files && Array.isArray(data.frontend_projects_files)) {\n                    projects.value = data.frontend_projects_files;\n                    console.log(':', projects.value.length, '');\n                }\n                else {\n                    console.log('');\n                    projects.value = [];\n                }\n                if (data?.frontend_ai_history) {\n                    aiHistory.value = data.frontend_ai_history;\n                    console.log('');\n                }\n                else {\n                    aiHistory.value = {};\n                }\n            }\n            catch (e) {\n                console.error(':', e);\n            }\n        }\n        // \n        loadFromChatVar();\n        watch(() => SillyTavern.getCurrentChatId(), () => {\n            loadFromChatVar();\n            currentId.value = '';\n            currentFile.value = '';\n            code.value = '';\n            previewHtml.value = '';\n        });\n        // \n        let autoSaveTimer = null;\n        watchEffect(() => {\n            // \n            if (currentFile.value && code.value !== undefined) {\n                const proj = currentProject.value;\n                if (proj) {\n                    const file = proj.files.find(f => f.path === currentFile.value);\n                    if (file && file.content !== code.value) {\n                        // \n                        file.content = code.value;\n                        // \n                        if (autoSaveTimer) {\n                            clearTimeout(autoSaveTimer);\n                        }\n                        //  1 \n                        autoSaveTimer = setTimeout(() => {\n                            saveToChatVar();\n                            console.log(':', currentFile.value);\n                        }, 1000);\n                    }\n                }\n            }\n        });\n        // \n        let previewTimer = null;\n        watch(() => [currentFile.value, code.value], () => {\n            if (previewTimer) {\n                clearTimeout(previewTimer);\n            }\n            previewTimer = setTimeout(updatePreview, 500);\n        }, { deep: true });\n        // \n        onBeforeUnmount(() => {\n            console.log('...');\n            // \n            if (autoSaveTimer) {\n                clearTimeout(autoSaveTimer);\n            }\n            if (previewTimer) {\n                clearTimeout(previewTimer);\n            }\n            // \n            if (currentFile.value && code.value !== undefined) {\n                const proj = currentProject.value;\n                if (proj) {\n                    const file = proj.files.find(f => f.path === currentFile.value);\n                    if (file) {\n                        file.content = code.value;\n                    }\n                }\n            }\n            // \n            saveToChatVar();\n            console.log('');\n        });\n        function showAIDialog() {\n            showAI.value = true;\n            aiPrompt.value = '';\n        }\n        function closeAIDialog() {\n            showAI.value = false;\n            aiPrompt.value = '';\n        }\n        // Bug \n        function showBugFixDialog() {\n            showBugFix.value = true;\n            bugDescription.value = '';\n            consoleError.value = '';\n            bugFile.value = '';\n        }\n        function closeBugFixDialog() {\n            showBugFix.value = false;\n            bugDescription.value = '';\n            consoleError.value = '';\n            bugFile.value = '';\n        }\n        async function fixBugWithAI() {\n            const proj = currentProject.value;\n            if (!proj) {\n                window.toastr.error('');\n                return;\n            }\n            if (!bugDescription.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            aiGenerating.value = true;\n            showProgress.value = true;\n            let normalizedEndpoint = '';\n            try {\n                //  1: \n                progressDialogRef.value?.setProgress(5);\n                progressDialogRef.value?.setMessage(' Bug ...');\n                await new Promise(r => setTimeout(r, 100));\n                //  API \n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    throw new Error(' ID');\n                }\n                const vars = getVariables({ type: 'script', script_id: scriptId });\n                const apiEndpoint = vars?.api_endpoint;\n                const apiKey = vars?.api_key;\n                const model = vars?.model || 'gpt-4o-mini';\n                if (!apiEndpoint || !apiKey) {\n                    throw new Error('\"\" API');\n                }\n                normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\n                progressDialogRef.value?.setProgress(15);\n                progressDialogRef.value?.setMessage(' Bug ...');\n                await new Promise(r => setTimeout(r, 100));\n                //  Bug \n                const systemPrompt = ` Bug \n\n# \n\n1. ****\n2. ****\n3. **** Console \n4. ****\n\n#  Bug \n\n****\n- ID \n-  \\`$(function() {})\\` \n-  JavaScript \n\n****\n-  CSS displayvisibilityz-index\n-  DOM \n- \n\n****\n-  insertOrAssignVariables \n- \n- \n\n****\n- \n- \n- \n\n# \n\n\n\n\\`\\`\\`\nFILE_START: \n[]\nFILE_END\n\\`\\`\\`\n\n`;\n                const currentFiles = proj.files.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n                const userPrompt = `# \n${currentFiles}\n\n# Bug \n${bugDescription.value}\n\n${consoleError.value.trim()\n                    ? `# Console \n\\`\\`\\`\n${consoleError.value}\n\\`\\`\\`\n`\n                    : ''}\n\n${bugFile.value\n                    ? `# \n${bugFile.value}\n`\n                    : ''}\n\n# \n1.  bug\n2. \n3. \n4. \n\n system `;\n                progressDialogRef.value?.setProgress(25);\n                progressDialogRef.value?.setMessage(' AI ...');\n                await new Promise(r => setTimeout(r, 100));\n                // \n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI  bug...');\n                await new Promise(r => setTimeout(r, 100));\n                const response = await fetch(normalizedEndpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${apiKey}`,\n                    },\n                    body: JSON.stringify({\n                        model: model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: 0.3, // \n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API  (${response.status}): ${errorText}`);\n                }\n                progressDialogRef.value?.setProgress(60);\n                progressDialogRef.value?.setMessage(' AI ...');\n                await new Promise(r => setTimeout(r, 100));\n                const data = await response.json();\n                const resultText = data.choices?.[0]?.message?.content || '';\n                if (!resultText) {\n                    throw new Error('AI ');\n                }\n                progressDialogRef.value?.setProgress(75);\n                progressDialogRef.value?.setMessage('...');\n                await new Promise(r => setTimeout(r, 100));\n                //  AI \n                const fileRegex = /FILE_START:\\s*(.+?)\\s*\\n([\\s\\S]*?)\\nFILE_END/g;\n                const changes = [];\n                let match;\n                while ((match = fileRegex.exec(resultText)) !== null) {\n                    const path = match[1].trim();\n                    const newContent = match[2].trim();\n                    const existingFile = proj.files.find(f => f.path === path);\n                    if (existingFile) {\n                        changes.push({\n                            path,\n                            oldContent: existingFile.content,\n                            newContent,\n                        });\n                    }\n                }\n                if (changes.length === 0) {\n                    throw new Error('AI ');\n                }\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                await new Promise(r => setTimeout(r, 100));\n                // \n                if (!aiHistory.value[proj.id]) {\n                    aiHistory.value[proj.id] = [];\n                }\n                aiHistory.value[proj.id].unshift({\n                    timestamp: new Date().toISOString(),\n                    prompt: `Bug : ${bugDescription.value}`,\n                    changes: klona(changes),\n                });\n                // \n                aiChanges.value = changes;\n                showComparison.value = true;\n                previewMode.value = 'after';\n                progressDialogRef.value?.setProgress(95);\n                progressDialogRef.value?.setMessage(`Bug  (${changes.length} )`);\n                await new Promise(r => setTimeout(r, 100));\n                // \n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage('Bug ');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showBugFix.value = false;\n                    window.toastr.success(`AI `);\n                }, 800);\n            }\n            catch (error) {\n                console.error('Bug :', error);\n                window.toastr.error(`Bug : ${error?.message || String(error)}`);\n                showProgress.value = false;\n            }\n            finally {\n                aiGenerating.value = false;\n            }\n        }\n        async function generateWithAI() {\n            if (!aiPrompt.value.trim() || aiGenerating.value)\n                return;\n            const proj = currentProject.value;\n            if (!proj) {\n                toastr.error('');\n                return;\n            }\n            // \n            const vaguePhrases = ['', '', '', '', '', '', ''];\n            const prompt = aiPrompt.value.trim();\n            const isVague = vaguePhrases.some(phrase => {\n                const regex = new RegExp(`^${phrase}[\\\\s]*$`, 'i');\n                return regex.test(prompt);\n            });\n            if (isVague) {\n                toastr.warning('\\n\\n\\n' +\n                    ' \"\"\\n' +\n                    ' \"\"\\n\\n' +\n                    ' \"\"\\n' +\n                    ' \"\"', '', { timeOut: 6000 });\n                return;\n            }\n            aiGenerating.value = true;\n            showProgress.value = true;\n            let normalizedEndpoint = ''; // \n            try {\n                // 1: \n                progressDialogRef.value?.setProgress(5);\n                progressDialogRef.value?.setMessage(' AI ...');\n                await new Promise(r => setTimeout(r, 100)); //  DOM \n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    toastr.error(' ID');\n                    aiGenerating.value = false;\n                    showProgress.value = false;\n                    return;\n                }\n                const vars = getVariables({ type: 'script', script_id: scriptId });\n                const apiEndpoint = vars?.api_endpoint;\n                const apiKey = vars?.api_key;\n                const model = vars?.model || 'gpt-4o-mini';\n                const temperature = vars?.temperature || 0.7;\n                const maxTokens = vars?.max_tokens || 4000;\n                if (!apiEndpoint || !apiKey) {\n                    toastr.error('\"\" API');\n                    aiGenerating.value = false;\n                    showProgress.value = false;\n                    return;\n                }\n                //  API \n                try {\n                    normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\n                    console.log(' :', apiEndpoint);\n                    console.log(' :', normalizedEndpoint);\n                }\n                catch (e) {\n                    toastr.error('API ' + e.message);\n                    aiGenerating.value = false;\n                    showProgress.value = false;\n                    return;\n                }\n                //  max_tokens \n                if (maxTokens < 2000) {\n                    toastr.warning(` max_tokens  ${maxTokens} AI  4000 `);\n                }\n                progressDialogRef.value?.setProgress(15);\n                progressDialogRef.value?.setMessage('...');\n                await new Promise(r => setTimeout(r, 100)); //  DOM \n                const systemPrompt = ` SillyTavern\n\n# \n${proj.files.map(f => `- ${f.path}`).join('\\n')}\n\n#  API \n## \n- jQuery ($): DOM \n- toastr: \n- gsap: \n- lodash (_): \n- zod (z): \n\n##  API\n****\n- \\`getVariables({ type: 'chat' })\\`: \n- \\`insertOrAssignVariables(data, { type: 'chat' })\\`: \n- \\`replaceVariables(data, { type: 'chat' })\\`: \n\n****\n\\`\\`\\`javascript\n//   API \nconst isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\n\n// \nfunction loadData() {\n  if (isInTavern) {\n    const data = getVariables({ type: 'chat' });\n    return data.my_key || { count: 0 };\n  } else {\n    //  localStorage\n    const stored = localStorage.getItem('my_key');\n    return stored ? JSON.parse(stored) : { count: 0 };\n  }\n}\n\n// \nfunction saveData(data) {\n  if (isInTavern) {\n    insertOrAssignVariables({ my_key: data }, { type: 'chat' });\n  } else {\n    localStorage.setItem('my_key', JSON.stringify(data));\n  }\n}\n\n// \nlet myData = loadData();\nmyData.count++;\nsaveData(myData);\n\\`\\`\\`\n\n** API**\n- getChatMessages(): \n- getCurrentCharacter(): \n- getWorldbook(): \n- replaceWorldbook(data): \n- eventOn(event, callback): \n- getIframeName():  iframe \n- triggerSlash(command):  STScript \n- SillyTavern.getCurrentChatId():  ID\n\n## \n\n****  AI \n\n****\n\n\\`\\`\\`javascript\n// 1. \nasync function updateStatusFromMessages() {\n  if (typeof getChatMessages !== 'function') return; // \n\n  const messages = await getChatMessages();\n  if (!messages || messages.length === 0) return;\n\n  //  AI  is_user: false\n  const latestAIMessage = messages.slice().reverse().find(m => !m.is_user);\n  if (!latestAIMessage) return;\n\n  const content = latestAIMessage.mes; // \n\n  // 2. \n  const statusMatch = content.match(/\\`\\`\\`json([\\\\s\\\\S]*?)\\`\\`\\`/);\n  if (statusMatch) {\n    try {\n      const status = JSON.parse(statusMatch[1]);\n      // 3. \n      $('#health').text(status.health || 100);\n      $('#level').text(status.level || 1);\n    } catch (e) {\n      console.error(':', e);\n    }\n  }\n\n  // 80\n  const healthMatch = content.match(/[:](\\\\d+)/);\n  if (healthMatch) {\n    $('#health').text(healthMatch[1]);\n  }\n}\n\n// 4. \n$(function() {\n  updateStatusFromMessages();\n});\n\n// 5. \nif (typeof eventOn === 'function') {\n  eventOn('MESSAGE_RECEIVED', () => {\n    updateStatusFromMessages();\n  });\n}\n\\`\\`\\`\n\n---\n\n##   XML \n\n**** AI  XML  \\`<state_bar><i></i></state_bar>\\`\n\n****\n1.  \\`<state_bar>\\` \n2.  XML  HTML\n3. \n\n****\n\n\\`\\`\\`typescript\n// ===== 1.  =====\nfunction extractStateBar(text: string): string | null {\n  const match = text.match(/<state_bar>([\\\\s\\\\S]*?)<\\\\/state_bar>/i);\n  return match ? match[1].trim() : null;\n}\n\n// ===== 2. XML  HTML=====\nfunction convertXmlToHtml(xml: string): string {\n  let html = xml;\n\n  // <i><2i><3i> \n  html = html.replace(/<i>([\\\\s\\\\S]*?)<\\\\/i>/g, '<div class=\"state-item indent-1\">$1</div>');\n  html = html.replace(/<2i>([\\\\s\\\\S]*?)<\\\\/2i>/g, '<div class=\"state-item indent-2\">$1</div>');\n  html = html.replace(/<3i>([\\\\s\\\\S]*?)<\\\\/3i>/g, '<div class=\"state-item indent-3\">$1</div>');\n\n  // \n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-date\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-time\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-location\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-physical\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-mental\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-current\"> $1</div>');\n\n  //  <></>\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g,\n    '<div class=\"state-colored\" style=\"border-left: 3px solid #ff6b6b; background: rgba(255,107,107,0.1);\">$1</div>');\n\n  // \n  html = html.replace(/<([^>\\\\/\\\\s]+)>([\\\\s\\\\S]*?)<\\\\/\\\\1>/g, '<div class=\"state-generic\">$2</div>');\n\n  return html;\n}\n\n// ===== 3.  =====\nasync function updateStateBar() {\n  if (typeof getChatMessages !== 'function') return;\n\n  const messages = await getChatMessages();\n  if (!messages || messages.length === 0) return;\n\n  //  AI \n  const latestAI = messages.slice().reverse().find(m => !m.is_user);\n  if (!latestAI) return;\n\n  // \n  const stateBarXml = extractStateBar(latestAI.mes);\n  if (stateBarXml) {\n    const stateBarHtml = convertXmlToHtml(stateBarXml);\n\n    // \n    const container = $('#state-bar-container');\n    container.fadeOut(200, () => {\n      container.html(stateBarHtml);\n      container.fadeIn(200);\n    });\n  }\n}\n\n// ===== 4.  =====\n$(function() {\n  updateStateBar(); // \n\n  // \n  if (typeof eventOn === 'function') {\n    eventOn('MESSAGE_RECEIVED', updateStateBar);\n  }\n});\n\\`\\`\\`\n\n** CSS **\n\n\\`\\`\\`scss\n#state-bar-container {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 12px;\n  padding: 16px;\n  color: white;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n  margin-bottom: 16px;\n}\n\n.state-item {\n  padding: 8px 12px;\n  margin: 6px 0;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  backdrop-filter: blur(10px);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.15);\n    transform: translateX(4px);\n  }\n}\n\n// \n.indent-1 { margin-left: 20px; }\n.indent-2 { margin-left: 40px; }\n.indent-3 { margin-left: 60px; }\n\n// \n.state-date, .state-time, .state-location {\n  font-weight: 600;\n  font-size: 14px;\n  padding: 8px 12px;\n  margin: 8px 0;\n  border-radius: 6px;\n}\n\n.state-date { background: rgba(100, 181, 246, 0.2); }\n.state-time { background: rgba(129, 199, 132, 0.2); }\n.state-location { background: rgba(255, 167, 38, 0.2); }\n\n.state-physical {\n  padding: 10px 14px;\n  margin: 8px 0;\n  background: rgba(255, 107, 107, 0.15);\n  border-left: 4px solid #ff6b6b;\n  border-radius: 4px;\n}\n\n.state-mental {\n  padding: 10px 14px;\n  margin: 8px 0;\n  background: rgba(149, 117, 205, 0.15);\n  border-left: 4px solid #9575cd;\n  border-radius: 4px;\n}\n\n.state-colored {\n  padding: 10px 14px;\n  margin: 8px 0;\n  border-radius: 4px;\n  backdrop-filter: blur(5px);\n}\n\n.state-generic {\n  padding: 6px 10px;\n  margin: 4px 0;\n  opacity: 0.9;\n}\n\\`\\`\\`\n\n** GSAP **\n\n\\`\\`\\`typescript\n//  GSAP \nfunction updateStateBarWithAnimation(stateBarHtml: string) {\n  const container = $('#state-bar-container');\n\n  // \n  gsap.to(container, {\n    opacity: 0,\n    y: -10,\n    duration: 0.2,\n    onComplete: () => {\n      container.html(stateBarHtml);\n\n      // \n      gsap.to(container, {\n        opacity: 1,\n        y: 0,\n        duration: 0.3,\n        ease: 'power2.out'\n      });\n\n      // \n      gsap.from('.state-item', {\n        opacity: 0,\n        x: -20,\n        duration: 0.4,\n        stagger: 0.05,\n        ease: 'back.out(1.2)'\n      });\n    }\n  });\n}\n\\`\\`\\`\n\\`\\`\\`\n\n****\n-  \\`getChatMessages()\\` \n- \n-  jQuery  DOM \n-  MESSAGE_RECEIVED \n\n## \n\n****\n**** index.html\n\n** **\n\n\\`\\`\\`javascript\n//  \n$(function() {\n  let chatHistory = [];           //  \n  function renderMessages() {}    //  \n  function handleSend() {}        //  \n\n  //  \n});\n\n//  \nlet chatHistory = [];              //  \nfunction renderMessages() {}       //  \nfunction handleSend() {}           //  \n\n$(function() {\n  // \n  loadChatHistory();\n  setupStreamListeners();\n});\n\\`\\`\\`\n\n****\n1. let/const\n2. function\n3. \\`$(function() {})\\` - \n4. \\`$(window).on('pagehide', ...)\\` - \n\n** generation_id **\n****** generation_id **\n-  AI \n- \n- \n\n****\n1. ****index.html + index.ts\n2. \n3.  \\`generate(text)\\`** generation_id**\n4. **** \\`id === currentGenerationId\\`\n   - \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\`:  token \n   - \\`iframe_events.STREAM_TOKEN_RECEIVED_FULLY\\`: \n   - \\`iframe_events.GENERATION_ENDED\\`: \n5.  \\`setChatMessages\\`\\`createChatMessages\\`  \\`{ refresh: 'none' }\\` \n\n**  API generate()**\n- **\\`triggerSlashWithResult(command)\\`**:  STScript \n  - \\`Promise<string>\\`AI \n  - \\`const result = await triggerSlashWithResult('/gen lock=on \"\"');\\`\n  - **** \\`/gen\\` \n  - **** generation_id\n- **\\`getRegexScripts()\\`**: \n  - \n  - ** AI **\n- **** API \n- **\\`triggerSlash(command)\\`**:  STScript \n\n** AI **\nAI \\`<guide>\\`\\`<dream>\\`\\`<plot>\\`\\`<status>\\`\\`<think>\\` \n****\n\n****\n1. **** AI  \\`<gametxt>\\`\n2. ****\n3. ****\n\n****\n\\`\\`\\`typescript\n// \nfunction extractLastTagContent(tagName: string, text: string, ignoreCase = false): string | null {\n  if (!text || typeof text !== 'string') return null;\n\n  const endTag = \\`</\\${tagName}>\\`;\n  let searchPool = text;\n  let endTagPattern = endTag;\n\n  if (ignoreCase) {\n    searchPool = text.toLowerCase();\n    endTagPattern = endTag.toLowerCase();\n  }\n\n  const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\n  if (lastEndIndex !== -1) {\n    const startTag = \\`<\\${tagName}>\\`;\n    let startTagPattern = startTag;\n    if (ignoreCase) startTagPattern = startTag.toLowerCase();\n\n    const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\n    if (lastStartIndex !== -1) {\n      const startIndex = lastStartIndex + startTag.length;\n      return text.substring(startIndex, lastEndIndex).trim();\n    }\n  }\n  return null;\n}\n\n// \nfunction applyRegexFilters(text: string): string {\n  console.log(' :', text.length);\n\n  if (!text || typeof text !== 'string') return '';\n\n  // =====  0: =====\n  // \"\"\"\"\n  // \n  //  dream  gametxt \n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\n  criticalTags.forEach(tag => {\n    const openTagRegex = new RegExp(\\`<\\${tag}([^>]*)>\\`, 'gi');\n    const closeTagRegex = new RegExp(\\`</\\${tag}>\\`, 'gi');\n\n    const openMatches = text.match(openTagRegex);\n    const closeMatches = text.match(closeTagRegex);\n\n    const openCount = openMatches ? openMatches.length : 0;\n    const closeCount = closeMatches ? closeMatches.length : 0;\n\n    if (openCount > closeCount) {\n      // \n      const missing = openCount - closeCount;\n      console.log(\\`  \\${missing}  <\\${tag}> \\`);\n      text = text + \\`</\\${tag}>\\`.repeat(missing);\n    }\n  });\n\n  // =====  1: =====\n  //  AI \n  //  dream \n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\n  for (const tag of gameTextTags) {\n    const extracted = extractLastTagContent(tag, text);\n    if (extracted !== null) {\n      console.log(\\`  <\\${tag}> :\\`, extracted.length);\n      return extracted; // \n    }\n  }\n\n  // =====  2:  -  =====\n  let cleanedText = text;\n\n  // dream/gametxt \n  const tagsToRemove = [\n    'guide', 'plot', 'status',\n    'UpdateVariable', '', '', ''\n  ];\n\n  tagsToRemove.forEach(tag => {\n    //  <tag>...</tag> \n    const regexWithContent = new RegExp(\\`<\\${tag}[^>]*>[\\\\\\\\s\\\\\\\\S]*?</\\${tag}>\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regexWithContent, '');\n\n    //  <tag/> \n    const regexSelfClosing = new RegExp(\\`<\\${tag}\\\\\\\\s*\\\\\\\\/>\\`, 'gi');\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\n\n    if (before !== cleanedText) {\n      console.log(\\`    <\\${tag}> \\`);\n    }\n  });\n\n  //   think/thinking \n  //  <xxx_think><thinking_xxx><think><thinking> \n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\s\\\\\\\\S]*?<\\\\/[^>]*think[^>]*>/gi;\n  const beforeThinking = cleanedText;\n  cleanedText = cleanedText.replace(thinkingRegex, '');\n  if (beforeThinking !== cleanedText) {\n    console.log('    think/thinking ');\n  }\n\n  //  think \n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\/>/gi;\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\n\n  //  HTML \n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  2-3: =====\n  let allRegexScripts: any[] = [];\n\n  //  1: \n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegexes = getRegexScripts();\n      if (globalRegexes && globalRegexes.length > 0) {\n        console.log(' ', globalRegexes.length, '');\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\n      }\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  //  2:  SoliUmbra \n  try {\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes: any = null;\n\n              if (Array.isArray(data)) {\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break;\n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length > 0) {\n    console.log(' ', allRegexScripts.length, '');\n\n    //  AI placement  2\n    //   disabled  placement promptOnly\n    //  promptOnly \n    const activeScripts = allRegexScripts.filter((script: any) => {\n      if (script.disabled) return false;\n      if (!script.placement || !Array.isArray(script.placement)) return false;\n      if (!script.placement.includes(2)) return false;\n      return true;\n    });\n\n    console.log(' ', activeScripts.length, '');\n\n    let result = text;\n    activeScripts.forEach((script: any, index: number) => {\n      try {\n        const regex = new RegExp(script.findRegex, 'gim');\n        const beforeLength = result.length;\n        result = result.replace(regex, script.replaceString || '');\n\n        if (beforeLength !== result.length) {\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\n        }\n      } catch (e) {\n        console.error(' ', index + 1, ':', e);\n      }\n    });\n\n    text = result;\n  }\n\n  console.log(' :', text.length);\n  return text;\n}\n\\`\\`\\`\n\n****\n\\`\\`\\`typescript\n// \nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\n\n// \nasync function handleSend() {\n  const input = $('#user-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // 1. \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  renderMessages();\n\n  // 2. \n  isGenerating = true;\n  $('#send-btn').prop('disabled', true).text('...');\n\n  try {\n    // 3. \n    let prompt = '';\n    chatHistory.slice(-10).forEach(msg => {\n      prompt += (msg.role === 'user' ? '' : 'AI') + ': ' + msg.content + '\\\\n';\n    });\n\n    // 4.  AI\n    const rawResult = await triggerSlashWithResult('/gen lock=on \"' + prompt.replace(/\"/g, '\\\\\\\\\"') + '\"');\n\n    // 5.  \n    const cleanedResult = applyRegexFilters(rawResult);\n\n    // 6. \n    chatHistory.push({ role: 'assistant', content: cleanedResult });\n    renderMessages();\n    saveChatHistory(); // \n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    isGenerating = false;\n    $('#send-btn').prop('disabled', false).text('');\n  }\n}\n\n// \nfunction renderMessages() {\n  const container = $('#messages');\n  container.empty();\n\n  chatHistory.forEach(msg => {\n    const div = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .text(msg.content); //  text()  XSS\n    container.append(div);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// \nfunction saveChatHistory() {\n  if (typeof insertOrAssignVariables === 'function') {\n    insertOrAssignVariables({ chat_history: chatHistory }, { type: 'chat' });\n  } else {\n    localStorage.setItem('chat_history', JSON.stringify(chatHistory));\n  }\n}\n\\`\\`\\`\n\n** **\n\n** **\n\n###  \n-  \\`generate({ should_stream: true, generation_id })\\` \n-  \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\` \n- \n-   AI \n-   AI \n\n###  \n-  \\`triggerSlashWithResult\\`\n-  \n-  \\`generateRaw\\`\n\n** **\n\n\\`\\`\\`typescript\n// =====  =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\nlet currentGenerationId: string | null = null;\n\n// ===== =====\nfunction setupStreamListeners() {\n  //  \n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\n    if (!isGenerating || id !== currentGenerationId) return;\n\n    //  \n    const cleanedText = applyRegexFilters(text);\n\n    //  DOM\n    const container = $('#inner-messages');  //  ID \n    const charName = SillyTavern?.name2 || 'AI';\n    const lastMsg = container.find('.message:last-child');\n\n    if (lastMsg.length && !lastMsg.hasClass('user-message')) {\n      //  AI \n      lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\n    } else {\n      //  AI \n      const msgDiv = $('<div>')\n        .addClass('message ai-message')\n        .html('<strong>' + charName + ':</strong> ' + cleanedText);\n      container.append(msgDiv);\n    }\n\n    // \n    container.scrollTop(container[0].scrollHeight);\n  });\n\n  //  \n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\n    if (id === currentGenerationId) {\n      console.log(' ');\n\n      //  \n      const cleanedText = applyRegexFilters(text);\n\n      // \n      chatHistory.push({ role: 'assistant', content: cleanedText });\n      saveChatHistory();\n\n      // \n      renderMessages();\n\n      // \n      isGenerating = false;\n      currentGenerationId = null;\n      $('#inner-send-btn').prop('disabled', false).text('');  //  ID \n    }\n  });\n}\n\n// ===== =====\nasync function handleSend() {\n  const input = $('#inner-input');  //  ID \n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // 1. \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  // 2.  ID\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n\n  // 3. \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');  //  ID \n\n  try {\n    // 4.   generate \n    await generate({\n      user_input: userInput,\n      should_stream: true,           //  \n      generation_id: currentGenerationId,  //   ID \n      overrides: {\n        chat_history: {\n          prompts: chatHistory.map(msg => ({\n            role: msg.role === 'user' ? 'user' : 'assistant',\n            content: msg.content\n          }))\n        }\n      }\n    });\n\n    // \n    // GENERATION_ENDED  AI \n\n  } catch (error) {\n    console.error(' :', error);\n    toastr.error(': ' + error.message);\n\n    // \n    isGenerating = false;\n    currentGenerationId = null;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// =====  =====\nfunction renderMessages() {\n  const container = $('#messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const div = $('<div>')\n      .attr('id', \\\\\\`message-\\\\\\${index}\\\\\\`)  //   id\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .text(msg.content);\n    container.append(div);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// =====  =====\n$(() => {\n  loadChatHistory();\n  setupStreamListeners();  //  \n\n  $('#send-btn').on('click', handleSend);\n  $('#user-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n});\n\\\\\\`\\\\\\`\\\\\\`\n\n** CSS **\n\\\\\\`\\\\\\`\\\\\\`css\n.streaming {\n  border-right: 2px solid #165DFF;\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  0%, 50% { border-right-color: transparent; }\n  51%, 100% { border-right-color: #165DFF; }\n}\n\\\\\\`\\\\\\`\\\\\\`\n\n** **\n- **** 3\n- **** triggerSlashWithResult\n- **** AI \n- **** \n\n** **\n1.   \\`generate({ should_stream: true, generation_id: uniqueId })\\`\n2.  \\`setupStreamListeners()\\`\n3.  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\`\n4.   ID \\`generation_id\\`\n5.   \\`overrides.chat_history.prompts\\` \n\n**  \\`applyRegexFilters\\`**\n1.  **STREAM_TOKEN_RECEIVED_INCREMENTALLY **\n   \\`\\`\\`typescript\n   const cleanedText = applyRegexFilters(text);  // \n   lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\n   \\`\\`\\`\n\n2.  **GENERATION_ENDED **\n   \\`\\`\\`typescript\n   const cleanedText = applyRegexFilters(text);  // \n   chatHistory.push({ role: 'assistant', content: cleanedText });\n   \\`\\`\\`\n\n** \\`applyRegexFilters\\` **\n1.  ****\"\"\"\"\n2.  **** \\`<dream>\\`\\`<gametxt>\\` \n3.  **** \\`think\\` \n4.  ****\n\n** **\n- ****\\`<dream>\\`\\`<gametxt>\\`\\`<output>\\` \n- ****\\`['dream', 'gametxt', 'output', 'display', 'text', 'content']\\`\n- ****\n- ****\n  \\`\\`\\`\n  <guide></guide><dream></dream><plot></plot>\n      <dream> \n  \\`\\`\\`\n\n** **\n-  \\`think\\`  \\`thinking\\`\n- \\`/<[^>]*think[^>]*>[\\\\s\\\\S]*?<\\\\/[^>]*think[^>]*>/gi\\`\n- \\`<think>\\`\\`<thinking>\\`\\`<xxx_think>\\`\\`<thinking_xxx>\\` \n- \n\n****\n-    \\`<thinking>\\`    + \n-    \\`<UpdateVariable>\\`    + \n-     \\`<UpdateVariable>\\`   \\`<UpdateVariable>\\` \n\n** **\n-  / text \\`applyRegexFilters\\`\n-   text\n-   text\n-   \\`should_stream: true\\`\n-   \\`generation_id\\`\n-   ID\n-  \n\n** **\n**** \\`$(function() {})\\` \n\n\\`\\`\\`javascript\n//  \n$(function() {\n  let chatHistory = [];  //  \n  function renderMessages() {}  //  \n});\n\n//  \nlet chatHistory = [];  //  \nfunction renderMessages() {}  //  \n\n$(function() {\n  // \n  loadChatHistory();\n});\n\\`\\`\\`\n\n** **\n\n\\`\\`\\`javascript\n// index.ts \n//\n// 1  1-10 \n//    let chatHistory = [];\n//    let isGenerating = false;\n//    ...\n//\n// 2  10-250 \n//    function loadChatHistory() { ... }\n//    function saveChatHistory() { ... }\n//    function renderMessages() { ... }\n//    function applyRegexFilters(text) { ... }  //  \n//    function handleSend() { ... }\n//\n// 3 jQuery  250-270 \n//    $(function() {\n//      // \n//      loadChatHistory();\n//      $('#btn').on('click', handleSend);\n//    });\n//\n// 4  270-275 \n//    $(window).on('pagehide', () => { ... });\n\\`\\`\\`\n\n** 100% **\n\n\\`\\`\\`javascript\n// =====================================================\n//   $(function() {}) \n// =====================================================\n\n// ===== 1. =====\nlet chatHistory = []; // { role: 'user'|'assistant', content: string }\nlet isGenerating = false;\n\n// ===== 2.  =====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    // \n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    // \n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3.  =====\nfunction renderMessages() {\n  console.log(' renderMessages :', chatHistory.length, '');\n\n  const container = $('#inner-messages');\n  console.log(' :', container.length > 0 ? ' ' : ' ');\n\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    // \n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    console.log(' ', index + 1, ':', msg.role, '-', name, '- :', msg.content.length);\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  console.log(' renderMessages :', container.find('.message').length);\n\n  // \n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 4.  =====\n/**\n *  AI \n * \n * 1.  getRegexScripts\n * 2.  SoliUmbra \n * 3. \n */\nfunction applyRegexFilters(text) {\n  console.log(' :', text.length);\n\n  // =====  0: =====\n  // <guide><dream><plot><status><think> \n  let cleanedText = text;\n  const commonTags = [\n    'guide', 'dream', 'plot', 'status', 'think', 'thinking',\n    'thought', 'reasoning', 'analysis', 'plan', 'reflection',\n    'meta', 'ooc', 'system', 'debug'\n  ];\n\n  commonTags.forEach(tag => {\n    //  <tag>...</tag> \n    const regex = new RegExp(\\`<\\${tag}[^>]*>[\\\\\\\\s\\\\\\\\S]*?</\\${tag}>\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regex, '');\n    if (before !== cleanedText) {\n      console.log(\\`   :  <\\${tag}> \\`);\n    }\n  });\n\n  //  HTML \n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  // \n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  1-2:  =====\n  let allRegexScripts = [];\n\n  //  1: \n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegex = getRegexScripts();\n      console.log(' ', globalRegex.length, '');\n      allRegexScripts = allRegexScripts.concat(globalRegex);\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  //  2: SoliUmbra \n  //   iframe  window.parent.SillyTavern.getContext() \n  try {\n    const parentST = window.parent?.SillyTavern || window.SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        //  identifier\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find(p => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes = null;\n\n              // \n              if (Array.isArray(data)) {\n                //  regexes-bindings\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                //  SPresetSettings.RegexBinding.regexes\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break; // \n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length === 0) {\n    console.log(' ');\n    return text;\n  }\n\n  console.log(' ', allRegexScripts.length, '');\n\n  //  AI \n  // placement :\n  //   0 = \n  //   1 =  AI \n  //   2 = AI  \n  // promptOnly: true = \n  // promptOnly: false =   \n  const activeScripts = allRegexScripts.filter(script => {\n    return !script.disabled &&\n           !script.promptOnly &&  //  promptOnly  false \n           script.placement &&\n           script.placement.includes(2);  //  placement  2 AI \n  });\n\n  console.log(' ', activeScripts.length, '');\n\n  let result = text;\n\n  // \n  activeScripts.forEach((script, index) => {\n    try {\n      const regex = new RegExp(script.findRegex, 'gim');\n      const beforeLength = result.length;\n      result = result.replace(regex, script.replaceString || '');\n\n      if (beforeLength !== result.length) {\n        console.log(' ', index + 1, '(', script.scriptName, ') ', beforeLength - result.length, '');\n      }\n    } catch (e) {\n      console.error(' ', index + 1, '(', script.scriptName, ') :', e);\n    }\n  });\n\n  console.log(' :', text.length, ':', result.length);\n\n  return result;\n}\n\n// ===== 5.  =====\n//   sendChatMessage\n//  \nasync function handleSend() {\n  const input = $('#inner-user-input');\n  const text = input.val().trim();\n\n  if (!text || isGenerating) return;\n\n  // \n  chatHistory.push({ role: 'user', content: text });\n  input.val('');\n  renderMessages();\n  saveChatHistory();\n\n  // \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    //   STScript API \n    if (typeof triggerSlashWithResult !== 'function') {\n      throw new Error('');\n    }\n\n    // \n    const userName = SillyTavern?.name1 || 'You';\n    const charName = SillyTavern?.name2 || 'AI';\n\n    // \n    let fullPrompt = '';\n    if (chatHistory.length > 0) {\n      fullPrompt += '\\\\n';\n      chatHistory.forEach((msg) => {\n        const name = msg.role === 'user' ? userName : charName;\n        fullPrompt += name + ': ' + msg.content + '\\\\n';\n      });\n      fullPrompt += '\\\\n';\n    }\n    fullPrompt += userName + ': ' + text;\n\n    console.log(' :', fullPrompt.length);\n\n    //   /gen \n    const command = '/gen lock=on \"' + fullPrompt.replace(/\"/g, '\\\\\\\\\"') + '\"';\n    const result = await triggerSlashWithResult(command);\n\n    console.log(' AI :', result ? result.length : 0);\n\n    if (result && result.length > 0) {\n      //  \n      const cleanedResult = applyRegexFilters(result);\n      console.log(' :', cleanedResult.length);\n\n      //  AI \n      chatHistory.push({ role: 'assistant', content: cleanedResult });\n      saveChatHistory();\n      renderMessages();\n      toastr.success('');\n    } else {\n      toastr.warning('AI ');\n    }\n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    // \n    isGenerating = false;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// =====================================================\n//   $(function() {})\n// =====================================================\n\n// ===== 6.  =====\n//  \n$(function() {\n  // \n  console.log(' ');\n  console.log(' chatHistory :', typeof chatHistory !== 'undefined');\n  console.log(' renderMessages :', typeof renderMessages === 'function');\n  console.log(' handleSend :', typeof handleSend === 'function');\n\n  //   false $(function() {}) \n  if (typeof chatHistory === 'undefined' || typeof renderMessages !== 'function') {\n    console.error(' /');\n    console.error(' $(function() {}) ');\n    toastr.error('');\n    return;\n  }\n\n  loadChatHistory();\n\n  // \n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-user-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  // \n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' ');\n  console.log(' :', $('#inner-messages').length > 0 ? ' ' : ' ');\n});\n\n// ===== 7.  =====\n$(window).on('pagehide', () => {\n  saveChatHistory();\n});\n\\`\\`\\`\n\n**HTML **\n\\`\\`\\`html\n<div class=\"inner-chat-container\">\n  <div class=\"inner-chat-header\">\n    <h3></h3>\n    <button id=\"inner-clear-btn\"></button>\n  </div>\n\n  <!--  ID  inner-messages -->\n  <div id=\"inner-messages\" class=\"inner-messages\"></div>\n\n  <div class=\"inner-input-area\">\n    <!--  ID  inner-user-input -->\n    <textarea id=\"inner-user-input\" placeholder=\"...\"></textarea>\n    <!--  ID  inner-send-btn -->\n    <button id=\"inner-send-btn\"></button>\n  </div>\n</div>\n\\`\\`\\`\n\n** HTML **\n- [ ]  \\`id=\"inner-messages\"\\` \n- [ ]  \\`id=\"inner-user-input\"\\` \n- [ ]  \\`id=\"inner-send-btn\"\\` \n- [ ]  \\`id=\"inner-clear-btn\"\\` \n- [ ] ID  JS \n\n**CSS **\n\\`\\`\\`css\n/*  */\n.inner-messages {\n  height: 400px;\n  overflow-y: auto;\n  padding: 15px;\n  display: flex;  /*   flex */\n  flex-direction: column;\n  gap: 10px;\n}\n\n/*  */\n.message {\n  max-width: 70%;\n  padding: 10px 15px;\n  border-radius: 12px;\n  word-wrap: break-word;\n}\n\n/*   */\n.user-message {\n  align-self: flex-end;  /*  */\n  background: #4a9eff;\n  color: white;\n}\n\n/*  AI  */\n.ai-message {\n  align-self: flex-start;  /*  */\n  background: #2a2a2a;\n  color: #e0e0e0;\n}\n\\`\\`\\`\n\n** **\n- ID \\`inner-\\`\n-  \\`display: flex; flex-direction: column\\`\n-  \\`align-self: flex-end\\` \n- AI  \\`align-self: flex-start\\` \n\n** API**\n- **\\`generate(prompt)\\`**: ** AI **\n- \\`generateRaw(prompt)\\`:  AI \n- \\`getVariables({ type: 'message', message_id })\\`: \n- \\`insertOrAssignVariables(data, { type: 'message', message_id })\\`: \n- \\`getChatMessages()\\`: \n\n****\n- **\\`generate\\`**: \n- **\\`generateRaw\\`**: \n\n** **\n1. **80% **\n   -  **** \\`$(function() {})\\`  \\`let\\`/\\`const\\`/\\`function\\` \n   -  ********\\`$(function() {})\\` \n   - **** \\`console.log(typeof chatHistory)\\` \\`'object'\\`  \\`'undefined'\\`\n\n1.5. **/**\n   -  ****\\`chatHistory.push({ role: 'assistant', content: '' });\\`\n   -  ****\\`chatHistory.push({ role: 'assistant', content: ' AI ' });\\`\n   -  **** AI \n   -  **** \\`generate()\\`AI  \\`STREAM_TOKEN_RECEIVED_FULLY\\` \n   - ****\\`generate()\\`  AI API\n\n2. **generation_id **\n   -  \\`const result = await generate(...); const id = result.generation_id;\\`\n   -  \n     \\`\\`\\`javascript\n     const myId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n     await generate({ user_input: text, generation_id: myId });\n     //  id  myId\n     \\`\\`\\`\n   - \\`generate()\\`  \\`Promise<string>\\`\n   -  ID \n\n3. ****\n   -  \\`index.html\\` + \\`index.ts\\`\n   - \n   -  \\`setChatMessages(..., { refresh: 'none' })\\` \n\n4. ****\n   -   \\`sendChatMessage\\`\n   -   \\`generate\\`\\`getChatMessages\\`  API \n   -  \\`handleSend\\`\\`innerSendMessage\\`\\`sendInnerMessage\\`\n   - **** \\`sk()\\` \n\n5. ** ID **\n   -  \\`inner-\\` \n   -  \\`send-button\\`\\`user-input\\` \n   - **** \\`$('#inner-messages').length\\`  1 0\n\n6. ****\n   -  ** \\`iframe_events.XXX\\` \\`'iframe_events.XXX'\\`**\n   -  ** \\`(text, id)\\` \\`(data)\\` \\`text\\`  \\`data.text\\`**\n   -  **\\`generate({ user_input: text, should_stream: true, generation_id: myId })\\`**\n   -  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => ...)\\` \n   -  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\` \n\n7. **API **\n   -  \\`generate(prompt)\\`\n   -  \\`generateRaw(prompt)\\`\n   - \n\n8. ****\n   -  \\`getVariables({ type: 'chat' })\\`  \\`insertOrAssignVariables(data, { type: 'chat' })\\`\n   - \\`{ type: 'message', message_id }\\`\n   - \n\n****\n\\`\\`\\`javascript\n// ==========  ==========\n\n//  \n// eventOn('iframe_events.STREAM_TOKEN_RECEIVED_FULLY', (data) => { ... })\n//   'iframe_events.XXX'\n//   (data)\n\n//  \neventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => {\n  // text \n  $('#ai-reply').text(text); //   text text.text  data.text\n  console.log(':', text);\n});\n\neventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => {\n  // text \n  console.log(' :', text); //   text\n  chatHistory.push({ role: 'assistant', content: text });\n  saveChatHistory();\n  isGenerating = false;\n  $('#send-btn').prop('disabled', false).text('');\n});\n\n//  GENERATION_ENDED\neventOn(iframe_events.GENERATION_ENDED, (text, id) => {\n  console.log(' :', text);\n  chatHistory.push({ role: 'assistant', content: text });\n  saveChatHistory();\n  isGenerating = false;\n  $('#send-btn').prop('disabled', false).text('');\n});\n\n// ==========  ==========\nasync function handleSend() {\n  const userInput = $('#user-input').val();\n  chatHistory.push({ role: 'user', content: userInput });\n\n  isGenerating = true;\n  $('#send-btn').prop('disabled', true).text('...');\n\n  //   STScript \n  const command = '/gen lock=on \"' + userInput.replace(/\"/g, '\\\\\\\\\"') + '\"';\n  const result = await triggerSlashWithResult(command);\n\n  if (result) {\n    chatHistory.push({ role: 'assistant', content: result });\n    renderMessages();\n  }\n\n  //   generate API\n  // await generate({ user_input: userInput });  //  \n}\n\\`\\`\\`\n\n** triggerSlashWithResult**\n-  \\`/gen\\` \n- \n-  generation_id \n\n**\\`/gen\\` **\n- \\`/gen lock=on \"\"\\`\n- \n-  AI \n\n---\n\n#  AI \n\n**\"\"\"\"\"\"\"\"******B\n****A\n\n##  \n\n### 1. \n-  **** \\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\`\n-  **** \\`$(function() {})\\`  \\`loadChatHistory()\\`\n-  **** \\`SillyTavern.getCurrentChatId()\\` \n-  **** \\`$(window).on('pagehide', ...)\\` \n-  ****/ \\`saveChatHistory()\\`\n\n### 2. \n-  ****\\`display: none\\`iframe \n-  ****\n-  **** \\`chatHistory\\`\n\n### 3. \n-  **** \\`{ type: 'chat' }\\`\n-  **** \\`getCurrentChatId()\\` \n\n##  triggerSlashWithResult\n\n**** \n\n****\n\n\\`\\`\\`typescript\n// ===== 1. =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\n\n// ===== 2.  =====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3. =====\nfunction applyRegexFilters(text: string): string {\n  console.log(' :', text.length);\n\n  if (!text || typeof text !== 'string') return '';\n\n  // =====  0:  =====\n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\n  criticalTags.forEach(tag => {\n    const openTagRegex = new RegExp(\\\\\\`<\\\\\\${tag}([^>]*)>\\\\\\`, 'gi');\n    const closeTagRegex = new RegExp(\\\\\\`</\\\\\\${tag}>\\\\\\`, 'gi');\n\n    const openMatches = text.match(openTagRegex);\n    const closeMatches = text.match(closeTagRegex);\n\n    const openCount = openMatches ? openMatches.length : 0;\n    const closeCount = closeMatches ? closeMatches.length : 0;\n\n    if (openCount > closeCount) {\n      const missing = openCount - closeCount;\n      console.log(\\\\\\`  \\\\\\${missing}  <\\\\\\${tag}> \\\\\\`);\n      text = text + \\\\\\`</\\\\\\${tag}>\\\\\\`.repeat(missing);\n    }\n  });\n\n  // =====  1: =====\n  function extractLastTagContent(tagName: string, text: string): string | null {\n    if (!text || typeof text !== 'string') return null;\n\n    const endTag = \\\\\\`</\\\\\\${tagName}>\\\\\\`;\n    const searchPool = text.toLowerCase();\n    const endTagPattern = endTag.toLowerCase();\n\n    const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\n    if (lastEndIndex !== -1) {\n      const startTag = \\\\\\`<\\\\\\${tagName}>\\\\\\`;\n      const startTagPattern = startTag.toLowerCase();\n\n      const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\n      if (lastStartIndex !== -1) {\n        const startIndex = lastStartIndex + startTag.length;\n        return text.substring(startIndex, lastEndIndex).trim();\n      }\n    }\n    return null;\n  }\n\n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\n  for (const tag of gameTextTags) {\n    const extracted = extractLastTagContent(tag, text);\n    if (extracted !== null) {\n      console.log(\\\\\\`  <\\\\\\${tag}> :\\\\\\`, extracted.length);\n      return extracted;\n    }\n  }\n\n  // =====  2:  =====\n  let cleanedText = text;\n\n  const tagsToRemove = [\n    'guide', 'plot', 'status',\n    'UpdateVariable', '', '', ''\n  ];\n\n  tagsToRemove.forEach(tag => {\n    const regexWithContent = new RegExp(\\\\\\`<\\\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?</\\\\\\${tag}>\\\\\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regexWithContent, '');\n\n    const regexSelfClosing = new RegExp(\\\\\\`<\\\\\\${tag}\\\\\\\\\\\\\\\\s*\\\\\\\\\\\\\\\\/>\\\\\\`, 'gi');\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\n\n    if (before !== cleanedText) {\n      console.log(\\\\\\`    <\\\\\\${tag}> \\\\\\`);\n    }\n  });\n\n  //  think/thinking \n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\s\\\\\\\\S]*?<\\\\\\\\/[^>]*think[^>]*>/gi;\n  const beforeThinking = cleanedText;\n  cleanedText = cleanedText.replace(thinkingRegex, '');\n  if (beforeThinking !== cleanedText) {\n    console.log('    think/thinking ');\n  }\n\n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\/>/gi;\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\n\n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  3: =====\n  let allRegexScripts: any[] = [];\n\n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegexes = getRegexScripts();\n      if (globalRegexes && globalRegexes.length > 0) {\n        console.log(' ', globalRegexes.length, '');\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\n      }\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  try {\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes: any = null;\n\n              if (Array.isArray(data)) {\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break;\n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length > 0) {\n    console.log(' ', allRegexScripts.length, '');\n\n    const activeScripts = allRegexScripts.filter((script: any) => {\n      if (script.disabled) return false;\n      if (!script.placement || !Array.isArray(script.placement)) return false;\n      if (!script.placement.includes(2)) return false;\n      return true;\n    });\n\n    console.log(' ', activeScripts.length, '');\n\n    let result = text;\n    activeScripts.forEach((script: any, index: number) => {\n      try {\n        const regex = new RegExp(script.findRegex, 'gim');\n        const beforeLength = result.length;\n        result = result.replace(regex, script.replaceString || '');\n\n        if (beforeLength !== result.length) {\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\n        }\n      } catch (e) {\n        console.error(' ', index + 1, ':', e);\n      }\n    });\n\n    text = result;\n  }\n\n  console.log(' :', text.length);\n  return text;\n}\n\n// ===== 4.  =====\nasync function handleSend() {\n  const input = $('#inner-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    if (typeof triggerSlashWithResult !== 'function') {\n      throw new Error('');\n    }\n\n    const userName = SillyTavern?.name1 || 'You';\n    const charName = SillyTavern?.name2 || 'AI';\n\n    let fullPrompt = '';\n    if (chatHistory.length > 1) {\n      fullPrompt += '\\\\n';\n      chatHistory.slice(0, -1).forEach((msg) => {\n        const name = msg.role === 'user' ? userName : charName;\n        fullPrompt += name + ': ' + msg.content + '\\\\n';\n      });\n      fullPrompt += '\\\\n';\n    }\n    fullPrompt += userName + ': ' + userInput;\n\n    console.log(' :', fullPrompt.length);\n\n    const command = '/gen lock=on \"' + fullPrompt.replace(/\"/g, '\\\\\\\\\"') + '\"';\n    const result = await triggerSlashWithResult(command);\n\n    console.log(' AI :', result ? result.length : 0);\n\n    if (result && result.length > 0) {\n      const cleanedResult = applyRegexFilters(result);\n      console.log(' :', cleanedResult.length);\n\n      chatHistory.push({ role: 'assistant', content: cleanedResult });\n      saveChatHistory();\n      renderMessages();\n      toastr.success('');\n    } else {\n      toastr.warning('AI ');\n    }\n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    isGenerating = false;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// ===== 5.  =====\nfunction renderMessages() {\n  const container = $('#inner-messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 6. =====\nlet currentChatId = SillyTavern.getCurrentChatId();\nif (typeof eventOn === 'function') {\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\n    if (currentChatId !== newChatId) {\n      console.log(' :', currentChatId, '->', newChatId);\n      currentChatId = newChatId;\n\n      // \n      loadChatHistory();\n\n      // \n      if (isGenerating) {\n        isGenerating = false;\n        $('#inner-send-btn').prop('disabled', false).text('');\n        console.log(' ');\n      }\n    }\n  });\n}\n\n// ===== 7.  =====\n$(function() {\n  console.log(' A');\n  console.log('  ID:', currentChatId);\n\n  // \n  loadChatHistory();\n\n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' A');\n  console.log(' ', chatHistory.length, '');\n});\n\n// ===== 8.  =====\n$(window).on('pagehide', () => {\n  console.log(' ');\n  saveChatHistory();\n});\n\\`\\`\\`\n\n---\n\n##  generate + \n\n****  AI \n\n****\n\n\\`\\`\\`typescript\n// ===== 1. =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\nlet currentGenerationId: string | null = null;\n\n// ===== 2. A=====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3. A=====\nfunction applyRegexFilters(text: string): string {\n  // ... A ...\n  // A applyRegexFilters \n  return text;\n}\n\n// ===== 4. =====\nfunction setupStreamListeners() {\n  //  \n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\n    if (!isGenerating || id !== currentGenerationId) return;\n\n    console.log(' :', text.length);\n\n    //  \n    const cleanedText = applyRegexFilters(text);\n\n    //  DOM\n    const container = $('#inner-messages');\n    const charName = (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n    const lastMsg = container.find('.message:last-child');\n\n    if (lastMsg.length && lastMsg.hasClass('ai-message')) {\n      //  AI \n      lastMsg.html('<strong>' + charName + ':</strong> <span class=\"streaming\">' + cleanedText + '</span>');\n    } else {\n      //  AI \n      const msgDiv = $('<div>')\n        .addClass('message ai-message')\n        .html('<strong>' + charName + ':</strong> <span class=\"streaming\">' + cleanedText + '</span>');\n      container.append(msgDiv);\n    }\n\n    // \n    container.scrollTop(container[0].scrollHeight);\n  });\n\n  //  \n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\n    if (id === currentGenerationId) {\n      console.log(' :', text.length);\n\n      //  \n      const cleanedText = applyRegexFilters(text);\n\n      // \n      chatHistory.push({ role: 'assistant', content: cleanedText });\n      saveChatHistory();\n\n      // \n      renderMessages();\n\n      // \n      isGenerating = false;\n      currentGenerationId = null;\n      $('#inner-send-btn').prop('disabled', false).text('');\n\n      toastr.success('');\n    }\n  });\n}\n\n// ===== 5. =====\nasync function handleSend() {\n  const input = $('#inner-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  //  ID\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n\n  // \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    if (typeof generate !== 'function') {\n      throw new Error('');\n    }\n\n    console.log(' generation_id:', currentGenerationId);\n\n    //   generate \n    await generate({\n      user_input: userInput,\n      should_stream: true,           //  \n      generation_id: currentGenerationId,  //   ID\n      overrides: {\n        chat_history: {\n          prompts: chatHistory.map(msg => ({\n            role: msg.role === 'user' ? 'user' : 'assistant',\n            content: msg.content\n          }))\n        }\n      }\n    });\n\n    // \n    // GENERATION_ENDED  AI \n\n  } catch (error) {\n    console.error(' :', error);\n    toastr.error(': ' + (error?.message || String(error)));\n\n    // \n    isGenerating = false;\n    currentGenerationId = null;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// ===== 6. A=====\nfunction renderMessages() {\n  const container = $('#inner-messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 7. =====\nlet currentChatId = SillyTavern.getCurrentChatId();\nif (typeof eventOn === 'function') {\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\n    if (currentChatId !== newChatId) {\n      console.log(' :', currentChatId, '->', newChatId);\n      currentChatId = newChatId;\n\n      // \n      loadChatHistory();\n\n      // \n      if (isGenerating) {\n        isGenerating = false;\n        currentGenerationId = null;\n        $('#inner-send-btn').prop('disabled', false).text('');\n        console.log(' ');\n      }\n    }\n  });\n}\n\n// ===== 8.  =====\n$(function() {\n  console.log(' B - ');\n  console.log('  ID:', currentChatId);\n\n  // \n  loadChatHistory();\n\n  //  \n  setupStreamListeners();\n\n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' B');\n  console.log(' ', chatHistory.length, '');\n});\n\n// ===== 9.  =====\n$(window).on('pagehide', () => {\n  console.log(' ');\n  saveChatHistory();\n});\n\\`\\`\\`\n\n**CSS B**\n\n\\`\\`\\`css\n.streaming {\n  border-right: 2px solid #165DFF;\n  padding-right: 4px;\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  0%, 50% { border-right-color: #165DFF; }\n  51%, 100% { border-right-color: transparent; }\n}\n\\`\\`\\`\n\n---\n\n##  AI \n\n****\n\n1. ****\n   - \"\"\"\"\n   - \"\"\"\"\n   - \"\"\"\"\n   - \n\n2. ****\n   - \n   - \"\"\n\n** ** \"\"****\n\n## \n\n****\n\n### AI \n\n**1**\n\n\n- \n- /\n- \n- \n\n**2**\n\n### A\"\"\"\"\n\n****\n\n\n\\`\\`\\`\nFILE_START: NEED_MORE_INFO\n\n\n-  AI \n- \n- \n\n\n\n**1. **\n- \n- \n- \n- \n\n**2. **\n- \n- \n-  AI \n\n**3. **\n- \n- \n- \n\n**4. **\n- \n- \n- /\n- \n- \n\n---\n\n****\n\n### \n\n\n\n1. ****\n2. ****\n3. ****\n\n### \n\n****\n1.    \\`generate({ should_stream: true, generation_id })\\`\n2.  \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\` \n3.     \n4.    \\`chatHistory\\`  \n\n****\n-  \\`generation_id\\` \n- \\`applyRegexFilters\\`\n- \n\n### \n\n****\n\\`\\`\\`javascript\nlet chatHistory = [\n  { role: 'user', content: '', timestamp: '...' },\n  { role: 'assistant', content: 'AI', timestamp: '...' }\n];\n\\`\\`\\`\n\n****\n- \n- AI \n\n****\n \\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\` \n\n### \n\n**\\`applyRegexFilters\\` **\n1. \"\"\n2. \\`<dream>\\`\\`<gametxt>\\` \n3. \\`<think>\\`\\`<guide>\\`\\`<plot>\\` \n4. \n\n****\n- \n- \n\n---\n\n****\n\n\"\"\n-  #1a1a1a\n- #4a9eff\n- AI #3a3a3a\n-  + \n- \n\nFILE_END\n\\`\\`\\`\n\n### B\n\n****\n\n\n\\`\\`\\`\nFILE_START: index.html\n[ HTML ]\nFILE_END\n\nFILE_START: style.css\n[ CSS ]\nFILE_END\n\nFILE_START: script.js\n[ JavaScript ]\nFILE_END\n\\`\\`\\`\n\n### C\"\"\"\"\n\n****\n\n****\n-  #1a1a1a #2a2a2a\n- #4a9eff\n- AI #3a3a3a\n- border-radius: 12px\n- fadeIn/fadeOut\n- \n- \n- \n\n---\n\n### \n\n\n\n\\`\\`\\`typescript\n// \nconst regexPresets = {\n  \"\": [\n    { pattern: /<tag1>/g, replacement: \"\" },\n    { pattern: /\\\\[tag2\\\\]/g, replacement: \"\" },\n  ],\n  \"\": [\n    { pattern: /\\\\{\\\\{some_meta_data\\\\}\\\\}/g, replacement: \"\" },\n  ]\n};\n\nlet currentPreset = \"\";\n\nfunction applyRegexFilters(text: string, presetName?: string): string {\n  const preset = presetName || currentPreset;\n  const rules = regexPresets[preset] || regexPresets[\"\"];\n\n  let cleanedText = text;\n  rules.forEach(rule => {\n    cleanedText = cleanedText.replace(rule.pattern, rule.replacement);\n  });\n\n  // \n  // ...  ...\n\n  return cleanedText;\n}\n\nfunction switchPreset(presetName: string) {\n  currentPreset = presetName;\n  renderMessages(); // \n}\n\\`\\`\\`\n\n****\n\n---\n\n# \n FILE_START  FILE_END \n\n****\n\nFILE_START: index.html\n[ HTML  headbody CSS  JS]\nFILE_END\n\nFILE_START: style.css\n[ CSS ]\nFILE_END\n\nFILE_START: script.js\n[ JavaScript  jQuery]\nFILE_END\n\n** **\n1. **** \\`inner\\`\\`my\\`\n   -  \\`sendChatMessage\\`\\`generate\\`\\`getChatMessages\\`\n   -  \\`innerSendMessage\\`\\`handleSendMessage\\`\\`sendInnerMessage\\`\n2. ** ID** \\`inner-\\`\\`my-\\`\n   -  \\`#send-button\\`\\`#user-input\\`\n   -  \\`#inner-send-btn\\`\\`#inner-user-input\\`\n3. ****\n\n#  \n**\"\"\"\"\"\"**\n\n-  \"\"  ** style.css**\n-  \"\"  ** script.js**\n-  \"\"  ** script.js**\n-  \n\n# \n## \n- ///  ** style.css**\n- / bug  ** script.js**\n- /  ** index.html**\n- /  ** index.html**\n\n## \n- /  ** index.htmlstyle.cssscript.js**\n- /  ****\n-   ****\n\n# \n1. **  getVariables/insertOrAssignVariables**\n2. **  \\`typeof SillyTavern !== 'undefined'\\` localStorage  API**\n3. \n4. \n5. CSS \n6. JavaScript  \\`$(function() { ... })\\`  DOM \n7. \\`{ type: 'chat' }\\` \\`{ type: 'global' }\\` \n8. `;\n                const currentFiles = proj.files.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n                const userPrompt = `# \n${currentFiles}\n\n# \n${aiPrompt.value}\n\n#  \n1. ****\n2. **** 1 \n3. ****\n4. **** getVariables/insertOrAssignVariables\n\n system `;\n                // \n                streamingText.value = ''; // \n                let resultText = '';\n                progressDialogRef.value?.setProgress(25);\n                progressDialogRef.value?.setMessage(' AI ...');\n                await new Promise(r => setTimeout(r, 100)); //  DOM \n                if (enableStream.value) {\n                    // \n                    progressDialogRef.value?.setProgress(30);\n                    progressDialogRef.value?.setMessage(' AI ...');\n                    await new Promise(r => setTimeout(r, 100)); //  DOM \n                    const response = await fetch(normalizedEndpoint, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${apiKey}`,\n                        },\n                        body: JSON.stringify({\n                            model: model,\n                            messages: [\n                                { role: 'system', content: systemPrompt },\n                                { role: 'user', content: userPrompt },\n                            ],\n                            temperature: temperature,\n                            max_tokens: maxTokens,\n                            stream: true, // \n                        }),\n                    });\n                    if (!response.ok) {\n                        let errorMsg = `API : ${response.status} ${response.statusText}`;\n                        try {\n                            const errorData = await response.json();\n                            console.error('API :', errorData);\n                            errorMsg += `\\n${JSON.stringify(errorData, null, 2)}`;\n                        }\n                        catch (e) {\n                            console.error('');\n                        }\n                        throw new Error(errorMsg);\n                    }\n                    // \n                    const reader = response.body?.getReader();\n                    const decoder = new TextDecoder();\n                    if (!reader) {\n                        throw new Error('');\n                    }\n                    let chunkCount = 0;\n                    while (true) {\n                        const { done, value } = await reader.read();\n                        if (done)\n                            break;\n                        const chunk = decoder.decode(value, { stream: true });\n                        const lines = chunk.split('\\n');\n                        for (const line of lines) {\n                            if (line.startsWith('data: ')) {\n                                const data = line.slice(6);\n                                if (data === '[DONE]')\n                                    continue;\n                                try {\n                                    const json = JSON.parse(data);\n                                    const content = json.choices?.[0]?.delta?.content || '';\n                                    if (content) {\n                                        resultText += content;\n                                        streamingText.value += content;\n                                        chunkCount++;\n                                        // 30%  60%\n                                        const progress = Math.min(60, 30 + chunkCount / 10);\n                                        progressDialogRef.value?.setProgress(progress);\n                                        // 10chunk\n                                        if (chunkCount % 10 === 0) {\n                                            progressDialogRef.value?.setMessage(` AI ... (${resultText.length} )`);\n                                        }\n                                    }\n                                }\n                                catch (e) {\n                                    // \n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    // \n                    progressDialogRef.value?.setProgress(30);\n                    progressDialogRef.value?.setMessage(' AI ...');\n                    await new Promise(r => setTimeout(r, 100)); //  DOM \n                    const response = await fetch(normalizedEndpoint, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${apiKey}`,\n                        },\n                        body: JSON.stringify({\n                            model: model,\n                            messages: [\n                                { role: 'system', content: systemPrompt },\n                                { role: 'user', content: userPrompt },\n                            ],\n                            temperature: temperature,\n                            max_tokens: maxTokens,\n                        }),\n                    });\n                    if (!response.ok) {\n                        let errorMsg = `API : ${response.status} ${response.statusText}`;\n                        try {\n                            const errorData = await response.json();\n                            console.error('API :', errorData);\n                            errorMsg += `\\n${JSON.stringify(errorData, null, 2)}`;\n                        }\n                        catch (e) {\n                            console.error('');\n                        }\n                        throw new Error(errorMsg);\n                    }\n                    progressDialogRef.value?.setProgress(60);\n                    progressDialogRef.value?.setMessage(' AI ...');\n                    const data = await response.json();\n                    resultText = data.choices?.[0]?.message?.content || '';\n                }\n                progressDialogRef.value?.setProgress(75);\n                progressDialogRef.value?.setMessage(' AI ...');\n                console.log('AI :', resultText);\n                console.log('AI :', resultText.length);\n                if (!resultText || resultText.trim().length === 0) {\n                    throw new Error('AI  API ');\n                }\n                // \n                const changes = [];\n                // FILE_START: filename\\n...FILE_END  FILE_START:filename\\n...FILE_END\n                const fileRegex = /FILE_START:\\s*(.+?)[\\r\\n]+([\\s\\S]*?)FILE_END/gi;\n                let match;\n                console.log(' AI ...');\n                // \n                const needMoreInfoMatch = resultText.match(/FILE_START:\\s*NEED_MORE_INFO\\s*[\\r\\n]+([\\s\\S]*?)FILE_END/i);\n                if (needMoreInfoMatch) {\n                    const guideContent = needMoreInfoMatch[1].trim();\n                    console.log(' AI ');\n                    //  AI \n                    closeAIDialog();\n                    // \n                    toastr.info('AI ', '', { timeOut: 3000 });\n                    // alert\n                    alert(guideContent);\n                    // \n                    aiGenerating.value = false;\n                    return;\n                }\n                while ((match = fileRegex.exec(resultText)) !== null) {\n                    const path = match[1].trim();\n                    const content = match[2].trim();\n                    console.log(`: ${path}, : ${content.length}`);\n                    const file = proj.files.find(f => f.path === path);\n                    if (file) {\n                        changes.push({\n                            path: path,\n                            oldContent: file.content,\n                            newContent: content,\n                        });\n                    }\n                    else {\n                        console.warn(` ${path} `);\n                    }\n                }\n                if (changes.length === 0) {\n                    console.error(' AI ');\n                    console.error('AI :', resultText.substring(0, 500));\n                    // \n                    if (resultText.length < 500 || !resultText.includes('FILE_END')) {\n                        throw new Error(`AI  ${resultText.length} \"\" max_tokens 4000 `);\n                    }\n                    throw new Error('AI  AI  FILE_START  FILE_END ');\n                }\n                console.log(':', changes.length, '');\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                // \n                if (changes.length === 1 && changes[0].path === 'index.html') {\n                    toastr.warning('AI  HTML CSS/JS');\n                }\n                //  FILE_END\n                const lastFile = resultText.trim().split('FILE_START').pop() || '';\n                if (!lastFile.includes('FILE_END')) {\n                    toastr.error('AI ');\n                }\n                const result = { changes };\n                if (!result.changes || !Array.isArray(result.changes)) {\n                    throw new Error('AI ');\n                }\n                // \n                aiChanges.value = result.changes;\n                progressDialogRef.value?.setProgress(95);\n                progressDialogRef.value?.setMessage(`... (${changes.length} )`);\n                closeAIDialog();\n                showComparison.value = true;\n                previewMode.value = 'after';\n                // \n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' AI ');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    toastr.success(` AI  ${changes.length} `);\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                //  CORS \n                const errorMessage = error.message || String(error);\n                if (errorMessage.includes('CORS') ||\n                    errorMessage.includes('Failed to fetch') ||\n                    errorMessage.includes('Access-Control-Allow-Origin')) {\n                    toastr.error(` CORS  API\\n\\n` +\n                        `API ${new URL(normalizedEndpoint).origin} CORS \\n\\n` +\n                        `\\n` +\n                        `1.  API  CORS\\n` +\n                        `2.  CORS  API \\n` +\n                        `3.  API `);\n                }\n                else if (errorMessage.includes('307') || errorMessage.includes('Temporary Redirect')) {\n                    toastr.error(` URL \\n\\n` +\n                        `${normalizedEndpoint}\\n\\n` +\n                        `URL \\n` +\n                        `https:///v1`);\n                }\n                else {\n                    toastr.error(`AI : ${errorMessage}`);\n                }\n            }\n            finally {\n                aiGenerating.value = false;\n            }\n        }\n        function acceptChanges() {\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            // \n            const historyRecord = {\n                timestamp: new Date().toISOString(),\n                prompt: aiPrompt.value,\n                changes: aiChanges.value,\n            };\n            if (!aiHistory.value[currentId.value]) {\n                aiHistory.value[currentId.value] = [];\n            }\n            aiHistory.value[currentId.value].unshift(historyRecord);\n            console.log(' AI :', aiHistory.value[currentId.value].length);\n            // \n            aiChanges.value.forEach(change => {\n                const file = proj.files.find(f => f.path === change.path);\n                if (file) {\n                    file.content = change.newContent;\n                }\n            });\n            // \n            saveToChatVar();\n            updatePreview();\n            // \n            if (currentFile.value) {\n                const file = proj.files.find(f => f.path === currentFile.value);\n                if (file) {\n                    code.value = file.content;\n                }\n            }\n            showComparison.value = false;\n            aiChanges.value = [];\n            toastr.success('');\n        }\n        function rejectChanges() {\n            showComparison.value = false;\n            aiChanges.value = [];\n            toastr.info('');\n        }\n        function showHistoryDialog() {\n            showHistory.value = true;\n        }\n        function closeHistoryDialog() {\n            showHistory.value = false;\n        }\n        function restoreHistory(record) {\n            if (!confirm(`\\n\\n\"${record.prompt}\"\\n\\n`)) {\n                return;\n            }\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            // \n            record.changes.forEach(change => {\n                const file = proj.files.find(f => f.path === change.path);\n                if (file) {\n                    file.content = change.newContent;\n                }\n            });\n            console.log(':', record.prompt);\n            // \n            saveToChatVar();\n            updatePreview();\n            // \n            if (currentFile.value) {\n                const file = proj.files.find(f => f.path === currentFile.value);\n                if (file) {\n                    code.value = file.content;\n                }\n            }\n            closeHistoryDialog();\n            toastr.success('');\n        }\n        function exportToRegex() {\n            const proj = currentProject.value;\n            if (!proj) {\n                toastr.error('');\n                return;\n            }\n            // \n            const fileObj = proj.files.find(f => f.name === currentFile.value);\n            if (fileObj && code.value !== fileObj.content) {\n                const shouldContinue = confirm('\\n\\n');\n                if (!shouldContinue) {\n                    return;\n                }\n            }\n            // \n            const triggerWord = prompt(`${proj.name}\\n\\n\\n  //g`, `${proj.name}`);\n            if (!triggerWord) {\n                toastr.info('');\n                return;\n            }\n            try {\n                //  HTML proj.files \n                const fullHtml = buildPreviewFromFiles(proj.files);\n                //  UUID\n                const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                    const r = (Math.random() * 16) | 0;\n                    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n                    return v.toString(16);\n                });\n                //  JSON\n                // 1.  Windows  \\r\n                // 2.  <!DOCTYPE html>\\n <html> \n                // 3. ```html\\n\\n<html>...</html>\\n```\n                let cleanHtml = fullHtml.replace(/\\r/g, '');\n                cleanHtml = cleanHtml.replace(/^<!DOCTYPE html>\\n/, '');\n                const regexJson = {\n                    id: uuid,\n                    scriptName: proj.name,\n                    findRegex: triggerWord.startsWith('/') ? triggerWord : `/${triggerWord}/g`,\n                    replaceString: '```html\\n\\n' + cleanHtml + '\\n```',\n                    trimStrings: [],\n                    placement: [1, 2],\n                    disabled: false,\n                    markdownOnly: true,\n                    promptOnly: false,\n                    runOnEdit: true,\n                    substituteRegex: 0,\n                    minDepth: null,\n                    maxDepth: null,\n                };\n                // \n                const dataStr = JSON.stringify(regexJson, null, 4);\n                const dataBlob = new Blob([dataStr], { type: 'application/json' });\n                const url = URL.createObjectURL(dataBlob);\n                const link = document.createElement('a');\n                link.href = url;\n                link.download = `${proj.name}_regex.json`;\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n                URL.revokeObjectURL(url);\n                console.log(' JSON:', regexJson);\n                toastr.success(` \"${proj.name}\"  JSON`);\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(`: ${error.message}`);\n            }\n        }\n        function openInNewWindow() {\n            if (!previewHtml.value) {\n                toastr.error('');\n                return;\n            }\n            const proj = currentProject.value;\n            const windowTitle = proj ? proj.name : '';\n            // \n            const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\n            if (newWindow) {\n                newWindow.document.write(previewHtml.value);\n                newWindow.document.close();\n                newWindow.document.title = windowTitle;\n                toastr.success('');\n            }\n            else {\n                toastr.error('');\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[68] || (_cache[68] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px !important\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-laptop-code\",\n                            style: { \"color\": \"#4a9eff\", \"font-size\": \"18px\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                style: { \"padding\": \"8px 16px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onClick: exportToRegex,\n                                onMouseenter: _cache[0] || (_cache[0] = (e) => (e.currentTarget.style.background = '#555')),\n                                onMouseleave: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.background = '#444'))\n                            }, [...(_cache[61] || (_cache[61] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-download\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                style: { \"padding\": \"8px 16px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onClick: showHistoryDialog,\n                                onMouseenter: _cache[2] || (_cache[2] = (e) => (e.currentTarget.style.background = '#555')),\n                                onMouseleave: _cache[3] || (_cache[3] = (e) => (e.currentTarget.style.background = '#444'))\n                            }, [...(_cache[62] || (_cache[62] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-history\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 2,\n                                style: { \"padding\": \"8px 16px\", \"background\": \"#8b5cf6\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onClick: showAIDialog,\n                                onMouseenter: _cache[4] || (_cache[4] = (e) => (e.currentTarget.style.background = '#7c3aed')),\n                                onMouseleave: _cache[5] || (_cache[5] = (e) => (e.currentTarget.style.background = '#8b5cf6'))\n                            }, [...(_cache[63] || (_cache[63] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-wand-magic-sparkles\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createTextVNode(\" AI  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 3,\n                                style: { \"padding\": \"8px 16px\", \"background\": \"#ef4444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onClick: showBugFixDialog,\n                                onMouseenter: _cache[6] || (_cache[6] = (e) => (e.currentTarget.style.background = '#dc2626')),\n                                onMouseleave: _cache[7] || (_cache[7] = (e) => (e.currentTarget.style.background = '#ef4444'))\n                            }, [...(_cache[64] || (_cache[64] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-bug\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createTextVNode(\" Bug  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                            onClick: showProjectTemplateDialog,\n                            onMouseenter: _cache[8] || (_cache[8] = (e) => (e.currentTarget.style.background = '#555')),\n                            onMouseleave: _cache[9] || (_cache[9] = (e) => (e.currentTarget.style.background = '#444'))\n                        }, [...(_cache[65] || (_cache[65] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-file-lines\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                            onClick: triggerFolderImport,\n                            onMouseenter: _cache[10] || (_cache[10] = (e) => (e.currentTarget.style.background = '#555')),\n                            onMouseleave: _cache[11] || (_cache[11] = (e) => (e.currentTarget.style.background = '#444'))\n                        }, [...(_cache[66] || (_cache[66] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-folder-open\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"#10b981\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                            onClick: createProject,\n                            onMouseenter: _cache[12] || (_cache[12] = (e) => (e.currentTarget.style.background = '#059669')),\n                            onMouseleave: _cache[13] || (_cache[13] = (e) => (e.currentTarget.style.background = '#10b981'))\n                        }, [...(_cache[67] || (_cache[67] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-plus\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"input\", {\n                    ref_key: \"folderInputRef\",\n                    ref: folderInputRef,\n                    type: \"file\",\n                    webkitdirectory: \"\",\n                    directory: \"\",\n                    multiple: \"\",\n                    style: { \"display\": \"none\" },\n                    onChange: handleFolderImport\n                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _cache[73] || (_cache[73] = _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 15px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */)),\n                        (projects.value.length === 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[69] || (_cache[69] = [\n                                    _createTextVNode(\" \", -1 /* CACHED */),\n                                    _createElementVNode(\"br\", null, null, -1 /* CACHED */),\n                                    _createTextVNode(\" \\\"\\\" \", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true),\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(projects.value, (proj) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: proj.id,\n                                style: _normalizeStyle({\n                                    padding: '10px 12px',\n                                    marginBottom: '8px',\n                                    background: currentId.value === proj.id ? '#4a9eff' : '#1e1e1e',\n                                    borderRadius: '8px',\n                                    cursor: 'pointer',\n                                    transition: 'all 0.2s ease',\n                                    display: 'flex',\n                                    justifyContent: 'space-between',\n                                    alignItems: 'center',\n                                    color: currentId.value === proj.id ? '#fff' : '#e0e0e0',\n                                }),\n                                onClick: ($event) => (selectProject(proj.id)),\n                                onMouseenter: (e) => currentId.value !== proj.id && (e.currentTarget.style.background = '#3a3a3a'),\n                                onMouseleave: (e) => currentId.value !== proj.id && (e.currentTarget.style.background = '#1e1e1e')\n                            }, [\n                                _createElementVNode(\"span\", _hoisted_8, _toDisplayString(proj.name), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    style: { \"width\": \"20px\", \"height\": \"20px\", \"background\": \"rgba(239, 68, 68, 0.2)\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"#ff4444\", \"font-size\": \"14px\", \"line-height\": \"1\", \"cursor\": \"pointer\", \"opacity\": \"0.6\", \"transition\": \"all 0.2s ease\" },\n                                    onClick: _withModifiers(($event) => (deleteProject(proj.id)), [\"stop\"]),\n                                    onMouseenter: _cache[14] || (_cache[14] =\n                                        (e) => ((e.currentTarget.style.opacity = '1'),\n                                            (e.currentTarget.style.background = '#ef4444'),\n                                            (e.currentTarget.style.color = '#fff'))),\n                                    onMouseleave: _cache[15] || (_cache[15] =\n                                        (e) => ((e.currentTarget.style.opacity = '0.6'),\n                                            (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\n                                            (e.currentTarget.style.color = '#ff4444')))\n                                }, \"  \", 40 /* PROPS, NEED_HYDRATION */, _hoisted_9)\n                            ], 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_7));\n                        }), 128 /* KEYED_FRAGMENT */)),\n                        _createCommentVNode(\"  \"),\n                        (currentId.value && currentProject.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                _createElementVNode(\"div\", _hoisted_11, [\n                                    _cache[72] || (_cache[72] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"13px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_12, [\n                                        _createElementVNode(\"button\", {\n                                            style: { \"padding\": \"4px 8px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"5px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"4px\" },\n                                            title: \"\",\n                                            onClick: createNewFolder,\n                                            onMouseenter: _cache[16] || (_cache[16] = (e) => (e.currentTarget.style.background = '#555')),\n                                            onMouseleave: _cache[17] || (_cache[17] = (e) => (e.currentTarget.style.background = '#444'))\n                                        }, [...(_cache[70] || (_cache[70] = [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-folder-plus\",\n                                                    style: { \"font-size\": \"10px\" }\n                                                }, null, -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */),\n                                        _createElementVNode(\"button\", {\n                                            style: { \"padding\": \"4px 8px\", \"background\": \"#10b981\", \"border\": \"none\", \"border-radius\": \"5px\", \"color\": \"white\", \"font-size\": \"11px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"4px\" },\n                                            title: \"\",\n                                            onClick: showNewFileDialog,\n                                            onMouseenter: _cache[18] || (_cache[18] = (e) => (e.currentTarget.style.background = '#059669')),\n                                            onMouseleave: _cache[19] || (_cache[19] = (e) => (e.currentTarget.style.background = '#10b981'))\n                                        }, [...(_cache[71] || (_cache[71] = [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-plus\",\n                                                    style: { \"font-size\": \"10px\" }\n                                                }, null, -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */)\n                                    ])\n                                ]),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(currentProject.value.files, (file) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: file.path,\n                                        style: _normalizeStyle({\n                                            padding: '8px 10px',\n                                            marginBottom: '5px',\n                                            background: currentFile.value === file.path ? '#10b981' : '#1e1e1e',\n                                            borderRadius: '6px',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s ease',\n                                            color: currentFile.value === file.path ? '#fff' : '#e0e0e0',\n                                            fontSize: '12px',\n                                            display: 'flex',\n                                            justifyContent: 'space-between',\n                                            alignItems: 'center',\n                                        }),\n                                        onClick: ($event) => (selectFile(file.path)),\n                                        onMouseenter: (e) => currentFile.value !== file.path && (e.currentTarget.style.background = '#3a3a3a'),\n                                        onMouseleave: (e) => currentFile.value !== file.path && (e.currentTarget.style.background = '#1e1e1e')\n                                    }, [\n                                        _createElementVNode(\"span\", null, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(getFileIcon(file.path)),\n                                                style: { \"margin-right\": \"6px\" }\n                                            }, null, 2 /* CLASS */),\n                                            _createTextVNode(\" \" + _toDisplayString(file.name), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"button\", {\n                                            style: { \"width\": \"18px\", \"height\": \"18px\", \"background\": \"rgba(239, 68, 68, 0.2)\", \"border\": \"none\", \"border-radius\": \"3px\", \"color\": \"#ff4444\", \"font-size\": \"12px\", \"line-height\": \"1\", \"cursor\": \"pointer\", \"opacity\": \"0\", \"transition\": \"all 0.2s ease\" },\n                                            title: \"\",\n                                            onClick: _withModifiers(($event) => (deleteFile(file.path)), [\"stop\"]),\n                                            onMouseenter: _cache[20] || (_cache[20] =\n                                                (e) => ((e.currentTarget.style.opacity = '1'),\n                                                    (e.currentTarget.style.background = '#ef4444'),\n                                                    (e.currentTarget.style.color = '#fff'))),\n                                            onMouseleave: _cache[21] || (_cache[21] =\n                                                (e) => ((e.currentTarget.style.opacity = '0.6'),\n                                                    (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\n                                                    (e.currentTarget.style.color = '#ff4444')))\n                                        }, \"  \", 40 /* PROPS, NEED_HYDRATION */, _hoisted_14)\n                                    ], 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_13));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_15, [\n                        (!currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, \"   \"))\n                            : (!currentFile.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, \"   \"))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                                    _createElementVNode(\"div\", _hoisted_19, [\n                                        _createElementVNode(\"div\", _hoisted_20, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(getFileIcon(currentFile.value)),\n                                                style: { \"color\": \"#4a9eff\" }\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"span\", _hoisted_21, _toDisplayString(currentFile.value), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_22, [\n                                            _cache[75] || (_cache[75] = _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-circle-check\",\n                                                    style: { \"color\": \"#10b981\", \"margin-right\": \"4px\" }\n                                                }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"button\", {\n                                                style: { \"padding\": \"6px 12px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                                onClick: saveCode,\n                                                onMouseenter: _cache[22] || (_cache[22] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                                                onMouseleave: _cache[23] || (_cache[23] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                                            }, [...(_cache[74] || (_cache[74] = [\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-floppy-disk\",\n                                                        style: { \"margin-right\": \"4px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 32 /* NEED_HYDRATION */)\n                                        ])\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event) => ((code).value = $event)),\n                                        placeholder: ` ${currentFile.value.split('.').pop()?.toUpperCase()} ...`,\n                                        style: { \"flex\": \"1\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"padding\": \"15px\", \"resize\": \"none\", \"outline\": \"none\", \"min-height\": \"400px\" }\n                                    }, null, 8 /* PROPS */, _hoisted_23), [\n                                        [_vModelText, code.value]\n                                    ])\n                                ]))\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_24, [\n                        _createElementVNode(\"div\", _hoisted_25, [\n                            _cache[77] || (_cache[77] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-eye\",\n                                    style: { \"margin-right\": \"8px\", \"color\": \"#4a9eff\" }\n                                }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_26, [\n                                (previewHtml.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        title: \"\",\n                                        style: { \"width\": \"28px\", \"height\": \"28px\", \"padding\": \"0\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"transition\": \"all 0.2s ease\" },\n                                        onClick: openInNewWindow,\n                                        onMouseenter: _cache[25] || (_cache[25] = (e) => (e.currentTarget.style.background = '#4a9eff')),\n                                        onMouseleave: _cache[26] || (_cache[26] = (e) => (e.currentTarget.style.background = '#3a3a3a'))\n                                    }, [...(_cache[76] || (_cache[76] = [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-external-link-alt\",\n                                                style: { \"font-size\": \"12px\" }\n                                            }, null, -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_27, [\n                            (previewHtml.value)\n                                ? (_openBlock(), _createElementBlock(\"iframe\", {\n                                    key: 0,\n                                    srcdoc: previewHtml.value,\n                                    sandbox: \"allow-scripts allow-same-origin allow-modals allow-forms\",\n                                    style: { \"width\": \"100%\", \"height\": \"100%\", \"border\": \"none\", \"background\": \"white\" }\n                                }, null, 8 /* PROPS */, _hoisted_28))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_29, \"  \"))\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" AI  \"),\n                (showAI.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _withModifiers(closeAIDialog, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_30, [\n                            _cache[85] || (_cache[85] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                    style: { \"color\": \"#8b5cf6\" }\n                                }),\n                                _createTextVNode(\" AI  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_31, [\n                                _cache[79] || (_cache[79] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-pencil\",\n                                        style: { \"color\": \"#8b5cf6\", \"margin-right\": \"6px\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _cache[80] || (_cache[80] = _createElementVNode(\"div\", { style: { \"margin-bottom\": \"10px\", \"padding\": \"10px 12px\", \"background\": \"rgba(139, 92, 246, 0.1)\", \"border-left\": \"3px solid #8b5cf6\", \"border-radius\": \"4px\", \"font-size\": \"12px\", \"color\": \"#ccc\", \"line-height\": \"1.6\" } }, [\n                                    _createElementVNode(\"strong\", { style: { \"color\": \"#8b5cf6\" } }, \" \"),\n                                    _createTextVNode(\" \\\"\\\"\\\"\\\" \")\n                                ], -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event) => ((aiPrompt).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"padding\": \"12px\", \"resize\": \"none\", \"outline\": \"none\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, aiPrompt.value]\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _cache[78] || (_cache[78] = _createElementVNode(\"div\", { style: { \"color\": \"#888\", \"font-size\": \"12px\", \"margin-bottom\": \"8px\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-lightbulb\",\n                                            style: { \"color\": \"#fbbf24\", \"margin-right\": \"4px\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_33, [\n                                        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(quickSuggestions, (suggestion) => {\n                                            return _createElementVNode(\"button\", {\n                                                key: suggestion,\n                                                style: { \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                onClick: ($event) => (aiPrompt.value = suggestion),\n                                                onMouseenter: _cache[28] || (_cache[28] = (e) => (e.currentTarget.style.background = '#3a3a3a')),\n                                                onMouseleave: _cache[29] || (_cache[29] = (e) => (e.currentTarget.style.background = '#2a2a2a'))\n                                            }, _toDisplayString(suggestion), 41 /* TEXT, PROPS, NEED_HYDRATION */, _hoisted_34);\n                                        }), 64 /* STABLE_FRAGMENT */))\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_35, [\n                                _createElementVNode(\"label\", _hoisted_36, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event) => ((enableStream).value = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"width\": \"16px\", \"height\": \"16px\", \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, enableStream.value]\n                                    ]),\n                                    _cache[81] || (_cache[81] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-water\",\n                                        style: { \"color\": \"#4a9eff\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[82] || (_cache[82] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ]),\n                                _cache[83] || (_cache[83] = _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"12px\" } }, \"  \", -1 /* CACHED */))\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (aiGenerating.value && enableStream.value && streamingText.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [\n                                    _createTextVNode(_toDisplayString(streamingText.value) + \" \", 1 /* TEXT */),\n                                    _cache[84] || (_cache[84] = _createElementVNode(\"span\", { style: { \"animation\": \"blink 1s infinite\" } }, \"\", -1 /* CACHED */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"div\", _hoisted_38, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                    onClick: closeAIDialog,\n                                    onMouseenter: _cache[31] || (_cache[31] = (e) => (e.currentTarget.style.background = '#4a4a4a')),\n                                    onMouseleave: _cache[32] || (_cache[32] = (e) => (e.currentTarget.style.background = '#3a3a3a'))\n                                }, \"  \", 32 /* NEED_HYDRATION */),\n                                _createElementVNode(\"button\", {\n                                    disabled: aiGenerating.value || !aiPrompt.value.trim(),\n                                    style: _normalizeStyle([{ \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" }, {\n                                            opacity: aiGenerating.value || !aiPrompt.value.trim() ? 0.5 : 1,\n                                            cursor: aiGenerating.value || !aiPrompt.value.trim() ? 'not-allowed' : 'pointer',\n                                        }]),\n                                    onClick: generateWithAI\n                                }, [\n                                    (!aiGenerating.value)\n                                        ? (_openBlock(), _createElementBlock(\"i\", _hoisted_40))\n                                        : (_openBlock(), _createElementBlock(\"i\", _hoisted_41)),\n                                    _createTextVNode(\" \" + _toDisplayString(aiGenerating.value ? '...' : ''), 1 /* TEXT */)\n                                ], 12 /* STYLE, PROPS */, _hoisted_39)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Bug  \"),\n                (showBugFix.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _withModifiers(closeBugFixDialog, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_42, [\n                            _cache[90] || (_cache[90] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-bug\",\n                                    style: { \"color\": \"#ef4444\" }\n                                }),\n                                _createTextVNode(\" Bug  \")\n                            ], -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_43, [\n                                _cache[86] || (_cache[86] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"600\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-circle-exclamation\",\n                                        style: { \"color\": \"#f59e0b\", \"margin-right\": \"6px\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[33] || (_cache[33] = ($event) => ((bugDescription).value = $event)),\n                                    placeholder: \"\\n\\n\",\n                                    style: { \"width\": \"100%\", \"height\": \"90px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"padding\": \"12px\", \"resize\": \"none\", \"outline\": \"none\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, bugDescription.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\" Console  \"),\n                            _createElementVNode(\"div\", _hoisted_44, [\n                                _cache[87] || (_cache[87] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"600\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-terminal\",\n                                        style: { \"color\": \"#ef4444\", \"margin-right\": \"6px\" }\n                                    }),\n                                    _createTextVNode(\"  Console  F12  \")\n                                ], -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event) => ((consoleError).value = $event)),\n                                    placeholder: \" Console \\nUncaught TypeError: xxx is not a function\\n\\n\",\n                                    style: { \"width\": \"100%\", \"height\": \"80px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#ff6b6b\", \"font-size\": \"12px\", \"font-family\": \"'Consolas', monospace\", \"line-height\": \"1.5\", \"padding\": \"12px\", \"resize\": \"none\", \"outline\": \"none\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, consoleError.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_45, [\n                                _cache[89] || (_cache[89] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"600\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-file-code\",\n                                        style: { \"color\": \"#4a9eff\", \"margin-right\": \"6px\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[35] || (_cache[35] = ($event) => ((bugFile).value = $event)),\n                                    style: { \"width\": \"100%\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"padding\": \"10px 12px\", \"outline\": \"none\", \"cursor\": \"pointer\" }\n                                }, [...(_cache[88] || (_cache[88] = [\n                                        _createElementVNode(\"option\", { value: \"\" }, \" AI \", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"index.html\" }, \"HTML index.html\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"style.css\" }, \"CSS style.css\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"script.js\" }, \"JavaScript script.js\", -1 /* CACHED */)\n                                    ]))], 512 /* NEED_PATCH */), [\n                                    [_vModelSelect, bugFile.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _cache[91] || (_cache[91] = _createElementVNode(\"div\", { style: { \"padding\": \"12px\", \"background\": \"rgba(74, 158, 255, 0.1)\", \"border\": \"1px solid rgba(74, 158, 255, 0.3)\", \"border-radius\": \"6px\", \"margin-bottom\": \"15px\" } }, [\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#4a9eff\", \"font-size\": \"12px\", \"line-height\": \"1.6\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-lightbulb\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }),\n                                    _createElementVNode(\"strong\", null, \"\"),\n                                    _createTextVNode(\"AI  bug Console  \")\n                                ])\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_46, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                    onClick: closeBugFixDialog,\n                                    onMouseenter: _cache[36] || (_cache[36] = (e) => (e.currentTarget.style.background = '#4a4a4a')),\n                                    onMouseleave: _cache[37] || (_cache[37] = (e) => (e.currentTarget.style.background = '#3a3a3a'))\n                                }, \"  \", 32 /* NEED_HYDRATION */),\n                                _createElementVNode(\"button\", {\n                                    disabled: aiGenerating.value || !bugDescription.value.trim(),\n                                    style: _normalizeStyle([{ \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" }, {\n                                            opacity: aiGenerating.value || !bugDescription.value.trim() ? 0.5 : 1,\n                                            cursor: aiGenerating.value || !bugDescription.value.trim() ? 'not-allowed' : 'pointer',\n                                        }]),\n                                    onClick: fixBugWithAI\n                                }, [\n                                    (!aiGenerating.value)\n                                        ? (_openBlock(), _createElementBlock(\"i\", _hoisted_48))\n                                        : (_openBlock(), _createElementBlock(\"i\", _hoisted_49)),\n                                    _createTextVNode(\" \" + _toDisplayString(aiGenerating.value ? '...' : ''), 1 /* TEXT */)\n                                ], 12 /* STYLE, PROPS */, _hoisted_47)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" AI  \"),\n                (showComparison.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_50, [\n                        _createElementVNode(\"div\", _hoisted_51, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_52, [\n                                _cache[94] || (_cache[94] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-code-compare\",\n                                        style: { \"color\": \"#8b5cf6\" }\n                                    }),\n                                    _createTextVNode(\" AI  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_53, [\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"#ef4444\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                        onClick: rejectChanges,\n                                        onMouseenter: _cache[38] || (_cache[38] = (e) => (e.currentTarget.style.background = '#dc2626')),\n                                        onMouseleave: _cache[39] || (_cache[39] = (e) => (e.currentTarget.style.background = '#ef4444'))\n                                    }, [...(_cache[92] || (_cache[92] = [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-xmark\",\n                                                style: { \"margin-right\": \"6px\" }\n                                            }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"#10b981\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                        onClick: acceptChanges,\n                                        onMouseenter: _cache[40] || (_cache[40] = (e) => (e.currentTarget.style.background = '#059669')),\n                                        onMouseleave: _cache[41] || (_cache[41] = (e) => (e.currentTarget.style.background = '#10b981'))\n                                    }, [...(_cache[93] || (_cache[93] = [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-check\",\n                                                style: { \"margin-right\": \"6px\" }\n                                            }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_54, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_55, [\n                                    _cache[95] || (_cache[95] = _createElementVNode(\"div\", { style: { \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\" } }, [\n                                        _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-file-code\",\n                                                style: { \"margin-right\": \"8px\", \"color\": \"#ef4444\" }\n                                            }),\n                                            _createTextVNode(\"  \")\n                                        ])\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_56, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(aiChanges.value, (change) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: change.path,\n                                                style: { \"margin-bottom\": \"20px\" }\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_57, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(getFileIcon(change.path))\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(change.path), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"pre\", _hoisted_58, _toDisplayString(change.oldContent), 1 /* TEXT */)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_59, [\n                                    _cache[96] || (_cache[96] = _createElementVNode(\"div\", { style: { \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\" } }, [\n                                        _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-file-code\",\n                                                style: { \"margin-right\": \"8px\", \"color\": \"#10b981\" }\n                                            }),\n                                            _createTextVNode(\"  \")\n                                        ])\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_60, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(aiChanges.value, (change) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: change.path,\n                                                style: { \"margin-bottom\": \"20px\" }\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_61, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(getFileIcon(change.path))\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(change.path), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"pre\", _hoisted_62, _toDisplayString(change.newContent), 1 /* TEXT */)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_63, [\n                                    _createElementVNode(\"div\", _hoisted_64, [\n                                        _cache[97] || (_cache[97] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-eye\",\n                                                style: { \"margin-right\": \"8px\", \"color\": \"#4a9eff\" }\n                                            }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_65, [\n                                            _createElementVNode(\"button\", {\n                                                style: _normalizeStyle({\n                                                    padding: '4px 10px',\n                                                    background: previewMode.value === 'before' ? '#ef4444' : '#3a3a3a',\n                                                    border: 'none',\n                                                    borderRadius: '4px',\n                                                    color: 'white',\n                                                    fontSize: '11px',\n                                                    cursor: 'pointer',\n                                                    transition: 'all 0.2s ease',\n                                                }),\n                                                onClick: _cache[42] || (_cache[42] = ($event) => (previewMode.value = 'before'))\n                                            }, \"  \", 4 /* STYLE */),\n                                            _createElementVNode(\"button\", {\n                                                style: _normalizeStyle({\n                                                    padding: '4px 10px',\n                                                    background: previewMode.value === 'after' ? '#10b981' : '#3a3a3a',\n                                                    border: 'none',\n                                                    borderRadius: '4px',\n                                                    color: 'white',\n                                                    fontSize: '11px',\n                                                    cursor: 'pointer',\n                                                    transition: 'all 0.2s ease',\n                                                }),\n                                                onClick: _cache[43] || (_cache[43] = ($event) => (previewMode.value = 'after'))\n                                            }, \"  \", 4 /* STYLE */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_66, [\n                                        _createElementVNode(\"iframe\", {\n                                            srcdoc: comparisonPreviewHtml.value,\n                                            sandbox: \"allow-scripts allow-same-origin allow-modals allow-forms\",\n                                            style: { \"width\": \"100%\", \"height\": \"100%\", \"border\": \"none\" }\n                                        }, null, 8 /* PROPS */, _hoisted_67)\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (showHistory.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 3,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"padding\": \"20px\" },\n                        onClick: _withModifiers(closeHistoryDialog, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_68, [\n                            _createElementVNode(\"div\", _hoisted_69, [\n                                _cache[98] || (_cache[98] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-history\",\n                                        style: { \"color\": \"#f59e0b\" }\n                                    }),\n                                    _createTextVNode(\" AI  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"width\": \"28px\", \"height\": \"28px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                    onClick: closeHistoryDialog,\n                                    onMouseenter: _cache[44] || (_cache[44] = (e) => (e.currentTarget.style.background = '#4a4a4a')),\n                                    onMouseleave: _cache[45] || (_cache[45] = (e) => (e.currentTarget.style.background = '#3a3a3a'))\n                                }, \"  \", 32 /* NEED_HYDRATION */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_70, [\n                                (currentProjectHistory.value.length === 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_71, [...(_cache[99] || (_cache[99] = [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-inbox\",\n                                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"15px\", \"opacity\": \"0.3\" }\n                                            }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"p\", null, \"\", -1 /* CACHED */)\n                                        ]))]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(currentProjectHistory.value, (record, index) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: index,\n                                        style: { \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid #3a3a3a\" }\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_72, [\n                                            _createElementVNode(\"div\", null, [\n                                                _createElementVNode(\"div\", _hoisted_73, _toDisplayString(record.prompt), 1 /* TEXT */),\n                                                _createElementVNode(\"div\", _hoisted_74, _toDisplayString(new Date(record.timestamp).toLocaleString('zh-CN')), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                style: { \"padding\": \"6px 12px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                onClick: ($event) => (restoreHistory(record)),\n                                                onMouseenter: _cache[46] || (_cache[46] = (e) => (e.currentTarget.style.background = '#3b82f6')),\n                                                onMouseleave: _cache[47] || (_cache[47] = (e) => (e.currentTarget.style.background = '#4a9eff'))\n                                            }, [...(_cache[100] || (_cache[100] = [\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-undo\",\n                                                        style: { \"margin-right\": \"4px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_75)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_76, [\n                                            _cache[101] || (_cache[101] = _createElementVNode(\"strong\", null, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_77, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(record.changes, (change) => {\n                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                        key: change.path,\n                                                        style: { \"background\": \"#2a2a2a\", \"padding\": \"4px 10px\", \"border-radius\": \"4px\", \"font-size\": \"12px\", \"display\": \"inline-flex\", \"align-items\": \"center\", \"gap\": \"6px\" }\n                                                    }, [\n                                                        _createElementVNode(\"i\", {\n                                                            class: _normalizeClass(getFileIcon(change.path))\n                                                        }, null, 2 /* CLASS */),\n                                                        _createTextVNode(\" \" + _toDisplayString(change.path), 1 /* TEXT */)\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ])\n                                        ])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (showProjectTemplate.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 4,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"padding\": \"20px\" },\n                        onClick: _cache[60] || (_cache[60] = _withModifiers(($event) => (showProjectTemplate.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_78, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_79, [\n                                _cache[103] || (_cache[103] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"20px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\" } }, [\n                                    _createElementVNode(\"span\", { style: { \"width\": \"40px\", \"height\": \"40px\", \"background\": \"#2a2a2a\", \"border-radius\": \"10px\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"font-size\": \"20px\" } }, \"  \"),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"width\": \"36px\", \"height\": \"36px\", \"background\": \"#2a2a2a\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#888\", \"font-size\": \"18px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\" },\n                                    onClick: _cache[48] || (_cache[48] = ($event) => (showProjectTemplate.value = false)),\n                                    onMouseenter: _cache[49] || (_cache[49] =\n                                        (e) => {\n                                            e.currentTarget.style.background = '#333';\n                                            e.currentTarget.style.color = '#fff';\n                                        }),\n                                    onMouseleave: _cache[50] || (_cache[50] =\n                                        (e) => {\n                                            e.currentTarget.style.background = '#2a2a2a';\n                                            e.currentTarget.style.color = '#888';\n                                        })\n                                }, [...(_cache[102] || (_cache[102] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_80, [\n                                _createElementVNode(\"div\", _hoisted_81, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        style: { \"background\": \"#252525\", \"border\": \"1px solid transparent\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"cursor\": \"pointer\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\", \"box-shadow\": \"0 2px 8px rgba(0, 0, 0, 0.3)\" },\n                                        onClick: _cache[51] || (_cache[51] = ($event) => (createProjectFromTemplate(''))),\n                                        onMouseenter: _cache[52] || (_cache[52] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(-4px)';\n                                                e.currentTarget.style.borderColor = '#555';\n                                                e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                                            }),\n                                        onMouseleave: _cache[53] || (_cache[53] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.borderColor = 'transparent';\n                                                e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                                            })\n                                    }, [...(_cache[104] || (_cache[104] = [\n                                            _createElementVNode(\"div\", { style: { \"width\": \"56px\", \"height\": \"56px\", \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"font-size\": \"28px\", \"margin-bottom\": \"16px\" } }, \"  \", -1 /* CACHED */),\n                                            _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#fff\", \"font-size\": \"17px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */),\n                                            _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#999\", \"font-size\": \"13px\", \"line-height\": \"1.6\" } }, \"\", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        style: { \"background\": \"#252525\", \"border\": \"1px solid transparent\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"cursor\": \"pointer\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\", \"box-shadow\": \"0 2px 8px rgba(0, 0, 0, 0.3)\" },\n                                        onClick: _cache[54] || (_cache[54] = ($event) => (createProjectFromTemplate(''))),\n                                        onMouseenter: _cache[55] || (_cache[55] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(-4px)';\n                                                e.currentTarget.style.borderColor = '#555';\n                                                e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                                            }),\n                                        onMouseleave: _cache[56] || (_cache[56] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.borderColor = 'transparent';\n                                                e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                                            })\n                                    }, [...(_cache[105] || (_cache[105] = [\n                                            _createElementVNode(\"div\", { style: { \"width\": \"56px\", \"height\": \"56px\", \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"font-size\": \"28px\", \"margin-bottom\": \"16px\" } }, \"  \", -1 /* CACHED */),\n                                            _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#fff\", \"font-size\": \"17px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */),\n                                            _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#999\", \"font-size\": \"13px\", \"line-height\": \"1.6\" } }, \"HP/MP/\", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        style: { \"background\": \"#252525\", \"border\": \"1px solid transparent\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"cursor\": \"pointer\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\", \"box-shadow\": \"0 2px 8px rgba(0, 0, 0, 0.3)\" },\n                                        onClick: _cache[57] || (_cache[57] = ($event) => (createProjectFromTemplate(''))),\n                                        onMouseenter: _cache[58] || (_cache[58] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(-4px)';\n                                                e.currentTarget.style.borderColor = '#555';\n                                                e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                                            }),\n                                        onMouseleave: _cache[59] || (_cache[59] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.borderColor = 'transparent';\n                                                e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                                            })\n                                    }, [...(_cache[106] || (_cache[106] = [\n                                            _createElementVNode(\"div\", { style: { \"width\": \"56px\", \"height\": \"56px\", \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"font-size\": \"28px\", \"margin-bottom\": \"16px\" } }, \"  \", -1 /* CACHED */),\n                                            _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#fff\", \"font-size\": \"17px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */),\n                                            _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#999\", \"font-size\": \"13px\", \"line-height\": \"1.6\" } }, \"\", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */)\n                                ]),\n                                _cache[107] || (_cache[107] = _createElementVNode(\"div\", { style: { \"margin-top\": \"24px\", \"padding\": \"16px 18px\", \"background\": \"#252525\", \"border\": \"1px solid #333\", \"border-radius\": \"10px\" } }, [\n                                    _createElementVNode(\"div\", { style: { \"color\": \"#ccc\", \"font-weight\": \"500\", \"margin-bottom\": \"6px\", \"font-size\": \"13px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                        _createElementVNode(\"span\", { style: { \"color\": \"#fbbf24\", \"font-size\": \"16px\" } }, \"\"),\n                                        _createTextVNode(\"  \")\n                                    ]),\n                                    _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#888\", \"font-size\": \"13px\", \"line-height\": \"1.7\" } }, \"  \")\n                                ], -1 /* CACHED */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createVNode(ProgressDialog, {\n                    ref_key: \"progressDialogRef\",\n                    ref: progressDialogRef,\n                    show: showProgress.value,\n                    title: \"AI \"\n                }, null, 8 /* PROPS */, [\"show\"])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ProjectManager.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProjectManager.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ProjectManager.vue?vue&type=style&index=0&id=434cf372&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-434cf372\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"regex-ui-generator\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"1fr 1fr\", \"gap\": \"20px\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_3 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"20px\" } };\nconst _hoisted_4 = { style: { \"background\": \"#2a2a2a\", \"padding\": \"20px\", \"border-radius\": \"8px\" } };\nconst _hoisted_5 = { style: { \"background\": \"#2a2a2a\", \"padding\": \"20px\", \"border-radius\": \"8px\", \"flex\": \"1\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_6 = { style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-top\": \"15px\" } };\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = { style: { \"background\": \"#2a2a2a\", \"padding\": \"20px\", \"border-radius\": \"8px\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_10 = { style: { \"color\": \"#51cf66\", \"margin\": \"0 0 15px 0\", \"font-size\": \"16px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } };\nconst _hoisted_11 = {\n    key: 0,\n    style: { \"margin-left\": \"auto\", \"background\": \"#51cf66\", \"color\": \"white\", \"padding\": \"4px 12px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_12 = { style: { \"flex\": \"1\", \"background\": \"#1a1a1a\", \"border\": \"2px solid #444\", \"border-radius\": \"6px\", \"overflow\": \"hidden\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"min-height\": \"400px\" } };\nconst _hoisted_13 = {\n    key: 0,\n    style: { \"text-align\": \"center\", \"color\": \"#666\", \"padding\": \"40px\" }\n};\nconst _hoisted_14 = [\"srcdoc\"];\nconst _hoisted_15 = {\n    key: 0,\n    style: { \"background\": \"#2a2a2a\", \"padding\": \"20px\", \"border-radius\": \"8px\" }\n};\nconst _hoisted_16 = {\n    key: 0,\n    style: { \"background\": \"#1a1a1a\", \"padding\": \"15px\", \"border-radius\": \"4px\", \"border\": \"1px solid #444\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_17 = { style: { \"margin\": \"0\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', monospace\", \"font-size\": \"13px\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\" } };\nconst _hoisted_18 = { style: { \"display\": \"flex\", \"gap\": \"12px\" } };\nconst _hoisted_19 = [\"disabled\"];\nimport { ref } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { copyToClipboard } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RegexUIGenerator',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const settings = settingsStore.settings;\n        const triggerKeyword = ref('');\n        const interfaceDescription = ref('');\n        const generatedCode = ref('');\n        const generatedRegex = ref('');\n        const isGenerating = ref(false);\n        const isModifying = ref(false);\n        const showCode = ref(false);\n        const showModify = ref(false);\n        const modifyInstruction = ref('');\n        const previewFrame = ref(null);\n        // AI \n        const generateWithAI = async () => {\n            if (!triggerKeyword.value || !interfaceDescription.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isGenerating.value = true;\n            try {\n                const prompt = ` HTML \n\n${triggerKeyword.value}\n\n\n${interfaceDescription.value}\n\n HTML \n1. HTML \n2.  <style> CSS \n3.  <script>  JS \n\n\n- HTML \n- CSS \n- JS \n- \n- \n\n HTML  <!DOCTYPE html>  <div> `;\n                const apiUrl = normalizeApiEndpoint(settings.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: ' HTML/CSS/JS ',\n                            },\n                            { role: 'user', content: prompt },\n                        ],\n                        temperature: 0.7,\n                        max_tokens: 4000,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.status}`);\n                }\n                const data = await response.json();\n                let result = data.choices?.[0]?.message?.content || '';\n                console.log(' [] AI :', result.length);\n                console.log(' [] AI 500:', result.substring(0, 500));\n                //  markdown \n                result = result\n                    .replace(/```html\\n?/g, '')\n                    .replace(/```\\n?/g, '')\n                    .trim();\n                // HTMLAI\n                // 1.  <!DOCTYPE html \n                const doctypeMatch = result.match(/<!DOCTYPE html>[\\s\\S]*/i);\n                if (doctypeMatch) {\n                    result = doctypeMatch[0].trim();\n                    console.log(' [] HTMLDOCTYPE');\n                }\n                else {\n                    // 2. DOCTYPE <html \n                    const htmlMatch = result.match(/<html[\\s\\S]*/i);\n                    if (htmlMatch) {\n                        result = htmlMatch[0].trim();\n                        console.log(' [] HTMLDOCTYPE');\n                    }\n                    else if (result.includes('<') && result.includes('>')) {\n                        // 3. htmlHTML\n                        console.log(' [] HTML');\n                        // \n                        if (!result.includes('<html')) {\n                            result = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body>\n${result}\n</body>\n</html>`;\n                            console.log(' [] HTML');\n                        }\n                    }\n                    else {\n                        // 4. HTMLAI\n                        console.error(' [] AIHTML');\n                        console.error('AI:', result);\n                        throw new Error('AIHTML');\n                    }\n                }\n                console.log(' [] HTML:', result.length);\n                generatedCode.value = result;\n                // \n                const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const regexJson = {\n                    id: `regex_ui_${Date.now()}`,\n                    scriptName: `_${triggerKeyword.value}`,\n                    findRegex: findRegex,\n                    replaceString: result,\n                    trimStrings: [],\n                    placement: [2], // AI\n                    disabled: false,\n                    markdownOnly: true,\n                    promptOnly: false,\n                    runOnEdit: true,\n                    substituteRegex: 0,\n                    minDepth: null,\n                    maxDepth: null,\n                };\n                generatedRegex.value = JSON.stringify(regexJson, null, 2);\n                window.toastr.success('AI ');\n            }\n            catch (error) {\n                console.error('AI :', error);\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isGenerating.value = false;\n            }\n        };\n        // \n        const showModifyDialog = () => {\n            modifyInstruction.value = '';\n            showModify.value = true;\n        };\n        // AI \n        const modifyWithAI = async () => {\n            if (!modifyInstruction.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifying.value = true;\n            try {\n                //  +  AI \n                const prompt = ` HTML \n\n${triggerKeyword.value}\n\n\n${interfaceDescription.value}\n\n\n${modifyInstruction.value}\n\n HTML \n1. HTML \n2.  <style> CSS \n3.  <script>  JS \n\n\n- \n- HTML \n- CSS \n- JS \n- \n\n HTML  <!DOCTYPE html>  <div> `;\n                const apiUrl = normalizeApiEndpoint(settings.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: ' HTML/CSS/JS ',\n                            },\n                            { role: 'user', content: prompt },\n                        ],\n                        temperature: 0.7,\n                        max_tokens: 4000,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.status}`);\n                }\n                const data = await response.json();\n                let result = data.choices?.[0]?.message?.content || '';\n                console.log(' [] AI :', result.length);\n                console.log(' [] AI 500:', result.substring(0, 500));\n                //  markdown \n                result = result\n                    .replace(/```html\\n?/g, '')\n                    .replace(/```\\n?/g, '')\n                    .trim();\n                // HTMLAI\n                // 1.  <!DOCTYPE html \n                const doctypeMatch = result.match(/<!DOCTYPE html>[\\s\\S]*/i);\n                if (doctypeMatch) {\n                    result = doctypeMatch[0].trim();\n                    console.log(' [] HTMLDOCTYPE');\n                }\n                else {\n                    // 2. DOCTYPE <html \n                    const htmlMatch = result.match(/<html[\\s\\S]*/i);\n                    if (htmlMatch) {\n                        result = htmlMatch[0].trim();\n                        console.log(' [] HTMLDOCTYPE');\n                    }\n                    else if (result.includes('<') && result.includes('>')) {\n                        // 3. htmlHTML\n                        console.log(' [] HTML');\n                        // \n                        if (!result.includes('<html')) {\n                            result = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body>\n${result}\n</body>\n</html>`;\n                            console.log(' [] HTML');\n                        }\n                    }\n                    else {\n                        // 4. HTMLAI\n                        console.error(' [] AIHTML');\n                        console.error('AI:', result);\n                        throw new Error('AIHTML');\n                    }\n                }\n                console.log(' [] HTML:', result.length);\n                generatedCode.value = result;\n                // \n                const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const regexJson = {\n                    id: `regex_ui_${Date.now()}`,\n                    scriptName: `_${triggerKeyword.value}`,\n                    findRegex: findRegex,\n                    replaceString: result,\n                    trimStrings: [],\n                    placement: [2], // AI\n                    disabled: false,\n                    markdownOnly: true,\n                    promptOnly: false,\n                    runOnEdit: true,\n                    substituteRegex: 0,\n                    minDepth: null,\n                    maxDepth: null,\n                };\n                generatedRegex.value = JSON.stringify(regexJson, null, 2);\n                // \n                interfaceDescription.value = `${interfaceDescription.value}\\n\\n\\n${modifyInstruction.value}`;\n                window.toastr.success('AI ');\n                showModify.value = false;\n            }\n            catch (error) {\n                console.error('AI :', error);\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifying.value = false;\n            }\n        };\n        // \n        const copyRegex = () => {\n            copyToClipboard(generatedRegex.value, '');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _cache[21] || (_cache[21] = _createElementVNode(\"div\", { style: { \"background\": \"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)\", \"padding\": \"20px\", \"border-radius\": \"12px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(102, 126, 234, 0.2)\" } }, [\n                    _createElementVNode(\"h3\", { style: { \"color\": \"#4a9eff\", \"margin\": \"0 0 10px 0\", \"font-size\": \"20px\", \"font-weight\": \"600\" } }, \" \"),\n                    _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"margin\": \"0\", \"font-size\": \"14px\", \"line-height\": \"1.6\" } }, \" AI  HTML/CSS/JS  \")\n                ], -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _cache[22] || (_cache[22] = _createStaticVNode(\"<div style=\\\"background:#2a2a2a;padding:20px;border-radius:8px;margin-bottom:20px;border-left:4px solid #ffc107;\\\" data-v-f1283e36><h4 style=\\\"color:#ffc107;margin:0 0 15px 0;font-size:16px;display:flex;align-items:center;gap:8px;\\\" data-v-f1283e36><i class=\\\"fa-solid fa-lightbulb\\\" data-v-f1283e36></i>  </h4><ol style=\\\"margin:0;padding-left:20px;color:#ccc;line-height:2;\\\" data-v-f1283e36><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>1</strong>  <code style=\\\"background:#1a1a1a;padding:2px 6px;border-radius:3px;color:#4a9eff;\\\" data-v-f1283e36></code>  </li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>2</strong> </li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>3</strong> &quot;AI &quot;AI </li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>4</strong> <strong style=\\\"color:#51cf66;\\\" data-v-f1283e36></strong>&quot;AI &quot; </li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>5</strong> &quot;&quot;</li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36></strong>  <code style=\\\"background:#1a1a1a;padding:2px 6px;border-radius:3px;color:#51cf66;\\\" data-v-f1283e36></code>  </li></ol></div>\", 1)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[7] || (_cache[7] = _createElementVNode(\"h4\", { style: { \"color\": \"#4a9eff\", \"margin\": \"0 0 15px 0\", \"font-size\": \"16px\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-key\" }),\n                                _createTextVNode(\" : \")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((triggerKeyword).value = $event)),\n                                type: \"text\",\n                                placeholder: \"\",\n                                style: { \"width\": \"100%\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, triggerKeyword.value]\n                            ])\n                        ]),\n                        _createCommentVNode(\" AI  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _cache[10] || (_cache[10] = _createElementVNode(\"h4\", { style: { \"color\": \"#4a9eff\", \"margin\": \"0 0 15px 0\", \"font-size\": \"16px\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-magic\" }),\n                                _createTextVNode(\" AI : \")\n                            ], -1 /* CACHED */)),\n                            _cache[11] || (_cache[11] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"margin\": \"0 0 10px 0\", \"font-size\": \"13px\" } }, \" RPG... \", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((interfaceDescription).value = $event)),\n                                placeholder: \"\\n- \\n- RPG\\n- \\n\\n\\n\",\n                                style: { \"width\": \"100%\", \"flex\": \"1\", \"min-height\": \"200px\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\", \"font-family\": \"'Consolas', monospace\", \"resize\": \"none\", \"line-height\": \"1.6\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, interfaceDescription.value]\n                            ]),\n                            _createCommentVNode(\" AI / \"),\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _createElementVNode(\"button\", {\n                                    disabled: !triggerKeyword.value || !interfaceDescription.value || isGenerating.value,\n                                    style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s\" }, { opacity: !triggerKeyword.value || !interfaceDescription.value || isGenerating.value ? 0.5 : 1 }]),\n                                    onClick: generateWithAI\n                                }, [\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGenerating.value ? 'AI ...' : generatedCode.value ? 'AI ' : 'AI '), 1 /* TEXT */)\n                                ], 12 /* STYLE, PROPS */, _hoisted_7),\n                                (generatedCode.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        disabled: isModifying.value,\n                                        style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#ffc107\", \"color\": \"#000\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s\" }, { opacity: isModifying.value ? 0.5 : 1 }]),\n                                        onClick: showModifyDialog\n                                    }, [\n                                        _cache[9] || (_cache[9] = _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(isModifying.value ? '...' : 'AI '), 1 /* TEXT */)\n                                    ], 12 /* STYLE, PROPS */, _hoisted_8))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                        _createElementVNode(\"h4\", _hoisted_10, [\n                            _cache[12] || (_cache[12] = _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }, null, -1 /* CACHED */)),\n                            _cache[13] || (_cache[13] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                            (generatedCode.value)\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"\"))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_12, [\n                            (!generatedCode.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [...(_cache[14] || (_cache[14] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-image\",\n                                            style: { \"font-size\": \"64px\", \"margin-bottom\": \"20px\", \"opacity\": \"0.3\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"p\", { style: { \"font-size\": \"16px\", \"margin\": \"0\" } }, \"...\", -1 /* CACHED */),\n                                        _createElementVNode(\"p\", { style: { \"font-size\": \"14px\", \"margin\": \"10px 0 0 0\" } }, \"\\\"AI \\\"\", -1 /* CACHED */)\n                                    ]))]))\n                                : (_openBlock(), _createElementBlock(\"iframe\", {\n                                    key: 1,\n                                    ref_key: \"previewFrame\",\n                                    ref: previewFrame,\n                                    srcdoc: generatedCode.value,\n                                    style: { \"width\": \"100%\", \"height\": \"100%\", \"border\": \"none\", \"background\": \"white\" }\n                                }, null, 8 /* PROPS */, _hoisted_14))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (generatedCode.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                style: { \"margin-top\": \"15px\", \"background\": \"#51cf66\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\" },\n                                onClick: copyRegex\n                            }, [...(_cache[15] || (_cache[15] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (generatedRegex.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                        _createElementVNode(\"div\", {\n                            style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"margin-bottom\": \"15px\" },\n                            onClick: _cache[2] || (_cache[2] = ($event) => (showCode.value = !showCode.value))\n                        }, [\n                            _cache[16] || (_cache[16] = _createElementVNode(\"h4\", { style: { \"color\": \"#4a9eff\", \"margin\": \"0\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-code\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(showCode.value ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                                style: { \"color\": \"#888\", \"transition\": \"transform 0.3s\" }\n                            }, null, 2 /* CLASS */)\n                        ]),\n                        (showCode.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                                _createElementVNode(\"pre\", _hoisted_17, _toDisplayString(generatedRegex.value), 1 /* TEXT */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" AI  \"),\n                (showModify.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"z-index\": \"1000000\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"padding\": \"20px\" },\n                        onClick: _cache[6] || (_cache[6] = _withModifiers(($event) => (showModify.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            style: { \"background\": \"#2a2a2a\", \"border\": \"2px solid #ffc107\", \"border-radius\": \"12px\", \"padding\": \"30px\", \"max-width\": \"600px\", \"width\": \"100%\" },\n                            onClick: _cache[5] || (_cache[5] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _cache[18] || (_cache[18] = _createElementVNode(\"h3\", { style: { \"color\": \"#ffc107\", \"margin\": \"0 0 20px 0\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }),\n                                _createTextVNode(\" AI  \")\n                            ], -1 /* CACHED */)),\n                            _cache[19] || (_cache[19] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"margin\": \"0 0 15px 0\", \"line-height\": \"1.6\" } }, \" AI  \", -1 /* CACHED */)),\n                            _cache[20] || (_cache[20] = _createElementVNode(\"ul\", { style: { \"color\": \"#888\", \"margin\": \"0 0 20px 0\", \"padding-left\": \"20px\", \"line-height\": \"1.8\" } }, [\n                                _createElementVNode(\"li\", null, \"\"),\n                                _createElementVNode(\"li\", null, \"\"),\n                                _createElementVNode(\"li\", null, \"\"),\n                                _createElementVNode(\"li\", null, \"\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((modifyInstruction).value = $event)),\n                                placeholder: \"...\",\n                                style: { \"width\": \"100%\", \"min-height\": \"150px\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\", \"margin-bottom\": \"20px\", \"resize\": \"vertical\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, modifyInstruction.value]\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_18, [\n                                _createElementVNode(\"button\", {\n                                    disabled: !modifyInstruction.value || isModifying.value,\n                                    style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#ffc107\", \"color\": \"#000\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\" }, { opacity: !modifyInstruction.value || isModifying.value ? 0.5 : 1 }]),\n                                    onClick: modifyWithAI\n                                }, [\n                                    _cache[17] || (_cache[17] = _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isModifying.value ? '...' : ''), 1 /* TEXT */)\n                                ], 12 /* STYLE, PROPS */, _hoisted_19),\n                                _createElementVNode(\"button\", {\n                                    style: { \"flex\": \"1\", \"background\": \"#666\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\" },\n                                    onClick: _cache[4] || (_cache[4] = ($event) => (showModify.value = false))\n                                }, \"  \")\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RegexUIGenerator.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RegexUIGenerator.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RegexUIGenerator.vue?vue&type=style&index=0&id=f1283e36&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f1283e36\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, unref as _unref, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vShow as _vShow, vModelCheckbox as _vModelCheckbox, normalizeStyle as _normalizeStyle, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"settings-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_4 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_5 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_6 = { class: \"form-group\" };\nconst _hoisted_7 = {\n    class: \"model-controls\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"10px\" }\n};\nconst _hoisted_8 = { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } };\nconst _hoisted_9 = {\n    key: 0,\n    style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin-left\": \"8px\" }\n};\nconst _hoisted_10 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"value\"];\nconst _hoisted_13 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_14 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_15 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_16 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_17 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_18 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_19 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_20 = {\n    class: \"checkbox-label\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\" }\n};\nconst _hoisted_21 = {\n    key: 0,\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_22 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_23 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_24 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_25 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_26 = [\"disabled\"];\nconst _hoisted_27 = [\"disabled\"];\nconst _hoisted_28 = {\n    key: 0,\n    class: \"fa-solid fa-magic\"\n};\nconst _hoisted_29 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\"\n};\nconst _hoisted_30 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_31 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_32 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_33 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_34 = { style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"8px\" } };\nconst _hoisted_35 = [\"value\"];\nconst _hoisted_36 = {\n    key: 0,\n    style: { \"display\": \"flex\", \"gap\": \"8px\" }\n};\nconst _hoisted_37 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_38 = { style: { \"display\": \"flex\", \"gap\": \"12px\", \"align-items\": \"center\" } };\nconst _hoisted_39 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_40 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_41 = {\n    key: 0,\n    style: { \"margin-left\": \"auto\" }\n};\nconst _hoisted_42 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_43 = [\"disabled\"];\nconst _hoisted_44 = {\n    key: 0,\n    class: \"fa-solid fa-robot\"\n};\nconst _hoisted_45 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\"\n};\nconst _hoisted_46 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_47 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_48 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_49 = [\"disabled\"];\nconst _hoisted_50 = {\n    key: 0,\n    class: \"hidden-messages-section\"\n};\nconst _hoisted_51 = { class: \"form-group\" };\nconst _hoisted_52 = { class: \"flex-label\" };\nconst _hoisted_53 = {\n    key: 0,\n    class: \"hidden-messages-list\"\n};\nconst _hoisted_54 = { class: \"message-info\" };\nconst _hoisted_55 = { class: \"message-id\" };\nconst _hoisted_56 = { class: \"message-preview\" };\nconst _hoisted_57 = [\"onClick\"];\nconst _hoisted_58 = {\n    key: 1,\n    class: \"empty-state\"\n};\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref } from 'vue';\nimport { useSettingsStore, useSummaryHistoryStore } from '../settings';\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\nimport ProgressDialog from './ProgressDialog.vue';\n\nimport { klona } from 'klona';\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        const summaryHistoryStore = useSummaryHistoryStore();\n        // \n        const expandedSections = ref({\n            api: true,\n            autoSummary: true,\n            manualSummary: true,\n            tableGeneration: true,\n            messageManagement: true,\n        });\n        // /\n        const toggleSection = (section) => {\n            expandedSections.value[section] = !expandedSections.value[section];\n        };\n        // API\n        // setChatMessages \n        // \n        const parseMessageRange = (range) => {\n            if (!range.trim())\n                return [];\n            const messageIds = [];\n            const parts = range.split(',');\n            for (const part of parts) {\n                const trimmed = part.trim();\n                if (!trimmed)\n                    continue;\n                if (trimmed.includes('-')) {\n                    //  \"1-10\"\n                    const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\n                    if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\n                        for (let i = start; i <= end; i++) {\n                            messageIds.push(i);\n                        }\n                    }\n                }\n                else {\n                    //  \"5\"  \"0\"\n                    const id = parseInt(trimmed);\n                    if (!isNaN(id) && id >= 0) {\n                        messageIds.push(id);\n                    }\n                }\n            }\n            return messageIds;\n        };\n        // \n        const available_models = ref([]);\n        const loading_models = ref(false);\n        const hide_range = ref('');\n        const hidden_messages = ref([]);\n        const hidden_display_expanded = ref(false);\n        // \n        const is_summarizing = ref(false);\n        const is_generating_table = ref(false);\n        // \n        const showProgress = ref(false);\n        const progressDialogRef = ref(null);\n        // \n        const headerTemplates = ref([]);\n        const selectedTemplate = ref('');\n        const currentTemplate = ref({ name: '', headers: '' });\n        // \n        const loadGenerationStatus = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                is_summarizing.value = scriptVars.is_summarizing || false;\n                is_generating_table.value = scriptVars.is_generating_table || false;\n                console.log(':', { summarizing: is_summarizing.value, generating_table: is_generating_table.value });\n            }\n            catch (error) {\n                console.error(':', error);\n                is_summarizing.value = false;\n                is_generating_table.value = false;\n            }\n        };\n        const saveGenerationStatus = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables({\n                    is_summarizing: is_summarizing.value,\n                    is_generating_table: is_generating_table.value,\n                }, { type: 'script', script_id: scriptId });\n                console.log('');\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        const stopGeneration = () => {\n            if (is_summarizing.value || is_generating_table.value) {\n                is_summarizing.value = false;\n                is_generating_table.value = false;\n                saveGenerationStatus();\n                window.toastr.info('');\n            }\n        };\n        // \n        const loadHeaderTemplates = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                //  header_templates  nullundefined\n                let templates = scriptVars.header_templates;\n                //  nullundefined  []\n                if (!Array.isArray(templates)) {\n                    templates = [];\n                }\n                headerTemplates.value = templates;\n                console.log(':', headerTemplates.value.length, '');\n            }\n            catch (error) {\n                console.error(':', error);\n                headerTemplates.value = [];\n            }\n        };\n        const saveHeaderTemplates = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables(klona({ header_templates: headerTemplates.value }), { type: 'script', script_id: scriptId });\n                console.log('');\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        const loadTemplate = () => {\n            if (selectedTemplate.value !== '') {\n                const index = parseInt(selectedTemplate.value);\n                if (index >= 0 && index < headerTemplates.value.length) {\n                    currentTemplate.value = { ...headerTemplates.value[index] };\n                }\n            }\n        };\n        const showAddTemplateDialog = () => {\n            const name = window.prompt('');\n            if (name && name.trim()) {\n                const headers = window.prompt('');\n                if (headers && headers.trim()) {\n                    headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\n                    saveHeaderTemplates();\n                    selectedTemplate.value = (headerTemplates.value.length - 1).toString();\n                    loadTemplate();\n                    window.toastr.success('');\n                }\n            }\n        };\n        const saveTemplate = () => {\n            if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\n                const index = parseInt(selectedTemplate.value);\n                if (index >= 0 && index < headerTemplates.value.length) {\n                    headerTemplates.value[index] = { ...currentTemplate.value };\n                    saveHeaderTemplates();\n                    window.toastr.success('');\n                }\n            }\n            else {\n                window.toastr.warning('');\n            }\n        };\n        const deleteTemplate = () => {\n            if (selectedTemplate.value !== '') {\n                if (confirm('')) {\n                    const index = parseInt(selectedTemplate.value);\n                    if (index >= 0 && index < headerTemplates.value.length) {\n                        headerTemplates.value.splice(index, 1);\n                        saveHeaderTemplates();\n                        selectedTemplate.value = '';\n                        currentTemplate.value = { name: '', headers: '' };\n                        window.toastr.success('');\n                    }\n                }\n            }\n        };\n        // \n        const loadHiddenMessages = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                console.log('ID:', scriptId);\n                const saved = getVariables({ type: 'script', script_id: scriptId });\n                console.log(':', saved);\n                console.log(' hidden_messages :', saved?.hidden_messages);\n                if (saved && saved.hidden_messages) {\n                    hidden_messages.value = saved.hidden_messages;\n                    console.log(':', hidden_messages.value.length, '');\n                }\n                else {\n                    console.log('...');\n                    // \n                    const possibleFields = ['hiddenMessages', 'hidden_floors', 'hiddenFloors', 'floor_data'];\n                    for (const field of possibleFields) {\n                        if (saved && saved[field]) {\n                            console.log(` ${field}:`, saved[field]);\n                            hidden_messages.value = saved[field];\n                            break;\n                        }\n                    }\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        // \n        const saveHiddenMessages = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                console.log('ID:', scriptId);\n                console.log(':', klona(hidden_messages.value));\n                const dataToSave = {\n                    hidden_messages: hidden_messages.value,\n                };\n                console.log(':', klona(dataToSave));\n                insertOrAssignVariables(klona(dataToSave), { type: 'script', script_id: scriptId });\n                console.log(':', hidden_messages.value.length, '');\n                // \n                setTimeout(() => {\n                    const saved = getVariables({ type: 'script', script_id: scriptId });\n                    console.log(':', saved);\n                    console.log(' hidden_messages :', saved?.hidden_messages);\n                }, 100);\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        //  API \n        const initApiProvider = () => {\n            if (!settings.value.api_provider || settings.value.api_provider === '') {\n                const endpoint = settings.value.api_endpoint || '';\n                if (endpoint.includes('generativelanguage.googleapis.com')) {\n                    settings.value.api_provider = 'gemini';\n                }\n                else if (endpoint.includes('open.bigmodel.cn')) {\n                    settings.value.api_provider = 'zhipu';\n                }\n                else {\n                    settings.value.api_provider = 'openai';\n                }\n            }\n        };\n        // \n        onMounted(() => {\n            console.log('SettingsTab ');\n            initApiProvider(); //  API \n            loadHiddenMessages();\n            loadHeaderTemplates();\n            loadGenerationStatus();\n        });\n        // \n        const handleTestButton = () => {\n            console.log(' - Vue');\n            window.toastr.success('Vue');\n        };\n        // \n        const handleSaveSettings = () => {\n            console.log(' ...');\n            const success = settingsStore.saveSettings();\n            if (success) {\n                console.log(' ');\n            }\n            else {\n                console.error(' ');\n            }\n        };\n        const handleReloadSettings = () => {\n            console.log(' ...');\n            const success = settingsStore.reloadSettings();\n            if (success) {\n                console.log(' ');\n            }\n            else {\n                console.error(' ');\n            }\n        };\n        const handleResetAutoSummaryStart = () => {\n            console.log(' ...');\n            try {\n                // \n                if (typeof window.resetAutoSummaryStart === 'function') {\n                    window.resetAutoSummaryStart();\n                }\n                else {\n                    window.toastr.error('');\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // API \n        const handleProviderChange = () => {\n            const provider = settings.value.api_provider;\n            const providerEndpoints = {\n                openai: 'https://api.openai.com/v1',\n                gemini: 'https://generativelanguage.googleapis.com/v1beta/openai',\n            };\n            if (providerEndpoints[provider]) {\n                settings.value.api_endpoint = providerEndpoints[provider];\n                window.toastr.success(` ${provider === 'openai' ? 'OpenAI' : 'Gemini AI Studio'}`);\n            }\n        };\n        // \n        // API\n        const handleSaveApiConfig = () => {\n            try {\n                // \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                const success = settingsStore.saveSettings();\n                if (success) {\n                    console.log('API :', {\n                        endpoint: settings.value.api_endpoint,\n                        model: settings.value.model,\n                        provider: settings.value.api_provider,\n                        //  API Key\n                        api_key: settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '',\n                    });\n                }\n            }\n            catch (error) {\n                console.error(' API :', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const handleImportFromTavern = async () => {\n            try {\n                console.log(' ...');\n                // \n                if (typeof triggerSlash === 'undefined') {\n                    window.toastr.error('');\n                    return;\n                }\n                console.log(' ...');\n                //  1: \n                console.log('1  /profile ...');\n                const currentProfileResult = await triggerSlash('/profile', '');\n                console.log(':', currentProfileResult);\n                // \n                if (!currentProfileResult || currentProfileResult === 'No connection profile selected.' || currentProfileResult.includes('')) {\n                    console.log(' ...');\n                    // \n                    const parentWin = window.parent || window.top || window;\n                    const powerUser = parentWin.power_user;\n                    const secretState = parentWin.secret_state;\n                    let endpoint = '';\n                    let apiKey = '';\n                    let model = '';\n                    if (powerUser) {\n                        endpoint = powerUser.custom_chat_url || powerUser.reverse_proxy || '';\n                        model = powerUser.custom_model || powerUser.openai_model || '';\n                    }\n                    if (secretState) {\n                        apiKey = secretState.api_key_custom || secretState.custom || secretState.openai || '';\n                    }\n                    if (!endpoint && !apiKey && !model) {\n                        window.toastr.warning(' API \\n\\n' +\n                            ' \\n' +\n                            'API     ');\n                        return;\n                    }\n                    // \n                    if (endpoint)\n                        settings.value.api_endpoint = endpoint;\n                    if (apiKey)\n                        settings.value.api_key = apiKey;\n                    if (model)\n                        settings.value.model = model;\n                    await settingsStore.saveSettings();\n                    window.toastr.success(` \\n\\n` +\n                        (endpoint ? ` : ${endpoint}\\n` : '') +\n                        (apiKey ? ` Key: ***${apiKey.slice(-4)}\\n` : '') +\n                        (model ? ` : ${model}` : ''));\n                    return;\n                }\n                //  2: \n                const profileName = currentProfileResult.trim();\n                console.log(`2 : ${profileName}`);\n                const profileDetailsResult = await triggerSlash('/profile-get', profileName);\n                console.log(':', profileDetailsResult);\n                //  JSON\n                let profileData;\n                try {\n                    profileData = JSON.parse(profileDetailsResult);\n                    console.log(' :', profileData);\n                }\n                catch (parseError) {\n                    console.error('  JSON :', parseError);\n                    window.toastr.error('');\n                    return;\n                }\n                // \n                let endpoint = '';\n                let apiKey = '';\n                let model = '';\n                // API  api-url  server_url\n                if (profileData['api-url']) {\n                    endpoint = profileData['api-url'];\n                    console.log('  API  (api-url):', endpoint);\n                }\n                else if (profileData.server_url) {\n                    endpoint = profileData.server_url;\n                    console.log('  API  (server_url):', endpoint);\n                }\n                // API Key - \n                if (profileData['secret-id']) {\n                    const secretId = profileData['secret-id'];\n                    console.log('  secret-id:', secretId);\n                    console.log(' API Key ');\n                }\n                else if (profileData.key) {\n                    apiKey = profileData.key;\n                    console.log('  API Key (key)');\n                }\n                // model\n                if (profileData.model) {\n                    model = profileData.model;\n                    console.log(' :', model);\n                }\n                // \n                if (!endpoint && !model) {\n                    window.toastr.warning(' API \\n\\n' +\n                        '\\n' +\n                        ' \\n' +\n                        ' \\n\\n' +\n                        ' ');\n                    console.warn(' :', profileData);\n                    return;\n                }\n                //  API Key\n                if (!apiKey) {\n                    console.log(' API Key ');\n                }\n                // \n                let importedCount = 0;\n                const importDetails = [];\n                if (endpoint) {\n                    settings.value.api_endpoint = endpoint;\n                    importedCount++;\n                    importDetails.push(` API : ${endpoint}`);\n                }\n                if (apiKey) {\n                    settings.value.api_key = apiKey;\n                    importedCount++;\n                    importDetails.push(` API Key: ***${apiKey.slice(-4)}`);\n                }\n                if (model) {\n                    settings.value.model = model;\n                    importedCount++;\n                    importDetails.push(` : ${model}`);\n                }\n                // \n                await settingsStore.saveSettings();\n                // \n                let successMessage = `  ${importedCount} \\n\\n` +\n                    ` : ${profileName}\\n\\n` +\n                    `${importDetails.join('\\n')}`;\n                //  API Key\n                if (!apiKey) {\n                    successMessage += `\\n\\n API Key \\n API Key`;\n                }\n                window.toastr.success(successMessage);\n                console.log(' :', {\n                    profileName,\n                    endpoint,\n                    apiKey: apiKey ? '***' + apiKey.slice(-4) : '',\n                    model,\n                });\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        const handle_fetch_models = async () => {\n            if (loading_models.value)\n                return;\n            try {\n                loading_models.value = true;\n                console.log(' ...');\n                console.log(' API :', settings.value.api_endpoint);\n                console.log(' API Key:', settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '');\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                window.toastr.info('...');\n                // \n                const { fetchAvailableModels } = await import('../');\n                const models = await fetchAvailableModels();\n                console.log(' :', models);\n                if (models.length > 0) {\n                    // \n                    available_models.value = models;\n                    window.toastr.success(`  ${models.length} \\n` +\n                        `: ${models.slice(0, 3).join(', ')}${models.length > 3 ? '...' : ''}`);\n                    // \n                    if (!settings.value.model && models[0]) {\n                        settings.value.model = models[0];\n                        console.log(' :', models[0]);\n                    }\n                }\n                else {\n                    window.toastr.warning('');\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n                // \n                const errorMessage = error.message;\n                // \n                if (errorMessage.length > 200) {\n                    window.toastr.error(' \\n\\n' +\n                        'F12\\n\\n' +\n                        '\\n' +\n                        ' API  /v1/models \\n' +\n                        ' API Key \\n' +\n                        '  CORS ');\n                }\n                else {\n                    window.toastr.error(` \\n\\n${errorMessage}`);\n                }\n                console.error(' :', errorMessage);\n            }\n            finally {\n                loading_models.value = false;\n            }\n        };\n        const handle_test_connection = async () => {\n            try {\n                console.log('...');\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                window.toastr.info('...');\n                // \n                const { normalizeApiEndpoint } = await import('../settings');\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                console.log(' :', apiUrl);\n                //  OpenAI \n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model || 'gpt-3.5-turbo',\n                        messages: [{ role: 'user', content: 'Hello' }],\n                        max_tokens: 5,\n                        temperature: settings.value.temperature,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (response.ok) {\n                    const data = await response.json();\n                    console.log('API :', data);\n                    // \n                    const reply = data.choices?.[0]?.message?.content || '()';\n                    const modelUsed = data.model || settings.value.model;\n                    window.toastr.success(` \\n` +\n                        ` : ${modelUsed}\\n` +\n                        ` : ${reply.substring(0, 50)}...`);\n                }\n                else {\n                    const errorText = await response.text();\n                    console.error('API :', errorText);\n                    window.toastr.error(`  (${response.status})\\n` +\n                        `: ${errorText.substring(0, 100)}`);\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_summarize = async () => {\n            try {\n                if (is_summarizing.value)\n                    return;\n                console.log('...');\n                is_summarizing.value = true;\n                saveGenerationStatus();\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                if (settings.value.start_message_id === undefined || settings.value.end_message_id === undefined) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                if (settings.value.start_message_id < 0 || settings.value.end_message_id < settings.value.start_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                console.log(`: ${settings.value.start_message_id} - ${settings.value.end_message_id}`);\n                // \n                showProgress.value = true;\n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${settings.value.start_message_id} - ${settings.value.end_message_id}`);\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(' 10-30 ');\n                // \n                const { summarizeMessages } = await import('../');\n                const summary = await summarizeMessages(settings.value.start_message_id, settings.value.end_message_id);\n                progressDialogRef.value?.setProgress(90);\n                progressDialogRef.value?.setMessage('...');\n                console.log(':', summary);\n                // \n                const scriptId = getScriptIdSafe();\n                if (scriptId) {\n                    insertOrAssignVariables(klona({ last_summary: summary }), { type: 'script', script_id: scriptId });\n                }\n                // \n                summaryHistoryStore.addSummary(settings.value.start_message_id ?? 0, settings.value.end_message_id ?? settings.value.start_message_id ?? 0, summary);\n                // \n                window.dispatchEvent(new CustomEvent('summary-history-updated'));\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail('');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    window.toastr.success('');\n                }, 800);\n            }\n            catch (error) {\n                console.error(':', error);\n                showProgress.value = false;\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                is_summarizing.value = false;\n                saveGenerationStatus();\n            }\n        };\n        const handle_generate_table = async () => {\n            try {\n                if (is_generating_table.value)\n                    return;\n                console.log('...');\n                is_generating_table.value = true;\n                saveGenerationStatus();\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                showProgress.value = true;\n                progressDialogRef.value?.setProgress(5);\n                progressDialogRef.value?.setMessage('...');\n                // \n                if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let headersInput = null;\n                if (currentTemplate.value.headers.trim()) {\n                    // \n                    const useTemplate = confirm(`\"${currentTemplate.value.name}\"\\n${currentTemplate.value.headers}`);\n                    if (useTemplate) {\n                        headersInput = currentTemplate.value.headers;\n                    }\n                }\n                if (!headersInput) {\n                    // \n                    headersInput = window.prompt(',,,');\n                }\n                if (!headersInput || !headersInput.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                const headers = headersInput\n                    .split(',')\n                    .map((h) => h.trim())\n                    .filter((h) => h);\n                if (headers.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                progressDialogRef.value?.setProgress(15);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${settings.value.table_start_message_id} - ${settings.value.table_end_message_id}`);\n                // \n                let chatMessages;\n                try {\n                    const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\n                    console.log(':', messageRange);\n                    chatMessages = getChatMessages(messageRange, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                    progressDialogRef.value?.addDetail(` ${chatMessages.length} `);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    showProgress.value = false;\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // AI\n                const messagesText = chatMessages\n                    .map(msg => {\n                    const role = msg.role === 'user' ? '' : 'AI';\n                    return `${role}: ${msg.message}`;\n                })\n                    .join('\\n\\n');\n                const aiPrompt = `${headers.join(', ')}\n\n\n${messagesText}\n\n****\n1. \n2. ${headers.join(', ')}\n3. \n4. \"\"\"-\"\n5. JSONmarkdown\n6. dataheaders\n\n**JSON**\n{\n  \"data\": [\n    [\"1\", \"2\", \"3\"],\n    [\"4\", \"5\", \"6\"]\n  ]\n}\n\ndata${headers.length}${headers.join(', ')}`;\n                console.log('AI...');\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${headers.join(', ')}`);\n                // \n                const { normalizeApiEndpoint } = await import('../settings');\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                progressDialogRef.value?.setProgress(40);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(' 10-30 ');\n                // AI\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'user',\n                                content: aiPrompt,\n                            },\n                        ],\n                        max_tokens: settings.value.max_tokens,\n                        temperature: settings.value.temperature,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API: ${response.status} ${response.statusText}`);\n                }\n                progressDialogRef.value?.setProgress(70);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const result = await response.json();\n                console.log('AI:', result);\n                if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n                    throw new Error('AI');\n                }\n                const aiResponse = result.choices[0].message.content;\n                console.log('AI:', aiResponse);\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                // AIJSON\n                let aiTableData;\n                try {\n                    // JSONmarkdown\n                    let jsonText = aiResponse.trim();\n                    // markdown\n                    jsonText = jsonText\n                        .replace(/^```json\\s*/i, '')\n                        .replace(/^```\\s*/, '')\n                        .replace(/```\\s*$/, '');\n                    // JSON\n                    const jsonMatch = jsonText.match(/\\{[\\s\\S]*\\}/);\n                    if (jsonMatch) {\n                        aiTableData = JSON.parse(jsonMatch[0]);\n                    }\n                    else {\n                        throw new Error('JSON');\n                    }\n                }\n                catch (parseError) {\n                    console.error('AI:', parseError);\n                    console.log('AI:', aiResponse);\n                    window.toastr.error('AI');\n                    return;\n                }\n                // \n                if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\n                    window.toastr.error('AIdata');\n                    return;\n                }\n                // \n                for (let i = 0; i < aiTableData.data.length; i++) {\n                    if (!Array.isArray(aiTableData.data[i])) {\n                        window.toastr.error(`${i + 1}`);\n                        return;\n                    }\n                    if (aiTableData.data[i].length !== headers.length) {\n                        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\n                        console.log(`:`, headers);\n                        console.log(`:`, aiTableData.data[i]);\n                        return;\n                    }\n                }\n                // headers\n                const tableData = {\n                    headers: headers,\n                    data: aiTableData.data,\n                };\n                // \n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    const chat_vars = getVariables({ type: 'chat' });\n                    const table_history = chat_vars.table_history || [];\n                    table_history.push({\n                        start_id: settings.value.table_start_message_id,\n                        end_id: settings.value.table_end_message_id,\n                        headers: tableData.headers,\n                        data: tableData.data,\n                    });\n                    insertOrAssignVariables(klona({ table_history }), { type: 'chat' });\n                    progressDialogRef.value?.setProgress(100);\n                    progressDialogRef.value?.setMessage(' ');\n                    progressDialogRef.value?.addDetail(` ${tableData.data.length} `);\n                    setTimeout(() => {\n                        showProgress.value = false;\n                        window.toastr.success(`${tableData.data.length}`);\n                    }, 800);\n                    console.log(':', table_history);\n                }\n                else {\n                    showProgress.value = false;\n                    window.toastr.warning('ID');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                showProgress.value = false;\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                is_generating_table.value = false;\n                saveGenerationStatus();\n            }\n        };\n        const handle_create_table = () => {\n            try {\n                // \n                if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const headersInput = window.prompt(',,,');\n                if (!headersInput || !headersInput.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const headers = headersInput\n                    .split(',')\n                    .map((h) => h.trim())\n                    .filter((h) => h);\n                if (headers.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const emptyTableData = {\n                    start_id: settings.value.table_start_message_id,\n                    end_id: settings.value.table_end_message_id,\n                    headers: headers,\n                    data: [], // \n                };\n                // \n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    const chat_vars = getVariables({ type: 'chat' });\n                    const table_history = chat_vars.table_history || [];\n                    table_history.push(emptyTableData);\n                    insertOrAssignVariables(klona({ table_history }), { type: 'chat' });\n                    window.toastr.success(`${headers.join(', ')}`);\n                    console.log(':', emptyTableData);\n                }\n                else {\n                    window.toastr.warning('ID');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_hide_messages = async () => {\n            try {\n                console.log('...');\n                if (!hide_range.value.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const ranges = hide_range.value.split(',').map(range => range.trim());\n                const messageIds = [];\n                for (const range of ranges) {\n                    if (range.includes('-')) {\n                        // 1-10\n                        const [start, end] = range.split('-').map(Number);\n                        if (start && end && start <= end) {\n                            for (let i = start; i <= end; i++) {\n                                messageIds.push(i);\n                            }\n                        }\n                    }\n                    else {\n                        // 5\n                        const id = Number(range);\n                        if (id) {\n                            messageIds.push(id);\n                        }\n                    }\n                }\n                if (messageIds.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let hiddenCount = 0;\n                const messagesToHide = [];\n                for (const messageId of messageIds) {\n                    // \n                    const alreadyHidden = hidden_messages.value.some(msg => msg.message_id === messageId);\n                    if (alreadyHidden) {\n                        console.log(` ${messageId} `);\n                        continue;\n                    }\n                    const message = chatMessages.find(msg => msg.message_id === messageId);\n                    if (message) {\n                        // \n                        messagesToHide.push({\n                            message_id: messageId,\n                            is_hidden: true,\n                        });\n                        // \n                        hidden_messages.value.push({\n                            message_id: messageId,\n                            name: message.name || 'Unknown',\n                            role: message.role || 'user',\n                            message: message.message || '',\n                        });\n                        hiddenCount++;\n                    }\n                }\n                // API\n                if (messagesToHide.length > 0) {\n                    try {\n                        console.log(' slash :', messageIds);\n                        //  slash \n                        for (const messageId of messageIds) {\n                            try {\n                                await triggerSlash(`/hide ${messageId}`);\n                                console.log(` ${messageId}`);\n                            }\n                            catch (error) {\n                                console.error(` ${messageId} :`, error);\n                            }\n                        }\n                        window.toastr.success('');\n                    }\n                    catch (error) {\n                        console.error('API:', error);\n                        window.toastr.error('API: ' + error.message);\n                    }\n                }\n                if (hiddenCount > 0) {\n                    // \n                    saveHiddenMessages();\n                    window.toastr.success(` ${hiddenCount} `);\n                    hide_range.value = ''; // \n                }\n                else {\n                    window.toastr.warning('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_show_messages = async () => {\n            try {\n                console.log('...');\n                if (!hide_range.value.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const messageIds = parseMessageRange(hide_range.value.trim());\n                if (messageIds.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const messagesToShow = [];\n                let shownCount = 0;\n                for (const messageId of messageIds) {\n                    const message = chatMessages.find(msg => msg.message_id === messageId);\n                    if (message) {\n                        messagesToShow.push({\n                            message_id: messageId,\n                            is_hidden: false,\n                        });\n                        shownCount++;\n                    }\n                }\n                if (messagesToShow.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // API\n                try {\n                    //  slash \n                    for (const messageId of messageIds) {\n                        try {\n                            await triggerSlash(`/unhide ${messageId}`);\n                            console.log(` ${messageId}`);\n                        }\n                        catch (error) {\n                            console.error(` ${messageId} :`, error);\n                        }\n                    }\n                }\n                catch (error) {\n                    console.error('API:', error);\n                    window.toastr.error('API: ' + error.message);\n                    return;\n                }\n                // \n                hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\n                // \n                saveHiddenMessages();\n                window.toastr.success(` ${shownCount} `);\n                hide_range.value = ''; // \n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_refresh_hidden = async (showToast = false) => {\n            try {\n                console.log('', showToast);\n                // \n                if (hidden_messages.value.length === 0) {\n                    console.log('...');\n                    loadHiddenMessages();\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    if (showToast) {\n                        window.toastr.error(': ' + error.message);\n                    }\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    if (showToast) {\n                        window.toastr.warning('');\n                    }\n                    return;\n                }\n                // \n                const validHiddenMessages = [];\n                let removedCount = 0;\n                for (const hiddenMsg of hidden_messages.value) {\n                    const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\n                    if (message) {\n                        // \n                        validHiddenMessages.push({\n                            message_id: hiddenMsg.message_id,\n                            name: message.name || hiddenMsg.name,\n                            role: message.role || hiddenMsg.role,\n                            message: message.message || hiddenMsg.message,\n                        });\n                    }\n                    else {\n                        // \n                        removedCount++;\n                    }\n                }\n                // \n                hidden_messages.value = validHiddenMessages;\n                // \n                saveHiddenMessages();\n                if (showToast) {\n                    if (removedCount > 0) {\n                        window.toastr.success(` ${removedCount} `);\n                    }\n                    else {\n                        window.toastr.success('');\n                    }\n                }\n                console.log(`${validHiddenMessages.length} ${removedCount} `);\n            }\n            catch (error) {\n                console.error(':', error);\n                if (showToast) {\n                    window.toastr.error(': ' + error.message);\n                }\n            }\n        };\n        const handle_unhide_single = async (messageId) => {\n            try {\n                console.log('', messageId);\n                // \n                const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\n                if (index === -1) {\n                    window.toastr.warning(` #${messageId} `);\n                    return;\n                }\n                // API\n                try {\n                    //  slash \n                    await triggerSlash(`/unhide ${messageId}`);\n                    console.log(':', messageId);\n                }\n                catch (error) {\n                    console.error('API:', error);\n                    window.toastr.warning('API');\n                    return;\n                }\n                // \n                hidden_messages.value.splice(index, 1);\n                // \n                saveHiddenMessages();\n                window.toastr.success(` #${messageId}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" API  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[0] || (_cache[0] = ($event) => (toggleSection('api'))),\n                        onMouseenter: _cache[1] || (_cache[1] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[2] || (_cache[2] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[37] || (_cache[37] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-cog\",\n                                style: { \"color\": \"#17a2b8\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\" API  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['api'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _cache[39] || (_cache[39] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"API \", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(settings).api_provider) = $event)),\n                                onChange: handleProviderChange,\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\", \"cursor\": \"pointer\" }\n                            }, [...(_cache[38] || (_cache[38] = [\n                                    _createElementVNode(\"option\", { value: \"openai\" }, \"OpenAI\", -1 /* CACHED */),\n                                    _createElementVNode(\"option\", { value: \"gemini\" }, \"Gemini AI Studio\", -1 /* CACHED */)\n                                ]))], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                [_vModelSelect, _unref(settings).api_provider]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[40] || (_cache[40] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" API  \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin-left\": \"8px\" } }, \" ( base URL ) \")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(settings).api_endpoint) = $event)),\n                                type: \"text\",\n                                placeholder: \"https:///v1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(settings).api_endpoint]\n                            ]),\n                            _cache[41] || (_cache[41] = _createStaticVNode(\"<div style=\\\"margin-top:8px;padding:8px 12px;background:rgba(74, 158, 255, 0.1);border-radius:4px;border-left:3px solid #4a9eff;\\\"><div style=\\\"color:#4a9eff;font-size:12px;font-weight:bold;margin-bottom:4px;\\\"> </div><div style=\\\"color:#999;font-size:11px;line-height:1.6;\\\">  <strong>OpenAI :</strong> https://api.openai.com/v1<br>  <strong>Gemini AI Studio:</strong> https://generativelanguage.googleapis.com/v1beta/openai/<br>  <strong>NewAPI / One API:</strong> https:///v1<br>  <strong> (Ollama):</strong> http://localhost:11434/v1<br>  <strong></strong> /chat/completions </div></div>\", 1))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _cache[42] || (_cache[42] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"API Key\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(settings).api_key) = $event)),\n                                type: \"password\",\n                                placeholder: \"sk-...\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(settings).api_key]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _createElementVNode(\"label\", _hoisted_8, [\n                                    _cache[43] || (_cache[43] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    (available_models.value.length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, \" ( gpt-4o-mini) \"))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    _createElementVNode(\"button\", {\n                                        disabled: loading_models.value,\n                                        class: \"fetch-button\",\n                                        style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%)\", \"box-shadow\": \"0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                        onmouseover: \"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(74, 158, 255, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\",\n                                        onClick: handle_fetch_models\n                                    }, _toDisplayString(loading_models.value ? '...' : ' '), 9 /* TEXT, PROPS */, _hoisted_11),\n                                    _createElementVNode(\"button\", {\n                                        class: \"save-button\",\n                                        style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #28a745\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #51cf66 0%, #40c057 100%)\", \"box-shadow\": \"0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                        onmouseover: \"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(81, 207, 102, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\",\n                                        onClick: handleSaveApiConfig\n                                    }, \"   \")\n                                ])\n                            ]),\n                            (available_models.value.length === 0)\n                                ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n                                    key: 0,\n                                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(settings).model) = $event)),\n                                    type: \"text\",\n                                    placeholder: \"gpt-4o-mini  deepseek-chat \",\n                                    style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                                }, null, 512 /* NEED_PATCH */)), [\n                                    [_vModelText, _unref(settings).model]\n                                ])\n                                : _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n                                    key: 1,\n                                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(settings).model) = $event)),\n                                    class: \"model-select\",\n                                    style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                                }, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(available_models.value, (model) => {\n                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                            key: model,\n                                            value: model\n                                        }, _toDisplayString(model), 9 /* TEXT, PROPS */, _hoisted_12));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 512 /* NEED_PATCH */)), [\n                                    [_vModelSelect, _unref(settings).model]\n                                ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_13, [\n                            _cache[44] || (_cache[44] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \" Token 4000\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(settings).max_tokens) = $event)),\n                                type: \"number\",\n                                min: \"100\",\n                                max: \"16000\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).max_tokens,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_14, [\n                            _cache[45] || (_cache[45] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" Temperature () \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, \"(0-2 0.7)\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((_unref(settings).temperature) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                max: \"2\",\n                                step: \"0.1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).temperature,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _cache[46] || (_cache[46] = _createElementVNode(\"div\", { style: { \"margin-top\": \"4px\", \"color\": \"#888\", \"font-size\": \"11px\" } }, \"  0.8 0.2 \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_15, [\n                            _cache[47] || (_cache[47] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" Top P () \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, \"(0-1 1.0)\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((_unref(settings).top_p) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                max: \"1\",\n                                step: \"0.01\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).top_p,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _cache[48] || (_cache[48] = _createElementVNode(\"div\", { style: { \"margin-top\": \"4px\", \"color\": \"#888\", \"font-size\": \"11px\" } }, \"   Temperature  Top P \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_16, [\n                            _cache[49] || (_cache[49] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" Presence Penalty () \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, \"(-2.0 to 2.0 0)\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((_unref(settings).presence_penalty) = $event)),\n                                type: \"number\",\n                                min: \"-2\",\n                                max: \"2\",\n                                step: \"0.1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).presence_penalty,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _cache[50] || (_cache[50] = _createElementVNode(\"div\", { style: { \"margin-top\": \"4px\", \"color\": \"#888\", \"font-size\": \"11px\" } }, \"  \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_17, [\n                            _cache[51] || (_cache[51] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" Frequency Penalty () \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, \"(-2.0 to 2.0 0)\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((_unref(settings).frequency_penalty) = $event)),\n                                type: \"number\",\n                                min: \"-2\",\n                                max: \"2\",\n                                step: \"0.1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).frequency_penalty,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _cache[52] || (_cache[52] = _createElementVNode(\"div\", { style: { \"margin-top\": \"4px\", \"color\": \"#888\", \"font-size\": \"11px\" } }, \"  \", -1 /* CACHED */))\n                        ])\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['api']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_18, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[13] || (_cache[13] = ($event) => (toggleSection('autoSummary'))),\n                        onMouseenter: _cache[14] || (_cache[14] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[15] || (_cache[15] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[53] || (_cache[53] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-bolt\",\n                                style: { \"color\": \"#ffc107\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['autoSummary'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_19, [\n                            _createElementVNode(\"label\", _hoisted_20, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event) => ((_unref(settings).auto_summarize_enabled) = $event)),\n                                    type: \"checkbox\",\n                                    style: { \"width\": \"16px\", \"height\": \"16px\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).auto_summarize_enabled]\n                                ]),\n                                _cache[54] || (_cache[54] = _createTextVNode(\"  \", -1 /* CACHED */))\n                            ])\n                        ]),\n                        (_unref(settings).auto_summarize_enabled)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                _cache[55] || (_cache[55] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event) => ((_unref(settings).summarize_interval) = $event)),\n                                    type: \"number\",\n                                    min: \"1\",\n                                    style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        _unref(settings).summarize_interval,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ]),\n                                _createElementVNode(\"div\", { style: { \"margin-top\": \"10px\", \"display\": \"flex\", \"gap\": \"10px\" } }, [\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                        onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                        onClick: handleSaveSettings\n                                    }, \"   \"),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                        onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                        onClick: handleReloadSettings\n                                    }, \"   \"),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                        onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                        onClick: handleResetAutoSummaryStart\n                                    }, \"   \")\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['autoSummary']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_22, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[18] || (_cache[18] = ($event) => (toggleSection('manualSummary'))),\n                        onMouseenter: _cache[19] || (_cache[19] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[20] || (_cache[20] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[56] || (_cache[56] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-pen-to-square\",\n                                style: { \"color\": \"#28a745\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['manualSummary'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_23, [\n                            _cache[57] || (_cache[57] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[21] || (_cache[21] = ($event) => ((_unref(settings).start_message_id) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).start_message_id,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_24, [\n                            _cache[58] || (_cache[58] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event) => ((_unref(settings).end_message_id) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).end_message_id,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_25, [\n                            _createElementVNode(\"button\", {\n                                class: \"action-button test-button\",\n                                disabled: is_summarizing.value,\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#3a3a3a\", \"color\": \"#e0e0e0\" },\n                                onClick: handle_test_connection\n                            }, [...(_cache[59] || (_cache[59] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-plug\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_26),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button summarize-button\",\n                                disabled: is_summarizing.value || !_unref(settings).api_key,\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%)\", \"box-shadow\": \"0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                onClick: handle_summarize\n                            }, [\n                                (!is_summarizing.value)\n                                    ? (_openBlock(), _createElementBlock(\"i\", _hoisted_28))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_29)),\n                                _createTextVNode(\" \" + _toDisplayString(is_summarizing.value ? '...' : ''), 1 /* TEXT */)\n                            ], 8 /* PROPS */, _hoisted_27)\n                        ])\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['manualSummary']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_30, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[23] || (_cache[23] = ($event) => (toggleSection('tableGeneration'))),\n                        onMouseenter: _cache[24] || (_cache[24] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[25] || (_cache[25] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[60] || (_cache[60] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-table\",\n                                style: { \"color\": \"#6f42c1\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['tableGeneration'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_31, [\n                            _cache[61] || (_cache[61] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event) => ((_unref(settings).table_start_message_id) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).table_start_message_id,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_32, [\n                            _cache[62] || (_cache[62] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event) => ((_unref(settings).table_end_message_id) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).table_end_message_id,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_33, [\n                            _cache[67] || (_cache[67] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_34, [\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event) => ((selectedTemplate).value = $event)),\n                                    style: { \"flex\": \"1\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" },\n                                    onChange: loadTemplate\n                                }, [\n                                    _cache[63] || (_cache[63] = _createElementVNode(\"option\", { value: \"\" }, \"...\", -1 /* CACHED */)),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(headerTemplates.value, (template, index) => {\n                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                            key: index,\n                                            value: index\n                                        }, _toDisplayString(template.name), 9 /* TEXT, PROPS */, _hoisted_35));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelSelect, selectedTemplate.value]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 12px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                    onClick: showAddTemplateDialog\n                                }, [...(_cache[64] || (_cache[64] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            (selectedTemplate.value !== '')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_36, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event) => ((currentTemplate.value.name) = $event)),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"flex\": \"1\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, currentTemplate.value.name]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event) => ((currentTemplate.value.headers) = $event)),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"flex\": \"2\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, currentTemplate.value.headers]\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 12px\", \"background\": \"#28a745\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                        onClick: saveTemplate\n                                    }, [...(_cache[65] || (_cache[65] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-save\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 12px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                        onClick: deleteTemplate\n                                    }, [...(_cache[66] || (_cache[66] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_37, [\n                            _cache[71] || (_cache[71] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_38, [\n                                _createElementVNode(\"div\", _hoisted_39, [\n                                    _createElementVNode(\"div\", {\n                                        style: _normalizeStyle({\n                                            width: '8px',\n                                            height: '8px',\n                                            borderRadius: '50%',\n                                            backgroundColor: is_summarizing.value ? '#ff6b6b' : '#4caf50',\n                                            transition: 'background-color 0.3s',\n                                        })\n                                    }, null, 4 /* STYLE */),\n                                    _cache[68] || (_cache[68] = _createElementVNode(\"span\", { style: { \"color\": \"#ccc\", \"font-size\": \"12px\" } }, \"\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_40, [\n                                    _createElementVNode(\"div\", {\n                                        style: _normalizeStyle({\n                                            width: '8px',\n                                            height: '8px',\n                                            borderRadius: '50%',\n                                            backgroundColor: is_generating_table.value ? '#ff6b6b' : '#4caf50',\n                                            transition: 'background-color 0.3s',\n                                        })\n                                    }, null, 4 /* STYLE */),\n                                    _cache[69] || (_cache[69] = _createElementVNode(\"span\", { style: { \"color\": \"#ccc\", \"font-size\": \"12px\" } }, \"\", -1 /* CACHED */))\n                                ]),\n                                (is_summarizing.value || is_generating_table.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                        _createElementVNode(\"button\", {\n                                            style: { \"padding\": \"4px 8px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"11px\" },\n                                            onClick: stopGeneration\n                                        }, [...(_cache[70] || (_cache[70] = [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-stop\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_42, [\n                            _createElementVNode(\"button\", {\n                                class: \"action-button summarize-button\",\n                                disabled: is_generating_table.value || !_unref(settings).api_key,\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%)\", \"box-shadow\": \"0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                onClick: handle_generate_table\n                            }, [\n                                (!is_generating_table.value)\n                                    ? (_openBlock(), _createElementBlock(\"i\", _hoisted_44))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_45)),\n                                _createTextVNode(\" \" + _toDisplayString(is_generating_table.value ? 'AI...' : 'AI'), 1 /* TEXT */)\n                            ], 8 /* PROPS */, _hoisted_43),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button create-button\",\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #40c057\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #51cf66 0%, #40c057 100%)\", \"box-shadow\": \"0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                onClick: handle_create_table\n                            }, [...(_cache[72] || (_cache[72] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ])\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['tableGeneration']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_46, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.04), inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[31] || (_cache[31] = ($event) => (toggleSection('messageManagement'))),\n                        onMouseenter: _cache[32] || (_cache[32] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[33] || (_cache[33] = ($event) => {\n                            $event.currentTarget.style.background = 'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[73] || (_cache[73] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-layer-group\",\n                                style: { \"color\": \"#dc3545\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['messageManagement'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_47, [\n                            _cache[74] || (_cache[74] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"1-10 5\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event) => ((hide_range).value = $event)),\n                                type: \"text\",\n                                placeholder: \"1-10\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, hide_range.value]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_48, [\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #ff5252\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#ff6b6b\", \"color\": \"white\" },\n                                onClick: handle_hide_messages\n                            }, [...(_cache[75] || (_cache[75] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-eye-slash\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #40c057\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #51cf66 0%, #40c057 100%)\", \"box-shadow\": \"0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                disabled: !hide_range.value.trim(),\n                                onClick: handle_show_messages\n                            }, [...(_cache[76] || (_cache[76] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_49),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #ffcc02\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#ffd43b\", \"color\": \"#333\" },\n                                onClick: _cache[35] || (_cache[35] = () => handle_refresh_hidden(true))\n                            }, [...(_cache[77] || (_cache[77] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (hidden_messages.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_50, [\n                                _createElementVNode(\"div\", _hoisted_51, [\n                                    _createElementVNode(\"label\", _hoisted_52, [\n                                        _createElementVNode(\"span\", null, \" (\" + _toDisplayString(hidden_messages.value.length) + \" )\", 1 /* TEXT */),\n                                        _createElementVNode(\"button\", {\n                                            class: \"mini-button\",\n                                            onClick: _cache[36] || (_cache[36] = ($event) => (hidden_display_expanded.value = !hidden_display_expanded.value))\n                                        }, _toDisplayString(hidden_display_expanded.value ? '' : ''), 1 /* TEXT */)\n                                    ])\n                                ]),\n                                (hidden_display_expanded.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_53, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hidden_messages.value, (msg) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: msg.message_id,\n                                                class: \"hidden-message-item\"\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_54, [\n                                                    _createElementVNode(\"span\", _hoisted_55, \"#\" + _toDisplayString(msg.message_id), 1 /* TEXT */),\n                                                    _createElementVNode(\"span\", {\n                                                        class: _normalizeClass([\"message-role\", 'role-' + msg.role])\n                                                    }, _toDisplayString(msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '') + \" \" + _toDisplayString(msg.name), 3 /* TEXT, CLASS */),\n                                                    _createElementVNode(\"span\", _hoisted_56, _toDisplayString(msg.message.substring(0, 50)) + _toDisplayString(msg.message.length > 50 ? '...' : ''), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"button\", {\n                                                    class: \"show-button\",\n                                                    onClick: () => handle_unhide_single(msg.message_id)\n                                                }, \"\", 8 /* PROPS */, _hoisted_57)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_58, \"\"))\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['messageManagement']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createVNode(ProgressDialog, {\n                    ref_key: \"progressDialogRef\",\n                    ref: progressDialogRef,\n                    show: showProgress.value,\n                    title: \"AI \"\n                }, null, 8 /* PROPS */, [\"show\"])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsTab.vue?vue&type=style&index=0&id=bb81dbda&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass, withModifiers as _withModifiers, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"statusbar-generator\" };\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2)\" }\n};\nconst _hoisted_3 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"flex-wrap\": \"wrap\" } };\nconst _hoisted_4 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"280px 1fr 500px\", \"gap\": \"20px\", \"min-height\": \"600px\" } };\nconst _hoisted_5 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\", \"overflow-y\": \"auto\" } };\nconst _hoisted_6 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_7 = { style: { \"flex\": \"1\", \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"10px\", \"margin-bottom\": \"15px\" } };\nconst _hoisted_8 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"8px\" } };\nconst _hoisted_9 = { style: { \"color\": \"#4a9eff\", \"font-size\": \"11px\", \"font-weight\": \"600\" } };\nconst _hoisted_10 = [\"disabled\", \"onClick\"];\nconst _hoisted_11 = [\"onUpdate:modelValue\"];\nconst _hoisted_12 = [\"onUpdate:modelValue\"];\nconst _hoisted_13 = { style: { \"display\": \"flex\", \"gap\": \"6px\", \"align-items\": \"center\" } };\nconst _hoisted_14 = [\"onUpdate:modelValue\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    key: 1,\n    class: \"fa-solid fa-icons\"\n};\nconst _hoisted_17 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_18 = { style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"12px\", \"border-bottom\": \"1px solid #3a3a3a\", \"padding-bottom\": \"8px\" } };\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"overflow-y\": \"auto\" } };\nconst _hoisted_21 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_22 = { style: { \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"padding\": \"12px\", \"border\": \"1px solid #3a3a3a\", \"overflow\": \"auto\", \"max-height\": \"200px\" } };\nconst _hoisted_23 = { style: { \"margin\": \"0\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"font-family\": \"'Consolas', 'Monaco', monospace\" } };\nconst _hoisted_24 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"flex\": \"1\" } };\nconst _hoisted_25 = [\"innerHTML\"];\nconst _hoisted_26 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"20px\", \"width\": \"600px\", \"max-width\": \"90vw\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_27 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"repeat(8, 1fr)\", \"gap\": \"8px\", \"margin-bottom\": \"16px\", \"max-height\": \"400px\", \"overflow-y\": \"auto\" } };\nconst _hoisted_28 = [\"title\", \"onClick\"];\nconst _hoisted_29 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_30 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"width\": \"600px\", \"max-width\": \"90vw\", \"max-height\": \"90vh\", \"overflow-y\": \"auto\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_31 = { style: { \"background\": \"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.1) 100%)\", \"border\": \"1px solid rgba(59, 130, 246, 0.3)\", \"border-radius\": \"8px\", \"padding\": \"12px 16px\", \"margin-bottom\": \"16px\" } };\nconst _hoisted_32 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"margin-bottom\": \"10px\" } };\nconst _hoisted_33 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } };\nconst _hoisted_34 = { style: { \"color\": \"#93c5fd\", \"font-size\": \"13px\", \"font-weight\": \"600\" } };\nconst _hoisted_35 = {\n    key: 0,\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"8px\" }\n};\nconst _hoisted_36 = { style: { \"color\": \"#60a5fa\", \"font-weight\": \"600\", \"font-size\": \"11px\", \"min-width\": \"50px\" } };\nconst _hoisted_37 = [\"onUpdate:modelValue\"];\nconst _hoisted_38 = [\"onUpdate:modelValue\"];\nconst _hoisted_39 = [\"onClick\"];\nconst _hoisted_40 = [\"disabled\", \"onClick\"];\nconst _hoisted_41 = {\n    key: 1,\n    style: { \"color\": \"#fbbf24\", \"font-size\": \"12px\", \"padding\": \"8px 0\" }\n};\nconst _hoisted_42 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_43 = {\n    key: 0,\n    style: { \"margin-top\": \"16px\", \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" }\n};\nconst _hoisted_44 = [\"disabled\"];\nconst _hoisted_45 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"width\": \"90%\", \"max-width\": \"700px\", \"max-height\": \"80vh\", \"overflow-y\": \"auto\", \"box-shadow\": \"0 8px 32px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_46 = { style: { \"margin-bottom\": \"16px\" } };\nconst _hoisted_47 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_48 = [\"disabled\"];\nconst _hoisted_49 = [\"disabled\"];\nconst _hoisted_50 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"width\": \"90%\", \"max-width\": \"700px\", \"max-height\": \"80vh\", \"overflow-y\": \"auto\", \"box-shadow\": \"0 8px 32px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_51 = { style: { \"margin-bottom\": \"16px\" } };\nconst _hoisted_52 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_53 = [\"disabled\"];\nconst _hoisted_54 = [\"disabled\"];\nimport { storeToRefs } from 'pinia';\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\nimport AIModifyDialog from './AIModifyDialog.vue';\nimport ProgressDialog from './ProgressDialog.vue';\n//  settings store\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StatusBarGenerator',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // \n        const templates = {\n            simple: {\n                name: '',\n                findRegex: '<-CHARACTER_STATUS->',\n                fields: [\n                    { name: '', label: '', icon: 'fa-solid fa-user' },\n                    { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\n                    { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\n                    { name: '', label: '', icon: 'fa-solid fa-heart' },\n                ],\n            },\n            abo: {\n                name: 'ABO',\n                findRegex: '<-ENVIRONMENT_DATA->[\\\\r\\\\n]*\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|[\\\\r\\\\n]*<-CHARACTER_STATUS->[\\\\r\\\\n]*\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|[\\\\r\\\\n]*',\n                fields: [\n                    { name: '', label: '', icon: 'fa-solid fa-calendar' },\n                    { name: '', label: '', icon: 'fa-solid fa-clock' },\n                    { name: '', label: '', icon: 'fa-solid fa-location-dot' },\n                    { name: '', label: '', icon: 'fa-solid fa-cloud-sun' },\n                    { name: '', label: '', icon: 'fa-solid fa-shirt' },\n                    { name: '', label: '', icon: 'fa-solid fa-heart' },\n                    { name: '', label: '', icon: 'fa-solid fa-fire' },\n                    { name: '', label: '', icon: 'fa-solid fa-bookmark' },\n                ],\n            },\n        };\n        const config = ref({\n            name: '',\n            findRegex: '<-CHARACTER_STATUS->',\n            fields: [\n                { name: '', label: '', icon: 'fa-solid fa-user' },\n                { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\n                { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\n                { name: '', label: '', icon: 'fa-solid fa-heart' },\n            ],\n        });\n        const files = ref([\n            { path: 'index.html', content: '' },\n            { path: 'style.css', content: '' },\n            { path: 'script.js', content: '' },\n        ]);\n        const currentFile = ref(files.value[0]);\n        const showAI = ref(false);\n        const aiPrompt = ref('');\n        const originalAiPrompt = ref(''); // AI\n        const showAiModifyDialog = ref(false); // AI\n        const isModifyingAi = ref(false); // AI\n        const showIconPickerFor = ref(null);\n        // \n        const showProgress = ref(false);\n        const progressDialogRef = ref(null);\n        // XML\n        const originalXmlInput = ref(''); // XML\n        const showXmlModifyDialog = ref(false);\n        const isModifyingXml = ref(false);\n        // AI\n        const originalFieldDescription = ref(''); // \n        const showFieldModifyDialog = ref(false);\n        const isModifyingField = ref(false);\n        // XML \n        const showXmlDialog = ref(false);\n        const xmlInput = ref('');\n        const isParsingXml = ref(false);\n        // AI \n        const showAiFieldDialog = ref(false);\n        const aiFieldDescription = ref('');\n        const isGeneratingFields = ref(false);\n        // Font Awesome \n        const iconList = [\n            // \n            'fa-solid fa-cat',\n            'fa-solid fa-dog',\n            'fa-solid fa-dove',\n            'fa-solid fa-fish',\n            'fa-solid fa-paw',\n            'fa-solid fa-spider',\n            'fa-solid fa-horse',\n            // \n            'fa-solid fa-heart',\n            'fa-solid fa-heart-pulse',\n            // \n            'fa-solid fa-face-smile',\n            'fa-solid fa-face-grin-stars',\n            'fa-solid fa-face-grin-beam',\n            'fa-solid fa-face-laugh',\n            // \n            'fa-solid fa-star',\n            // \n            'fa-solid fa-wand-magic-sparkles',\n            'fa-solid fa-hat-wizard',\n            'fa-solid fa-bolt',\n            'fa-solid fa-fire',\n            'fa-solid fa-meteor',\n            'fa-solid fa-rocket',\n            // \n            'fa-solid fa-sun',\n            'fa-solid fa-moon',\n            'fa-solid fa-cloud',\n            'fa-solid fa-seedling',\n            'fa-solid fa-leaf',\n            'fa-solid fa-tree',\n            'fa-solid fa-snowflake',\n            // \n            'fa-solid fa-cake-candles',\n            'fa-solid fa-candy-cane',\n            'fa-solid fa-apple',\n            'fa-solid fa-ice-cream',\n            // \n            'fa-solid fa-gem',\n            'fa-solid fa-crown',\n            'fa-solid fa-gift',\n            'fa-solid fa-ribbon',\n            'fa-solid fa-medal',\n            'fa-solid fa-trophy',\n            // \n            'fa-solid fa-shield',\n            'fa-solid fa-scroll',\n            // \n            'fa-solid fa-book',\n            'fa-solid fa-book-open',\n            'fa-solid fa-feather',\n            'fa-solid fa-pen',\n            'fa-solid fa-paintbrush',\n            'fa-solid fa-palette',\n            // \n            'fa-solid fa-music',\n            'fa-solid fa-headphones',\n            'fa-solid fa-gamepad',\n            'fa-solid fa-chess',\n            'fa-solid fa-puzzle-piece',\n            'fa-solid fa-dice',\n            // \n            'fa-solid fa-mobile-screen',\n            'fa-solid fa-tablet',\n            'fa-solid fa-laptop',\n            'fa-solid fa-camera',\n            'fa-solid fa-video',\n            'fa-solid fa-tv',\n            // \n            'fa-solid fa-bell',\n            'fa-solid fa-envelope',\n        ];\n        // \n        const worldbookContent = computed(() => {\n            // {{}}\n            const placeholders = config.value.fields.map(f => `{{${f.label || f.name}}}`).join('|');\n            // \n            const fieldDefinitions = config.value.fields\n                .map(f => {\n                const iconDesc = f.icon ? `<i class=\"${f.icon}\"></i> ` : '';\n                const label = f.label || f.name;\n                return `  - ${iconDesc}${label}{{char}}${label}`;\n            })\n                .join('\\n');\n            // \n            const exampleValues = config.value.fields.map(f => f.label || f.name || '').join('|');\n            // \n            const parseRegexStructure = (regex, fields) => {\n                //  <-ENVIRONMENT_DATA->\n                const triggerMatches = regex.match(/<-[^>]+->/g) || [];\n                if (triggerMatches.length === 0) {\n                    // \n                    const placeholders = fields.map(f => `{{${f.label || f.name}}}`).join('|');\n                    const exampleValues = fields.map(f => f.label || f.name).join('|');\n                    return {\n                        formatExample: `|${placeholders}|`,\n                        exampleOutput: `|${exampleValues}|`\n                    };\n                }\n                // \n                let normalizedRegex = regex\n                    .replace(/\\\\\\\\/g, '\\\\') // \\\\ -> \\\n                    .replace(/\\\\\\|/g, '|') // \\| -> |\n                    .replace(/\\\\\\(/g, '(') // \\( -> (\n                    .replace(/\\\\\\)/g, ')') // \\) -> )\n                    .replace(/\\\\\\[/g, '[') // \\[ -> [\n                    .replace(/\\\\\\]/g, ']') // \\] -> ]\n                    .replace(/\\\\\\+/g, '+'); // \\+ -> +\n                console.log(' :', regex);\n                console.log(' :', normalizedRegex);\n                // \n                const lines = [];\n                const exampleLines = [];\n                let fieldIndex = 0;\n                // \n                const parts = normalizedRegex.split(/(<-[^>]+->)/);\n                console.log(' :', parts);\n                for (let i = 0; i < parts.length; i++) {\n                    const part = parts[i];\n                    // \n                    if (part.match(/<-[^>]+->/)) {\n                        lines.push(part);\n                        exampleLines.push(part);\n                        console.log(` : ${part}`);\n                    }\n                    // \n                    else if (part.trim().length > 0 && !part.match(/<-[^>]+->/)) {\n                        // \n                        const allCaptures = part.match(/\\([^\\)]+\\)/g) || [];\n                        const totalCount = allCaptures.length;\n                        console.log(`  (100): \"${part.substring(0, 100)}\"`);\n                        console.log(` :`, allCaptures);\n                        console.log(` : ${totalCount}, : ${fieldIndex}, : ${fields.length}`);\n                        if (totalCount === 0) {\n                            console.warn(` `);\n                            continue;\n                        }\n                        // 4\n                        const perLine = 4;\n                        for (let offset = 0; offset < totalCount; offset += perLine) {\n                            const count = Math.min(perLine, totalCount - offset);\n                            //  fieldIndex < fields.length \n                            if (count > 0) {\n                                const segmentFields = fields.slice(fieldIndex, fieldIndex + count);\n                                // \n                                while (segmentFields.length < count) {\n                                    segmentFields.push({ name: `${fieldIndex + segmentFields.length + 1}`, label: `${fieldIndex + segmentFields.length + 1}`, icon: '' });\n                                }\n                                const placeholders = segmentFields.map(f => `{{${f.label || f.name}}}`).join('|');\n                                const examples = segmentFields.map(f => f.label || f.name).join('|');\n                                lines.push(`|${placeholders}|`);\n                                exampleLines.push(`|${examples}|`);\n                                console.log(` : |${examples}|`);\n                                fieldIndex += count;\n                            }\n                        }\n                    }\n                }\n                console.log(' :', lines.join('\\n'));\n                console.log(' :', exampleLines.join('\\n'));\n                return {\n                    formatExample: lines.join('\\n'),\n                    exampleOutput: exampleLines.join('\\n')\n                };\n            };\n            const { formatExample, exampleOutput } = parseRegexStructure(config.value.findRegex, config.value.fields);\n            return `<status_rule>\n#{{char}}\n\n##\n<status>\n${formatExample}\n</status>\n\n##\n${fieldDefinitions || '  - '}\n\n##\n\n<status>\n${exampleOutput}\n</status>\n\n##\n1. ** <status> **\n   -  <status>\n   -  </status>\n   -  \n\n2. ****\n   -  <-ENVIRONMENT_DATA->\n   -  | \n   - \n   - \n\n3. ****\n   -  |: |: |\n   -  |||\n   - \n\n4. ****\n   - \n   - \n   - \n   - \n\n5. ****\n   - \n   - {{}} \n   -  {{char}}  {{user}} \n</status_rule>`;\n        });\n        //  HTML\n        const previewHtml = computed(() => {\n            const htmlFile = files.value.find(f => f.path === 'index.html');\n            const cssFile = files.value.find(f => f.path === 'style.css');\n            const jsFile = files.value.find(f => f.path === 'script.js');\n            if (!htmlFile)\n                return '';\n            const scriptTag = 'script';\n            const styleTag = 'style';\n            //  $1, $2 \n            let previewContent = htmlFile.content || '';\n            config.value.fields.forEach((field, i) => {\n                const exampleValue = field.name || `${i + 1}`;\n                previewContent = previewContent.replace(new RegExp(`\\\\$${i + 1}(?!\\\\d)`, 'g'), exampleValue);\n            });\n            return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\">\n  <${styleTag}>\n    html, body {\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      height: auto;\n      min-height: 800px;\n      overflow: visible;\n    }\n    ${cssFile?.content || ''}\n  </${styleTag}>\n  <${scriptTag} src=\"https://code.jquery.com/jquery-3.7.1.min.js\"></${scriptTag}>\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\">\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\"></${scriptTag}>\n</head>\n<body>\n  ${previewContent}\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\n</body>\n</html>`;\n        });\n        // \n        function updatePreview() {\n            // \n        }\n        // \n        function addField() {\n            config.value.fields.push({ name: '', label: '', icon: '' });\n        }\n        // \n        function removeField(index) {\n            config.value.fields.splice(index, 1);\n        }\n        //  XML \n        function showXmlParseDialog() {\n            showXmlDialog.value = true;\n            xmlInput.value = '';\n        }\n        //  AI \n        function showAiFieldGeneratorDialog() {\n            showAiFieldDialog.value = true;\n            aiFieldDescription.value = '';\n        }\n        // AI  XML \n        async function parseXmlWithAI() {\n            if (!xmlInput.value.trim()) {\n                toastr.warning(' XML ');\n                return;\n            }\n            //  API \n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                toastr.error(' API \" \" API ', '', {\n                    timeOut: 0,\n                    extendedTimeOut: 0,\n                    closeButton: true,\n                });\n                return;\n            }\n            // \n            originalXmlInput.value = xmlInput.value;\n            isParsingXml.value = true;\n            showProgress.value = true;\n            try {\n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage(' XML...');\n                progressDialogRef.value?.addDetail(`XML : ${xmlInput.value.length} `);\n                const systemPrompt = ` XML  XML \n\n1. **** XML  <i><2i><><> \n2. ****\n   -  <i><2i><3i> \n   -  <><>\n3. **** namelabelicon\n\n** JSON **\n\n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]\n\n****\n- name  date, location, status\n- label  \n- icon  Font Awesome \n- **** JSON \n- **** JSON\n\n\n<state_bar>\n<i></i>\n<></>\n<></>\n</state_bar>\n\n\n[\n  { \"name\": \"content\", \"label\": \"\", \"icon\": \"\" },\n  { \"name\": \"date\", \"label\": \"\", \"icon\": \"fa-solid fa-calendar\" },\n  { \"name\": \"physical_status\", \"label\": \"\", \"icon\": \"fa-solid fa-heart-pulse\" }\n]`;\n                const userPrompt = ` XML \n\n\\`\\`\\`xml\n${xmlInput.value.trim()}\n\\`\\`\\`\n\n JSON `;\n                console.log('  AI  XML...');\n                console.log('  API:', settings.value.api_endpoint);\n                console.log(' :', settings.value.model);\n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage(' XML  AI ...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                console.log(' :', apiUrl);\n                //  AI API\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI  XML ...');\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: systemPrompt,\n                            },\n                            {\n                                role: 'user',\n                                content: userPrompt,\n                            },\n                        ],\n                        max_tokens: 2000,\n                        temperature: 0.7,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API: ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' AI :', result);\n                if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n                    throw new Error('AI');\n                }\n                const aiResponse = result.choices[0].message.content;\n                console.log(' AI :', aiResponse);\n                // =====  =====\n                if (!aiResponse || typeof aiResponse !== 'string') {\n                    throw new Error('AI ');\n                }\n                //  JSON\n                let jsonText = aiResponse.trim();\n                //  markdown \n                jsonText = jsonText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n                //  JSON  AI \n                const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                //  JSON\n                let parsedFields;\n                try {\n                    parsedFields = JSON.parse(jsonText);\n                }\n                catch (parseError) {\n                    throw new Error(`AI  JSON \\n\\n AI \\n\\n200:\\n${result.slice(0, 200)}`);\n                }\n                if (!Array.isArray(parsedFields)) {\n                    throw new Error('AI ');\n                }\n                // \n                const validFields = parsedFields.filter((field) => {\n                    return field.name && field.label;\n                });\n                if (validFields.length === 0) {\n                    throw new Error(' AI ');\n                }\n                // \n                config.value.fields = validFields.map((field) => ({\n                    name: field.name || '',\n                    label: field.label || '',\n                    icon: field.icon || '',\n                }));\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail(` ${validFields.length} `);\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showXmlDialog.value = false;\n                    xmlInput.value = '';\n                    toastr.success(` ${validFields.length} `);\n                }, 800);\n            }\n            catch (error) {\n                console.error(' XML :', error);\n                showProgress.value = false;\n                // \n                const errorMsg = error.message || '';\n                //  API \n                if (errorMsg.includes('API') ||\n                    errorMsg.includes('403') ||\n                    errorMsg.includes('401') ||\n                    errorMsg.includes('Unauthorized')) {\n                    toastr.error(' API \\n1. API \\n2. \\n3. ', '', {\n                        timeOut: 0,\n                        extendedTimeOut: 0,\n                        closeButton: true,\n                    });\n                }\n                else {\n                    toastr.error(`: ${errorMsg}`, '', {\n                        timeOut: 8000,\n                        closeButton: true,\n                    });\n                }\n            }\n            finally {\n                isParsingXml.value = false;\n            }\n        }\n        // AI  XML \n        async function modifyXmlWithAI(modifyInstruction) {\n            if (!originalXmlInput.value) {\n                window.toastr.warning(' XML');\n                return;\n            }\n            isModifyingXml.value = true;\n            showProgress.value = true;\n            try {\n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n                const systemPrompt = ` XML  XML `;\n                const userPrompt = `#  XML\n${originalXmlInput.value}\n\n# \n${modifyInstruction}\n\n XML \nJSON \n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]`;\n                progressDialogRef.value?.setProgress(40);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        max_tokens: 2000,\n                        temperature: 0.7,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.statusText}`);\n                }\n                progressDialogRef.value?.setProgress(70);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const result = await response.json();\n                const aiResponse = result.choices[0]?.message?.content || '';\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                //  JSON\n                let jsonText = aiResponse.trim().replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n                const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                const parsedFields = JSON.parse(jsonText);\n                if (!Array.isArray(parsedFields)) {\n                    throw new Error('AI ');\n                }\n                // \n                config.value.fields = parsedFields.map((field) => ({\n                    name: field.name || '',\n                    label: field.label || field.name || '',\n                    icon: field.icon || '',\n                }));\n                // \n                originalXmlInput.value += `\\n\\n${modifyInstruction}`;\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showXmlModifyDialog.value = false;\n                    window.toastr.success(' AI ');\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingXml.value = false;\n            }\n        }\n        // AI \n        async function generateFieldsWithAI() {\n            if (!aiFieldDescription.value.trim()) {\n                toastr.warning('');\n                return;\n            }\n            //  API \n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                toastr.error(' API \" \" API ', '', {\n                    timeOut: 0,\n                    extendedTimeOut: 0,\n                    closeButton: true,\n                });\n                return;\n            }\n            // \n            originalFieldDescription.value = aiFieldDescription.value;\n            isGeneratingFields.value = true;\n            showProgress.value = true;\n            try {\n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail('AI ');\n                const systemPrompt = `\n\n1. ****ABO\n2. ****\n3. **** namelabelicon\n\n** JSON **\n\n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"fa-solid fa-xxx\" }\n]\n\n****\n- name  realm, spiritual_power, location\n- label  \n- icon  Font Awesome  fa-solid fa-star, fa-solid fa-bolt\n- **** JSON \n- **** JSON\n\n\n- fa-solid fa-user, fa-solid fa-user-ninja, fa-solid fa-user-secret\n- fa-solid fa-heart, fa-solid fa-heart-pulse, fa-solid fa-star\n- fa-solid fa-location-dot, fa-solid fa-map-marker\n- fa-solid fa-clock, fa-solid fa-calendar\n- fa-solid fa-bolt, fa-solid fa-fire, fa-solid fa-droplet\n- fa-solid fa-book, fa-solid fa-wand-magic-sparkles, fa-solid fa-scroll\n- fa-solid fa-heart, fa-solid fa-face-smile, fa-solid fa-face-sad-tear\n\n\n\"\"\n\n[\n  { \"name\": \"name\", \"label\": \"\", \"icon\": \"fa-solid fa-user-ninja\" },\n  { \"name\": \"realm\", \"label\": \"\", \"icon\": \"fa-solid fa-star\" },\n  { \"name\": \"spiritual_power\", \"label\": \"\", \"icon\": \"fa-solid fa-bolt\" },\n  { \"name\": \"cultivation_method\", \"label\": \"\", \"icon\": \"fa-solid fa-scroll\" },\n  { \"name\": \"location\", \"label\": \"\", \"icon\": \"fa-solid fa-location-dot\" },\n  { \"name\": \"status\", \"label\": \"\", \"icon\": \"fa-solid fa-heart-pulse\" }\n]`;\n                const userPrompt = `\n\n${aiFieldDescription.value.trim()}\n\n JSON `;\n                console.log('  AI ...');\n                console.log('  API:', settings.value.api_endpoint);\n                console.log(' :', settings.value.model);\n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage(' AI...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                console.log(' :', apiUrl);\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI ...');\n                //  AI API\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: systemPrompt,\n                            },\n                            {\n                                role: 'user',\n                                content: userPrompt,\n                            },\n                        ],\n                        max_tokens: 3000,\n                        temperature: 0.8,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API: ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' AI :', result);\n                if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n                    throw new Error('AI');\n                }\n                const aiResponse = result.choices[0].message.content;\n                console.log(' AI :', aiResponse);\n                // =====  =====\n                if (!aiResponse || typeof aiResponse !== 'string') {\n                    throw new Error('AI ');\n                }\n                //  JSON\n                let jsonText = aiResponse.trim();\n                //  markdown \n                jsonText = jsonText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n                //  JSON  AI \n                const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                //  JSON\n                let parsedFields;\n                try {\n                    parsedFields = JSON.parse(jsonText);\n                }\n                catch (parseError) {\n                    throw new Error(`AI  JSON \\n\\n AI \\n\\n200:\\n${aiResponse.slice(0, 200)}`);\n                }\n                if (!Array.isArray(parsedFields)) {\n                    throw new Error('AI ');\n                }\n                // \n                const validFields = parsedFields.filter((field) => {\n                    return field.name && field.label;\n                });\n                if (validFields.length === 0) {\n                    throw new Error(' AI ');\n                }\n                // \n                config.value.fields = validFields.map((field) => ({\n                    name: field.name || '',\n                    label: field.label || '',\n                    icon: field.icon || '',\n                }));\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail(` ${validFields.length} `);\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showAiFieldDialog.value = false;\n                    aiFieldDescription.value = '';\n                    toastr.success(` ${validFields.length} `);\n                }, 800);\n            }\n            catch (error) {\n                console.error(' AI :', error);\n                showProgress.value = false;\n                // \n                const errorMsg = error.message || '';\n                //  API \n                if (errorMsg.includes('API') ||\n                    errorMsg.includes('403') ||\n                    errorMsg.includes('401') ||\n                    errorMsg.includes('Unauthorized')) {\n                    toastr.error(' API \\n1. API \\n2. \\n3. ', '', {\n                        timeOut: 0,\n                        extendedTimeOut: 0,\n                        closeButton: true,\n                    });\n                }\n                else {\n                    toastr.error(`: ${errorMsg}`, '', {\n                        timeOut: 8000,\n                        closeButton: true,\n                    });\n                }\n            }\n            finally {\n                isGeneratingFields.value = false;\n            }\n        }\n        // \n        function showIconPicker(index) {\n            showIconPickerFor.value = index;\n        }\n        // \n        function selectIcon(iconClass) {\n            if (showIconPickerFor.value !== null) {\n                config.value.fields[showIconPickerFor.value].icon = iconClass;\n                showIconPickerFor.value = null;\n            }\n        }\n        // AI \n        async function modifyFieldWithAI(modifyInstruction) {\n            if (!originalFieldDescription.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifyingField.value = true;\n            showProgress.value = true;\n            try {\n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n                const systemPrompt = ``;\n                const userPrompt = `# \n${originalFieldDescription.value}\n\n# \n${modifyInstruction}\n\n\nJSON \n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]`;\n                progressDialogRef.value?.setProgress(40);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        max_tokens: 2000,\n                        temperature: 0.7,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.statusText}`);\n                }\n                progressDialogRef.value?.setProgress(70);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const result = await response.json();\n                const aiResponse = result.choices[0]?.message?.content || '';\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                //  JSON\n                let jsonText = aiResponse.trim().replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n                const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                const parsedFields = JSON.parse(jsonText);\n                if (!Array.isArray(parsedFields)) {\n                    throw new Error('AI ');\n                }\n                // \n                config.value.fields = parsedFields.map((field) => ({\n                    name: field.name || '',\n                    label: field.label || field.name || '',\n                    icon: field.icon || '',\n                }));\n                // \n                originalFieldDescription.value += `\\n\\n${modifyInstruction}`;\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showFieldModifyDialog.value = false;\n                    window.toastr.success(' AI ');\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingField.value = false;\n            }\n        }\n        // \n        function generateFromFields() {\n            const fields = config.value.fields;\n            //  findRegex\n            const totalFields = fields.length;\n            if (totalFields === 0) {\n                config.value.findRegex = '<-CHARACTER_STATUS->';\n                console.log(' ');\n                return;\n            }\n            if (totalFields <= 4) {\n                // 4\n                config.value.findRegex = `<-CHARACTER_STATUS->[\\\\r\\\\n]*\\\\|${fields.map(() => '([^|]+)').join('\\\\|')}\\\\|[\\\\r\\\\n]*`;\n                console.log('  findRegex ():', config.value.findRegex);\n                console.log(' :', totalFields);\n            }\n            else {\n                // 4\n                // 4\n                const perLine = totalFields <= 8 ? Math.ceil(totalFields / 2) : 4;\n                // \n                const firstHalf = Math.min(Math.ceil(totalFields / 2), totalFields <= 12 ? 4 : Math.ceil(totalFields / 3));\n                const lines = [];\n                //  + \n                lines.push('<-ENVIRONMENT_DATA->[\\\\r\\\\n]*');\n                for (let i = 0; i < firstHalf; i += perLine) {\n                    const count = Math.min(perLine, firstHalf - i);\n                    lines.push('\\\\|' + fields.slice(i, i + count).map(() => '([^|]+)').join('\\\\|') + '\\\\|[\\\\r\\\\n]*');\n                }\n                //  + perLine\n                lines.push('<-CHARACTER_STATUS->[\\\\r\\\\n]*');\n                for (let i = firstHalf; i < totalFields; i += perLine) {\n                    const count = Math.min(perLine, totalFields - i);\n                    lines.push('\\\\|' + fields.slice(i, i + count).map(() => '([^|]+)').join('\\\\|') + '\\\\|[\\\\r\\\\n]*');\n                }\n                config.value.findRegex = lines.join('');\n                console.log('  findRegex ():', config.value.findRegex);\n                console.log(' :', totalFields);\n                console.log(' :', `: ${firstHalf}, : ${totalFields - firstHalf}, : ${perLine}`);\n            }\n            //  HTML\n            const fieldsHtml = fields\n                .map((f, i) => {\n                const iconPart = f.icon ? `<i class=\"${f.icon}\"></i> ` : '';\n                return `        <div class=\"status-field\">\n          <div class=\"field-label\">${iconPart}${f.label || '' + (i + 1)}</div>\n          <div class=\"field-value\">$${i + 1}</div>\n        </div>`;\n            })\n                .join('\\n');\n            const htmlContent = `<details>\n<summary> ${config.value.name} </summary>\n<div class=\"status-card\">\n    <div class=\"status-header\">\n        <span></span>\n        <span>${config.value.name}</span>\n    </div>\n    <div class=\"status-content\">\n        <div class=\"status-grid\">\n${fieldsHtml}\n        </div>\n    </div>\n</div>\n</details>`;\n            //  CSS\n            const cssContent = `.status-card {\n    font-family: 'Microsoft YaHei', sans-serif;\n    background: linear-gradient(145deg, #1e293b, #334155);\n    border-radius: 14px;\n    margin: 16px 0;\n    box-shadow: 0 8px 25px rgba(15, 23, 42, 0.4);\n    overflow: hidden;\n    border: 1px solid rgba(148, 163, 184, 0.2);\n    max-width: 600px;\n}\n\n.status-header {\n    background: linear-gradient(135deg, #0f172a, #1e293b);\n    color: #e2e8f0;\n    padding: 12px 20px;\n    font-size: 15px;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    border-bottom: 1px solid rgba(148, 163, 184, 0.15);\n}\n\n.status-content {\n    padding: 20px;\n    background: rgba(30, 41, 59, 0.5);\n}\n\n.status-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 16px;\n}\n\n.status-field {\n    background: rgba(30, 41, 59, 0.8);\n    padding: 16px;\n    border-radius: 10px;\n    border-left: 3px solid #6366f1;\n}\n\n.field-label {\n    font-size: 11px;\n    color: #94a3b8;\n    margin-bottom: 8px;\n    font-weight: 600;\n    text-transform: uppercase;\n}\n\n.field-value {\n    font-size: 14px;\n    color: #e2e8f0;\n    line-height: 1.5;\n    font-weight: 600;\n}`;\n            //  JS - \n            const jsContent = `// \n(function() {\n  // \n  setTimeout(function() {\n    console.log('${config.value.name} ');\n\n    // \n    if (typeof gsap !== 'undefined') {\n      gsap.from('.status-field', {\n        opacity: 0,\n        y: 20,\n        duration: 0.5,\n        stagger: 0.1,\n        ease: 'power2.out'\n      });\n\n      // \n      $('.status-field').hover(\n        function() {\n          gsap.to($(this), { scale: 1.05, duration: 0.2 });\n        },\n        function() {\n          gsap.to($(this), { scale: 1, duration: 0.2 });\n        }\n      );\n    }\n  }, 100);\n})();`;\n            files.value[0].content = htmlContent;\n            files.value[1].content = cssContent;\n            files.value[2].content = jsContent;\n            currentFile.value = files.value[0];\n            window.toastr.success(' ');\n        }\n        //  AI \n        function showAIDialog() {\n            showAI.value = true;\n            aiPrompt.value = '';\n        }\n        // \n        function addFieldInDialog() {\n            config.value.fields.push({\n                name: `${config.value.fields.length + 1}`,\n                label: `${config.value.fields.length + 1}`,\n                icon: '',\n            });\n        }\n        // \n        function removeFieldInDialog(index) {\n            if (config.value.fields.length <= 1) {\n                window.toastr.warning('');\n                return;\n            }\n            config.value.fields.splice(index, 1);\n        }\n        // \n        function loadTemplate(templateKey) {\n            const template = templates[templateKey];\n            if (template) {\n                config.value = JSON.parse(JSON.stringify(template)); // \n                window.toastr.success(` \"${template.name}\"`);\n            }\n        }\n        // AI \n        async function generateWithAI() {\n            if (!aiPrompt.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            // \n            originalAiPrompt.value = aiPrompt.value;\n            // \n            showProgress.value = true;\n            try {\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.error(' API  API Key');\n                    showProgress.value = false;\n                    return;\n                }\n                // 1: \n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${config.value.fields.length} `);\n                progressDialogRef.value?.addDetail(`: ${settings.value.model}`);\n                // \n                const currentFiles = files.value.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n                // \n                const systemPrompt = ` SillyTavern  HTML/CSS/JS \n\n Regex  replaceString  AI \n**{{char}}**{{user}}\n\n\n- Font Awesome \n- jQuery ($) - \n- toastr- \n- gsap- \n- lodash (_) - \n\n\n-  $1$2$3 \n- $1 $2 \n- \n- ****\n\n\nFILE_START: index.html\n<details>\n<summary>  </summary>\n<div class=\"status-card\">\n  <!--  $1, $2, $3  -->\n  <div class=\"field-value\">$1</div>\n</div>\n</details>\nFILE_END\n\nFILE_START: style.css\n.status-card {\n  /*  */\n}\nFILE_END\n\nFILE_START: script.js\n(function() {\n  // \n  //  $  document\n})();\nFILE_END\n\n\n1. index.html  <details>  </details>  <!DOCTYPE>  <html> \n2. FILE_START  FILE_END ****\\\\\\`\\\\\\`\\\\\\`html\"\"\"html \n3. HTML $1, $2, $3...\n4. CSS \n5. JS  (function() { ... })() $(function() { ... })\n6.  DOM \n7. ****`;\n                const userPrompt = `# \n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\n')}\n\n \n1. HTML  ${config.value.fields.length} \n2. $1 = ${config.value.fields[0]?.label || '1'}, $2 = ${config.value.fields[1]?.label || '2'}${config.value.fields[2] ? `, $3 = ${config.value.fields[2].label}` : ''}${config.value.fields[3] ? `, $4 = ${config.value.fields[3].label}` : ''}${config.value.fields[4] ? `, $5 = ${config.value.fields[4].label}` : ''}\n3. \"\"\"\"\"\"\n4.  $${config.value.fields.length + 1} \n\n# \n**{{char}}****{{user}}**\nMVU Beta{{char}}stat_data\n\n# \n${config.value.findRegex}\n\n# \n${aiPrompt.value}\n\n# \n${currentFiles}\n\n\n1. \n2.  ${config.value.fields.length} $1, $2, $3... HTML \n3. \n4.  index.htmlstyle.cssscript.js \n5. `;\n                // 2: \n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`API : ${settings.value.api_endpoint}`);\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 65500,\n                    }),\n                });\n                // 3: \n                progressDialogRef.value?.setProgress(40);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(' 10-30 ');\n                if (!response.ok) {\n                    throw new Error(`API : ${response.statusText}`);\n                }\n                const data = await response.json();\n                const resultText = data.choices[0]?.message?.content || '';\n                // 4: \n                progressDialogRef.value?.setProgress(70);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${resultText.length} `);\n                //  AI \n                const FILE_START_REGEX = /FILE_START:\\s*([^\\n]+)\\n([\\s\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\n                const matches = [...resultText.matchAll(FILE_START_REGEX)];\n                if (matches.length === 0) {\n                    throw new Error('AI ');\n                }\n                for (const match of matches) {\n                    const rawPath = match[1].trim();\n                    const normalizedPath = rawPath.replace(/^\\.\\//, '');\n                    let content = sanitizeFileContent(normalizedPath, match[2]);\n                    //  FILE_END\n                    if (content.endsWith('FILE_END')) {\n                        content = content.slice(0, -8).trim();\n                    }\n                    const file = files.value.find(f => f.path === normalizedPath);\n                    if (file) {\n                        file.content = content;\n                    }\n                    else if (normalizedPath === 'index.html' || normalizedPath === 'style.css' || normalizedPath === 'script.js') {\n                        // \n                        files.value.push({ path: normalizedPath, content: content });\n                    }\n                }\n                //  './'\n                files.value.forEach(file => {\n                    file.path = file.path.replace(/^\\.\\//, '');\n                });\n                //  './index.html' \n                const uniqueFiles = new Map();\n                files.value.forEach(file => {\n                    uniqueFiles.set(file.path, file);\n                });\n                files.value = Array.from(uniqueFiles.values());\n                // 5: \n                progressDialogRef.value?.setProgress(90);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(` ${matches.length} `);\n                const htmlFile = files.value.find(f => f.path === 'index.html') || files.value[0];\n                currentFile.value = htmlFile;\n                updatePreview();\n                // \n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' AI ');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showAI.value = false;\n                    window.toastr.success(' AI ');\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                window.toastr.error('AI : ' + error.message);\n            }\n        }\n        // AI \n        async function modifyWithAI(modifyInstruction) {\n            if (!originalAiPrompt.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifyingAi.value = true;\n            showProgress.value = true;\n            try {\n                // 1: \n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n                const currentFiles = files.value.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n                const systemPrompt = ` SillyTavern  HTML/CSS/JS \n\n\n1. ** index.htmlstyle.cssscript.js **\n2. \n3. \n4.  FILE_START  FILE_END \n\n****`;\n                const userPrompt = `# \n${originalAiPrompt.value}\n\n# \n${modifyInstruction}\n\n# \n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\n')}\n\n# \n${currentFiles}\n\n ****\n\nFILE_START: index.html\n<details>\n  <!--  HTML $1, $2, $3  -->\n</details>\nFILE_END\n\nFILE_START: style.css\n/*  CSS  */\nFILE_END\n\nFILE_START: script.js\n(function() {\n  //  JS \n})();\nFILE_END\n\n****`;\n                // 2: \n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${files.value.length} `);\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(' 10-30 ');\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: 0.7,\n                        max_tokens: 65500,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.statusText}`);\n                }\n                // 3: \n                progressDialogRef.value?.setProgress(60);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const data = await response.json();\n                const resultText = data.choices[0]?.message?.content || '';\n                // 4: \n                progressDialogRef.value?.setProgress(80);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${resultText.length} `);\n                // \n                const FILE_START_REGEX = /FILE_START:\\s*([^\\n]+)\\n([\\s\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\n                const matches = [...resultText.matchAll(FILE_START_REGEX)];\n                if (matches.length === 0) {\n                    throw new Error('AI ');\n                }\n                progressDialogRef.value?.addDetail(` ${matches.length} `);\n                // \n                const generatedFiles = matches.map(m => m[1].trim().replace(/^\\.\\//, ''));\n                const requiredFiles = ['index.html', 'style.css', 'script.js'];\n                const missingFiles = requiredFiles.filter(f => !generatedFiles.includes(f));\n                if (missingFiles.length > 0) {\n                    progressDialogRef.value?.addDetail(` : AI : ${missingFiles.join(', ')}`);\n                    window.toastr.warning(`AI : ${missingFiles.join(', ')}`, '', {\n                        timeOut: 5000,\n                    });\n                }\n                if (matches.length > 0) {\n                    for (const match of matches) {\n                        const normalizedPath = match[1].trim().replace(/^\\.\\//, '');\n                        let content = sanitizeFileContent(normalizedPath, match[2]);\n                        if (content.endsWith('FILE_END')) {\n                            content = content.slice(0, -8).trim();\n                        }\n                        const file = files.value.find(f => f.path === normalizedPath);\n                        if (file) {\n                            file.content = content;\n                            progressDialogRef.value?.addDetail(` : ${normalizedPath}`);\n                        }\n                    }\n                }\n                // 5: \n                progressDialogRef.value?.setProgress(95);\n                progressDialogRef.value?.setMessage('...');\n                // \n                originalAiPrompt.value += `\\n\\n${modifyInstruction}`;\n                updatePreview();\n                // \n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' AI ');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showAiModifyDialog.value = false;\n                    window.toastr.success(` AI  ${matches.length} `);\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingAi.value = false;\n            }\n        }\n        // \n        async function copyWorldbook() {\n            await copyToClipboard(worldbookContent.value, ' ');\n        }\n        function sanitizeFileContent(filePath, raw) {\n            let content = raw.trim();\n            //  markdown ```html ... ```\n            const fenceMatch = content.match(/^```[a-zA-Z0-9]*\\s*([\\s\\S]*?)\\s*```$/);\n            if (fenceMatch) {\n                content = fenceMatch[1].trim();\n            }\n            //  Python docstring \"\"\"html ... \"\"\"  '''html ... '''\n            const docstringMatch = content.match(/^(\"\"\"|''')[a-zA-Z0-9]*\\s*([\\s\\S]*?)\\s*\\1$/);\n            if (docstringMatch) {\n                content = docstringMatch[2].trim();\n            }\n            //  \"\"\"html  ```html \n            content = content.replace(/^(```|\"\"\"|''')[a-zA-Z0-9]*\\s*\\n?/, '');\n            content = content.replace(/\\n?\\s*(```|\"\"\"|''')$/, '');\n            if (filePath.endsWith('.html')) {\n                content = content.replace(/<!DOCTYPE html>/i, match => match.toUpperCase());\n            }\n            return content;\n        }\n        // \n        function exportRegex() {\n            const htmlFile = files.value.find(f => f.path === 'index.html');\n            const cssFile = files.value.find(f => f.path === 'style.css');\n            const jsFile = files.value.find(f => f.path === 'script.js');\n            if (!htmlFile || htmlFile.content.trim() === '') {\n                window.toastr.error('');\n                return;\n            }\n            const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                const r = (Math.random() * 16) | 0;\n                const v = c === 'x' ? r : (r & 0x3) | 0x8;\n                return v.toString(16);\n            });\n            // <details> \n            const scriptTag = 'script';\n            const styleTag = 'style';\n            //  <details> \n            const detailsHtml = htmlFile.content.trim();\n            const replaceString = `${detailsHtml}\n<${styleTag}>\n${cssFile?.content || ''}\n</${styleTag}>\n\n<${scriptTag}>\n${jsFile?.content || ''}\n</${scriptTag}>`;\n            //  findRegex\n            //  findRegex \n            // \n            let regexPattern = config.value.findRegex;\n            //  findRegex \n            const existingCaptureGroups = (regexPattern.match(/\\([^)]+\\)/g) || []).length;\n            const fieldCount = config.value.fields.length;\n            if (existingCaptureGroups === 0) {\n                // \n                regexPattern = `${regexPattern.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}[\\\\r\\\\n]*${Array(fieldCount)\n                    .fill('\\\\|([^|]+)')\n                    .join('')}\\\\|[\\\\r\\\\n]*`;\n            }\n            // \n            // \n            const cleanReplaceString = replaceString.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n            const regexJson = {\n                id: uuid,\n                scriptName: config.value.name,\n                findRegex: regexPattern,\n                replaceString: cleanReplaceString,\n                trimStrings: [],\n                placement: [2],\n                disabled: false,\n                markdownOnly: true,\n                promptOnly: false,\n                runOnEdit: true,\n                substituteRegex: 0,\n                minDepth: null,\n                maxDepth: null,\n            };\n            //  JSON\n            const blob = new Blob([JSON.stringify(regexJson, null, 2)], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `regex-${config.value.name}.json`;\n            a.click();\n            URL.revokeObjectURL(url);\n            window.toastr.success('  JSON ');\n        }\n        // ====================  ====================\n        // \n        function loadSavedConfig() {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                const savedConfig = scriptVars.statusbar_generator_config;\n                if (savedConfig) {\n                    config.value = { ...config.value, ...savedConfig };\n                    console.log(' ');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        }\n        // \n        function saveConfig() {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables({ statusbar_generator_config: config.value }, { type: 'script', script_id: scriptId });\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        }\n        // \n        onMounted(() => {\n            loadSavedConfig();\n        });\n        // \n        watch(() => config.value, () => {\n            saveConfig();\n        }, { deep: true });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[32] || (_cache[32] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px !important\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-chart-bar\",\n                            style: { \"color\": \"#4a9eff\", \"font-size\": \"18px\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: _cache[0] || (_cache[0] = ($event) => (loadTemplate('abo'))),\n                            onMouseenter: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.transform = 'translateY(-2px)')),\n                            onMouseleave: _cache[2] || (_cache[2] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [...(_cache[29] || (_cache[29] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-magic\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  ABO  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: showAIDialog,\n                            onMouseenter: _cache[3] || (_cache[3] = (e) => (e.currentTarget.style.transform = 'translateY(-2px)')),\n                            onMouseleave: _cache[4] || (_cache[4] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [...(_cache[30] || (_cache[30] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\" AI  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: exportRegex,\n                            onMouseenter: _cache[5] || (_cache[5] = (e) => (e.currentTarget.style.transform = 'translateY(-2px)')),\n                            onMouseleave: _cache[6] || (_cache[6] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [...(_cache[31] || (_cache[31] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-download\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  JSON \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _cache[38] || (_cache[38] = _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 15px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-cog\",\n                                style: { \"color\": \"#4a9eff\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _cache[33] || (_cache[33] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#c0c0c0\", \"font-size\": \"12px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((config.value.findRegex) = $event)),\n                                type: \"text\",\n                                placeholder: \"<-CHARACTER_STATUS->\",\n                                style: { \"width\": \"100%\", \"padding\": \"8px 12px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"12px\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, config.value.findRegex]\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(config.value.fields, (field, index) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: index,\n                                    style: { \"padding\": \"10px\", \"background\": \"#1e1e1e\", \"border-radius\": \"6px\", \"border\": \"1px solid #3a3a3a\" }\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _createElementVNode(\"span\", _hoisted_9, \" \" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"button\", {\n                                            disabled: config.value.fields.length <= 1,\n                                            style: _normalizeStyle({\n                                                padding: '4px 8px',\n                                                background: '#ef4444',\n                                                border: 'none',\n                                                borderRadius: '4px',\n                                                color: 'white',\n                                                fontSize: '10px',\n                                                cursor: 'pointer',\n                                                opacity: config.value.fields.length <= 1 ? 0.4 : 1,\n                                            }),\n                                            onClick: ($event) => (removeField(index))\n                                        }, \"  \", 12 /* STYLE, PROPS */, _hoisted_10)\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": ($event) => ((field.name) = $event),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"width\": \"100%\", \"padding\": \"6px 10px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"margin-bottom\": \"6px\" }\n                                    }, null, 8 /* PROPS */, _hoisted_11), [\n                                        [_vModelText, field.name]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": ($event) => ((field.label) = $event),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"width\": \"100%\", \"padding\": \"6px 10px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"margin-bottom\": \"6px\" }\n                                    }, null, 8 /* PROPS */, _hoisted_12), [\n                                        [_vModelText, field.label]\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_13, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": ($event) => ((field.icon) = $event),\n                                            type: \"text\",\n                                            placeholder: \"fa-solid fa-user\",\n                                            style: { \"flex\": \"1\", \"padding\": \"6px 10px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"font-family\": \"monospace\" }\n                                        }, null, 8 /* PROPS */, _hoisted_14), [\n                                            [_vModelText, field.icon]\n                                        ]),\n                                        _createElementVNode(\"button\", {\n                                            style: { \"padding\": \"6px 10px\", \"background\": \"#3a3a3a\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"4px\", \"color\": \"#fff\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"min-width\": \"36px\" },\n                                            title: \"\",\n                                            onClick: ($event) => (showIconPicker(index))\n                                        }, [\n                                            (field.icon)\n                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                    key: 0,\n                                                    class: _normalizeClass(field.icon)\n                                                }, null, 2 /* CLASS */))\n                                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_16))\n                                        ], 8 /* PROPS */, _hoisted_15)\n                                    ])\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createElementVNode(\"button\", {\n                            style: { \"width\": \"100%\", \"padding\": \"8px\", \"background\": \"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                            onClick: addField\n                        }, [...(_cache[34] || (_cache[34] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-plus\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            style: { \"width\": \"100%\", \"padding\": \"8px\", \"margin-top\": \"10px\", \"background\": \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                            onClick: showXmlParseDialog\n                        }, [...(_cache[35] || (_cache[35] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-code\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\" AI  XML  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            style: { \"width\": \"100%\", \"padding\": \"8px\", \"margin-top\": \"10px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                            onClick: showAiFieldGeneratorDialog\n                        }, [...(_cache[36] || (_cache[36] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\" AI  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            style: { \"width\": \"100%\", \"padding\": \"8px\", \"margin-top\": \"10px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                            onClick: generateFromFields\n                        }, [...(_cache[37] || (_cache[37] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-sparkles\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_17, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(files.value, (file) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: file.path,\n                                    style: _normalizeStyle({\n                                        padding: '6px 14px',\n                                        background: currentFile.value?.path === file.path ? '#4a9eff' : '#1e1e1e',\n                                        color: currentFile.value?.path === file.path ? '#fff' : '#c0c0c0',\n                                        borderRadius: '6px',\n                                        fontSize: '12px',\n                                        fontWeight: '600',\n                                        cursor: 'pointer',\n                                        transition: 'all 0.2s ease',\n                                    }),\n                                    onClick: ($event) => (currentFile.value = file)\n                                }, _toDisplayString(file.path), 13 /* TEXT, STYLE, PROPS */, _hoisted_19));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (currentFile.value)\n                            ? _withDirectives((_openBlock(), _createElementBlock(\"textarea\", {\n                                key: 0,\n                                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((currentFile.value.content) = $event)),\n                                style: { \"flex\": \"1\", \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"line-height\": \"1.6\", \"resize\": \"none\", \"min-height\": \"400px\" },\n                                onInput: updatePreview\n                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)), [\n                                [_vModelText, currentFile.value.content]\n                            ])\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_20, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _createElementVNode(\"div\", { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"12px\" } }, [\n                                _cache[40] || (_cache[40] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-book\",\n                                        style: { \"color\": \"#4a9eff\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"6px 12px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: copyWorldbook\n                                }, [...(_cache[39] || (_cache[39] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-copy\",\n                                            style: { \"margin-right\": \"4px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"pre\", _hoisted_23, _toDisplayString(worldbookContent.value), 1 /* TEXT */)\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_24, [\n                            _cache[41] || (_cache[41] = _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-eye\",\n                                    style: { \"color\": \"#4a9eff\" }\n                                }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", {\n                                style: { \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"padding\": \"20px\", \"min-height\": \"400px\", \"border\": \"1px solid #3a3a3a\", \"overflow\": \"auto\" },\n                                innerHTML: previewHtml.value\n                            }, null, 8 /* PROPS */, _hoisted_25)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (showIconPickerFor.value !== null)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _cache[13] || (_cache[13] = _withModifiers(($event) => (showIconPickerFor.value = null), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_26, [\n                            _cache[42] || (_cache[42] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 16px 0\", \"color\": \"#fff\", \"font-size\": \"15px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                (_openBlock(), _createElementBlock(_Fragment, null, _renderList(iconList, (iconClass, idx) => {\n                                    return _createElementVNode(\"div\", {\n                                        key: idx,\n                                        style: {\n                                            padding: '14px',\n                                            background: '#1e1e1e',\n                                            borderRadius: '8px',\n                                            cursor: 'pointer',\n                                            textAlign: 'center',\n                                            border: '1px solid #3a3a3a',\n                                            transition: 'all 0.2s ease',\n                                            display: 'flex',\n                                            alignItems: 'center',\n                                            justifyContent: 'center',\n                                        },\n                                        title: iconClass,\n                                        onClick: ($event) => (selectIcon(iconClass)),\n                                        onMouseenter: _cache[9] || (_cache[9] =\n                                            (e) => {\n                                                e.currentTarget.style.background = '#3a3a3a';\n                                                e.currentTarget.style.borderColor = '#4a9eff';\n                                                e.currentTarget.style.transform = 'scale(1.1)';\n                                                e.currentTarget.style.boxShadow = '0 4px 12px rgba(74, 158, 255, 0.3)';\n                                            }),\n                                        onMouseleave: _cache[10] || (_cache[10] =\n                                            (e) => {\n                                                e.currentTarget.style.background = '#1e1e1e';\n                                                e.currentTarget.style.borderColor = '#3a3a3a';\n                                                e.currentTarget.style.transform = 'scale(1)';\n                                                e.currentTarget.style.boxShadow = 'none';\n                                            })\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(iconClass),\n                                            style: { \"font-size\": \"20px\", \"color\": \"#4a9eff\" }\n                                        }, null, 2 /* CLASS */)\n                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_28);\n                                }), 64 /* STABLE_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_29, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#fff\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[11] || (_cache[11] = ($event) => (showIconPickerFor.value = null))\n                                }, \"  \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#ef4444\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[12] || (_cache[12] = ($event) => {\n                                        config.value.fields[showIconPickerFor.value].icon = '';\n                                        showIconPickerFor.value = null;\n                                    })\n                                }, \"  \")\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" AI  \"),\n                (showAI.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _cache[17] || (_cache[17] = _withModifiers(($event) => (showAI.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_30, [\n                            _cache[48] || (_cache[48] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 16px 0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\" } }, \"AI \", -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_31, [\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _createElementVNode(\"div\", _hoisted_33, [\n                                        _cache[43] || (_cache[43] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-cog\",\n                                            style: { \"color\": \"#60a5fa\", \"font-size\": \"16px\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_34, \"  \" + _toDisplayString(config.value.fields.length) + \"  \", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"4px 10px\", \"background\": \"rgba(16, 185, 129, 0.2)\", \"border\": \"1px solid rgba(16, 185, 129, 0.4)\", \"border-radius\": \"4px\", \"color\": \"#10b981\", \"font-size\": \"11px\", \"cursor\": \"pointer\" },\n                                        onClick: addFieldInDialog\n                                    }, [...(_cache[44] || (_cache[44] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ]),\n                                (config.value.fields.length > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(config.value.fields, (field, i) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: i,\n                                                style: { \"background\": \"rgba(15, 23, 42, 0.6)\", \"border\": \"1px solid rgba(148, 163, 184, 0.15)\", \"border-radius\": \"6px\", \"padding\": \"8px 10px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" }\n                                            }, [\n                                                _createElementVNode(\"span\", _hoisted_36, \"\" + _toDisplayString(i + 1) + \":\", 1 /* TEXT */),\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((field.label) = $event),\n                                                    type: \"text\",\n                                                    placeholder: \"\",\n                                                    style: { \"flex\": \"1\", \"padding\": \"4px 8px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\" }\n                                                }, null, 8 /* PROPS */, _hoisted_37), [\n                                                    [_vModelText, field.label]\n                                                ]),\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((field.name) = $event),\n                                                    type: \"text\",\n                                                    placeholder: \"\",\n                                                    style: { \"flex\": \"1\", \"padding\": \"4px 8px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\" }\n                                                }, null, 8 /* PROPS */, _hoisted_38), [\n                                                    [_vModelText, field.name]\n                                                ]),\n                                                (field.icon)\n                                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: 0,\n                                                        style: { \"padding\": \"4px 8px\", \"background\": \"rgba(139, 92, 246, 0.2)\", \"border\": \"1px solid rgba(139, 92, 246, 0.3)\", \"border-radius\": \"4px\", \"color\": \"#a78bfa\", \"font-size\": \"11px\", \"cursor\": \"pointer\", \"min-width\": \"30px\" },\n                                                        title: \"\",\n                                                        onClick: ($event) => (field.icon = '')\n                                                    }, [\n                                                        _createElementVNode(\"i\", {\n                                                            class: _normalizeClass(field.icon)\n                                                        }, null, 2 /* CLASS */)\n                                                    ], 8 /* PROPS */, _hoisted_39))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                _createElementVNode(\"button\", {\n                                                    disabled: config.value.fields.length <= 1,\n                                                    style: _normalizeStyle([{ \"padding\": \"4px 8px\", \"background\": \"rgba(239, 68, 68, 0.2)\", \"border\": \"1px solid rgba(239, 68, 68, 0.3)\", \"border-radius\": \"4px\", \"color\": \"#ef4444\", \"font-size\": \"11px\", \"cursor\": \"pointer\" }, {\n                                                            opacity: config.value.fields.length <= 1 ? 0.4 : 1,\n                                                            cursor: config.value.fields.length <= 1 ? 'not-allowed' : 'pointer',\n                                                        }]),\n                                                    title: \"\",\n                                                    onClick: ($event) => (removeFieldInDialog(i))\n                                                }, [...(_cache[45] || (_cache[45] = [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */)\n                                                    ]))], 12 /* STYLE, PROPS */, _hoisted_40)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_41, \" \\\"\\\"\"))\n                            ]),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((aiPrompt).value = $event)),\n                                placeholder: \"\\n \\n \\n \\n \\n\\n \\n AI \\n \",\n                                style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"min-height\": \"120px\", \"margin-bottom\": \"16px\", \"resize\": \"vertical\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, aiPrompt.value]\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_42, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#fff\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[15] || (_cache[15] = ($event) => (showAI.value = false))\n                                }, \"  \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: generateWithAI\n                                }, [...(_cache[46] || (_cache[46] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-wand-magic-sparkles\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            (originalAiPrompt.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_43, [\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"10px 20px\", \"background\": \"#ffc107\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#000\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                        disabled: isModifyingAi.value,\n                                        onClick: _cache[16] || (_cache[16] = ($event) => (showAiModifyDialog.value = true))\n                                    }, [\n                                        _cache[47] || (_cache[47] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-edit\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(isModifyingAi.value ? '...' : 'AI '), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_44)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" AI  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showAiModifyDialog.value,\n                    \"is-modifying\": isModifyingAi.value,\n                    title: \"AI \",\n                    description: \"AI \",\n                    examples: [\n                        '',\n                        '',\n                        '',\n                        ''\n                    ],\n                    onClose: _cache[18] || (_cache[18] = ($event) => (showAiModifyDialog.value = false)),\n                    onConfirm: modifyWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\" XML  \"),\n                (showXmlDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _cache[22] || (_cache[22] = _withModifiers(($event) => (showXmlDialog.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_45, [\n                            _cache[52] || (_cache[52] = _createStaticVNode(\"<h3 style=\\\"margin:0 0 16px 0;color:#f59e0b;font-size:18px;font-weight:600;\\\" data-v-bbbf3552><i class=\\\"fa-solid fa-robot\\\" style=\\\"margin-right:8px;\\\" data-v-bbbf3552></i> AI  XML  </h3><div style=\\\"background:rgba(251, 191, 36, 0.1);border:1px solid rgba(251, 191, 36, 0.3);border-radius:6px;padding:12px;margin-bottom:16px;\\\" data-v-bbbf3552><p style=\\\"margin:0;color:#fbbf24;font-size:12px;line-height:1.6;\\\" data-v-bbbf3552><i class=\\\"fa-solid fa-circle-info\\\" style=\\\"margin-right:6px;\\\" data-v-bbbf3552></i><strong data-v-bbbf3552></strong> AI <i class=\\\"fa-solid fa-cog\\\" data-v-bbbf3552></i>  API  </p></div>\", 2)),\n                            _createElementVNode(\"div\", _hoisted_46, [\n                                _cache[49] || (_cache[49] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } }, \"  XML  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => ((xmlInput).value = $event)),\n                                    placeholder: \"\\n<state_bar>\\n<i></i>\\n<></>\\n<></>\\n</state_bar>\",\n                                    style: { \"width\": \"100%\", \"min-height\": \"200px\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #404040\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"13px\", \"resize\": \"vertical\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, xmlInput.value]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_47, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"#404040\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[20] || (_cache[20] = ($event) => (showXmlDialog.value = false))\n                                }, \"  \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"margin-right\": \"10px\" },\n                                    disabled: !xmlInput.value.trim() || isParsingXml.value,\n                                    onClick: parseXmlWithAI\n                                }, [\n                                    _cache[50] || (_cache[50] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-robot\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isParsingXml.value ? 'AI ...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_48),\n                                (originalXmlInput.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        style: { \"padding\": \"10px 20px\", \"background\": \"#ffc107\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#000\", \"font-size\": \"13px\", \"cursor\": \"pointer\" },\n                                        disabled: isModifyingXml.value,\n                                        onClick: _cache[21] || (_cache[21] = ($event) => (showXmlModifyDialog.value = true))\n                                    }, [\n                                        _cache[51] || (_cache[51] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-edit\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(isModifyingXml.value ? '...' : 'AI '), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_49))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" XML  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showXmlModifyDialog.value,\n                    \"is-modifying\": isModifyingXml.value,\n                    title: \"AI  XML \",\n                    description: \"AI \",\n                    examples: [\n                        '',\n                        '',\n                        '',\n                        '3'\n                    ],\n                    onClose: _cache[23] || (_cache[23] = ($event) => (showXmlModifyDialog.value = false)),\n                    onConfirm: modifyXmlWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\" AI  \"),\n                (showAiFieldDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 3,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _cache[27] || (_cache[27] = _withModifiers(($event) => (showAiFieldDialog.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_50, [\n                            _cache[56] || (_cache[56] = _createStaticVNode(\"<h3 style=\\\"margin:0 0 16px 0;color:#10b981;font-size:18px;font-weight:600;\\\" data-v-bbbf3552><i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right:8px;\\\" data-v-bbbf3552></i> AI  </h3><div style=\\\"background:rgba(16, 185, 129, 0.1);border:1px solid rgba(16, 185, 129, 0.3);border-radius:6px;padding:12px;margin-bottom:16px;\\\" data-v-bbbf3552><p style=\\\"margin:0;color:#10b981;font-size:12px;line-height:1.6;\\\" data-v-bbbf3552><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right:6px;\\\" data-v-bbbf3552></i><strong data-v-bbbf3552></strong>AI  </p></div>\", 2)),\n                            _createElementVNode(\"div\", _hoisted_51, [\n                                _cache[53] || (_cache[53] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event) => ((aiFieldDescription).value = $event)),\n                                    placeholder: \"\\n\\n- \\n- \\n- \\n- \\n- \\n- \\n- \",\n                                    style: { \"width\": \"100%\", \"min-height\": \"180px\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #404040\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"line-height\": \"1.6\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, aiFieldDescription.value]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_52, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"#404040\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[25] || (_cache[25] = ($event) => (showAiFieldDialog.value = false))\n                                }, \"  \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"margin-right\": \"10px\" },\n                                    disabled: !aiFieldDescription.value.trim() || isGeneratingFields.value,\n                                    onClick: generateFieldsWithAI\n                                }, [\n                                    _cache[54] || (_cache[54] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-wand-magic-sparkles\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGeneratingFields.value ? 'AI ...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_53),\n                                (originalFieldDescription.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        style: { \"padding\": \"10px 20px\", \"background\": \"#ffc107\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#000\", \"font-size\": \"13px\", \"cursor\": \"pointer\" },\n                                        disabled: isModifyingField.value,\n                                        onClick: _cache[26] || (_cache[26] = ($event) => (showFieldModifyDialog.value = true))\n                                    }, [\n                                        _cache[55] || (_cache[55] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-edit\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(isModifyingField.value ? '...' : 'AI '), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_54))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showFieldModifyDialog.value,\n                    \"is-modifying\": isModifyingField.value,\n                    title: \"AI \",\n                    description: \"AI \",\n                    examples: [\n                        '',\n                        '3',\n                        '',\n                        '2'\n                    ],\n                    onClose: _cache[28] || (_cache[28] = ($event) => (showFieldModifyDialog.value = false)),\n                    onConfirm: modifyFieldWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(ProgressDialog, {\n                    ref_key: \"progressDialogRef\",\n                    ref: progressDialogRef,\n                    show: showProgress.value,\n                    title: \"AI \"\n                }, null, 8 /* PROPS */, [\"show\"])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StatusBarGenerator.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatusBarGenerator.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatusBarGenerator.vue?vue&type=style&index=0&id=bbbf3552&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-bbbf3552\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n    class: \"summary-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    class: \"header-actions\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#4a9eff\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_5 = {\n    key: 0,\n    class: \"history-list\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n    class: \"history-info\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"flex\": \"1\" }\n};\nconst _hoisted_8 = {\n    class: \"history-number\",\n    style: { \"color\": \"#4a9eff\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_9 = {\n    class: \"history-range\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_10 = {\n    class: \"expand-icon\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_11 = {\n    key: 0,\n    class: \"history-content\",\n    style: { \"padding\": \"15px\", \"background\": \"#2a2a2a\", \"border-radius\": \"0 0 6px 6px\" }\n};\nconst _hoisted_12 = {\n    class: \"history-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"8px\", \"border-bottom\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    class: \"history-text\",\n    style: { \"font-family\": \"'Courier New', monospace\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"color\": \"#e0e0e0\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"user-select\": \"text\", \"cursor\": \"text\" }\n};\nconst _hoisted_17 = {\n    key: 1,\n    class: \"empty-state\",\n    style: { \"text-align\": \"center\", \"padding\": \"40px 20px\", \"color\": \"#888\" }\n};\nimport { ref } from 'vue';\nimport { useSummaryHistoryStore } from '../settings';\nimport { getChatIdSafe } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SummaryTab',\n    setup(__props) {\n        const historyStore = useSummaryHistoryStore();\n        // \n        const summary_history = ref([]);\n        const expandedState = ref(new Map());\n        // \n        const refreshSummaryHistory = () => {\n            try {\n                summary_history.value = historyStore.getSummaryHistory();\n                console.log(':', summary_history.value.length);\n            }\n            catch (e) {\n                console.error(':', e);\n                summary_history.value = [];\n            }\n        };\n        // \n        const toggleExpanded = (index) => {\n            const current = expandedState.value.get(index) || false;\n            expandedState.value.set(index, !current);\n        };\n        const isExpanded = (index) => {\n            return expandedState.value.get(index) || false;\n        };\n        // \n        const handleRefreshData = async () => {\n            console.log('');\n            try {\n                await refreshSummaryHistory();\n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage = '') => {\n            console.log(':', text.length);\n            try {\n                // iframe\n                if (window.parent && window.parent !== window) {\n                    console.log('iframe');\n                    const parentSuccess = await tryParentWindowCopy(text);\n                    if (parentSuccess) {\n                        console.log('');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                }\n                // 1:  Clipboard API\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log(' Clipboard API');\n                    try {\n                        await navigator.clipboard.writeText(text);\n                        console.log('Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    catch (clipboardErr) {\n                        console.warn('Clipboard API :', clipboardErr);\n                        // \n                    }\n                }\n                // 2:  execCommand \n                console.log(' execCommand ');\n                const success = await execCommandCopy(text);\n                if (success) {\n                    console.log('execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                // 3: \n                console.log('');\n                showManualCopyDialog(text);\n            }\n            catch (err) {\n                console.error(':', err);\n                // \n                showManualCopyDialog(text);\n            }\n        };\n        // \n        const tryParentWindowCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    const parentDoc = window.parent.document;\n                    const parentBody = window.parent.document.body;\n                    //  textarea \n                    const textarea = parentDoc.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n                    textarea.setAttribute('readonly', '');\n                    parentBody.appendChild(textarea);\n                    // \n                    textarea.focus();\n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    // \n                    parentBody.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error(':', err);\n                    resolve(false);\n                }\n            });\n        };\n        // execCommand \n        const execCommandCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    //  textarea \n                    const textarea = document.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.position = 'fixed';\n                    textarea.style.left = '-9999px';\n                    textarea.style.top = '-9999px';\n                    textarea.style.opacity = '0';\n                    textarea.style.pointerEvents = 'none';\n                    textarea.setAttribute('readonly', '');\n                    document.body.appendChild(textarea);\n                    // \n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = document.execCommand('copy');\n                    // \n                    document.body.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error('execCommand :', err);\n                    resolve(false);\n                }\n            });\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            console.log(':', text.length);\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'manual-copy-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n                // \n                const textarea = parentDoc.createElement('textarea');\n                textarea.value = text;\n                textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                closeButton.onmouseover = () => {\n                    closeButton.style.background = '#5ba8ff';\n                };\n                closeButton.onmouseout = () => {\n                    closeButton.style.background = '#4a9eff';\n                };\n                // \n                const copyButton = parentDoc.createElement('button');\n                copyButton.textContent = '';\n                copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                copyButton.onmouseover = () => {\n                    copyButton.style.background = '#218838';\n                };\n                copyButton.onmouseout = () => {\n                    copyButton.style.background = '#28a745';\n                };\n                // \n                buttonContainer.appendChild(copyButton);\n                buttonContainer.appendChild(closeButton);\n                container.appendChild(header);\n                container.appendChild(textarea);\n                container.appendChild(buttonContainer);\n                overlay.appendChild(container);\n                // \n                parentBody.appendChild(overlay);\n                // \n                closeButton.onclick = () => {\n                    console.log('');\n                    parentBody.removeChild(overlay);\n                };\n                copyButton.onclick = async () => {\n                    console.log('');\n                    try {\n                        // \n                        textarea.focus();\n                        textarea.select();\n                        // \n                        const success = document.execCommand('copy');\n                        if (success) {\n                            window.toastr.success('');\n                            parentBody.removeChild(overlay);\n                        }\n                        else {\n                            window.toastr.warning('');\n                        }\n                    }\n                    catch (err) {\n                        console.error(':', err);\n                        window.toastr.warning('');\n                    }\n                };\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        console.log('');\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log('ESC');\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                // \n                setTimeout(() => {\n                    console.log('');\n                    textarea.focus();\n                    textarea.select();\n                }, 200);\n                // \n                window.toastr.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr.error('');\n            }\n        };\n        //  - \n        const copySummary = (content) => {\n            copyToClipboard(content, '');\n        };\n        // \n        const deleteSummary = (index) => {\n            if (confirm('')) {\n                try {\n                    const chat_id = getChatIdSafe();\n                    if (!chat_id) {\n                        window.toastr.error('');\n                        return;\n                    }\n                    summary_history.value.splice(index, 1);\n                    insertOrAssignVariables({ summary_history: summary_history.value }, { type: 'chat' });\n                    window.toastr.success('');\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error('');\n                }\n            }\n        };\n        // \n        const createSummaryWorldbook = async () => {\n            try {\n                // \n                let characterName = '';\n                try {\n                    const currentCharacter = getCharData('current');\n                    if (currentCharacter && currentCharacter.name) {\n                        characterName = currentCharacter.name;\n                        // \n                        characterName = characterName.replace(/[<>:\"/\\\\|?*]/g, '_').trim();\n                    }\n                }\n                catch (charError) {\n                    console.warn(':', charError);\n                }\n                // \n                const dateStr = new Date().toISOString().slice(0, 10);\n                const worldbookName = `_${characterName}_${dateStr}`;\n                console.log(':', worldbookName);\n                const existingWorldbooks = getWorldbookNames();\n                if (existingWorldbooks.includes(worldbookName)) {\n                    window.toastr.warning(` \"${worldbookName}\" `);\n                    return;\n                }\n                await createWorldbook(worldbookName, []);\n                try {\n                    await rebindChatWorldbook('current', worldbookName);\n                    window.toastr.success(` \"${worldbookName}\" `);\n                }\n                catch (bindError) {\n                    console.warn(':', bindError);\n                    window.toastr.success(` \"${worldbookName}\"`);\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const bindToWorldbook = async (content, summaryIndex) => {\n            try {\n                const worldbookNames = getWorldbookNames();\n                if (worldbookNames.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                const selectedWorldbook = worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\n                if (!selectedWorldbook) {\n                    return;\n                }\n                const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\n                const newEntry = {\n                    name: entryName,\n                    enabled: true,\n                    strategy: {\n                        type: 'constant',\n                        keys: [],\n                        keys_secondary: { logic: 'and_any', keys: [] },\n                        scan_depth: 'same_as_global',\n                    },\n                    position: {\n                        type: 'before_character_definition',\n                        role: 'system',\n                        depth: 1,\n                    },\n                    content: content,\n                    comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\n                    insertion_order: 0,\n                    case_sensitive: false,\n                    name_is_regex: false,\n                    keys_are_regex: false,\n                    selective_logic: 'and',\n                    secondary_keys_logic: 'and',\n                    activation_threshold: 0,\n                    disabled: false,\n                    order: 0,\n                    group: '',\n                    local_id: 0,\n                    depth_entries: [],\n                    depth_entries_all: false,\n                    search_range: 0,\n                    force_activation: false,\n                    disable: false,\n                    exclude_recursion: false,\n                    hidden: false,\n                    priority: 0,\n                    comment_is_regex: false,\n                    content_is_regex: false,\n                    secondary_keys_are_regex: false,\n                    keys_secondary_are_regex: false,\n                    uid: Date.now(),\n                };\n                await createWorldbookEntries(selectedWorldbook, [newEntry]);\n                window.toastr.success(`: ${selectedWorldbook}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const promptForWorldbook = async (worldbookNames) => {\n            return new Promise(resolve => {\n                const dialog = $(`\n      <div style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: #2a2a2a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        padding: 20px;\n        z-index: 1000000;\n        min-width: 300px;\n      \">\n        <h3 style=\"margin: 0 0 15px 0; color: #e0e0e0;\"></h3>\n        <div style=\"margin-bottom: 15px;\">\n          ${worldbookNames\n                    .map(name => `\n            <label style=\"display: block; margin: 5px 0; color: #e0e0e0;\">\n              <input type=\"radio\" name=\"worldbook\" value=\"${name}\" style=\"margin-right: 8px;\">\n              ${name}\n            </label>\n          `)\n                    .join('')}\n        </div>\n        <div style=\"text-align: right;\">\n          <button id=\"cancelWorldbook\" style=\"\n            background: #666;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            margin-right: 10px;\n            cursor: pointer;\n          \"></button>\n          <button id=\"confirmWorldbook\" style=\"\n            background: #4a9eff;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n          \"></button>\n        </div>\n      </div>\n    `);\n                const overlay = $(`\n      <div style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n      \"></div>\n    `);\n                $('body').append(overlay).append(dialog);\n                $('#cancelWorldbook').on('click', () => {\n                    overlay.remove();\n                    dialog.remove();\n                    resolve(null);\n                });\n                $('#confirmWorldbook').on('click', () => {\n                    const selected = $('input[name=\"worldbook\"]:checked').val();\n                    overlay.remove();\n                    dialog.remove();\n                    resolve(selected || null);\n                });\n                $('input[name=\"worldbook\"]:first').prop('checked', true);\n            });\n        };\n        // \n        const showDebugPanel = () => {\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'debug-panel-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #ffc107;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 800px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ul style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li>localStorage</li>\n          <li></li>\n          <li></li>\n        </ul>\n      </div>\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 12px;\n      margin-bottom: 20px;\n    `;\n                // \n                const buttons = [\n                    { id: 'testComplete', text: ' ', color: '#4a9eff' },\n                    { id: 'syncData', text: ' ', color: '#28a745' },\n                    { id: 'checkFloor', text: ' ', color: '#17a2b8' },\n                    { id: 'testCalculation', text: ' ', color: '#6f42c1' },\n                    { id: 'showStatus', text: ' ', color: '#fd7e14' },\n                    { id: 'resetStartId', text: ' ', color: '#dc3545' },\n                ];\n                buttons.forEach(button => {\n                    const btn = parentDoc.createElement('button');\n                    btn.id = button.id;\n                    btn.textContent = button.text;\n                    btn.style.cssText = `\n        background: ${button.color};\n        color: white;\n        border: none;\n        padding: 12px 16px;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 13px;\n        font-weight: 500;\n        transition: background 0.2s;\n      `;\n                    btn.onmouseover = () => {\n                        btn.style.opacity = '0.8';\n                    };\n                    btn.onmouseout = () => {\n                        btn.style.opacity = '1';\n                    };\n                    buttonContainer.appendChild(btn);\n                });\n                // \n                const outputArea = parentDoc.createElement('div');\n                outputArea.id = 'debug-output';\n                outputArea.style.cssText = `\n      background: #1a1a1a;\n      border: 1px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      height: 200px;\n      overflow-y: auto;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 12px;\n      color: #e0e0e0;\n      white-space: pre-wrap;\n      margin-bottom: 20px;\n    `;\n                outputArea.textContent = '...\\n';\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #6c757d;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n      align-self: center;\n    `;\n                // \n                container.appendChild(header);\n                container.appendChild(buttonContainer);\n                container.appendChild(outputArea);\n                container.appendChild(closeButton);\n                overlay.appendChild(container);\n                parentBody.appendChild(overlay);\n                // \n                const log = (message) => {\n                    const output = parentDoc.getElementById('debug-output');\n                    if (output) {\n                        output.textContent += message + '\\n';\n                        output.scrollTop = output.scrollHeight;\n                    }\n                };\n                // \n                closeButton.onclick = () => {\n                    parentBody.removeChild(overlay);\n                };\n                // \n                parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.testCompleteAutoSummary) {\n                            window.testCompleteAutoSummary();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('syncData')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.syncAutoSummaryData) {\n                            window.syncAutoSummaryData();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.checkCurrentFloor) {\n                            window.checkCurrentFloor();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.testFloorCalculation) {\n                            window.testFloorCalculation();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.checkAutoSummaryStatus) {\n                            window.checkAutoSummaryStatus();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.smartResetChat) {\n                            window.smartResetChat();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                window.toastr?.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr?.error('');\n            }\n        };\n        // \n        refreshSummaryHistory();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (summary_history.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(summary_history.value.length) + \" \", 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button refresh-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: handleRefreshData\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button create-worldbook-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#51cf66\", \"border\": \"1px solid #40c057\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: createSummaryWorldbook\n                        }, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button debug-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#ffc107\", \"border\": \"1px solid #ffb300\", \"border-radius\": \"4px\", \"color\": \"#000\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: showDebugPanel\n                        }, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-bug\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                (summary_history.value && summary_history.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(summary_history.value, (item, index) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: index,\n                                class: \"history-item\",\n                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #444\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"history-header\",\n                                    style: { \"padding\": \"12px 15px\", \"background\": \"#1a1a1a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"user-select\": \"none\", \"transition\": \"background 0.2s\", \"border-radius\": \"6px\" },\n                                    onClick: ($event) => (toggleExpanded(index))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _createElementVNode(\"span\", _hoisted_8, \"#\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_9, \" \" + _toDisplayString(item.start_id) + \" - \" + _toDisplayString(item.end_id), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(isExpanded(index) ? '' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_6),\n                                (isExpanded(index))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"background 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (copySummary(item.content))\n                                            }, [...(_cache[4] || (_cache[4] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_13),\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button worldbook-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#4a9eff\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (bindToWorldbook(item.content, index))\n                                            }, [...(_cache[5] || (_cache[5] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-book\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_14),\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button delete-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#ff6b6b\", \"border\": \"1px solid #ff5252\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (deleteSummary(index))\n                                            }, [...(_cache[6] || (_cache[6] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_15)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_16, _toDisplayString(item.content), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-inbox\",\n                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"10px\", \"opacity\": \"0.3\" }\n                            }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", { style: { \"margin\": \"10px 0\", \"font-size\": \"16px\" } }, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"small\", { style: { \"font-size\": \"12px\", \"color\": \"#666\" } }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SummaryTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SummaryTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SummaryTab.vue?vue&type=style&index=0&id=f8bd87fc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f8bd87fc\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"table-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#4a9eff\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"history-list\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n    class: \"history-info\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"flex\": \"1\" }\n};\nconst _hoisted_7 = {\n    class: \"history-number\",\n    style: { \"color\": \"#4a9eff\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_8 = {\n    class: \"history-range\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_9 = {\n    class: \"expand-icon\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_10 = {\n    key: 0,\n    class: \"history-content\",\n    style: { \"padding\": \"15px\", \"background\": \"#2a2a2a\", \"border-radius\": \"0 0 6px 6px\" }\n};\nconst _hoisted_11 = {\n    class: \"history-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"8px\", \"border-bottom\": \"1px solid #3a3a3a\", \"flex-wrap\": \"wrap\" }\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n    class: \"table-display\",\n    style: { \"overflow-x\": \"auto\", \"border-radius\": \"6px\", \"border\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_15 = { style: { \"width\": \"100%\", \"border-collapse\": \"collapse\", \"background\": \"#1a1a1a\" } };\nconst _hoisted_16 = { style: { \"background\": \"#2a2a2a\" } };\nconst _hoisted_17 = {\n    key: 1,\n    class: \"empty-state\",\n    style: { \"text-align\": \"center\", \"padding\": \"40px 20px\", \"color\": \"#888\" }\n};\nimport { ref } from 'vue';\nimport { getChatIdSafe } from '../utils';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TableTab',\n    setup(__props) {\n        const table_history = ref([]);\n        const tableExpandedState = ref(new Map());\n        // \n        const refreshTableHistory = () => {\n            try {\n                const chat_id = getChatIdSafe();\n                if (!chat_id) {\n                    console.warn('ID');\n                    table_history.value = [];\n                    return;\n                }\n                const chat_vars = getVariables({ type: 'chat' });\n                console.log(':', chat_vars);\n                console.log(':', chat_vars.table_history);\n                table_history.value = chat_vars.table_history || [];\n                console.log(':', table_history.value.length);\n            }\n            catch (e) {\n                console.error(':', e);\n                table_history.value = [];\n            }\n        };\n        // \n        const toggleTableExpanded = (index) => {\n            const current = tableExpandedState.value.get(index) || false;\n            tableExpandedState.value.set(index, !current);\n        };\n        const isTableExpanded = (index) => {\n            return tableExpandedState.value.get(index) || false;\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage = '') => {\n            console.log(':', text.length);\n            try {\n                // iframe\n                if (window.parent && window.parent !== window) {\n                    console.log('iframe');\n                    const parentSuccess = await tryParentWindowCopy(text);\n                    if (parentSuccess) {\n                        console.log('');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                }\n                // 1:  Clipboard API\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log(' Clipboard API');\n                    try {\n                        await navigator.clipboard.writeText(text);\n                        console.log('Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    catch (clipboardErr) {\n                        console.warn('Clipboard API :', clipboardErr);\n                        // \n                    }\n                }\n                // 2:  execCommand \n                console.log(' execCommand ');\n                const success = await execCommandCopy(text);\n                if (success) {\n                    console.log('execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                // 3: \n                console.log('');\n                showManualCopyDialog(text);\n            }\n            catch (err) {\n                console.error(':', err);\n                // \n                showManualCopyDialog(text);\n            }\n        };\n        // \n        const tryParentWindowCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    const parentDoc = window.parent.document;\n                    const parentBody = window.parent.document.body;\n                    //  textarea \n                    const textarea = parentDoc.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n                    textarea.setAttribute('readonly', '');\n                    parentBody.appendChild(textarea);\n                    // \n                    textarea.focus();\n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    // \n                    parentBody.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error(':', err);\n                    resolve(false);\n                }\n            });\n        };\n        // execCommand \n        const execCommandCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    //  textarea \n                    const textarea = document.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.position = 'fixed';\n                    textarea.style.left = '-9999px';\n                    textarea.style.top = '-9999px';\n                    textarea.style.opacity = '0';\n                    textarea.style.pointerEvents = 'none';\n                    textarea.setAttribute('readonly', '');\n                    document.body.appendChild(textarea);\n                    // \n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = document.execCommand('copy');\n                    // \n                    document.body.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error('execCommand :', err);\n                    resolve(false);\n                }\n            });\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            console.log(':', text.length);\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'manual-copy-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n                // \n                const textarea = parentDoc.createElement('textarea');\n                textarea.value = text;\n                textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                closeButton.onmouseover = () => {\n                    closeButton.style.background = '#5ba8ff';\n                };\n                closeButton.onmouseout = () => {\n                    closeButton.style.background = '#4a9eff';\n                };\n                // \n                const copyButton = parentDoc.createElement('button');\n                copyButton.textContent = '';\n                copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                copyButton.onmouseover = () => {\n                    copyButton.style.background = '#218838';\n                };\n                copyButton.onmouseout = () => {\n                    copyButton.style.background = '#28a745';\n                };\n                // \n                buttonContainer.appendChild(copyButton);\n                buttonContainer.appendChild(closeButton);\n                container.appendChild(header);\n                container.appendChild(textarea);\n                container.appendChild(buttonContainer);\n                overlay.appendChild(container);\n                // \n                parentBody.appendChild(overlay);\n                // \n                closeButton.onclick = () => {\n                    console.log('');\n                    parentBody.removeChild(overlay);\n                };\n                copyButton.onclick = async () => {\n                    console.log('');\n                    try {\n                        // \n                        textarea.focus();\n                        textarea.select();\n                        // \n                        const success = document.execCommand('copy');\n                        if (success) {\n                            window.toastr.success('');\n                            parentBody.removeChild(overlay);\n                        }\n                        else {\n                            window.toastr.warning('');\n                        }\n                    }\n                    catch (err) {\n                        console.error(':', err);\n                        window.toastr.warning('');\n                    }\n                };\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        console.log('');\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log('ESC');\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                // \n                setTimeout(() => {\n                    console.log('');\n                    textarea.focus();\n                    textarea.select();\n                }, 200);\n                // \n                window.toastr.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr.error('');\n            }\n        };\n        //  - \n        const copyTable = (tableItem) => {\n            try {\n                // TSV\n                const tsv = [tableItem.headers.join('\\t'), ...tableItem.data.map(row => row.join('\\t'))].join('\\n');\n                copyToClipboard(tsv, '');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('');\n            }\n        };\n        // \n        const deleteTable = (index) => {\n            if (confirm('')) {\n                table_history.value.splice(index, 1);\n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    insertOrAssignVariables({ table_history: table_history.value }, { type: 'chat' });\n                    window.toastr.success('');\n                }\n            }\n        };\n        // \n        refreshTableHistory();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    (table_history.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(table_history.value.length) + \" \", 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                (table_history.value && table_history.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(table_history.value, (item, index) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: index,\n                                class: \"history-item\",\n                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #444\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"history-header\",\n                                    style: { \"padding\": \"12px 15px\", \"background\": \"#1a1a1a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"user-select\": \"none\", \"transition\": \"background 0.2s\", \"border-radius\": \"6px\" },\n                                    onClick: ($event) => (toggleTableExpanded(index))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _createElementVNode(\"span\", _hoisted_7, \"#\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_8, \" \" + _toDisplayString(item.start_id) + \" - \" + _toDisplayString(item.end_id), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(isTableExpanded(index) ? '' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_5),\n                                (isTableExpanded(index))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-button\",\n                                                style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: ($event) => (copyTable(item))\n                                            }, [...(_cache[1] || (_cache[1] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-copy\",\n                                                        style: { \"font-size\": \"12px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_12),\n                                            _createElementVNode(\"button\", {\n                                                class: \"delete-button\",\n                                                style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: ($event) => (deleteTable(index))\n                                            }, [...(_cache[2] || (_cache[2] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-trash\",\n                                                        style: { \"font-size\": \"12px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_13)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_14, [\n                                            _createElementVNode(\"table\", _hoisted_15, [\n                                                _createElementVNode(\"thead\", _hoisted_16, [\n                                                    _createElementVNode(\"tr\", null, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.headers, (header, idx) => {\n                                                            return (_openBlock(), _createElementBlock(\"th\", {\n                                                                key: idx,\n                                                                style: { \"padding\": \"12px 16px\", \"text-align\": \"left\", \"font-weight\": \"bold\", \"color\": \"#fff\", \"border-bottom\": \"2px solid #3a3a3a\", \"border-right\": \"1px solid #3a3a3a\" }\n                                                            }, _toDisplayString(header), 1 /* TEXT */));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"tbody\", null, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.data, (row, rowIdx) => {\n                                                        return (_openBlock(), _createElementBlock(\"tr\", {\n                                                            key: rowIdx,\n                                                            style: { \"border-bottom\": \"1px solid #3a3a3a\" }\n                                                        }, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(row, (cell, cellIdx) => {\n                                                                return (_openBlock(), _createElementBlock(\"td\", {\n                                                                    key: cellIdx,\n                                                                    style: { \"padding\": \"10px 16px\", \"color\": \"#e0e0e0\", \"border-right\": \"1px solid #3a3a3a\" }\n                                                                }, _toDisplayString(cell), 1 /* TEXT */));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ])\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-table\",\n                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"10px\", \"opacity\": \"0.3\" }\n                            }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", { style: { \"margin\": \"10px 0\", \"font-size\": \"16px\" } }, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"small\", { style: { \"font-size\": \"12px\", \"color\": \"#666\" } }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TableTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TableTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TableTab.vue?vue&type=style&index=0&id=170043aa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-170043aa\"]])\n\nexport default __exports__","const __WEBPACK_NAMESPACE_OBJECT__ = _;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, unref as _unref, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"tools-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { class: \"tool-section\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_4 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_5 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_6 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"cursor\": \"pointer\" } };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_8 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_9 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#667eea\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_10 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n    key: 1,\n    class: \"output-section\"\n};\nconst _hoisted_13 = {\n    class: \"output-content\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_14 = { style: { \"margin-top\": \"20px\", \"padding-top\": \"20px\", \"border-top\": \"1px solid #3a3a3a\" } };\nconst _hoisted_15 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"12px\" }\n};\nconst _hoisted_16 = { style: { \"display\": \"flex\", \"gap\": \"10px\" } };\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = [\"disabled\"];\nconst _hoisted_19 = { class: \"tool-section\" };\nconst _hoisted_20 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_21 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_22 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_23 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"cursor\": \"pointer\" } };\nconst _hoisted_24 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_25 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_26 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_27 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_28 = [\"disabled\"];\nconst _hoisted_29 = {\n    key: 1,\n    class: \"output-section\"\n};\nconst _hoisted_30 = {\n    class: \"entry-preview\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_31 = {\n    class: \"entry-field\",\n    style: { \"margin-bottom\": \"10px\" }\n};\nconst _hoisted_32 = { style: { \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } };\nconst _hoisted_33 = {\n    class: \"entry-field\",\n    style: { \"margin-bottom\": \"10px\" }\n};\nconst _hoisted_34 = { style: { \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } };\nconst _hoisted_35 = {\n    class: \"entry-field\",\n    style: { \"margin-bottom\": \"10px\" }\n};\nconst _hoisted_36 = { style: { \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"max-height\": \"200px\", \"overflow-y\": \"auto\" } };\nconst _hoisted_37 = { class: \"entry-field\" };\nconst _hoisted_38 = { style: { \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } };\nconst _hoisted_39 = {\n    class: \"modify-section\",\n    style: { \"margin-top\": \"25px\", \"border-top\": \"2px dashed #3a3a3a\", \"padding-top\": \"20px\" }\n};\nconst _hoisted_40 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_41 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"12px 0\" }\n};\nconst _hoisted_42 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_43 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#ffa500\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_44 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_45 = [\"disabled\"];\nconst _hoisted_46 = {\n    class: \"insert-section\",\n    style: { \"background\": \"#1a1a1a\", \"padding\": \"15px\", \"border-radius\": \"6px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_47 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"12px\" }\n};\nconst _hoisted_48 = [\"value\"];\nconst _hoisted_49 = {\n    class: \"output-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\" }\n};\nconst _hoisted_50 = [\"disabled\"];\nconst _hoisted_51 = { class: \"tool-section\" };\nconst _hoisted_52 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_53 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_54 = [\"value\"];\nconst _hoisted_55 = {\n    key: 0,\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_56 = {\n    key: 1,\n    style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_57 = {\n    key: 2,\n    style: { \"margin-bottom\": \"15px\", \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_58 = { key: 0 };\nconst _hoisted_59 = {\n    key: 1,\n    style: { \"color\": \"#ff6b6b\" }\n};\nconst _hoisted_60 = {\n    key: 3,\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"12px\" }\n};\nconst _hoisted_61 = [\"onClick\"];\nconst _hoisted_62 = { style: { \"flex\": \"1\", \"line-height\": \"1.6\" } };\nconst _hoisted_63 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"margin-bottom\": \"8px\" } };\nconst _hoisted_64 = {\n    key: 0,\n    style: { \"font-size\": \"14px\" }\n};\nconst _hoisted_65 = {\n    key: 1,\n    style: { \"font-size\": \"14px\" }\n};\nconst _hoisted_66 = {\n    key: 2,\n    style: { \"font-size\": \"14px\" }\n};\nconst _hoisted_67 = { style: { \"color\": \"#fff\", \"font-weight\": \"600\", \"font-size\": \"14px\" } };\nconst _hoisted_68 = { style: { \"padding-left\": \"20px\", \"margin-bottom\": \"6px\", \"font-size\": \"12px\", \"color\": \"#ccc\" } };\nconst _hoisted_69 = { key: 0 };\nconst _hoisted_70 = { key: 1 };\nconst _hoisted_71 = { key: 2 };\nconst _hoisted_72 = { key: 3 };\nconst _hoisted_73 = { style: { \"padding-left\": \"20px\", \"font-size\": \"12px\", \"color\": \"#999\", \"font-style\": \"italic\" } };\nconst _hoisted_74 = {\n    key: 0,\n    style: { \"margin-top\": \"15px\", \"padding-top\": \"15px\", \"border-top\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_75 = { style: { \"margin-bottom\": \"12px\" } };\nconst _hoisted_76 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } };\nconst _hoisted_77 = {\n    key: 0,\n    style: { \"padding\": \"4px 10px\", \"background\": \"#4a9eff\", \"color\": \"white\", \"border-radius\": \"12px\", \"font-size\": \"11px\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_78 = {\n    key: 1,\n    style: { \"padding\": \"4px 10px\", \"background\": \"#28a745\", \"color\": \"white\", \"border-radius\": \"12px\", \"font-size\": \"11px\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_79 = {\n    key: 2,\n    style: { \"padding\": \"4px 10px\", \"background\": \"#888\", \"color\": \"white\", \"border-radius\": \"12px\", \"font-size\": \"11px\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_80 = { style: { \"margin-bottom\": \"12px\" } };\nconst _hoisted_81 = { style: { \"color\": \"#888\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"6px\" } };\nconst _hoisted_82 = {\n    key: 0,\n    style: { \"color\": \"#ffa500\", \"font-size\": \"10px\", \"margin-left\": \"6px\" }\n};\nconst _hoisted_83 = { style: { \"display\": \"flex\", \"flex-wrap\": \"wrap\", \"gap\": \"6px\" } };\nconst _hoisted_84 = {\n    key: 0,\n    style: { \"color\": \"#888\", \"font-size\": \"11px\" }\n};\nconst _hoisted_85 = { style: { \"margin-bottom\": \"12px\" } };\nconst _hoisted_86 = { style: { \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"12px\", \"line-height\": \"1.6\", \"max-height\": \"200px\", \"overflow-y\": \"auto\", \"white-space\": \"pre-wrap\" } };\nconst _hoisted_87 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-top\": \"12px\" } };\nconst _hoisted_88 = [\"onClick\"];\nconst _hoisted_89 = [\"onClick\"];\nconst _hoisted_90 = { style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"12px\", \"padding\": \"25px\", \"max-width\": \"700px\", \"width\": \"90%\", \"max-height\": \"85vh\", \"overflow-y\": \"auto\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_91 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_92 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\" } };\nconst _hoisted_93 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } };\nconst _hoisted_94 = [\"value\"];\nconst _hoisted_95 = [\"value\"];\nconst _hoisted_96 = [\"value\"];\nconst _hoisted_97 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"1fr 1fr\", \"gap\": \"10px\" } };\nconst _hoisted_98 = [\"value\"];\nconst _hoisted_99 = [\"value\"];\nconst _hoisted_100 = { style: { \"background\": \"#1a1a1a\", \"padding\": \"15px\", \"border-radius\": \"8px\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\" } };\nconst _hoisted_101 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"10px\" } };\nconst _hoisted_102 = { style: { \"color\": \"#ccc\", \"font-size\": \"13px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"cursor\": \"pointer\" } };\nconst _hoisted_103 = [\"checked\"];\nconst _hoisted_104 = { style: { \"color\": \"#ccc\", \"font-size\": \"13px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"cursor\": \"pointer\" } };\nconst _hoisted_105 = [\"checked\"];\nconst _hoisted_106 = [\"value\"];\nconst _hoisted_107 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-top\": \"20px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_108 = { class: \"tool-section\" };\nconst _hoisted_109 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_110 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_111 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_112 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"cursor\": \"pointer\" } };\nconst _hoisted_113 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_114 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_115 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#17a2b8\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_116 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_117 = [\"disabled\"];\nconst _hoisted_118 = {\n    key: 1,\n    class: \"output-section\"\n};\nconst _hoisted_119 = {\n    class: \"output-content\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_120 = {\n    class: \"modify-section\",\n    style: { \"margin-top\": \"25px\", \"border-top\": \"2px dashed #3a3a3a\", \"padding-top\": \"20px\" }\n};\nconst _hoisted_121 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_122 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_123 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_124 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#17a2b8\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_125 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_126 = [\"disabled\"];\nimport { debounce } from 'lodash';\nimport { storeToRefs } from 'pinia';\nimport { onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\n\nimport { klona } from 'klona';\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ToolsTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // \n        const toolExpandedState = ref(new Map());\n        const antiClicheInput = ref('');\n        const antiClicheOutput = ref('');\n        const isProcessingAntiCliche = ref(false);\n        const enableAntiClicheStreaming = ref(false); // \n        const antiClicheProgressPercent = ref(0); // \n        const antiClicheModifyRequest = ref(''); // \n        const isModifyingAntiCliche = ref(false); // \n        const characterDescription = ref('');\n        const characterCardOutput = ref('');\n        const isGeneratingCharacter = ref(false);\n        const modifyRequest = ref('');\n        const isModifyingCharacter = ref(false);\n        const enableCharacterStreaming = ref(false); // \n        const characterProgressPercent = ref(0); // \n        // \n        const worldbookDescription = ref('');\n        const worldbookEntryOutput = ref(null);\n        const isGeneratingWorldbook = ref(false);\n        const availableWorldbooks = ref([]);\n        const selectedWorldbook = ref('');\n        const isInsertingEntry = ref(false);\n        const worldbookModifyRequest = ref('');\n        const isModifyingWorldbook = ref(false);\n        const enableWorldbookStreaming = ref(false); // \n        const worldbookProgressPercent = ref(0); // \n        // \n        const selectedViewerWorldbook = ref('');\n        const worldbookEntries = ref([]);\n        const viewerSearchQuery = ref('');\n        const viewerSortBy = ref('original');\n        const entryExpandedState = ref(new Map());\n        // \n        const showEditDialog = ref(false);\n        const editingEntry = ref({});\n        const editingEntryUid = ref(null);\n        // \n        const isDataLoaded = ref(false);\n        // \n        const loadAvailableWorldbooks = () => {\n            try {\n                availableWorldbooks.value = getWorldbookNames();\n                console.log(' :', availableWorldbooks.value);\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const loadToolsData = () => {\n            try {\n                isDataLoaded.value = false; // \n                const script_id = getScriptIdSafe();\n                if (!script_id) {\n                    console.warn(' script_id ');\n                    isDataLoaded.value = true;\n                    return;\n                }\n                const savedData = getVariables({ type: 'script', script_id });\n                console.log(' :', savedData);\n                // \n                if (savedData.tools_antiCliche) {\n                    antiClicheInput.value = savedData.tools_antiCliche.input || '';\n                    antiClicheOutput.value = savedData.tools_antiCliche.output || '';\n                    enableAntiClicheStreaming.value = savedData.tools_antiCliche.enableStreaming || false;\n                    antiClicheModifyRequest.value = savedData.tools_antiCliche.modifyRequest || '';\n                    console.log(' :', {\n                        input: antiClicheInput.value.substring(0, 50),\n                        output: antiClicheOutput.value.substring(0, 50),\n                        enableStreaming: enableAntiClicheStreaming.value,\n                        modifyRequest: antiClicheModifyRequest.value.substring(0, 30),\n                    });\n                }\n                // \n                if (savedData.tools_characterCard) {\n                    characterDescription.value = savedData.tools_characterCard.description || '';\n                    characterCardOutput.value = savedData.tools_characterCard.output || '';\n                    modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\n                    enableCharacterStreaming.value = savedData.tools_characterCard.enableStreaming || false;\n                    console.log(' :', {\n                        description: characterDescription.value.substring(0, 50),\n                        output: characterCardOutput.value.substring(0, 50),\n                        modifyRequest: modifyRequest.value.substring(0, 50),\n                        enableStreaming: enableCharacterStreaming.value,\n                    });\n                }\n                // \n                if (savedData.tools_worldbookEntry) {\n                    worldbookDescription.value = savedData.tools_worldbookEntry.description || '';\n                    worldbookEntryOutput.value = savedData.tools_worldbookEntry.output || null;\n                    selectedWorldbook.value = savedData.tools_worldbookEntry.selectedWorldbook || '';\n                    worldbookModifyRequest.value = savedData.tools_worldbookEntry.modifyRequest || '';\n                    enableWorldbookStreaming.value = savedData.tools_worldbookEntry.enableStreaming || false;\n                    console.log(' :', {\n                        description: worldbookDescription.value.substring(0, 50),\n                        output: worldbookEntryOutput.value ? '' : '',\n                        selectedWorldbook: selectedWorldbook.value,\n                        modifyRequest: worldbookModifyRequest.value.substring(0, 50),\n                        enableStreaming: enableWorldbookStreaming.value,\n                    });\n                }\n                // \n                if (savedData.tools_expandedState) {\n                    toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\n                    console.log(' :', Object.fromEntries(toolExpandedState.value));\n                }\n                // \n                if (savedData.tools_worldbookViewer) {\n                    selectedViewerWorldbook.value = savedData.tools_worldbookViewer.selectedWorldbook || '';\n                    viewerSearchQuery.value = savedData.tools_worldbookViewer.searchQuery || '';\n                    viewerSortBy.value = savedData.tools_worldbookViewer.sortBy || 'original';\n                    console.log(' :', {\n                        selectedWorldbook: selectedViewerWorldbook.value,\n                        searchQuery: viewerSearchQuery.value,\n                        sortBy: viewerSortBy.value,\n                    });\n                    // \n                    if (selectedViewerWorldbook.value) {\n                        console.log(' ...');\n                        setTimeout(() => {\n                            loadWorldbookEntries();\n                        }, 200);\n                    }\n                }\n                // \n                setTimeout(() => {\n                    isDataLoaded.value = true;\n                    console.log(' ');\n                }, 100);\n            }\n            catch (error) {\n                console.error(' :', error);\n                isDataLoaded.value = true;\n            }\n        };\n        // \n        const saveToolsDataImmediate = () => {\n            // \n            if (!isDataLoaded.value) {\n                console.log(' ');\n                return;\n            }\n            try {\n                const script_id = getScriptIdSafe();\n                if (!script_id) {\n                    console.warn(' script_id ');\n                    return;\n                }\n                const dataToSave = {\n                    tools_antiCliche: {\n                        input: antiClicheInput.value,\n                        output: antiClicheOutput.value,\n                        enableStreaming: enableAntiClicheStreaming.value,\n                        modifyRequest: antiClicheModifyRequest.value,\n                    },\n                    tools_characterCard: {\n                        description: characterDescription.value,\n                        output: characterCardOutput.value,\n                        modifyRequest: modifyRequest.value,\n                        enableStreaming: enableCharacterStreaming.value,\n                    },\n                    tools_worldbookEntry: {\n                        description: worldbookDescription.value,\n                        output: worldbookEntryOutput.value,\n                        selectedWorldbook: selectedWorldbook.value,\n                        modifyRequest: worldbookModifyRequest.value,\n                        enableStreaming: enableWorldbookStreaming.value,\n                    },\n                    tools_worldbookViewer: {\n                        selectedWorldbook: selectedViewerWorldbook.value,\n                        searchQuery: viewerSearchQuery.value,\n                        sortBy: viewerSortBy.value,\n                    },\n                    tools_expandedState: Object.fromEntries(toolExpandedState.value),\n                };\n                insertOrAssignVariables(klona(dataToSave), { type: 'script', script_id });\n                console.log(' :', {\n                    antiCliche_input_length: antiClicheInput.value.length,\n                    antiCliche_output_length: antiClicheOutput.value.length,\n                    character_desc_length: characterDescription.value.length,\n                    character_output_length: characterCardOutput.value.length,\n                });\n            }\n            catch (error) {\n                console.error(' :', error);\n            }\n        };\n        // 300ms\n        const saveToolsData = debounce(saveToolsDataImmediate, 300);\n        // \n        watch([\n            antiClicheInput,\n            antiClicheOutput,\n            enableAntiClicheStreaming,\n            antiClicheModifyRequest,\n            characterDescription,\n            characterCardOutput,\n            modifyRequest,\n            enableCharacterStreaming,\n            worldbookDescription,\n            worldbookEntryOutput,\n            selectedWorldbook,\n            worldbookModifyRequest,\n            enableWorldbookStreaming,\n            selectedViewerWorldbook,\n            viewerSearchQuery,\n            viewerSortBy,\n            toolExpandedState,\n        ], () => {\n            if (isDataLoaded.value) {\n                console.log(' ...');\n                saveToolsData();\n            }\n        }, { deep: true });\n        // \n        onMounted(() => {\n            console.log(' ToolsTab ...');\n            loadToolsData();\n            loadAvailableWorldbooks();\n        });\n        // \n        onBeforeUnmount(() => {\n            console.log(' ToolsTab ...');\n            // \n            saveToolsData.cancel();\n            saveToolsDataImmediate();\n        });\n        // \n        const toggleToolExpanded = (toolName) => {\n            console.log('toggleToolExpanded :', toolName);\n            const current = toolExpandedState.value.get(toolName) || false;\n            console.log(':', current);\n            toolExpandedState.value.set(toolName, !current);\n            console.log(':', !current);\n        };\n        // \n        const isToolExpanded = (toolName) => {\n            return toolExpandedState.value.get(toolName) || false;\n        };\n        // copyToClipboard  utils.ts \n        // \n        const handleAntiClicheProcess = async () => {\n            if (!antiClicheInput.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isProcessingAntiCliche.value = true;\n                antiClicheProgressPercent.value = 0;\n                window.toastr.info('AI...', '', { timeOut: 15000 });\n                const requestPayload = {\n                    model: settings.value.model,\n                    max_tokens: settings.value.max_tokens || 8000,\n                    temperature: 0.7,\n                    stream: enableAntiClicheStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: `****\n\n##  \n\n ****\n ****\n ****\n **\"\"\"\"\"\"**\n\n## \n\n###  \n\n#### 1. \n- ****\n- ****\n- ****\"......\"\"...\"\"\"\n- ****\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n- ****\"\"\"\"\"xx\"\"\"\"\"\"\"\n- ****\"\"\"\"\"\"\"\"\n- **\"\"+**\n- ****168cm/50kgC\"\"\"\"\"\"\n\n#### 2. \n-  **//**\"xxx\"\"\"\"\"\n-  ****\"\"\"\"\n-  ****\"\"\"\"\n-  ****\"\"\"\"\"\"\n-  ****\"\"\"...\"\"...\"///\n-  ****\n\n#### 3. \n-  \"\"\"\"\"\"\n-  \n\n#### 4. \n-  ****\n-  \"\"\n-  \"\"\n\n#### 5. /\n-  ****\n-  \"\"\n-  \"\"\"\"\n\n#### 6. \n-  \"\"\n-  \n-  \n\n#### 7. \n-  168cm50kgC\n-  \n-  \n-  \n\n###  3\n1. ****\n2. ****\n3. ****\n4. ****\n\n##  \n\n****\n \n \n \n \n \n\n****\n /\n ****\n ****\n ****\"......\"\n \n \n \n\n##  \n\n****\n\n###  \n1. ****\n   -  \"\"\n   -  \"\"\"\"\n\n2. ****\n   -  \"\"\n   -  \"\"\"\"\n\n3. ****\n   -  \"\"\n   -  \"\"\"\"\n\n4. ****\n   -  \"\"\"\"\n   -  \"\"\"\"\"\"\n\n5. ****\n   -  \"\"\"\"\n   -  \"\"\"\"\"\"\n\n###  \n- ****\n- ****\n- ****\n\n###  \n1. ****\"\"\"\"\"\"\"\"\n2. ****\"......\"\"\"\"\"\n3. ****\"\"\"\"\n4. ****\"\"\"\"\n5. ****\"\"\"\"\n\n##  \n\n### 1\n\n****\nA\"\"\n\nA168cmC\n\n\n\n\n\n\"\"\n\n** **\nA\"\"\nA\n\"\"\n\n** **\nA\"\"\n\nA\n\nA\n\nA\n\n\"\"\n\n****\n1. \"\"  \"\"\n2. \"\"  \n3. \"\"  \n4. \"\"\"\"  \n5. \"......\"  \"A\"\n6. \"\"\"\"  \n7. \"168cm\"\"C\"  \"\"\n8. \"\"  \n\n### 2\n\n****\n\n\n** **\n\n\n****\n1. \"......\"  \n2. \"\"  \n3. \"\"  \"\"\n4. \"\"\"\"  \n5. \"\"  \n6. \"\"  \"\"\"\"+\n\n\n##  \n\n1. ****\n2. ****\n3. ****\n   - \n   - \n   - \"\"\"\"\n   - \n   - \n4. ****\n5. ****\n6. ****\n\n****`,\n                        },\n                        {\n                            role: 'user',\n                            content: antiClicheInput.value,\n                        },\n                    ],\n                };\n                let generatedText;\n                if (enableAntiClicheStreaming.value) {\n                    // \n                    generatedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    generatedText = data.choices[0].message.content.trim();\n                    antiClicheProgressPercent.value = 100;\n                }\n                antiClicheOutput.value = generatedText;\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isProcessingAntiCliche.value = false;\n                antiClicheProgressPercent.value = 0;\n            }\n        };\n        const copyAntiClicheResult = () => {\n            if (!antiClicheOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            // \n            copyToClipboard(antiClicheOutput.value, '');\n        };\n        // \n        const handleModifyAntiCliche = async () => {\n            if (!antiClicheModifyRequest.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!antiClicheOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isModifyingAntiCliche.value = true;\n                antiClicheProgressPercent.value = 0;\n                window.toastr.info('AI...', '', { timeOut: 15000 });\n                const requestPayload = {\n                    model: settings.value.model,\n                    max_tokens: settings.value.max_tokens || 8000,\n                    temperature: 0.7,\n                    stream: enableAntiClicheStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: '',\n                        },\n                        {\n                            role: 'user',\n                            content: `\\n${antiClicheOutput.value}\\n\\n${antiClicheModifyRequest.value}`,\n                        },\n                    ],\n                };\n                let modifiedText;\n                if (enableAntiClicheStreaming.value) {\n                    // \n                    modifiedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    modifiedText = data.choices[0].message.content.trim();\n                    antiClicheProgressPercent.value = 100;\n                }\n                antiClicheOutput.value = modifiedText;\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isModifyingAntiCliche.value = false;\n                antiClicheProgressPercent.value = 0;\n            }\n        };\n        // \n        const clearAntiClicheModifyRequest = () => {\n            antiClicheModifyRequest.value = '';\n            saveToolsDataImmediate();\n            window.toastr.success('');\n        };\n        // \n        const handleGenerateCharacterCard = async () => {\n            if (!characterDescription.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isGeneratingCharacter.value = true;\n                characterProgressPercent.value = 0;\n                window.toastr.info('AI...');\n                const requestPayload = {\n                    model: settings.value.model || 'gpt-3.5-turbo',\n                    max_tokens: settings.value.max_tokens || 16000,\n                    temperature: 0.8,\n                    stream: enableCharacterStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: `\n\n****\n-  YAML \n- \n- AI\n- AI\n\n****\n\\`\\`\\`yaml\n:\n  : \"\"\n  : \n  : \"YYYYMM\"\n  : \"//\"\n  : \"Alpha/Beta/Omega/\"\n  : \"////\"\n  : \"\"\n  : \"//\"\n  : \"\"\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n\n:\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"\"\n  : \"\"\n  : \"\"\n\n:\n  :\n    - 1: \"\"\n    - 2: \"\"\n    - 3: \"\"\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"\"\n\n:\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"/\"\n  : [\"1\", \"2\"]\n\n:\n  : \"\"\n  : \"\"\n  : [\"1\", \"2\", \"3\"]\n  : \"TA\"\n  : \"\"\n  : \"TA\"\n\n:\n  : \"{{user}}\"\n  : \"\"\n  : \"//\"\n  : \"\"\n\n:\n  :\n    : \"TA\"\n    : \"TA\"\n    : \"\"\n  : \"TA\"\n  :\n    : \"TA\"\n    : \"TA\"\n    : \"TA\"\n  :\n    : \"\"\n    : \"\"\n\\`\\`\\`\n\n\n1. \n2. \n3. TA\n4. `,\n                        },\n                        {\n                            role: 'user',\n                            content: characterDescription.value,\n                        },\n                    ],\n                };\n                let generatedText;\n                if (enableCharacterStreaming.value) {\n                    // \n                    generatedText = await generateWithStreaming(requestPayload, characterProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    generatedText = data.choices[0].message.content.trim();\n                    characterProgressPercent.value = 100;\n                }\n                characterCardOutput.value = generatedText;\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isGeneratingCharacter.value = false;\n                characterProgressPercent.value = 0;\n            }\n        };\n        const clearCharacterForm = () => {\n            characterDescription.value = '';\n            characterCardOutput.value = '';\n            modifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        const copyCharacterCard = () => {\n            if (!characterCardOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            // \n            copyToClipboard(characterCardOutput.value, '');\n        };\n        // \n        const clearAntiClicheForm = () => {\n            antiClicheInput.value = '';\n            antiClicheOutput.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // \n        const handleModifyCharacterCard = async () => {\n            if (!modifyRequest.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!characterCardOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isModifyingCharacter.value = true;\n                characterProgressPercent.value = 0;\n                window.toastr.info('AI...');\n                const requestPayload = {\n                    model: settings.value.model || 'gpt-3.5-turbo',\n                    max_tokens: settings.value.max_tokens || 16000,\n                    temperature: 0.8,\n                    stream: enableCharacterStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: ` YAML \n\n****\n1.  YAML \n2. \n3. \n4. \n5. \n6. \n\n****\n- ////\n- \n- \n- AI\n\n YAML `,\n                        },\n                        {\n                            role: 'user',\n                            content: `\n\n${characterCardOutput.value}\n\n---\n\n\n${modifyRequest.value}`,\n                        },\n                    ],\n                };\n                let modifiedCard;\n                if (enableCharacterStreaming.value) {\n                    // \n                    modifiedCard = await generateWithStreaming(requestPayload, characterProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    modifiedCard = data.choices[0].message.content.trim();\n                    characterProgressPercent.value = 100;\n                }\n                characterCardOutput.value = modifiedCard;\n                modifyRequest.value = ''; // \n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isModifyingCharacter.value = false;\n                characterProgressPercent.value = 0;\n            }\n        };\n        // \n        const clearModifyRequest = () => {\n            modifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // ====================  ====================\n        // \n        const extractStreamContent = (chunk) => {\n            // OpenAI \n            if (chunk.choices?.[0]?.delta?.content) {\n                return chunk.choices[0].delta.content;\n            }\n            // Claude \n            if (chunk.delta?.text) {\n                return chunk.delta.text;\n            }\n            // \n            if (typeof chunk.content === 'string') {\n                return chunk.content;\n            }\n            if (typeof chunk.text === 'string') {\n                return chunk.text;\n            }\n            if (typeof chunk.response === 'string') {\n                return chunk.response;\n            }\n            return null;\n        };\n        // \n        const generateWithStreaming = async (requestPayload, progressRef) => {\n            const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n            const response = await fetch(apiUrl, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: `Bearer ${settings.value.api_key}`,\n                },\n                body: JSON.stringify(requestPayload),\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                throw new Error(`${response.status} ${response.statusText}\\n${errorText.slice(0, 400)}`);\n            }\n            if (!response.body) {\n                throw new Error(' API ');\n            }\n            const reader = response.body.getReader();\n            const decoder = new TextDecoder('utf-8');\n            let buffer = '';\n            let done = false;\n            let result = '';\n            progressRef.value = 0;\n            const processLine = (line) => {\n                const trimmed = line.trim();\n                if (!trimmed) {\n                    return false;\n                }\n                if (trimmed === 'data: [DONE]' || trimmed === '[DONE]') {\n                    return true;\n                }\n                const payloadText = trimmed.startsWith('data:') ? trimmed.slice(5).trim() : trimmed;\n                if (!payloadText || payloadText === '[DONE]') {\n                    return false;\n                }\n                try {\n                    const payloadJson = JSON.parse(payloadText);\n                    const deltaText = extractStreamContent(payloadJson);\n                    if (deltaText) {\n                        result += deltaText;\n                        progressRef.value = Math.min(progressRef.value + 2, 98);\n                    }\n                }\n                catch (parseError) {\n                    console.warn(':', payloadText.slice(0, 100), parseError);\n                }\n                return false;\n            };\n            while (!done) {\n                const { value, done: readerDone } = await reader.read();\n                if (value) {\n                    buffer += decoder.decode(value, { stream: true });\n                    const lines = buffer.split('\\n');\n                    buffer = lines.pop() ?? '';\n                    for (const line of lines) {\n                        if (processLine(line)) {\n                            done = true;\n                            break;\n                        }\n                    }\n                }\n                if (readerDone) {\n                    done = true;\n                }\n            }\n            if (buffer && !done) {\n                processLine(buffer);\n            }\n            progressRef.value = 100;\n            return result;\n        };\n        // ====================  ====================\n        // \n        const handleGenerateWorldbookEntry = async () => {\n            if (!worldbookDescription.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isGeneratingWorldbook.value = true;\n                worldbookProgressPercent.value = 0;\n                window.toastr.info('AI...', '', { timeOut: 15000 });\n                const requestPayload = {\n                    model: settings.value.model || 'gpt-3.5-turbo',\n                    max_tokens: settings.value.max_tokens || 4000,\n                    temperature: 0.7,\n                    stream: enableWorldbookStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: ` SillyTavern  JSON \n\n****\n\\`\\`\\`typescript\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selective\",  // \"constant\"(-)  \"selective\"(-)\n    \"keys\": [\"1\", \"2\"],  // \n    \"keys_secondary\": {\n      \"logic\": \"and_any\",  // \"and_any\" | \"and_all\" | \"not_all\" | \"not_any\"\n      \"keys\": []  // \n    },\n    \"scan_depth\": \"same_as_global\"  //  10\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",  // : \"after_character_definition\" | \"at_depth\"\n    \"role\": \"system\",  // \"system\" | \"assistant\" | \"user\"\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"\",\n  \"probability\": 100,  //  100\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\\`\\`\\`\n\n****\n1. ** (name)**\n2. ** (strategy.type)**\n   -  \"selective\" ()\n   -  \"constant\" ()\n3. ** (strategy.keys)**\n   - \n   - \n   -  3-6 \n4. ** (content)**\n   - ****\n   - \n   - \n   - ** content **\n   - ****\n5. ** (position.type)**\n   -  \"after_character_definition\"\n   -  \"at_depth\" \n6. ****\n\n** 1**\n\"16\"\n\n\\`\\`\\`json\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selective\",\n    \"keys\": [\"\", \"\", \"\"],\n    \"keys_secondary\": { \"logic\": \"and_any\", \"keys\": [] },\n    \"scan_depth\": \"same_as_global\"\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",\n    \"role\": \"system\",\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"16\",\n  \"probability\": 100,\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\\`\\`\\`\n\n** 2**\n\"\"\n\n\\`\\`\\`json\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selective\",\n    \"keys\": [\"\", \"\", \"\", \"\"],\n    \"keys_secondary\": { \"logic\": \"and_any\", \"keys\": [] },\n    \"scan_depth\": \"same_as_global\"\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",\n    \"role\": \"system\",\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"\",\n  \"probability\": 100,\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\\`\\`\\`\n\n****\n-  JSON \n-  JSON \n- **content **\n-  content \n-  strategy.type`,\n                        },\n                        {\n                            role: 'user',\n                            content: worldbookDescription.value,\n                        },\n                    ],\n                };\n                let generatedText;\n                if (enableWorldbookStreaming.value) {\n                    // \n                    generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    generatedText = data.choices[0].message.content.trim();\n                    worldbookProgressPercent.value = 100;\n                }\n                //  JSON\n                try {\n                    //  JSON \n                    const jsonMatch = generatedText.match(/```(?:json)?\\s*([\\s\\S]*?)```/) || [null, generatedText];\n                    const jsonText = jsonMatch[1] || generatedText;\n                    const parsedEntry = JSON.parse(jsonText);\n                    worldbookEntryOutput.value = parsedEntry;\n                    saveToolsDataImmediate(); // \n                    window.toastr.success('');\n                }\n                catch (parseError) {\n                    console.error('JSON :', parseError);\n                    console.log(':', generatedText);\n                    window.toastr.error('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isGeneratingWorldbook.value = false;\n                worldbookProgressPercent.value = 0;\n            }\n        };\n        // \n        const clearWorldbookForm = () => {\n            worldbookDescription.value = '';\n            worldbookEntryOutput.value = null;\n            selectedWorldbook.value = '';\n            worldbookModifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // \n        const handleInsertEntry = async () => {\n            if (!selectedWorldbook.value) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!worldbookEntryOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isInsertingEntry.value = true;\n                window.toastr.info(`${selectedWorldbook.value}...`);\n                //  createWorldbookEntries \n                await createWorldbookEntries(selectedWorldbook.value, [worldbookEntryOutput.value], { render: 'immediate' });\n                window.toastr.success(` ${selectedWorldbook.value}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isInsertingEntry.value = false;\n            }\n        };\n        //  JSON\n        const copyWorldbookEntry = () => {\n            if (!worldbookEntryOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            const jsonText = JSON.stringify(worldbookEntryOutput.value, null, 2);\n            copyToClipboard(jsonText, ' JSON ');\n        };\n        // \n        const handleModifyWorldbookEntry = async () => {\n            if (!worldbookModifyRequest.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!worldbookEntryOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isModifyingWorldbook.value = true;\n                worldbookProgressPercent.value = 0;\n                window.toastr.info('AI...');\n                const requestPayload = {\n                    model: settings.value.model || 'gpt-3.5-turbo',\n                    max_tokens: settings.value.max_tokens || 4000,\n                    temperature: 0.7,\n                    stream: enableWorldbookStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: ` JSON \n\n****\n1.  JSON \n2. \n3. \n4. \n5.  JSON\n6. \n\n****\n-  (content)\n-  (keys)\n-  (strategy.type) \n-  JSON \n\n JSON `,\n                        },\n                        {\n                            role: 'user',\n                            content: `\n\n${JSON.stringify(worldbookEntryOutput.value, null, 2)}\n\n---\n\n\n${worldbookModifyRequest.value}`,\n                        },\n                    ],\n                };\n                let generatedText;\n                if (enableWorldbookStreaming.value) {\n                    // \n                    generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    generatedText = data.choices[0].message.content.trim();\n                    worldbookProgressPercent.value = 100;\n                }\n                //  JSON\n                try {\n                    //  JSON \n                    const jsonMatch = generatedText.match(/```(?:json)?\\s*([\\s\\S]*?)```/) || [null, generatedText];\n                    const jsonText = jsonMatch[1] || generatedText;\n                    const parsedEntry = JSON.parse(jsonText);\n                    worldbookEntryOutput.value = parsedEntry;\n                    worldbookModifyRequest.value = ''; // \n                    saveToolsDataImmediate(); // \n                    window.toastr.success('');\n                }\n                catch (parseError) {\n                    console.error('JSON :', parseError);\n                    console.log(':', generatedText);\n                    window.toastr.error('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isModifyingWorldbook.value = false;\n                worldbookProgressPercent.value = 0;\n            }\n        };\n        // \n        const clearWorldbookModifyRequest = () => {\n            worldbookModifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // ====================  ====================\n        // \n        const loadWorldbookEntries = async () => {\n            if (!selectedViewerWorldbook.value) {\n                worldbookEntries.value = [];\n                return;\n            }\n            try {\n                const worldbook = await getWorldbook(selectedViewerWorldbook.value);\n                if (worldbook && Array.isArray(worldbook) && worldbook.length > 0) {\n                    worldbookEntries.value = worldbook;\n                    console.log(`  \"${selectedViewerWorldbook.value}\"  ${worldbookEntries.value.length} `);\n                    window.toastr.success(` ${worldbookEntries.value.length} `);\n                }\n                else {\n                    worldbookEntries.value = [];\n                    window.toastr.info('');\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error('' + error.message);\n                worldbookEntries.value = [];\n            }\n        };\n        // \n        const filteredWorldbookEntries = computed(() => {\n            let entries = [...worldbookEntries.value];\n            // \n            if (viewerSearchQuery.value.trim()) {\n                const query = viewerSearchQuery.value.toLowerCase();\n                entries = entries.filter(entry => {\n                    const nameMatch = entry.name?.toLowerCase().includes(query);\n                    const contentMatch = entry.content?.toLowerCase().includes(query);\n                    const keysMatch = entry.strategy?.keys?.some(key => {\n                        if (typeof key === 'string') {\n                            return key.toLowerCase().includes(query);\n                        }\n                        else if (key instanceof RegExp) {\n                            return key.toString().toLowerCase().includes(query);\n                        }\n                        return false;\n                    });\n                    return nameMatch || contentMatch || keysMatch;\n                });\n            }\n            // \n            if (viewerSortBy.value === 'enabled') {\n                entries = entries.filter(entry => entry.enabled);\n            }\n            else if (viewerSortBy.value === 'disabled') {\n                entries = entries.filter(entry => !entry.enabled);\n            }\n            return entries;\n        });\n        // \n        const toggleEntryExpanded = (index) => {\n            const current = entryExpandedState.value.get(index) || false;\n            entryExpandedState.value.set(index, !current);\n        };\n        // \n        const isEntryExpanded = (index) => {\n            return entryExpandedState.value.get(index) || false;\n        };\n        // \n        const editWorldbookEntry = (entry) => {\n            try {\n                // \n                editingEntry.value = {\n                    uid: entry.uid,\n                    name: entry.name || '',\n                    enabled: entry.enabled ?? true,\n                    content: entry.content || '',\n                    strategy: {\n                        type: entry.strategy?.type || 'selective',\n                        keys: [...(entry.strategy?.keys || [])],\n                        keys_secondary: {\n                            logic: entry.strategy?.keys_secondary?.logic || 'and_any',\n                            keys: [...(entry.strategy?.keys_secondary?.keys || [])],\n                        },\n                        scan_depth: entry.strategy?.scan_depth || 'same_as_global',\n                    },\n                    position: entry.position\n                        ? {\n                            type: entry.position.type || 'before_character_definition',\n                            role: entry.position.role || 'system',\n                            depth: entry.position.depth ?? 0,\n                            order: entry.position.order ?? 0,\n                        }\n                        : {\n                            type: 'before_character_definition',\n                            role: 'system',\n                            depth: 0,\n                            order: 0,\n                        },\n                    probability: entry.probability ?? 100,\n                    recursion: entry.recursion\n                        ? {\n                            prevent_incoming: entry.recursion.prevent_incoming ?? false,\n                            prevent_outgoing: entry.recursion.prevent_outgoing ?? false,\n                            delay_until: entry.recursion.delay_until ?? null,\n                        }\n                        : {\n                            prevent_incoming: false,\n                            prevent_outgoing: false,\n                            delay_until: null,\n                        },\n                    effect: entry.effect\n                        ? {\n                            sticky: entry.effect.sticky ?? null,\n                            cooldown: entry.effect.cooldown ?? null,\n                            delay: entry.effect.delay ?? null,\n                        }\n                        : {\n                            sticky: null,\n                            cooldown: null,\n                            delay: null,\n                        },\n                };\n                editingEntryUid.value = entry.uid;\n                showEditDialog.value = true;\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const saveEditedEntry = async () => {\n            if (!editingEntry.value.name?.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!editingEntryUid.value) {\n                window.toastr.error('ID');\n                return;\n            }\n            try {\n                //  updateWorldbookWith API \n                const updatedWorldbook = await updateWorldbookWith(selectedViewerWorldbook.value, worldbook => {\n                    const entryIndex = worldbook.findIndex(e => e.uid === editingEntryUid.value);\n                    if (entryIndex !== -1) {\n                        // \n                        worldbook[entryIndex] = {\n                            ...worldbook[entryIndex],\n                            ...editingEntry.value,\n                            uid: editingEntryUid.value, //  UID \n                        };\n                    }\n                    return worldbook;\n                });\n                // \n                worldbookEntries.value = updatedWorldbook;\n                // \n                showEditDialog.value = false;\n                editingEntry.value = {};\n                editingEntryUid.value = null;\n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const deleteWorldbookEntry = async (entry) => {\n            if (!confirm(` \"${entry.name}\" `)) {\n                return;\n            }\n            try {\n                //  deleteWorldbookEntries API\n                const { worldbook } = await deleteWorldbookEntries(selectedViewerWorldbook.value, e => e.uid === entry.uid);\n                // \n                worldbookEntries.value = worldbook;\n                window.toastr.success(` \"${entry.name}\"`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                        onClick: _cache[0] || (_cache[0] = ($event) => (toggleToolExpanded('antiCliche'))),\n                        onMouseenter: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                        onMouseleave: _cache[2] || (_cache[2] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                    }, [\n                        _cache[51] || (_cache[51] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-broom\",\n                                style: { \"color\": \"#ff6b6b\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    (isToolExpanded('antiCliche'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _cache[62] || (_cache[62] = _createStaticVNode(\"<div class=\\\"tool-instructions\\\" data-v-14fcd832><p style=\\\"margin:0 0 8px 0;color:#ccc;font-size:12px;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right:6px;color:#17a2b8;\\\" data-v-14fcd832></i> //<strong style=\\\"color:#10b981;\\\" data-v-14fcd832></strong> </p><p style=\\\"margin:0 0 8px 0;color:#ffa500;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #ffa500;\\\" data-v-14fcd832>  <strong data-v-14fcd832></strong> </p><p style=\\\"margin:0;color:#10b981;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #10b981;\\\" data-v-14fcd832>  <strong data-v-14fcd832></strong> -  </p></div>\", 1)),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[52] || (_cache[52] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((antiClicheInput).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, antiClicheInput.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"label\", _hoisted_6, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((enableAntiClicheStreaming).value = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, enableAntiClicheStreaming.value]\n                                    ]),\n                                    _cache[53] || (_cache[53] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (isProcessingAntiCliche.value && antiClicheProgressPercent.value > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"progress-fill\",\n                                            style: _normalizeStyle({\n                                                width: antiClicheProgressPercent.value + '%',\n                                                height: '100%',\n                                                background: 'linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%)',\n                                                backgroundSize: '200% 100%',\n                                                animation: enableAntiClicheStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                transition: 'width 0.3s ease',\n                                            })\n                                        }, null, 4 /* STYLE */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_9, \" ... \" + _toDisplayString(antiClicheProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"div\", _hoisted_10, [\n                                _createElementVNode(\"button\", {\n                                    class: \"process-button\",\n                                    disabled: isProcessingAntiCliche.value || !antiClicheInput.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleAntiClicheProcess\n                                }, [\n                                    _cache[54] || (_cache[54] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[55] || (_cache[55] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isProcessingAntiCliche.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_11),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearAntiClicheForm\n                                }, [...(_cache[56] || (_cache[56] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (antiClicheOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                                    _cache[61] || (_cache[61] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_13, _toDisplayString(antiClicheOutput.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"output-actions\",\n                                        style: { \"margin-top\": \"12px\", \"display\": \"flex\", \"gap\": \"12px\" }\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"copy-button\",\n                                            style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                            onClick: copyAntiClicheResult\n                                        }, [...(_cache[57] || (_cache[57] = [\n                                                _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-copy\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        _cache[60] || (_cache[60] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-wand-magic-sparkles\",\n                                                style: { \"margin-right\": \"6px\", \"color\": \"#ffc107\" }\n                                            }),\n                                            _createTextVNode(\" AI  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_15, [\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((antiClicheModifyRequest).value = $event)),\n                                                placeholder: \"...\",\n                                                style: { \"width\": \"100%\", \"height\": \"80px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, antiClicheModifyRequest.value]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_16, [\n                                            _createElementVNode(\"button\", {\n                                                disabled: isModifyingAntiCliche.value || !antiClicheModifyRequest.value.trim(),\n                                                style: _normalizeStyle([{ \"flex\": \"1\", \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#1a1a1a\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 193, 7, 0.3)\", \"opacity\": \"1\" }, {\n                                                        opacity: isModifyingAntiCliche.value || !antiClicheModifyRequest.value.trim() ? 0.5 : 1,\n                                                        cursor: isModifyingAntiCliche.value || !antiClicheModifyRequest.value.trim() ? 'not-allowed' : 'pointer',\n                                                    }]),\n                                                onClick: handleModifyAntiCliche\n                                            }, [\n                                                _cache[58] || (_cache[58] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                                    style: { \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isModifyingAntiCliche.value ? '...' : 'AI '), 1 /* TEXT */)\n                                            ], 12 /* STYLE, PROPS */, _hoisted_17),\n                                            _createElementVNode(\"button\", {\n                                                disabled: !antiClicheModifyRequest.value.trim(),\n                                                style: _normalizeStyle([{ \"padding\": \"10px 20px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" }, {\n                                                        opacity: !antiClicheModifyRequest.value.trim() ? 0.5 : 1,\n                                                        cursor: !antiClicheModifyRequest.value.trim() ? 'not-allowed' : 'pointer',\n                                                    }]),\n                                                onClick: clearAntiClicheModifyRequest\n                                            }, [...(_cache[59] || (_cache[59] = [\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-eraser\",\n                                                        style: { \"margin-right\": \"6px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 12 /* STYLE, PROPS */, _hoisted_18)\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_19, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                        onClick: _cache[6] || (_cache[6] = ($event) => (toggleToolExpanded('worldbookEntry'))),\n                        onMouseenter: _cache[7] || (_cache[7] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                        onMouseleave: _cache[8] || (_cache[8] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                    }, [\n                        _cache[63] || (_cache[63] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-book-atlas\",\n                                style: { \"color\": \"#ffc107\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('worldbookEntry') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    (isToolExpanded('worldbookEntry'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                            _cache[85] || (_cache[85] = _createElementVNode(\"div\", { class: \"tool-instructions\" }, [\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#ccc\", \"font-size\": \"12px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-info-circle\",\n                                        style: { \"margin-right\": \"6px\", \"color\": \"#ffc107\" }\n                                    }),\n                                    _createTextVNode(\" AI  \")\n                                ]),\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#4a9eff\", \"font-size\": \"11px\", \"background\": \"#1a1a1a\", \"padding\": \"6px\", \"border-radius\": \"4px\", \"border-left\": \"3px solid #ffc107\" } }, \"  \\\"\\\" \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _cache[64] || (_cache[64] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((worldbookDescription).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, worldbookDescription.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"label\", _hoisted_23, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((enableWorldbookStreaming).value = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, enableWorldbookStreaming.value]\n                                    ]),\n                                    _cache[65] || (_cache[65] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (isGeneratingWorldbook.value && worldbookProgressPercent.value > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                    _createElementVNode(\"div\", _hoisted_25, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"progress-fill\",\n                                            style: _normalizeStyle({\n                                                width: worldbookProgressPercent.value + '%',\n                                                height: '100%',\n                                                background: 'linear-gradient(90deg, #ffc107 0%, #ff9800 50%, #ffc107 100%)',\n                                                backgroundSize: '200% 100%',\n                                                animation: enableWorldbookStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                transition: 'width 0.3s ease',\n                                            })\n                                        }, null, 4 /* STYLE */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_26, \" ... \" + _toDisplayString(worldbookProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-button\",\n                                    disabled: isGeneratingWorldbook.value || !worldbookDescription.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 193, 7, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleGenerateWorldbookEntry\n                                }, [\n                                    _cache[66] || (_cache[66] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[67] || (_cache[67] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGeneratingWorldbook.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_28),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearWorldbookForm\n                                }, [...(_cache[68] || (_cache[68] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (worldbookEntryOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [\n                                    _cache[84] || (_cache[84] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_30, [\n                                        _createElementVNode(\"div\", _hoisted_31, [\n                                            _cache[69] || (_cache[69] = _createElementVNode(\"label\", { style: { \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"4px\" } }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_32, _toDisplayString(worldbookEntryOutput.value.name || ''), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_33, [\n                                            _cache[70] || (_cache[70] = _createElementVNode(\"label\", { style: { \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"4px\" } }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_34, _toDisplayString(worldbookEntryOutput.value.strategy?.keys?.join(', ') || ''), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_35, [\n                                            _cache[71] || (_cache[71] = _createElementVNode(\"label\", { style: { \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"4px\" } }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_36, _toDisplayString(worldbookEntryOutput.value.content), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_37, [\n                                            _cache[72] || (_cache[72] = _createElementVNode(\"label\", { style: { \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"4px\" } }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_38, _toDisplayString(worldbookEntryOutput.value.strategy?.type === 'constant'\n                                                ? '  ()'\n                                                : worldbookEntryOutput.value.strategy?.type === 'selective'\n                                                    ? '  ()'\n                                                    : ' '), 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_39, [\n                                        _cache[77] || (_cache[77] = _createStaticVNode(\"<h5 style=\\\"margin:0 0 12px 0;color:#fff;font-size:14px;font-weight:600;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-14fcd832></i>  </h5><div class=\\\"modify-instructions\\\" style=\\\"background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:10px;margin-bottom:15px;\\\" data-v-14fcd832><p style=\\\"margin:0 0 6px 0;color:#ccc;font-size:12px;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-14fcd832></i> AI&quot;&quot;&quot;&quot;&quot;&quot; </p><p style=\\\"margin:0;color:#ffa500;font-size:11px;\\\" data-v-14fcd832>  JSON </p></div>\", 2)),\n                                        _createElementVNode(\"div\", _hoisted_40, [\n                                            _cache[73] || (_cache[73] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((worldbookModifyRequest).value = $event)),\n                                                placeholder: \"...\",\n                                                style: { \"width\": \"100%\", \"height\": \"80px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, worldbookModifyRequest.value]\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (isModifyingWorldbook.value && worldbookProgressPercent.value > 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                                _createElementVNode(\"div\", _hoisted_42, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"progress-fill\",\n                                                        style: _normalizeStyle({\n                                                            width: worldbookProgressPercent.value + '%',\n                                                            height: '100%',\n                                                            background: 'linear-gradient(90deg, #ffa500 0%, #ff8c00 50%, #ffa500 100%)',\n                                                            backgroundSize: '200% 100%',\n                                                            animation: enableWorldbookStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                            transition: 'width 0.3s ease',\n                                                        })\n                                                    }, null, 4 /* STYLE */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_43, \" ... \" + _toDisplayString(worldbookProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"div\", _hoisted_44, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"modify-button\",\n                                                disabled: isModifyingWorldbook.value || !worldbookModifyRequest.value.trim(),\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ffa500 0%, #ff8c00 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 165, 0, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: handleModifyWorldbookEntry\n                                            }, [\n                                                _cache[74] || (_cache[74] = _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */)),\n                                                _cache[75] || (_cache[75] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                                    style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isModifyingWorldbook.value ? '...' : 'AI'), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_45),\n                                            _createElementVNode(\"button\", {\n                                                class: \"clear-modify-button\",\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #6c757d 0%, #5a6268 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(108, 117, 125, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: clearWorldbookModifyRequest\n                                            }, [...(_cache[76] || (_cache[76] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-eraser\",\n                                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_46, [\n                                        _cache[83] || (_cache[83] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-file-import\",\n                                                style: { \"margin-right\": \"6px\", \"color\": \"#17a2b8\" }\n                                            }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_47, [\n                                            _cache[79] || (_cache[79] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((selectedWorldbook).value = $event)),\n                                                style: { \"width\": \"100%\", \"padding\": \"10px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                            }, [\n                                                _cache[78] || (_cache[78] = _createElementVNode(\"option\", {\n                                                    value: \"\",\n                                                    disabled: \"\"\n                                                }, \"\", -1 /* CACHED */)),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableWorldbooks.value, (wb) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: wb,\n                                                        value: wb\n                                                    }, _toDisplayString(wb), 9 /* TEXT, PROPS */, _hoisted_48));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vModelSelect, selectedWorldbook.value]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_49, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"insert-button\",\n                                                disabled: !selectedWorldbook.value || isInsertingEntry.value,\n                                                style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: handleInsertEntry\n                                            }, [\n                                                _cache[80] || (_cache[80] = _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */)),\n                                                _cache[81] || (_cache[81] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-plus-circle\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isInsertingEntry.value ? '...' : ''), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_50),\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-button\",\n                                                style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #17a2b8 0%, #138496 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(23, 162, 184, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: copyWorldbookEntry\n                                            }, [...(_cache[82] || (_cache[82] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-copy\",\n                                                        style: { \"font-size\": \"14px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  JSON \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_51, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header viewer-header\",\n                        style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                        onClick: _cache[13] || (_cache[13] = ($event) => (toggleToolExpanded('worldbookViewer'))),\n                        onMouseenter: _cache[14] || (_cache[14] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                        onMouseleave: _cache[15] || (_cache[15] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                    }, [\n                        _cache[86] || (_cache[86] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-list\",\n                                style: { \"color\": \"#20c997\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('worldbookViewer') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#888\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s ease\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    (isToolExpanded('worldbookViewer'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_52, [\n                            _cache[97] || (_cache[97] = _createElementVNode(\"div\", {\n                                class: \"tool-instructions\",\n                                style: { \"background\": \"rgba(32, 201, 151, 0.1)\", \"border-left\": \"3px solid #20c997\", \"padding\": \"12px 15px\", \"border-radius\": \"6px\", \"margin-bottom\": \"20px\" }\n                            }, [\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#a0f0e0\", \"font-size\": \"13px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-info-circle\",\n                                        style: { \"color\": \"#20c997\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ])\n                            ], -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_53, [\n                                _cache[88] || (_cache[88] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"10px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\", \"letter-spacing\": \"0.3px\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event) => ((selectedViewerWorldbook).value = $event)),\n                                    style: { \"width\": \"100%\", \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"inset 0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                    onChange: loadWorldbookEntries,\n                                    onFocus: _cache[17] || (_cache[17] = (e) => (e.target.style.borderColor = '#20c997')),\n                                    onBlur: _cache[18] || (_cache[18] = (e) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)'))\n                                }, [\n                                    _cache[87] || (_cache[87] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableWorldbooks.value, (wb) => {\n                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                            key: wb,\n                                            value: wb\n                                        }, _toDisplayString(wb), 9 /* TEXT, PROPS */, _hoisted_54));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelSelect, selectedViewerWorldbook.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (selectedViewerWorldbook.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_55, [\n                                    _cache[89] || (_cache[89] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"10px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\", \"letter-spacing\": \"0.3px\" } }, \"  \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => ((viewerSearchQuery).value = $event)),\n                                        type: \"text\",\n                                        placeholder: \"...\",\n                                        style: { \"width\": \"100%\", \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"inset 0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                        onFocus: _cache[20] || (_cache[20] = (e) => (e.target.style.borderColor = '#20c997')),\n                                        onBlur: _cache[21] || (_cache[21] = (e) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)'))\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, viewerSearchQuery.value]\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (selectedViewerWorldbook.value && worldbookEntries.value.length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_56, [\n                                    _createElementVNode(\"button\", {\n                                        style: _normalizeStyle({\n                                            padding: '8px 16px',\n                                            background: viewerSortBy.value === 'original' ? '#20c997' : '#444',\n                                            border: 'none',\n                                            borderRadius: '6px',\n                                            color: 'white',\n                                            fontSize: '12px',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s',\n                                        }),\n                                        onClick: _cache[22] || (_cache[22] = ($event) => (viewerSortBy.value = 'original'))\n                                    }, \"  \", 4 /* STYLE */),\n                                    _createElementVNode(\"button\", {\n                                        style: _normalizeStyle({\n                                            padding: '8px 16px',\n                                            background: viewerSortBy.value === 'enabled' ? '#28a745' : '#444',\n                                            border: 'none',\n                                            borderRadius: '6px',\n                                            color: 'white',\n                                            fontSize: '12px',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s',\n                                        }),\n                                        onClick: _cache[23] || (_cache[23] = ($event) => (viewerSortBy.value = 'enabled'))\n                                    }, \"   \", 4 /* STYLE */),\n                                    _createElementVNode(\"button\", {\n                                        style: _normalizeStyle({\n                                            padding: '8px 16px',\n                                            background: viewerSortBy.value === 'disabled' ? '#dc3545' : '#444',\n                                            border: 'none',\n                                            borderRadius: '6px',\n                                            color: 'white',\n                                            fontSize: '12px',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s',\n                                        }),\n                                        onClick: _cache[24] || (_cache[24] = ($event) => (viewerSortBy.value = 'disabled'))\n                                    }, \"   \", 4 /* STYLE */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (selectedViewerWorldbook.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_57, [\n                                    (_unref(filteredWorldbookEntries).length > 0)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_58, \"  \" + _toDisplayString(_unref(filteredWorldbookEntries).length) + \"  \", 1 /* TEXT */))\n                                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_59, \"\"))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (_unref(filteredWorldbookEntries).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_60, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredWorldbookEntries), (entry, index) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: index,\n                                            style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                                        }, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", {\n                                                style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"flex-start\", \"cursor\": \"pointer\", \"user-select\": \"none\" },\n                                                onClick: ($event) => (toggleEntryExpanded(index))\n                                            }, [\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_62, [\n                                                    _createCommentVNode(\"  +  \"),\n                                                    _createElementVNode(\"div\", _hoisted_63, [\n                                                        (entry.strategy?.type === 'constant')\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_64, \"\"))\n                                                            : (entry.strategy?.type === 'selective')\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_65, \"\"))\n                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_66, \"\")),\n                                                        _createElementVNode(\"span\", _hoisted_67, _toDisplayString(entry.name || '()'), 1 /* TEXT */)\n                                                    ]),\n                                                    _createCommentVNode(\"  |  |  \"),\n                                                    _createElementVNode(\"div\", _hoisted_68, [\n                                                        (entry.strategy?.keys && entry.strategy.keys.length > 0)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_69, \" : \" + _toDisplayString(entry.strategy.keys.map((k) => (typeof k === 'string' ? k : String(k))).join(', ')), 1 /* TEXT */))\n                                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_70, \": ()\")),\n                                                        (entry.position?.order && entry.position.order !== 0)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_71, [\n                                                                _cache[90] || (_cache[90] = _createElementVNode(\"span\", { style: { \"color\": \"#666\" } }, \" | \", -1 /* CACHED */)),\n                                                                _createTextVNode(\" : \" + _toDisplayString(entry.position.order), 1 /* TEXT */)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        (entry.position?.type === 'at_depth' && entry.position.depth && entry.position.depth !== 0)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_72, [\n                                                                _cache[91] || (_cache[91] = _createElementVNode(\"span\", { style: { \"color\": \"#666\" } }, \" | \", -1 /* CACHED */)),\n                                                                _createTextVNode(\" : \" + _toDisplayString(entry.position.depth), 1 /* TEXT */)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_73, _toDisplayString(entry.content\n                                                        ? entry.content.length > 50\n                                                            ? entry.content.substring(0, 50) + '...'\n                                                            : entry.content\n                                                        : '()'), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(isEntryExpanded(index) ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                                                    style: { \"color\": \"#888\", \"font-size\": \"12px\", \"margin-top\": \"2px\" }\n                                                }, null, 2 /* CLASS */)\n                                            ], 8 /* PROPS */, _hoisted_61),\n                                            _createCommentVNode(\"  \"),\n                                            (isEntryExpanded(index))\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_74, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_75, [\n                                                        _cache[92] || (_cache[92] = _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"6px\" } }, \"   \", -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_76, [\n                                                            (entry.strategy?.type === 'constant')\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_77, \"  -  \"))\n                                                                : (entry.strategy?.type === 'selective')\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_78, \"  -  \"))\n                                                                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_79, \"   \"))\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_80, [\n                                                        _createElementVNode(\"span\", _hoisted_81, [\n                                                            _cache[93] || (_cache[93] = _createTextVNode(\"   \", -1 /* CACHED */)),\n                                                            (entry.strategy?.type === 'constant')\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_82, \" () \"))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_83, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(entry.strategy?.keys || [], (key, ki) => {\n                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                    key: ki,\n                                                                    style: { \"padding\": \"4px 10px\", \"background\": \"#667eea\", \"color\": \"white\", \"border-radius\": \"12px\", \"font-size\": \"11px\" }\n                                                                }, _toDisplayString(typeof key === 'string' ? key : String(key)), 1 /* TEXT */));\n                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                            (!entry.strategy?.keys || entry.strategy.keys.length === 0)\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_84, _toDisplayString(entry.strategy?.type === 'constant' ? '()' : '()'), 1 /* TEXT */))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_85, [\n                                                        _cache[94] || (_cache[94] = _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"6px\" } }, \"   \", -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_86, _toDisplayString(entry.content || '()'), 1 /* TEXT */)\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_87, [\n                                                        _createElementVNode(\"button\", {\n                                                            style: { \"padding\": \"8px 16px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                            onClick: ($event) => (editWorldbookEntry(entry))\n                                                        }, [...(_cache[95] || (_cache[95] = [\n                                                                _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_88),\n                                                        _createElementVNode(\"button\", {\n                                                            style: { \"padding\": \"8px 16px\", \"background\": \"#ff6b6b\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                            onClick: ($event) => (deleteWorldbookEntry(entry))\n                                                        }, [...(_cache[96] || (_cache[96] = [\n                                                                _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_89)\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                (showEditDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"backdrop-filter\": \"blur(4px)\" },\n                        onClick: _cache[44] || (_cache[44] = _withModifiers(($event) => (showEditDialog.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_90, [\n                            _createElementVNode(\"div\", _hoisted_91, [\n                                _cache[99] || (_cache[99] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-edit\",\n                                        style: { \"margin-right\": \"8px\", \"color\": \"#4a9eff\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"background\": \"transparent\", \"border\": \"none\", \"color\": \"#888\", \"font-size\": \"20px\", \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"transition\": \"color 0.2s\" },\n                                    onClick: _cache[25] || (_cache[25] = ($event) => (showEditDialog.value = false)),\n                                    onMouseenter: _cache[26] || (_cache[26] = (e) => (e.target.style.color = '#fff')),\n                                    onMouseleave: _cache[27] || (_cache[27] = (e) => (e.target.style.color = '#888'))\n                                }, [...(_cache[98] || (_cache[98] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_92, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[100] || (_cache[100] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event) => ((editingEntry.value.name) = $event)),\n                                        type: \"text\",\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, editingEntry.value.name]\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_93, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        id: \"entry-enabled\",\n                                        \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event) => ((editingEntry.value.enabled) = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"width\": \"18px\", \"height\": \"18px\", \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, editingEntry.value.enabled]\n                                    ]),\n                                    _cache[101] || (_cache[101] = _createElementVNode(\"label\", {\n                                        for: \"entry-enabled\",\n                                        style: { \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"cursor\": \"pointer\" }\n                                    }, \"  \", -1 /* CACHED */))\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[102] || (_cache[102] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"input\", {\n                                        value: (editingEntry.value.strategy?.keys || []).map((k) => (typeof k === 'string' ? k : String(k))).join(','),\n                                        type: \"text\",\n                                        placeholder: \",Aria,,{{char}}\",\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" },\n                                        onInput: _cache[30] || (_cache[30] =\n                                            (e) => {\n                                                const keys = e.target.value\n                                                    .split(',')\n                                                    .filter((k) => k.trim())\n                                                    .map((k) => k.trim());\n                                                editingEntry.value.strategy = {\n                                                    ...editingEntry.value.strategy,\n                                                    keys: keys,\n                                                    keys_secondary: editingEntry.value.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\n                                                    scan_depth: editingEntry.value.strategy?.scan_depth || 'same_as_global',\n                                                    type: editingEntry.value.strategy?.type || 'selective',\n                                                };\n                                            })\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_94)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[104] || (_cache[104] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"select\", {\n                                        value: editingEntry.value.strategy?.type || 'selective',\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"cursor\": \"pointer\" },\n                                        onChange: _cache[31] || (_cache[31] =\n                                            (e) => (editingEntry.value.strategy = {\n                                                ...editingEntry.value.strategy,\n                                                type: e.target.value,\n                                                keys: editingEntry.value.strategy?.keys || [],\n                                                keys_secondary: editingEntry.value.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\n                                                scan_depth: editingEntry.value.strategy?.scan_depth || 'same_as_global',\n                                            }))\n                                    }, [...(_cache[103] || (_cache[103] = [\n                                            _createElementVNode(\"option\", { value: \"selective\" }, \" ()\", -1 /* CACHED */),\n                                            _createElementVNode(\"option\", { value: \"constant\" }, \" ()\", -1 /* CACHED */)\n                                        ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_95)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[106] || (_cache[106] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"select\", {\n                                        value: editingEntry.value.position?.type || 'before_character_definition',\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"cursor\": \"pointer\" },\n                                        onChange: _cache[32] || (_cache[32] =\n                                            (e) => (editingEntry.value.position = {\n                                                ...editingEntry.value.position,\n                                                type: e.target.value,\n                                                role: editingEntry.value.position?.role || 'system',\n                                                depth: editingEntry.value.position?.depth || 0,\n                                                order: editingEntry.value.position?.order || 0,\n                                            }))\n                                    }, [...(_cache[105] || (_cache[105] = [\n                                            _createStaticVNode(\"<option value=\\\"before_character_definition\\\" data-v-14fcd832></option><option value=\\\"after_character_definition\\\" data-v-14fcd832></option><option value=\\\"before_example_messages\\\" data-v-14fcd832></option><option value=\\\"after_example_messages\\\" data-v-14fcd832></option><option value=\\\"before_author_note\\\" data-v-14fcd832></option><option value=\\\"after_author_note\\\" data-v-14fcd832></option><option value=\\\"at_depth\\\" data-v-14fcd832></option>\", 7)\n                                        ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_96)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_97, [\n                                    _createElementVNode(\"div\", null, [\n                                        _cache[107] || (_cache[107] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                        _createElementVNode(\"input\", {\n                                            value: editingEntry.value.position?.depth || 0,\n                                            type: \"number\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" },\n                                            onInput: _cache[33] || (_cache[33] =\n                                                (e) => (editingEntry.value.position = {\n                                                    ...editingEntry.value.position,\n                                                    depth: Number(e.target.value) || 0,\n                                                    role: editingEntry.value.position?.role || 'system',\n                                                    order: editingEntry.value.position?.order || 0,\n                                                    type: editingEntry.value.position?.type || 'before_character_definition',\n                                                }))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_98)\n                                    ]),\n                                    _createElementVNode(\"div\", null, [\n                                        _cache[108] || (_cache[108] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                        _createElementVNode(\"input\", {\n                                            value: editingEntry.value.position?.order || 0,\n                                            type: \"number\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" },\n                                            onInput: _cache[34] || (_cache[34] =\n                                                (e) => (editingEntry.value.position = {\n                                                    ...editingEntry.value.position,\n                                                    order: Number(e.target.value) || 0,\n                                                    type: editingEntry.value.position?.type || 'before_character_definition',\n                                                    role: editingEntry.value.position?.role || 'system',\n                                                    depth: editingEntry.value.position?.depth || 0,\n                                                }))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_99)\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_100, [\n                                    _cache[112] || (_cache[112] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"12px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_101, [\n                                        _createElementVNode(\"label\", _hoisted_102, [\n                                            _createElementVNode(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: editingEntry.value.recursion?.prevent_incoming || false,\n                                                onChange: _cache[35] || (_cache[35] =\n                                                    (e) => (editingEntry.value.recursion = {\n                                                        ...editingEntry.value.recursion,\n                                                        prevent_incoming: e.target.checked,\n                                                        prevent_outgoing: editingEntry.value.recursion?.prevent_outgoing || false,\n                                                        delay_until: editingEntry.value.recursion?.delay_until || null,\n                                                    }))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_103),\n                                            _cache[109] || (_cache[109] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                        ]),\n                                        _createElementVNode(\"label\", _hoisted_104, [\n                                            _createElementVNode(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: editingEntry.value.recursion?.prevent_outgoing || false,\n                                                onChange: _cache[36] || (_cache[36] =\n                                                    (e) => (editingEntry.value.recursion = {\n                                                        ...editingEntry.value.recursion,\n                                                        prevent_outgoing: e.target.checked,\n                                                        prevent_incoming: editingEntry.value.recursion?.prevent_incoming || false,\n                                                        delay_until: editingEntry.value.recursion?.delay_until || null,\n                                                    }))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_105),\n                                            _cache[110] || (_cache[110] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                        ]),\n                                        _createElementVNode(\"div\", null, [\n                                            _cache[111] || (_cache[111] = _createElementVNode(\"label\", { style: { \"color\": \"#ccc\", \"font-size\": \"13px\", \"display\": \"block\", \"margin-bottom\": \"5px\" } }, \"  n  \", -1 /* CACHED */)),\n                                            _createElementVNode(\"input\", {\n                                                value: editingEntry.value.recursion?.delay_until || '',\n                                                type: \"number\",\n                                                placeholder: \"\",\n                                                style: { \"width\": \"100%\", \"padding\": \"8px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" },\n                                                onInput: _cache[37] || (_cache[37] =\n                                                    (e) => (editingEntry.value.recursion = {\n                                                        ...editingEntry.value.recursion,\n                                                        delay_until: e.target.value === '' ? null : Number(e.target.value),\n                                                        prevent_incoming: editingEntry.value.recursion?.prevent_incoming || false,\n                                                        prevent_outgoing: editingEntry.value.recursion?.prevent_outgoing || false,\n                                                    }))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_106)\n                                        ])\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[113] || (_cache[113] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[38] || (_cache[38] = ($event) => ((editingEntry.value.content) = $event)),\n                                        style: { \"width\": \"100%\", \"min-height\": \"200px\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, editingEntry.value.content]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_107, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"14px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                    onClick: _cache[39] || (_cache[39] = ($event) => (showEditDialog.value = false)),\n                                    onMouseenter: _cache[40] || (_cache[40] = (e) => (e.target.style.background = '#555')),\n                                    onMouseleave: _cache[41] || (_cache[41] = (e) => (e.target.style.background = '#444'))\n                                }, \"  \", 32 /* NEED_HYDRATION */),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                    onClick: saveEditedEntry,\n                                    onMouseenter: _cache[42] || (_cache[42] = (e) => (e.target.style.background = '#5ba8ff')),\n                                    onMouseleave: _cache[43] || (_cache[43] = (e) => (e.target.style.background = '#4a9eff'))\n                                }, [...(_cache[114] || (_cache[114] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-save\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_108, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                        onClick: _cache[45] || (_cache[45] = ($event) => (toggleToolExpanded('characterCard'))),\n                        onMouseenter: _cache[46] || (_cache[46] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                        onMouseleave: _cache[47] || (_cache[47] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                    }, [\n                        _cache[115] || (_cache[115] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-user-plus\",\n                                style: { \"color\": \"#17a2b8\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    (isToolExpanded('characterCard'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_109, [\n                            _cache[128] || (_cache[128] = _createStaticVNode(\"<div class=\\\"tool-instructions\\\" data-v-14fcd832><p style=\\\"margin:0 0 8px 0;color:#ccc;font-size:12px;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right:6px;color:#17a2b8;\\\" data-v-14fcd832></i> AIYAML  </p><p style=\\\"margin:0 0 6px 0;color:#4a9eff;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #17a2b8;\\\" data-v-14fcd832>   </p><p style=\\\"margin:0 0 6px 0;color:#ffa500;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #ffa500;\\\" data-v-14fcd832>  &quot;&quot;AI </p></div>\", 1)),\n                            _createElementVNode(\"div\", _hoisted_110, [\n                                _cache[116] || (_cache[116] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[48] || (_cache[48] = ($event) => ((characterDescription).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, characterDescription.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_111, [\n                                _createElementVNode(\"label\", _hoisted_112, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[49] || (_cache[49] = ($event) => ((enableCharacterStreaming).value = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, enableCharacterStreaming.value]\n                                    ]),\n                                    _cache[117] || (_cache[117] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (isGeneratingCharacter.value && characterProgressPercent.value > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_113, [\n                                    _createElementVNode(\"div\", _hoisted_114, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"progress-fill\",\n                                            style: _normalizeStyle({\n                                                width: characterProgressPercent.value + '%',\n                                                height: '100%',\n                                                background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\n                                                backgroundSize: '200% 100%',\n                                                animation: enableCharacterStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                transition: 'width 0.3s ease',\n                                            })\n                                        }, null, 4 /* STYLE */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_115, \" ... \" + _toDisplayString(characterProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"div\", _hoisted_116, [\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-button\",\n                                    disabled: isGeneratingCharacter.value || !characterDescription.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #17a2b8 0%, #138496 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(23, 162, 184, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleGenerateCharacterCard\n                                }, [\n                                    _cache[118] || (_cache[118] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[119] || (_cache[119] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGeneratingCharacter.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_117),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearCharacterForm\n                                }, [...(_cache[120] || (_cache[120] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (characterCardOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_118, [\n                                    _cache[127] || (_cache[127] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_119, _toDisplayString(characterCardOutput.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"output-actions\",\n                                        style: { \"margin-top\": \"12px\", \"display\": \"flex\", \"gap\": \"12px\" }\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"copy-button\",\n                                            style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                            onClick: copyCharacterCard\n                                        }, [...(_cache[121] || (_cache[121] = [\n                                                _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-copy\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_120, [\n                                        _cache[126] || (_cache[126] = _createStaticVNode(\"<h5 style=\\\"margin:0 0 12px 0;color:#fff;font-size:14px;font-weight:600;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-14fcd832></i>  </h5><div class=\\\"modify-instructions\\\" style=\\\"background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:10px;margin-bottom:15px;\\\" data-v-14fcd832><p style=\\\"margin:0 0 6px 0;color:#ccc;font-size:12px;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-14fcd832></i> AI&quot;&quot;&quot;&quot;&quot;&quot; </p><p style=\\\"margin:0;color:#ffa500;font-size:11px;\\\" data-v-14fcd832>  YAML </p></div>\", 2)),\n                                        _createElementVNode(\"div\", _hoisted_121, [\n                                            _cache[122] || (_cache[122] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": _cache[50] || (_cache[50] = ($event) => ((modifyRequest).value = $event)),\n                                                placeholder: \"...\",\n                                                style: { \"width\": \"100%\", \"height\": \"80px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, modifyRequest.value]\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (isModifyingCharacter.value && characterProgressPercent.value > 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_122, [\n                                                _createElementVNode(\"div\", _hoisted_123, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"progress-fill\",\n                                                        style: _normalizeStyle({\n                                                            width: characterProgressPercent.value + '%',\n                                                            height: '100%',\n                                                            background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\n                                                            backgroundSize: '200% 100%',\n                                                            animation: enableCharacterStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                            transition: 'width 0.3s ease',\n                                                        })\n                                                    }, null, 4 /* STYLE */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_124, \" ... \" + _toDisplayString(characterProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"div\", _hoisted_125, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"modify-button\",\n                                                disabled: isModifyingCharacter.value || !modifyRequest.value.trim(),\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ffa500 0%, #ff8c00 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 165, 0, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: handleModifyCharacterCard\n                                            }, [\n                                                _cache[123] || (_cache[123] = _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */)),\n                                                _cache[124] || (_cache[124] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                                    style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isModifyingCharacter.value ? '...' : 'AI'), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_126),\n                                            _createElementVNode(\"button\", {\n                                                class: \"clear-modify-button\",\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #6c757d 0%, #5a6268 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(108, 117, 125, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: clearModifyRequest\n                                            }, [...(_cache[125] || (_cache[125] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-eraser\",\n                                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ToolsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ToolsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ToolsTab.vue?vue&type=style&index=0&id=14fcd832&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-14fcd832\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    class: \"memory-panel-container\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"height\": \"100%\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\" }\n};\nconst _hoisted_2 = {\n    class: \"panel-tabs\",\n    style: { \"display\": \"flex\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"flex-shrink\": \"0\" }\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"tab-label\" };\nconst _hoisted_5 = {\n    class: \"panel-content\",\n    style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"overflow-x\": \"hidden\", \"padding\": \"0\", \"min-height\": \"0\", \"scrollbar-width\": \"thin\", \"scrollbar-color\": \"#4a9eff #2a2a2a\" }\n};\nimport { computed, ref } from 'vue';\nimport { minimizeMemoryPanel } from '../';\nimport GreetingsTab from './GreetingsTab.vue';\nimport HelpTab from './HelpTab.vue';\nimport MvuBetaTab from './MvuBetaTab.vue';\nimport ProjectManager from './ProjectManager.vue';\nimport RegexUIGenerator from './RegexUIGenerator.vue';\nimport SettingsTab from './SettingsTab.vue';\nimport StatusBarGenerator from './StatusBarGenerator.vue';\nimport SummaryTab from './SummaryTab.vue';\nimport TableTab from './TableTab.vue';\nimport ToolsTab from './ToolsTab.vue';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MainPanel',\n    setup(__props) {\n        const tabs = [\n            { key: 'settings', label: '', icon: 'fa-solid fa-cog' },\n            { key: 'summary', label: '', icon: 'fa-solid fa-list' },\n            { key: 'table', label: '', icon: 'fa-solid fa-table' },\n            { key: 'greetings', label: '', icon: 'fa-solid fa-comments' },\n            { key: 'regex', label: '', icon: 'fa-solid fa-code' },\n            { key: 'status', label: '', icon: 'fa-solid fa-chart-bar' },\n            { key: 'project', label: '', icon: 'fa-solid fa-laptop-code' },\n            { key: 'tools', label: '', icon: 'fa-solid fa-tools' },\n            { key: 'mvu', label: 'MVU Beta', icon: 'fa-solid fa-flask' },\n            { key: 'help', label: '', icon: 'fa-solid fa-question-circle' },\n        ];\n        const activeTab = ref('settings');\n        // \n        const componentMap = {\n            settings: SettingsTab,\n            summary: SummaryTab,\n            table: TableTab,\n            greetings: GreetingsTab,\n            status: StatusBarGenerator,\n            regex: RegexUIGenerator,\n            project: ProjectManager,\n            tools: ToolsTab,\n            mvu: MvuBetaTab,\n            help: HelpTab,\n        };\n        // \n        const currentComponent = computed(() => componentMap[activeTab.value]);\n        // \n        const componentProps = computed(() => ({\n            activeTab: activeTab.value,\n        }));\n        // \n        const switchTab = (tabKey) => {\n            console.log(':', tabKey);\n            activeTab.value = tabKey;\n        };\n        // \n        const minimizePanel = () => {\n            minimizeMemoryPanel();\n        };\n        // \n        const closePanel = () => {\n            $('#memoryManagementPanel').fadeOut(200);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: \"panel-header\",\n                    style: { \"padding\": \"15px 20px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"border-radius\": \"8px 8px 0 0\", \"flex-shrink\": \"0\" }\n                }, [\n                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n                        class: \"header-left\",\n                        style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n                    }, [\n                        _createElementVNode(\"span\", { style: { \"font-size\": \"24px\" } }, \"\"),\n                        _createElementVNode(\"b\", { class: \"panel-title\" }, \"mzrodyu\"),\n                        _createElementVNode(\"b\", { class: \"panel-title-mobile\" }, \"\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", { style: { \"display\": \"flex\", \"gap\": \"10px\" } }, [\n                        _createElementVNode(\"div\", {\n                            class: \"minimize-button\",\n                            style: { \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"border-radius\": \"4px\", \"transition\": \"background 0.2s\" },\n                            title: \"\",\n                            onClick: minimizePanel\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-minus\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"close-button\",\n                            style: { \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"border-radius\": \"4px\", \"transition\": \"background 0.2s\" },\n                            title: \"\",\n                            onClick: closePanel\n                        }, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(tabs, (tab) => {\n                        return _createElementVNode(\"div\", {\n                            key: tab.key,\n                            class: _normalizeClass([{ 'tab-active': activeTab.value === tab.key }, \"tab-item\"]),\n                            style: _normalizeStyle({\n                                flex: '1',\n                                padding: '12px 20px',\n                                cursor: 'pointer',\n                                textAlign: 'center',\n                                transition: 'background 0.2s, color 0.2s',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                gap: '8px',\n                                borderBottom: '2px solid transparent',\n                                backgroundColor: activeTab.value === tab.key ? '#1a1a1a' : 'transparent',\n                                color: activeTab.value === tab.key ? '#4a9eff' : '#e0e0e0',\n                                borderBottomColor: activeTab.value === tab.key ? '#4a9eff' : 'transparent',\n                            }),\n                            onClick: ($event) => (switchTab(tab.key))\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(tab.icon)\n                            }, null, 2 /* CLASS */),\n                            _createElementVNode(\"span\", _hoisted_4, _toDisplayString(tab.label), 1 /* TEXT */)\n                        ], 14 /* CLASS, STYLE, PROPS */, _hoisted_3);\n                    }), 64 /* STABLE_FRAGMENT */))\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    (_openBlock(), _createBlock(_resolveDynamicComponent(currentComponent.value), _mergeProps({ key: activeTab.value }, componentProps.value), null, 16 /* FULL_PROPS */))\n                ])\n            ]));\n        };\n    }\n});\n","import { createPinia } from 'pinia';\nimport { createApp } from 'vue';\nimport  from './.vue';\n\n$(() => {\n  console.log('.ts ');\n\n  // CSS\n  if ($('#memory-panel-responsive-css').length === 0) {\n    const responsiveCSS = `\n      <style id=\"memory-panel-responsive-css\">\n        /*  */\n        .panel-title-mobile {\n          display: none;\n        }\n        \n        /*  */\n        .panel-title {\n          display: inline;\n        }\n        \n        /*  portrait */\n        @media (orientation: portrait) {\n          /*  -  */\n          body #memoryManagementPanel {\n            position: fixed !important;\n            top: 0 !important;\n            left: 0 !important;\n            right: 0 !important;\n            bottom: 0 !important;\n            transform: none !important;\n            width: 100vw !important;\n            max-width: 100vw !important;\n            height: 100vh !important;\n            max-height: 100vh !important;\n            min-width: 100vw !important;\n            min-height: 100vh !important;\n            border-radius: 0 !important;\n            border: none !important;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          \n          /*  */\n          .panel-title {\n            display: none !important;\n          }\n          \n          .panel-title-mobile {\n            display: inline !important;\n            font-size: 14px !important;\n          }\n          \n          /*  */\n          .minimize-button {\n            display: none !important;\n          }\n          \n          /*  */\n          .panel-header {\n            padding: 10px 12px !important;\n            border-radius: 0 !important;\n          }\n          \n          .panel-header .header-left {\n            gap: 6px !important;\n          }\n          \n          .panel-header .header-left span {\n            font-size: 20px !important;\n          }\n          \n          .panel-header > div:last-child {\n            gap: 6px !important;\n          }\n          \n          .close-button {\n            padding: 4px 8px !important;\n          }\n          \n          /*  */\n          .panel-tabs {\n            overflow-x: auto !important;\n            overflow-y: hidden !important;\n            white-space: nowrap !important;\n            -webkit-overflow-scrolling: touch !important;\n          }\n          \n          .panel-tabs::-webkit-scrollbar {\n            height: 2px !important;\n          }\n          \n          .panel-tabs .tab-item {\n            flex: 0 0 auto !important;\n            padding: 10px 12px !important;\n            font-size: 12px !important;\n            gap: 4px !important;\n            min-width: auto !important;\n          }\n          \n          .panel-tabs .tab-item .tab-label {\n            white-space: nowrap !important;\n          }\n          \n          /*  */\n          .memory-panel-container {\n            font-size: 14px !important;\n          }\n          \n          /*  */\n          .panel-content {\n            overflow-y: auto !important;\n            overflow-x: hidden !important;\n            -webkit-overflow-scrolling: touch !important;\n            height: 100% !important;\n            padding: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tab-content {\n            max-width: 100vw !important;\n            overflow-x: hidden !important;\n          }\n          \n          /*  */\n          .memory-panel-container button,\n          .memory-panel-container .el-button {\n            padding: 10px 16px !important;\n            font-size: 13px !important;\n            min-height: 44px !important; /* iOS */\n          }\n          \n          /*  */\n          .memory-panel-container .button-group,\n          .memory-panel-container .project-action-buttons {\n            flex-direction: column !important;\n            gap: 8px !important;\n          }\n          \n          .memory-panel-container .button-group > *,\n          .memory-panel-container .button-group button,\n          .memory-panel-container .project-action-buttons > button {\n            width: 100% !important;\n            margin: 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .dialog-actions,\n          .memory-panel-container [style*=\"justify-content: flex-end\"] {\n            flex-direction: column !important;\n            gap: 10px !important;\n          }\n          \n          .memory-panel-container .dialog-actions > button {\n            width: 100% !important;\n          }\n          \n          /*  */\n          .memory-panel-container input,\n          .memory-panel-container textarea,\n          .memory-panel-container select {\n            font-size: 16px !important; /* iOS */\n            padding: 12px !important;\n            min-height: 44px !important;\n          }\n          \n          .memory-panel-container textarea {\n            min-height: 120px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .form-group,\n          .memory-panel-container [style*=\"margin\"] {\n            margin-bottom: 16px !important;\n          }\n          \n          /* / */\n          .memory-panel-container .card,\n          .memory-panel-container .panel,\n          .memory-panel-container .section {\n            padding: 12px !important;\n            margin: 8px 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .field-group,\n          .memory-panel-container [class*=\"field\"] {\n            padding: 8px !important;\n            margin-bottom: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tool-section,\n          .memory-panel-container .section-content {\n            padding: 12px 8px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .preview-container,\n          .memory-panel-container [class*=\"preview\"] {\n            padding: 8px !important;\n            max-width: 100% !important;\n            overflow-x: auto !important;\n          }\n          \n          /*  */\n          .memory-panel-container h1,\n          .memory-panel-container h2,\n          .memory-panel-container h3,\n          .memory-panel-container h4,\n          .memory-panel-container h5 {\n            font-size: 16px !important;\n            margin-bottom: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .modal,\n          .memory-panel-container .dialog {\n            width: 100vw !important;\n            height: 100vh !important;\n            max-width: 100vw !important;\n            max-height: 100vh !important;\n            border-radius: 0 !important;\n            top: 0 !important;\n            left: 0 !important;\n            transform: none !important;\n          }\n          \n          /*  */\n          .memory-panel-container ::-webkit-scrollbar {\n            width: 3px !important;\n            height: 3px !important;\n          }\n          \n          /* gap */\n          .memory-panel-container [style*=\"gap: 1\"] {\n            gap: 8px !important;\n          }\n          \n          .memory-panel-container [style*=\"gap: 2\"] {\n            gap: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tool-section .button-group {\n            display: flex !important;\n            flex-direction: column !important;\n            width: 100% !important;\n          }\n          \n          /*  */\n          .memory-panel-container .field-item {\n            flex-direction: column !important;\n            align-items: stretch !important;\n          }\n          \n          .memory-panel-container .field-item > * {\n            width: 100% !important;\n            margin-bottom: 8px !important;\n          }\n          \n          /*  */\n          .memory-panel-container [style*=\"display: grid\"][style*=\"grid-template-columns: 1fr 1fr\"] {\n            grid-template-columns: 1fr !important;\n          }\n          \n          /* / */\n          .memory-panel-container .delete-button,\n          .memory-panel-container [class*=\"delete\"],\n          .memory-panel-container .action-button {\n            min-width: 44px !important;\n            min-height: 44px !important;\n            padding: 8px !important;\n          }\n          \n          /* label */\n          .memory-panel-container label {\n            font-size: 13px !important;\n            margin-bottom: 6px !important;\n            display: block !important;\n          }\n          \n          /*  */\n          .memory-panel-container input,\n          .memory-panel-container textarea,\n          .memory-panel-container select,\n          .memory-panel-container button,\n          .memory-panel-container pre,\n          .memory-panel-container code {\n            max-width: 100% !important;\n            word-wrap: break-word !important;\n          }\n          \n          /*  */\n          .memory-panel-container .section-header {\n            padding: 16px !important;\n            font-size: 14px !important;\n            flex-direction: column !important;\n            align-items: stretch !important;\n            gap: 12px !important;\n          }\n          \n          .memory-panel-container .section-header h3 {\n            font-size: 15px !important;\n            margin-bottom: 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .empty-space,\n          .memory-panel-container [style*=\"padding: 20px\"],\n          .memory-panel-container [style*=\"padding: 25px\"] {\n            padding: 12px !important;\n          }\n        }\n      </style>\n    `;\n    $('head').append(responsiveCSS);\n    console.log(' CSS');\n  }\n\n  setTimeout(() => {\n    console.log('.ts setTimeout ');\n\n    // \n    const existingPanel = $('#memoryManagementPanel');\n\n    if (existingPanel.length > 0) {\n      console.log('mzrodyu...');\n      // \n      existingPanel.remove();\n      // DOM\n      setTimeout(() => {\n        console.log('...');\n      }, 100);\n    }\n\n    console.log('  - :', new Date().toISOString());\n\n    //  - \n    const panelContainer = $(`\n      <div id=\"memoryManagementPanel\" style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 95vw;\n        max-width: 1600px;\n        height: 92vh;\n        max-height: 92vh;\n        background: #1a1a1a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n      \">\n      </div>\n    `);\n\n    //  body\n    $('body').append(panelContainer);\n    console.log(' body, :', panelContainer[0]);\n\n    //  Vue \n    console.log(' Vue :', panelContainer[0]);\n\n    const app = createApp().use(createPinia());\n\n    try {\n      app.mount(panelContainer[0]);\n      console.log('Vue ');\n      console.log('Vue :', (panelContainer[0] as any).__vue_app__);\n    } catch (error) {\n      console.error('Vue :', error);\n      console.error(':', JSON.stringify(error, null, 2));\n      console.error(':', (error as Error).stack);\n    }\n\n    console.log('mzrodyu:', panelContainer[0]);\n  }, 200);\n});\n\n// \nfunction createMinimizeIcon() {\n  // \n  $('#memoryPanelMinimizeIcon').remove();\n\n  const isMobile = window.innerWidth <= 768;\n\n  const icon = $(`\n    <div id=\"memoryPanelMinimizeIcon\" style=\"\n      position: fixed;\n      top: ${isMobile ? '15px' : '20px'};\n      right: ${isMobile ? '15px' : '20px'};\n      width: ${isMobile ? '50px' : '60px'};\n      height: ${isMobile ? '50px' : '60px'};\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      z-index: 999998;\n      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);\n      transition: transform 0.2s, box-shadow 0.2s;\n      font-size: ${isMobile ? '26px' : '32px'};\n    \">\n      \n    </div>\n  `);\n\n  // \n  icon.hover(\n    function () {\n      $(this).css({\n        transform: 'scale(1.1)',\n        boxShadow: '0 4px 20px rgba(74, 158, 255, 0.5)',\n      });\n    },\n    function () {\n      $(this).css({\n        transform: 'scale(1)',\n        boxShadow: '0 2px 10px rgba(0, 0, 0, 0.5)',\n      });\n    },\n  );\n\n  // \n  icon.on('click', () => {\n    const panel = $('#memoryManagementPanel');\n    panel.fadeIn(200);\n    icon.fadeOut(200, () => icon.remove());\n  });\n\n  // \n  icon.draggable({\n    containment: 'window',\n    scroll: false,\n    start: function () {\n      $(this).css('transition', 'none');\n    },\n    stop: function () {\n      $(this).css('transition', '');\n    },\n  });\n\n  $('body').append(icon);\n  return icon;\n}\n\n// \nexport function minimizeMemoryPanel() {\n  const panel = $('#memoryManagementPanel');\n  if (panel.length === 0) return;\n\n  panel.fadeOut(200, () => {\n    createMinimizeIcon().hide().fadeIn(200);\n  });\n}\n\n// /\nexport function toggleMemoryPanel() {\n  const panel = $('#memoryManagementPanel');\n  if (panel.length === 0) return;\n\n  if (panel.is(':visible')) {\n    panel.fadeOut(200);\n  } else {\n    panel.fadeIn(200);\n  }\n}\n","/* unplugin-vue-components disabled */import script from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MainPanel.vue?vue&type=style&index=0&id=13cb6ed0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-13cb6ed0\"]])\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport MainPanel from './components/MainPanel.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: '',\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(MainPanel));\n        };\n    }\n});\n","import { watch } from 'vue';\nimport { klona } from 'klona';\nimport { useSettingsStore, useSummaryHistoryStore } from './settings';\nimport { getScriptIdSafe, setGlobalScriptId } from './utils';\nimport { summarizeMessages } from './';\nimport './';\nimport './';\n\n$(() => {\n  // \n  setTimeout(() => {\n    let script_id: string | null = null;\n    try {\n      script_id = getScriptId?.();\n    } catch (e) {\n      console.error(' script_id:', e);\n    }\n\n    if (!script_id) {\n      console.error(' script_idmzrodyu');\n      window.toastr.error('mzrodyu');\n      return;\n    }\n\n    //  script_id\n    setGlobalScriptId(script_id);\n\n    console.log('mzrodyuscript_id:', script_id);\n\n    // \n    setTimeout(() => {\n      // \n      const checkAutoSummarize = () => {\n        try {\n          console.log(' ...');\n\n          const store = useSettingsStore();\n          if (!store || !store.settings) {\n            console.warn(' ');\n            return;\n          }\n\n          const settings = store.settings;\n\n          // \n          if (typeof settings.auto_summarize_enabled !== 'boolean') {\n            console.warn(' ');\n            return;\n          }\n\n          if (typeof settings.summary_interval !== 'number' || settings.summary_interval < 1) {\n            console.warn(' ');\n            return;\n          }\n          console.log(' :', {\n            auto_summarize_enabled: settings.auto_summarize_enabled,\n            summary_interval: settings.summary_interval,\n            has_api_key: !!settings.api_key,\n          });\n\n          if (!settings.auto_summarize_enabled) {\n            console.log(' ');\n            return;\n          }\n\n          if (!settings.api_key) {\n            console.log(' API Key ');\n            return;\n          }\n\n          const last_message_id = getLastMessageId();\n\n          // ID\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          if (!current_chat_id) {\n            console.log(' ID');\n            return;\n          }\n\n          // ID\n          let auto_summary_start_id = 0;\n          try {\n            // \n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id_key = 'auto_summary_start_id';\n\n            console.log(` :`, {\n              current_chat_id,\n              chat_vars: chatVars,\n              has_start_id: chatVars[auto_summary_start_id_key] !== undefined,\n              existing_start_id: chatVars[auto_summary_start_id_key],\n            });\n\n            if (chatVars[auto_summary_start_id_key] !== undefined && chatVars[auto_summary_start_id_key] !== null) {\n              auto_summary_start_id = chatVars[auto_summary_start_id_key];\n              console.log(` : ${auto_summary_start_id} (: ${current_chat_id})`);\n            } else {\n              // \n              // \n              const scriptId = getScriptIdSafe();\n              if (!scriptId) {\n                console.warn('script_id ');\n                return;\n              }\n              const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n              const existingSummaries = Array.isArray(scriptVars?.summary_history) ? scriptVars.summary_history : [];\n\n              if (existingSummaries.length > 0) {\n                // \n                const lastSummary = existingSummaries[0]; // \n                const lastSummaryEnd = lastSummary.end_id || 0;\n\n                // +1\n                if (last_message_id > lastSummaryEnd) {\n                  auto_summary_start_id = lastSummaryEnd + 1;\n                  console.log(\n                    ` : ${auto_summary_start_id} ( ${lastSummaryEnd} )`,\n                  );\n                  window.toastr?.info(` ${auto_summary_start_id} `);\n                } else {\n                  // \n                  auto_summary_start_id = last_message_id;\n                  console.log(` : ${last_message_id}`);\n                  window.toastr?.info(`: ${last_message_id}`);\n                }\n              } else {\n                // 0AI\n                auto_summary_start_id = 0;\n                console.log(` : 0 (: ${current_chat_id}) - AI`);\n                window.toastr?.info(` 0 AI`);\n              }\n\n              // 0AI\n              if (auto_summary_start_id < 0) {\n                auto_summary_start_id = 0;\n                console.log(` 0AI`);\n              }\n\n              // \n              insertOrAssignVariables({ [auto_summary_start_id_key]: auto_summary_start_id }, { type: 'chat' });\n            }\n          } catch (error) {\n            console.warn(':', error);\n            auto_summary_start_id = last_message_id;\n          }\n\n          console.log(\n            `: =${last_message_id}, =${auto_summary_start_id}, =${settings.summary_interval}`,\n          );\n\n          // \n          // \n          // 0=AI, 1=, 2=AI, 3=...\n          const relative_position = last_message_id - auto_summary_start_id;\n\n          // 550-4, 5-9...\n          // 045relative_position=4 >= interval - 1\n          const should_trigger = relative_position >= settings.summary_interval - 1;\n\n          console.log(' :', {\n            last_message_id,\n            auto_summary_start_id,\n            relative_position,\n            summarize_interval: settings.summary_interval,\n            should_trigger,\n            calculation: `${relative_position} >= ${settings.summary_interval - 1} (${relative_position + 1})`,\n            expected_trigger_at_floor: auto_summary_start_id + settings.summary_interval - 1,\n            will_summarize_range: `${auto_summary_start_id}-${auto_summary_start_id + settings.summary_interval - 1}`,\n            floor_explanation: '0=AI, 1=, 2=AI, 3=...',\n          });\n\n          if (last_message_id >= auto_summary_start_id && should_trigger) {\n            // interval55\n            const start_id = auto_summary_start_id;\n            const end_id = auto_summary_start_id + settings.summary_interval - 1;\n\n            // \n            console.log(` :  ${start_id}-${end_id}`);\n            window.toastr.info(`  ${start_id}-${end_id}...`);\n\n            summarizeMessages(start_id, end_id)\n              .then(summary => {\n                console.log(` :  ${start_id}-${end_id}`, summary);\n\n                // \n                try {\n                  const historyStore = useSummaryHistoryStore();\n                  historyStore.addSummary(start_id, end_id, summary);\n                } catch (e) {\n                  console.error(':', e);\n                }\n\n                // \n                const new_start_id = end_id + 1;\n                insertOrAssignVariables({ auto_summary_start_id: new_start_id }, { type: 'chat' });\n                console.log(` : ${new_start_id}`);\n\n                window.toastr.success(`  ${start_id}-${end_id}  ${new_start_id} `);\n              })\n              .catch(error => {\n                console.error(' ', error);\n                window.toastr.error(' ' + error.message);\n              });\n          }\n        } catch (error) {\n          console.error('checkAutoSummarize ', error);\n          // \n        }\n      };\n\n      // \n      try {\n        eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, () => {\n          console.log(' ...');\n          checkAutoSummarize();\n        });\n\n        // \n        eventOn(tavern_events.CHAT_CHANGED, (chat_file_name: string) => {\n          console.log(' :', chat_file_name);\n\n          // \n          try {\n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id = chatVars.auto_summary_start_id;\n\n            if (auto_summary_start_id !== undefined && auto_summary_start_id !== null) {\n              console.log(` : ${chat_file_name}, : ${auto_summary_start_id}`);\n            } else {\n              console.log(` : ${chat_file_name}, `);\n            }\n          } catch (error) {\n            console.warn(':', error);\n          }\n        });\n\n        console.log(' ');\n      } catch (error) {\n        console.error(' :', error);\n      }\n\n      // \n      const settingsStore = useSettingsStore();\n      if (settingsStore && settingsStore.settings) {\n        // \n        const unwatch = watch(\n          () => settingsStore.settings.auto_summarize_enabled,\n          (newValue, oldValue) => {\n            console.log(` : ${oldValue} -> ${newValue}`);\n            if (newValue && !oldValue) {\n              // \n              try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                  console.warn('script_id ');\n                  return;\n                }\n                const chatVars = getVariables({ type: 'chat' });\n                const auto_summary_start_id = chatVars.auto_summary_start_id;\n\n                // \n                if (auto_summary_start_id === undefined || auto_summary_start_id === null) {\n                  const last_message_id = getLastMessageId();\n                  insertOrAssignVariables({ auto_summary_start_id: last_message_id }, { type: 'chat' });\n                  console.log(` : ${last_message_id}`);\n                  window.toastr?.info(` ${last_message_id} `);\n                } else {\n                  console.log(` : ${auto_summary_start_id}`);\n                  window.toastr?.info(`: ${auto_summary_start_id}`);\n                }\n              } catch (error) {\n                console.error(' :', error);\n              }\n            }\n          },\n          { immediate: false },\n        );\n\n        // \n        $(window).on('pagehide', () => {\n          unwatch();\n        });\n      }\n\n      window.toastr.success('mzrodyu');\n    }, 200);\n  }, 100);\n});\n"],"names":["module","exports","y","x","__webpack_require__","d","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_klona_esm_74666e88__","content","__esModule","default","id","locals","add","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__","sfc","props","target","__vccOpts","key","val","___CSS_LOADER_EXPORT___","push","cssWithMappingToString","list","toString","this","map","item","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","Vue","async","proxyFetch","url","options","tavernOrigin","window","location","origin","console","log","proxyResponse","fetch","method","headers","SillyTavern","getRequestHeaders","body","JSON","stringify","ok","proxyError","fetchAvailableModels","settings","api_endpoint","trim","Error","baseUrl","modelsUrl","normalizeApiEndpoint","e","URL","possibleEndpoints","endsWith","errors","hasCorsError","response","Authorization","api_key","status","statusText","errorText","text","substring","contentType","get","includes","data","json","Array","isArray","models","model","name","filter","Boolean","errMsg","message","error","forEach","err","errorMessage","summarizeMessages","start_id","end_id","apiUrl","messages","msg","getChatMessages","summaryPrompt","max_tokens","role","temperature","top_p","presence_penalty","frequency_penalty","errorDetails","userFriendlyMessage","choices","copyToClipboard","successMessage","parent","document","textarea","createElement","value","style","position","opacity","appendChild","select","success","execCommand","removeChild","toastr","warn","navigator","clipboard","writeText","getScriptIdSafe","getScriptId","getChatIdSafe","getCurrentChatId","globalScriptId","setGlobalScriptId","listToStyles","parentId","styles","newStyles","part","css","sourceMap","parts","hasDocument","DEBUG","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","ssrIdKey","isOldIE","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","type","obj","update","remove","querySelector","parentNode","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","firstChild","z","object","parse","def","string","number","boolean","array","schema","prefault","Settings","api_provider","auto_summarize_enabled","summarize_interval","start_message_id","end_message_id","table_start_message_id","table_end_message_id","summary_history","endpoint","path","trimmed","slice","useSettingsStore","defineStore","getScriptIdSafely","isLocalDebug","getVariables","script_id","saved","localStorage","getItem","ref","initSettings","setTimeout","realVariables","Object","keys","saveImmediately","new_settings","klona","setItem","insertOrAssignVariables","saveTimeout","watch","clearTimeout","immediate","deep","addEventListener","saveSettings","reloadSettings","useSummaryHistoryStore","addSummary","chat_id","chatHistory","chatData","unshift","getSummaryHistory","$","isAdding","addNavButton","possibleSelectors","topBar","foundSelector","selector","found","existingButton","targetContainer","settingsHolder","navButton","outerHTML","children","first","prepend","on","preventDefault","stopPropagation","panel","is","fadeOut","fadeIn","parentElement","className","setInterval","eventOn","tavern_events","CHAT_CHANGED","cssMapping","base64","sourceMapping","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","n","getter","a","definition","o","defineProperty","enumerable","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","pathname","startsWith","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","__name","show","title","description","placeholder","isGenerating","showInput","emits","setup","__props","emit","__emit","localInput","newVal","handleConfirm","handleClose","_ctx","_cache","onClick","class","$event","disabled","_hoisted_8","examples","isModifying","localInstruction","$emit","example","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","GreetingConfig","icon","UIConfig","customHtml","settingsStore","storeToRefs","greetings","uiConfig","showCodeDialog","generatedCode","copyButtonText","showAiGenerateDialog","showAiEditDialog","isGeneratingAi","isEditingAi","currentEditingIndex","showHelp","previewHtml","currentCharacter","showOriginalDialog","originalGreetingContent","showAiStyleDialog","isGeneratingStyle","getCurrentCharacter","char","getCharData","loadConfig","character","allGreetings","first_mes","alternate_greetings","savedConfig","configs","greetings_config","savedUIConfig","ui_config","_","updatePreview","saveConfig","replaceVariables","clearAllConfig","confirm","closeAiGenerateDialog","confirmEditDescription","requirement","currentDesc","systemPrompt","userPrompt","result","aiDescription","replace","errorMsg","generateStyleWithAI","styleDescription","cards","g","desc","String","padStart","generatedHtml","timeOut","generateFrontendCode","fixedHtmlCode","copyCode","closeCodeDialog","characterName","cardsHtml","sceneGridPattern","match","htmlCode","openPreviewInNewWindow","windowTitle","newWindow","open","write","close","downloadAsJson","stscriptJson","crypto","randomUUID","scriptName","runOnEdit","findRegex","replaceString","trimStrings","placement","substituteRegex","minDepth","maxDepth","markdownOnly","promptOnly","jsonString","blob","Blob","createObjectURL","link","href","download","click","revokeObjectURL","onMounted","color","borderColor","onMouseenter","currentTarget","transform","onMouseleave","greeting","maxlength","onInput","idx","greetingContent","boxShadow","background","srcdoc","sandbox","AIGenerateDialog","onClose","onConfirm","AIModifyDialog","expandedSections","usage","changelog","borderLeft","expanded","structure","prompt","toggleExpanded","aiStructurePrompt","isGeneratingAI","aiPromptDescription","isGeneratingPrompt","originalStructurePrompt","originalPromptDescription","showStructureModifyDialog","isModifyingStructure","showPromptModifyDialog","isModifyingPrompt","varName","subFields","generatedStructure","variableCategories","generatedPrompt","then","generateStructure","$meta","extensible","strictSet","lines","split","l","line","s","parseSubFields","copyGenerated","handleAIGenerateStructure","responseText","errorData","jsonText","jsonMatch","parsed","bracketCount","inString","escapeNext","lastValidPos","repeat","varNameParsed","find","varData","fields","autoGeneratePrompt","fieldCount","generatePrompt","promptSection","scrollIntoView","behavior","block","promptTemplate","copyPrompt","handleAIGeneratePrompt","responseText2","modifyStructureWithAI","modifyInstruction","info","warning","modifyPromptWithAI","exportWorldbook","worldbookEntries","uid","generateUID","keysecondary","comment","constant","vectorized","selective","selectiveLogic","addMemo","order","disable","excludeRecursion","delayUntilRecursion","probability","useProbability","depth","group","groupOverride","groupWeight","scanDepth","caseSensitive","matchWholeWords","useGroupScoring","automationId","sticky","cooldown","delay","jsonStr","exportAsWorldbook","Date","now","Math","floor","random","scriptId","savedData","mvu_beta_config","loadSavedData","saveTimer","saveData","rows","onFocus","onBlur","cursor","initialMessage","cancellable","expose","__expose","progress","currentMessage","details","startTime","elapsedSeconds","elapsedInterval","clearInterval","onUnmounted","setProgress","percent","min","max","setMessage","addDetail","detail","detailsArea","scrollTop","scrollHeight","clearDetails","complete","width","height","transition","round","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","projects","currentId","currentFile","code","showAI","aiPrompt","aiGenerating","enableStream","streamingText","showComparison","aiChanges","previewMode","showHistory","aiHistory","quickSuggestions","showProgress","progressDialogRef","showProjectTemplate","showBugFix","bugDescription","consoleError","bugFile","folderInputRef","currentProject","computed","p","currentProjectHistory","comparisonPreviewHtml","proj","buildPreviewFromFiles","files","f","change","c","newContent","oldContent","projectTemplates","showProjectTemplateDialog","createProjectFromTemplate","templateKey","template","newProj","entries","filename","saveToChatVar","triggerFolderImport","handleFolderImport","event","firstFile","folderName","webkitRelativePath","projectName","supportedExtensions","projectFiles","fileReadPromises","file","relativePath","extension","pop","readPromise","Promise","resolve","reject","reader","FileReader","onload","fileName","onerror","readAsText","all","createProject","htmlContent","saveCode","autoSaveTimer","createNewFolder","folderPath","trimmedPath","gitkeepPath","some","newFile","showNewFileDialog","folders","Set","folderList","from","sort","fileTypes","ext","typeOptions","t","typeChoice","typeIndex","parseInt","selectedType","targetFolder","folderOptions","folderChoice","folderIndex","trimmedName","fullPath","defaultContent","getFileIcon","htmlFile","cssFile","jsFile","html","headTag","bodyTag","headMatch","RegExp","bodyMatch","headContent","bodyContent","scriptTagRegex","scriptTag","styleTag","chatId","dataToSave","frontend_projects_files","frontend_ai_history","verify","loadFromChatVar","watchEffect","previewTimer","showAIDialog","closeAIDialog","showBugFixDialog","closeBugFixDialog","fixBugWithAI","normalizedEndpoint","vars","apiEndpoint","apiKey","resultText","fileRegex","changes","exec","existingFile","timestamp","toISOString","generateWithAI","phrase","maxTokens","stream","getReader","decoder","TextDecoder","chunkCount","done","read","decode","delta","needMoreInfoMatch","guideContent","alert","acceptChanges","historyRecord","rejectChanges","showHistoryDialog","closeHistoryDialog","exportToRegex","fileObj","triggerWord","fullHtml","uuid","cleanHtml","regexJson","dataStr","dataBlob","openInNewWindow","onBeforeUnmount","ref_key","webkitdirectory","directory","multiple","onChange","padding","marginBottom","borderRadius","display","justifyContent","alignItems","fontSize","filePath","toUpperCase","suggestion","border","record","toLocaleString","ProgressDialog","triggerKeyword","interfaceDescription","generatedRegex","showCode","showModify","previewFrame","doctypeMatch","htmlMatch","showModifyDialog","modifyWithAI","copyRegex","summaryHistoryStore","api","autoSummary","manualSummary","tableGeneration","messageManagement","toggleSection","section","available_models","loading_models","hide_range","hidden_messages","hidden_display_expanded","is_summarizing","is_generating_table","headerTemplates","selectedTemplate","currentTemplate","saveGenerationStatus","stopGeneration","saveHeaderTemplates","header_templates","loadTemplate","showAddTemplateDialog","saveTemplate","deleteTemplate","splice","loadHiddenMessages","possibleFields","field","saveHiddenMessages","initApiProvider","templates","loadHeaderTemplates","scriptVars","summarizing","generating_table","loadGenerationStatus","handleSaveSettings","handleReloadSettings","handleResetAutoSummaryStart","resetAutoSummaryStart","handleProviderChange","provider","providerEndpoints","openai","gemini","handleSaveApiConfig","handle_fetch_models","handle_test_connection","reply","modelUsed","handle_summarize","summary","last_summary","dispatchEvent","CustomEvent","handle_generate_table","headersInput","h","chatMessages","messageRange","hide_state","messagesText","aiResponse","aiTableData","parseError","tableData","table_history","handle_create_table","emptyTableData","handle_hide_messages","ranges","range","messageIds","start","end","Number","lastMessageId","getLastMessageId","hiddenCount","messagesToHide","messageId","message_id","is_hidden","triggerSlash","handle_show_messages","isNaN","parseMessageRange","messagesToShow","shownCount","hiddenMsg","onmouseover","onmouseout","step","backgroundColor","showToast","validHiddenMessages","removedCount","handle_refresh_hidden","findIndex","handle_unhide_single","simple","label","abo","config","originalAiPrompt","showAiModifyDialog","isModifyingAi","showIconPickerFor","originalXmlInput","showXmlModifyDialog","isModifyingXml","originalFieldDescription","showFieldModifyDialog","isModifyingField","showXmlDialog","xmlInput","isParsingXml","showAiFieldDialog","aiFieldDescription","isGeneratingFields","iconList","worldbookContent","fieldDefinitions","iconDesc","formatExample","exampleOutput","regex","normalizedRegex","exampleLines","fieldIndex","allCaptures","totalCount","perLine","offset","count","segmentFields","placeholders","parseRegexStructure","previewContent","exampleValue","addField","showXmlParseDialog","showAiFieldGeneratorDialog","parseXmlWithAI","parsedFields","validFields","extendedTimeOut","closeButton","modifyXmlWithAI","generateFieldsWithAI","modifyFieldWithAI","generateFromFields","totalFields","ceil","firstHalf","fieldsHtml","jsContent","addFieldInDialog","currentFiles","FILE_START_REGEX","matches","matchAll","normalizedPath","sanitizeFileContent","uniqueFiles","Map","set","values","generatedFiles","m","missingFiles","copyWorldbook","raw","fenceMatch","docstringMatch","exportRegex","regexPattern","existingCaptureGroups","fill","cleanReplaceString","statusbar_generator_config","loadSavedConfig","fontWeight","innerHTML","iconClass","textAlign","historyStore","expandedState","refreshSummaryHistory","isExpanded","handleRefreshData","tryParentWindowCopy","parentDoc","parentBody","focus","setSelectionRange","execCommandCopy","left","top","pointerEvents","showManualCopyDialog","existingOverlay","getElementById","overlay","container","header","buttonContainer","textContent","copyButton","onclick","handleKeyDown","removeEventListener","copySummary","isSecureContext","clipboardErr","createSummaryWorldbook","charError","worldbookName","getWorldbookNames","createWorldbook","rebindChatWorldbook","bindError","promptForWorldbook","worldbookNames","dialog","append","selected","showDebugPanel","button","btn","outputArea","output","testCompleteAutoSummary","syncAutoSummaryData","checkCurrentFloor","testFloorCalculation","checkAutoSummaryStatus","smartResetChat","current","summaryIndex","selectedWorldbook","newEntry","toLocaleDateString","enabled","strategy","keys_secondary","logic","scan_depth","insertion_order","case_sensitive","name_is_regex","keys_are_regex","selective_logic","secondary_keys_logic","activation_threshold","local_id","depth_entries","depth_entries_all","search_range","force_activation","exclude_recursion","hidden","priority","comment_is_regex","content_is_regex","secondary_keys_are_regex","keys_secondary_are_regex","createWorldbookEntries","tableExpandedState","isTableExpanded","copyTable","tableItem","row","chat_vars","refreshTableHistory","rowIdx","cell","cellIdx","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","toolExpandedState","antiClicheInput","antiClicheOutput","isProcessingAntiCliche","enableAntiClicheStreaming","antiClicheProgressPercent","antiClicheModifyRequest","isModifyingAntiCliche","characterDescription","characterCardOutput","isGeneratingCharacter","modifyRequest","isModifyingCharacter","enableCharacterStreaming","characterProgressPercent","worldbookDescription","worldbookEntryOutput","isGeneratingWorldbook","availableWorldbooks","isInsertingEntry","worldbookModifyRequest","isModifyingWorldbook","enableWorldbookStreaming","worldbookProgressPercent","selectedViewerWorldbook","viewerSearchQuery","viewerSortBy","entryExpandedState","showEditDialog","editingEntry","editingEntryUid","isDataLoaded","saveToolsDataImmediate","tools_antiCliche","input","enableStreaming","tools_characterCard","tools_worldbookEntry","tools_worldbookViewer","searchQuery","sortBy","tools_expandedState","fromEntries","antiCliche_input_length","antiCliche_output_length","character_desc_length","character_output_length","saveToolsData","debounce","loadWorldbookEntries","loadToolsData","loadAvailableWorldbooks","cancel","toggleToolExpanded","toolName","isToolExpanded","handleAntiClicheProcess","requestPayload","generatedText","generateWithStreaming","copyAntiClicheResult","handleModifyAntiCliche","modifiedText","clearAntiClicheModifyRequest","handleGenerateCharacterCard","clearCharacterForm","copyCharacterCard","clearAntiClicheForm","handleModifyCharacterCard","modifiedCard","clearModifyRequest","progressRef","buffer","processLine","payloadText","payloadJson","deltaText","chunk","readerDone","handleGenerateWorldbookEntry","parsedEntry","clearWorldbookForm","handleInsertEntry","render","copyWorldbookEntry","handleModifyWorldbookEntry","clearWorldbookModifyRequest","worldbook","getWorldbook","filteredWorldbookEntries","query","entry","nameMatch","contentMatch","keysMatch","isEntryExpanded","saveEditedEntry","updatedWorldbook","updateWorldbookWith","entryIndex","backgroundSize","animation","toFixed","wb","ki","recursion","prevent_incoming","prevent_outgoing","delay_until","effect","deleteWorldbookEntries","for","checked","tabs","activeTab","componentMap","SettingsTab","SummaryTab","table","TableTab","GreetingsTab","StatusBarGenerator","RegexUIGenerator","project","ProjectManager","tools","ToolsTab","mvu","MvuBetaTab","help","HelpTab","currentComponent","componentProps","minimizePanel","isMobile","innerWidth","hover","draggable","containment","scroll","stop","createMinimizeIcon","hide","minimizeMemoryPanel","closePanel","tab","flex","gap","borderBottom","borderBottomColor","tabKey","MainPanel","responsiveCSS","existingPanel","panelContainer","app","createApp","use","createPinia","mount","__vue_app__","stack","CHARACTER_MESSAGE_RENDERED","store","summary_interval","has_api_key","last_message_id","current_chat_id","auto_summary_start_id","chatVars","auto_summary_start_id_key","has_start_id","existing_start_id","existingSummaries","lastSummaryEnd","relative_position","should_trigger","calculation","expected_trigger_at_floor","will_summarize_range","floor_explanation","new_start_id","catch","checkAutoSummarize","chat_file_name","unwatch","newValue","oldValue"],"sourceRoot":""}