{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/pinia/+esm\"","webpack://tavern_helper_template/src//components/SettingsTab.vue?470d","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js","src://tavern_helper_template/src//.ts","src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/src//components/ToolsTab.vue?16f3","webpack://tavern_helper_template/src//components/SummaryTab.vue?9d19","src://tavern_helper_template/src//settings.ts","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","webpack://tavern_helper_template/src//components/TableTab.vue?0dd7","webpack://tavern_helper_template/src//components/MainPanel.vue?62e1","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js","webpack://tavern_helper_template/src//components/ToolsTab.vue?63ef","webpack://tavern_helper_template/src//components/SummaryTab.vue?af4b","src://tavern_helper_template/src//.ts","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src//components/SettingsTab.vue?6035","src://tavern_helper_template/src//utils.ts","webpack://tavern_helper_template/src//components/TableTab.vue?6cb8","webpack://tavern_helper_template/src//components/MainPanel.vue?4f79","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/src//components/SettingsTab.vue","webpack://tavern_helper_template/src//components/SettingsTab.vue?b587","src://tavern_helper_template/src//components/SummaryTab.vue","webpack://tavern_helper_template/src//components/SummaryTab.vue?c256","src://tavern_helper_template/src//components/TableTab.vue","webpack://tavern_helper_template/src//components/TableTab.vue?f29a","src://tavern_helper_template/external var \"_\"","src://tavern_helper_template/src//components/ToolsTab.vue","webpack://tavern_helper_template/src//components/ToolsTab.vue?1c0b","src://tavern_helper_template/src//components/MainPanel.vue","webpack://tavern_helper_template/src//components/MainPanel.vue?9dc9","webpack://tavern_helper_template/src//.vue?e921","src://tavern_helper_template/src//.vue","src://tavern_helper_template/src//.ts","src://tavern_helper_template/src//index.ts"],"sourcesContent":["var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"createPinia\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.createPinia), [\"defineStore\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.defineStore), [\"storeToRefs\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.storeToRefs) });","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=2e1e6c9e&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e0e205ee\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=2e1e6c9e&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=2e1e6c9e&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","$(() => {\n  // \n  setTimeout(() => {\n    let isAdding = false;\n\n    const addNavButton = () => {\n      // \n      if (isAdding) {\n        return;\n      }\n      isAdding = true;\n      try {\n        // \n        const possibleSelectors = [\n          '#top-bar', //  HTML \n          '#top-settings-holder', //  HTML \n          '#topBar',\n          '.topBar',\n          '#navbar',\n          '.navbar',\n          'header',\n          '.header',\n          '#header',\n          '.top_header',\n          '.navigation',\n        ];\n\n        let topBar: JQuery<HTMLElement> = $();\n        let foundSelector = '';\n\n        for (const selector of possibleSelectors) {\n          const found = $(selector);\n          if (found.length > 0) {\n            topBar = found;\n            foundSelector = selector;\n            console.log(`: ${selector}`);\n            break;\n          }\n        }\n\n        if (topBar.length === 0) {\n          console.log('500ms...');\n          setTimeout(addNavButton, 500);\n          return;\n        }\n\n        console.log(`: ${foundSelector}`);\n\n        // \n        const existingButton = $('#memoryNavButton');\n        if (existingButton.length > 0) {\n          console.log('mzrodyu');\n          existingButton.remove();\n        }\n\n        //  -  top-bar top-settings-holder\n        let targetContainer = topBar;\n        if (foundSelector === '#top-bar') {\n          const settingsHolder = $('#top-settings-holder');\n          if (settingsHolder.length > 0) {\n            targetContainer = settingsHolder;\n            console.log(' top-settings-holder ');\n          }\n        }\n\n        //  - \n        const navButton = $(\n          `<div id=\"memoryNavButton\" class=\"interactable\" style=\"\n            padding: 8px;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n            color: inherit;\n            border-radius: 4px;\n            transition: background 0.2s;\n            position: relative;\n          \" title=\"mzrodyu\">\n            <span style=\"font-size: 24px\"></span>\n          </div>`,\n        );\n\n        // \n        console.log(':', targetContainer[0]?.id || '');\n        console.log('HTML:', targetContainer[0]?.outerHTML?.substring(0, 300));\n\n        //  targetContainer  top-settings-holder\n        if (targetContainer[0]?.id === 'top-settings-holder') {\n          console.log(' top-settings-holder ');\n          const firstChild = targetContainer.children().first();\n          if (firstChild.length > 0) {\n            navButton.insertBefore(firstChild);\n          } else {\n            targetContainer.prepend(navButton);\n          }\n        } else {\n          // \n          console.log('');\n          targetContainer.prepend(navButton);\n        }\n\n        //  - \n        navButton.on('click', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          console.log('mzrodyu');\n\n          // \n          const panel = $('#memoryManagementPanel');\n          if (panel.length > 0) {\n            if (panel.is(':visible')) {\n              panel.fadeOut(200);\n            } else {\n              panel.fadeIn(200);\n            }\n          } else {\n            toastr.error('');\n          }\n        });\n\n        // \n        navButton\n          .on('mouseenter', function () {\n            $(this).css('background', 'rgba(255, 255, 255, 0.1)');\n          })\n          .on('mouseleave', function () {\n            $(this).css('background', 'transparent');\n          });\n\n        console.log('mzrodyu:', targetContainer[0]?.id || '');\n        console.log(':', navButton[0]?.parentElement?.children?.[0]?.className || '');\n        console.log(':', navButton[0]);\n        console.log(':', $('#memoryManagementPanel').length);\n        isAdding = false;\n      } catch (error) {\n        console.error(':', error);\n        isAdding = false;\n        setTimeout(addNavButton, 500);\n      }\n    };\n\n    // \n    addNavButton();\n\n    // 2\n    setInterval(() => {\n      const button = $('#memoryNavButton');\n      if (button.length === 0 && !isAdding) {\n        console.log('...');\n        addNavButton();\n      }\n    }, 2000);\n\n    // UI\n    if (typeof eventOn === 'function') {\n      try {\n        // \n        eventOn(tavern_events.CHAT_CHANGED, () => {\n          console.log('...');\n          setTimeout(() => {\n            const button = $('#memoryNavButton');\n            if (button.length === 0 && !isAdding) {\n              console.log('...');\n              addNavButton();\n            }\n          }, 500);\n        });\n      } catch (e) {\n        console.log(':', e);\n      }\n    }\n  }, 300);\n});\n","module.exports = Vue;","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=0c833396&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"06e7fe41\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=0c833396&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=0c833396&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.summary-tab[data-v-97028022]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-97028022]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.section-header h3[data-v-97028022]{margin:0;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.header-actions[data-v-97028022]{display:flex;align-items:center;gap:10px}.count-badge[data-v-97028022]{background:#4a9eff;color:white;padding:4px 8px;border-radius:12px;font-size:12px}.empty-state[data-v-97028022]{text-align:center;padding:40px 20px;color:#888}.empty-state i[data-v-97028022]{font-size:48px;margin-bottom:10px;opacity:0.3}.empty-state p[data-v-97028022]{margin:10px 0;font-size:14px}.empty-state small[data-v-97028022]{color:#666;font-size:12px}.history-list[data-v-97028022]{display:flex;flex-direction:column;gap:10px;padding:15px 20px}.history-item[data-v-97028022]{background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;overflow:hidden;transition:border-color 0.2s}.history-item[data-v-97028022]:hover{border-color:#4a4a4a}.history-header[data-v-97028022]{padding:12px 15px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background 0.2s}.history-header[data-v-97028022]:hover{background:#2a2a2a}.history-info[data-v-97028022]{display:flex;align-items:center;gap:10px;flex:1}.history-number[data-v-97028022]{color:#4a9eff;font-weight:bold}.history-range[data-v-97028022]{color:#888;font-size:12px}.expand-icon[data-v-97028022]{color:#888;font-size:12px}.history-content[data-v-97028022]{padding:15px;background:#2a2a2a}.history-actions[data-v-97028022]{display:flex;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a}.mini-button[data-v-97028022]{flex:1;padding:6px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:background 0.2s}.mini-button[data-v-97028022]:hover{background:#3a3a3a}.mini-button.delete-button[data-v-97028022]:hover{background:#ff4444;border-color:#ff4444;color:white}.mini-button.worldbook-button[data-v-97028022]{background:#28a745;color:white;border-color:#28a745}.mini-button.worldbook-button[data-v-97028022]:hover{background:#218838;border-color:#218838;color:white}.mini-button.create-worldbook-button[data-v-97028022]{background:#17a2b8;color:white;border-color:#17a2b8}.mini-button.create-worldbook-button[data-v-97028022]:hover{background:#138496;border-color:#138496;color:white}.mini-button.refresh-button[data-v-97028022]{background:#6c757d;color:white;border-color:#6c757d}.mini-button.refresh-button[data-v-97028022]:hover{background:#5a6268;border-color:#5a6268;color:white}.mini-button.debug-button[data-v-97028022]{background:#ffc107;color:#000;border-color:#ffb300}.mini-button.debug-button[data-v-97028022]:hover{background:#e0a800;border-color:#d39e00;color:#000}.history-text[data-v-97028022]{white-space:pre-wrap;word-wrap:break-word;line-height:1.6;max-height:400px;overflow-y:auto}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/SummaryTab.vue\"],\"names\":[],\"mappings\":\"AAqlCA,8BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,oCACE,QAAS,CACT,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,cACF,CAEA,8BACE,iBAAkB,CAClB,iBAAkB,CAClB,UACF,CAEA,gCACE,cAAe,CACf,kBAAmB,CACnB,WACF,CAEA,gCACE,aAAc,CACd,cACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,iBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,oBACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,0BACF,CAEA,uCACE,kBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,iCACE,aAAc,CACd,gBACF,CAEA,gCACE,UAAW,CACX,cACF,CAEA,8BACE,UAAW,CACX,cACF,CAEA,kCACE,YAAa,CACb,kBACF,CAEA,kCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,kBAAmB,CACnB,+BACF,CAEA,8BACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,cAAe,CACf,0BACF,CAEA,oCACE,kBACF,CAEA,kDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,+CACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,qDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,sDACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,4DACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,6CACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,mDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,2CACE,kBAAmB,CACnB,UAAW,CACX,oBACF,CAEA,iDACE,kBAAmB,CACnB,oBAAqB,CACrB,UACF,CAEA,+BACE,oBAAqB,CACrB,oBAAqB,CACrB,eAAgB,CAChB,gBAAiB,CACjB,eACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"summary-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n        margin-bottom: 5px;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"header-actions\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span\\n          v-if=\\\"summary_history.length > 0\\\"\\n          class=\\\"count-badge\\\"\\n          style=\\\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n          >{{ summary_history.length }} </span\\n        >\\n        <button\\n          class=\\\"mini-button refresh-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 4px;\\n            color: #e0e0e0;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"handleRefreshData\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"mini-button create-worldbook-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #51cf66;\\n            border: 1px solid #40c057;\\n            border-radius: 4px;\\n            color: white;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"createSummaryWorldbook\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"mini-button debug-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #ffc107;\\n            border: 1px solid #ffb300;\\n            border-radius: 4px;\\n            color: #000;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"showDebugPanel\\\"\\n        >\\n          <i class=\\\"fa-solid fa-bug\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <div\\n      v-if=\\\"summary_history && summary_history.length > 0\\\"\\n      class=\\\"history-list\\\"\\n      style=\\\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\\\"\\n    >\\n      <div\\n        v-for=\\\"(item, index) in summary_history\\\"\\n        :key=\\\"index\\\"\\n        class=\\\"history-item\\\"\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #444;\\n          border-radius: 8px;\\n          padding: 15px;\\n          transition: all 0.3s ease;\\n        \\\"\\n      >\\n        <div\\n          class=\\\"history-header\\\"\\n          style=\\\"\\n            padding: 12px 15px;\\n            background: #1a1a1a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background 0.2s;\\n            border-radius: 6px;\\n          \\\"\\n          @click=\\\"toggleExpanded(index)\\\"\\n        >\\n          <div class=\\\"history-info\\\" style=\\\"display: flex; align-items: center; gap: 10px; flex: 1\\\">\\n            <span class=\\\"history-number\\\" style=\\\"color: #4a9eff; font-weight: bold\\\">#{{ index + 1 }}</span>\\n            <span class=\\\"history-range\\\" style=\\\"color: #888; font-size: 12px\\\"\\n              > {{ item.start_id }} - {{ item.end_id }}</span\\n            >\\n          </div>\\n          <span class=\\\"expand-icon\\\" style=\\\"color: #888; font-size: 12px\\\">{{ isExpanded(index) ? '' : '' }}</span>\\n        </div>\\n        <div\\n          v-if=\\\"isExpanded(index)\\\"\\n          class=\\\"history-content\\\"\\n          style=\\\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\\\"\\n        >\\n          <div\\n            class=\\\"history-actions\\\"\\n            style=\\\"display: flex; gap: 8px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #3a3a3a\\\"\\n          >\\n            <button\\n              class=\\\"mini-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 4px;\\n                color: #e0e0e0;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: background 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"copySummary(item.content)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-copy\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"mini-button worldbook-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #4a9eff;\\n                border: 1px solid #5aaeff;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"bindToWorldbook(item.content, index)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-book\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"mini-button delete-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #ff6b6b;\\n                border: 1px solid #ff5252;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"deleteSummary(index)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-trash\\\"></i> \\n            </button>\\n          </div>\\n          <div\\n            class=\\\"history-text\\\"\\n            style=\\\"\\n              font-family: 'Courier New', monospace;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              color: #e0e0e0;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              user-select: text;\\n              cursor: text;\\n            \\\"\\n          >\\n            {{ item.content }}\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"empty-state\\\" style=\\\"text-align: center; padding: 40px 20px; color: #888\\\">\\n      <i class=\\\"fa-solid fa-inbox\\\" style=\\\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\\\"></i>\\n      <p style=\\\"margin: 10px 0; font-size: 16px\\\"></p>\\n      <small style=\\\"font-size: 12px; color: #666\\\">\\\"\\\"</small>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { useSummaryHistoryStore } from '../settings';\\nimport { getChatIdSafe } from '../utils';\\n\\nconst historyStore = useSummaryHistoryStore();\\n\\n// \\nconst summary_history = ref<Array<{ start_id: number; end_id: number; content: string }>>([]);\\nconst expandedState = ref<Map<number, boolean>>(new Map());\\n\\n// \\nconst refreshSummaryHistory = () => {\\n  try {\\n    summary_history.value = historyStore.getSummaryHistory();\\n    console.log(':', summary_history.value.length);\\n  } catch (e) {\\n    console.error(':', e);\\n    summary_history.value = [];\\n  }\\n};\\n\\n// \\nconst toggleExpanded = (index: number) => {\\n  const current = expandedState.value.get(index) || false;\\n  expandedState.value.set(index, !current);\\n};\\n\\nconst isExpanded = (index: number) => {\\n  return expandedState.value.get(index) || false;\\n};\\n\\n// \\nconst handleRefreshData = async () => {\\n  console.log('');\\n  try {\\n    await refreshSummaryHistory();\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // iframe\\n    if (window.parent && window.parent !== window) {\\n      console.log('iframe');\\n      const parentSuccess = await tryParentWindowCopy(text);\\n      if (parentSuccess) {\\n        console.log('');\\n        window.toastr.success(successMessage);\\n        return;\\n      }\\n    }\\n\\n    // 1:  Clipboard API\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log(' Clipboard API');\\n      try {\\n        await navigator.clipboard.writeText(text);\\n        console.log('Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } catch (clipboardErr) {\\n        console.warn('Clipboard API :', clipboardErr);\\n        // \\n      }\\n    }\\n\\n    // 2:  execCommand \\n    console.log(' execCommand ');\\n    const success = await execCommandCopy(text);\\n    if (success) {\\n      console.log('execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    }\\n\\n    // 3: \\n    console.log('');\\n    showManualCopyDialog(text);\\n  } catch (err) {\\n    console.error(':', err);\\n    // \\n    showManualCopyDialog(text);\\n  }\\n};\\n\\n// \\nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      const parentDoc = window.parent.document;\\n      const parentBody = window.parent.document.body;\\n\\n      //  textarea \\n      const textarea = parentDoc.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.cssText = `\\n        position: fixed;\\n        left: -9999px;\\n        top: -9999px;\\n        opacity: 0;\\n        pointer-events: none;\\n        z-index: -1000;\\n      `;\\n      textarea.setAttribute('readonly', '');\\n\\n      parentBody.appendChild(textarea);\\n\\n      // \\n      textarea.focus();\\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n\\n      // \\n      parentBody.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error(':', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n// execCommand \\nconst execCommandCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      //  textarea \\n      const textarea = document.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.position = 'fixed';\\n      textarea.style.left = '-9999px';\\n      textarea.style.top = '-9999px';\\n      textarea.style.opacity = '0';\\n      textarea.style.pointerEvents = 'none';\\n      textarea.setAttribute('readonly', '');\\n\\n      document.body.appendChild(textarea);\\n\\n      // \\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = document.execCommand('copy');\\n\\n      // \\n      document.body.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error('execCommand :', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'manual-copy-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #4a9eff;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 900px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+C</kbd> </li>\\n          <li>\\\"\\\" <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Esc</kbd> </li>\\n        </ol>\\n      </div>\\n    `;\\n\\n    // \\n    const textarea = parentDoc.createElement('textarea');\\n    textarea.value = text;\\n    textarea.style.cssText = `\\n      width: 100%;\\n      height: 400px;\\n      background: #1a1a1a;\\n      border: 2px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      color: #e0e0e0;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 13px;\\n      line-height: 1.5;\\n      resize: vertical;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      outline: none;\\n      margin-bottom: 20px;\\n      box-sizing: border-box;\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: flex;\\n      gap: 12px;\\n      justify-content: center;\\n      align-items: center;\\n    `;\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #4a9eff;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    closeButton.onmouseover = () => {\\n      closeButton.style.background = '#5ba8ff';\\n    };\\n    closeButton.onmouseout = () => {\\n      closeButton.style.background = '#4a9eff';\\n    };\\n\\n    // \\n    const copyButton = parentDoc.createElement('button');\\n    copyButton.textContent = '';\\n    copyButton.style.cssText = `\\n      background: #28a745;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    copyButton.onmouseover = () => {\\n      copyButton.style.background = '#218838';\\n    };\\n    copyButton.onmouseout = () => {\\n      copyButton.style.background = '#28a745';\\n    };\\n\\n    // \\n    buttonContainer.appendChild(copyButton);\\n    buttonContainer.appendChild(closeButton);\\n\\n    container.appendChild(header);\\n    container.appendChild(textarea);\\n    container.appendChild(buttonContainer);\\n    overlay.appendChild(container);\\n\\n    // \\n    parentBody.appendChild(overlay);\\n\\n    // \\n    closeButton.onclick = () => {\\n      console.log('');\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    copyButton.onclick = async () => {\\n      console.log('');\\n      try {\\n        // \\n        textarea.focus();\\n        textarea.select();\\n\\n        // \\n        const success = document.execCommand('copy');\\n        if (success) {\\n          window.toastr.success('');\\n          parentBody.removeChild(overlay);\\n        } else {\\n          window.toastr.warning('');\\n        }\\n      } catch (err) {\\n        console.error(':', err);\\n        window.toastr.warning('');\\n      }\\n    };\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        console.log('');\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log('ESC');\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    // \\n    setTimeout(() => {\\n      console.log('');\\n      textarea.focus();\\n      textarea.select();\\n    }, 200);\\n\\n    // \\n    window.toastr.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr.error('');\\n  }\\n};\\n\\n//  - \\nconst copySummary = (content: string) => {\\n  copyToClipboard(content, '');\\n};\\n\\n// \\nconst deleteSummary = (index: number) => {\\n  if (confirm('')) {\\n    try {\\n      const chat_id = getChatIdSafe();\\n      if (!chat_id) {\\n        window.toastr.error('');\\n        return;\\n      }\\n\\n      summary_history.value.splice(index, 1);\\n      insertOrAssignVariables({ summary_history: summary_history.value }, { type: 'chat' });\\n      window.toastr.success('');\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error('');\\n    }\\n  }\\n};\\n\\n// \\nconst createSummaryWorldbook = async () => {\\n  try {\\n    // \\n    let characterName = '';\\n    try {\\n      const currentCharacter = getCharData('current');\\n      if (currentCharacter && currentCharacter.name) {\\n        characterName = currentCharacter.name;\\n        // \\n        characterName = characterName.replace(/[<>:\\\"/\\\\\\\\|?*]/g, '_').trim();\\n      }\\n    } catch (charError) {\\n      console.warn(':', charError);\\n    }\\n\\n    // \\n    const dateStr = new Date().toISOString().slice(0, 10);\\n    const worldbookName = `_${characterName}_${dateStr}`;\\n\\n    console.log(':', worldbookName);\\n\\n    const existingWorldbooks = getWorldbookNames();\\n    if (existingWorldbooks.includes(worldbookName)) {\\n      window.toastr.warning(` \\\"${worldbookName}\\\" `);\\n      return;\\n    }\\n\\n    await createWorldbook(worldbookName, []);\\n\\n    try {\\n      await rebindChatWorldbook('current', worldbookName);\\n      window.toastr.success(` \\\"${worldbookName}\\\" `);\\n    } catch (bindError) {\\n      console.warn(':', bindError);\\n      window.toastr.success(` \\\"${worldbookName}\\\"`);\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst bindToWorldbook = async (content: string, summaryIndex: number) => {\\n  try {\\n    const worldbookNames = getWorldbookNames();\\n    if (worldbookNames.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    const selectedWorldbook =\\n      worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\\n    if (!selectedWorldbook) {\\n      return;\\n    }\\n\\n    const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\\n    const newEntry = {\\n      name: entryName,\\n      enabled: true,\\n      strategy: {\\n        type: 'constant' as const,\\n        keys: [],\\n        keys_secondary: { logic: 'and_any' as const, keys: [] },\\n        scan_depth: 'same_as_global' as const,\\n      },\\n      position: {\\n        type: 'before_character_definition' as const,\\n        role: 'system' as const,\\n        depth: 1,\\n      },\\n      content: content,\\n      comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\\n      insertion_order: 0,\\n      case_sensitive: false,\\n      name_is_regex: false,\\n      keys_are_regex: false,\\n      selective_logic: 'and',\\n      secondary_keys_logic: 'and',\\n      activation_threshold: 0,\\n      disabled: false,\\n      order: 0,\\n      group: '',\\n      local_id: 0,\\n      depth_entries: [],\\n      depth_entries_all: false,\\n      search_range: 0,\\n      force_activation: false,\\n      disable: false,\\n      exclude_recursion: false,\\n      hidden: false,\\n      priority: 0,\\n      comment_is_regex: false,\\n      content_is_regex: false,\\n      secondary_keys_are_regex: false,\\n      keys_secondary_are_regex: false,\\n      uid: Date.now(),\\n    };\\n\\n    await createWorldbookEntries(selectedWorldbook, [newEntry]);\\n    window.toastr.success(`: ${selectedWorldbook}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst promptForWorldbook = async (worldbookNames: string[]): Promise<string | null> => {\\n  return new Promise<string | null>(resolve => {\\n    const dialog = $(`\\n      <div style=\\\"\\n        position: fixed;\\n        top: 50%;\\n        left: 50%;\\n        transform: translate(-50%, -50%);\\n        background: #2a2a2a;\\n        border: 1px solid #3a3a3a;\\n        border-radius: 8px;\\n        padding: 20px;\\n        z-index: 1000000;\\n        min-width: 300px;\\n      \\\">\\n        <h3 style=\\\"margin: 0 0 15px 0; color: #e0e0e0;\\\"></h3>\\n        <div style=\\\"margin-bottom: 15px;\\\">\\n          ${worldbookNames\\n            .map(\\n              name => `\\n            <label style=\\\"display: block; margin: 5px 0; color: #e0e0e0;\\\">\\n              <input type=\\\"radio\\\" name=\\\"worldbook\\\" value=\\\"${name}\\\" style=\\\"margin-right: 8px;\\\">\\n              ${name}\\n            </label>\\n          `,\\n            )\\n            .join('')}\\n        </div>\\n        <div style=\\\"text-align: right;\\\">\\n          <button id=\\\"cancelWorldbook\\\" style=\\\"\\n            background: #666;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 4px;\\n            margin-right: 10px;\\n            cursor: pointer;\\n          \\\"></button>\\n          <button id=\\\"confirmWorldbook\\\" style=\\\"\\n            background: #4a9eff;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 4px;\\n            cursor: pointer;\\n          \\\"></button>\\n        </div>\\n      </div>\\n    `);\\n\\n    const overlay = $(`\\n      <div style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(0, 0, 0, 0.5);\\n        z-index: 999999;\\n      \\\"></div>\\n    `);\\n\\n    $('body').append(overlay).append(dialog);\\n\\n    $('#cancelWorldbook').on('click', () => {\\n      overlay.remove();\\n      dialog.remove();\\n      resolve(null);\\n    });\\n\\n    $('#confirmWorldbook').on('click', () => {\\n      const selected = $('input[name=\\\"worldbook\\\"]:checked').val() as string;\\n      overlay.remove();\\n      dialog.remove();\\n      resolve(selected || null);\\n    });\\n\\n    $('input[name=\\\"worldbook\\\"]:first').prop('checked', true);\\n  });\\n};\\n\\n// \\nconst showDebugPanel = () => {\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'debug-panel-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #ffc107;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 800px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ul style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li>localStorage</li>\\n          <li></li>\\n          <li></li>\\n        </ul>\\n      </div>\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: grid;\\n      grid-template-columns: 1fr 1fr;\\n      gap: 12px;\\n      margin-bottom: 20px;\\n    `;\\n\\n    // \\n    const buttons = [\\n      { id: 'testComplete', text: ' ', color: '#4a9eff' },\\n      { id: 'syncData', text: ' ', color: '#28a745' },\\n      { id: 'checkFloor', text: ' ', color: '#17a2b8' },\\n      { id: 'testCalculation', text: ' ', color: '#6f42c1' },\\n      { id: 'showStatus', text: ' ', color: '#fd7e14' },\\n      { id: 'resetStartId', text: ' ', color: '#dc3545' },\\n    ];\\n\\n    buttons.forEach(button => {\\n      const btn = parentDoc.createElement('button');\\n      btn.id = button.id;\\n      btn.textContent = button.text;\\n      btn.style.cssText = `\\n        background: ${button.color};\\n        color: white;\\n        border: none;\\n        padding: 12px 16px;\\n        border-radius: 6px;\\n        cursor: pointer;\\n        font-size: 13px;\\n        font-weight: 500;\\n        transition: background 0.2s;\\n      `;\\n      btn.onmouseover = () => {\\n        btn.style.opacity = '0.8';\\n      };\\n      btn.onmouseout = () => {\\n        btn.style.opacity = '1';\\n      };\\n      buttonContainer.appendChild(btn);\\n    });\\n\\n    // \\n    const outputArea = parentDoc.createElement('div');\\n    outputArea.id = 'debug-output';\\n    outputArea.style.cssText = `\\n      background: #1a1a1a;\\n      border: 1px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      height: 200px;\\n      overflow-y: auto;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 12px;\\n      color: #e0e0e0;\\n      white-space: pre-wrap;\\n      margin-bottom: 20px;\\n    `;\\n    outputArea.textContent = '...\\\\n';\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #6c757d;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n      align-self: center;\\n    `;\\n\\n    // \\n    container.appendChild(header);\\n    container.appendChild(buttonContainer);\\n    container.appendChild(outputArea);\\n    container.appendChild(closeButton);\\n\\n    overlay.appendChild(container);\\n    parentBody.appendChild(overlay);\\n\\n    // \\n    const log = (message: string) => {\\n      const output = parentDoc.getElementById('debug-output');\\n      if (output) {\\n        output.textContent += message + '\\\\n';\\n        output.scrollTop = output.scrollHeight;\\n      }\\n    };\\n\\n    // \\n    closeButton.onclick = () => {\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    // \\n    parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).testCompleteAutoSummary) {\\n          (window as any).testCompleteAutoSummary();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('syncData')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).syncAutoSummaryData) {\\n          (window as any).syncAutoSummaryData();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).checkCurrentFloor) {\\n          (window as any).checkCurrentFloor();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).testFloorCalculation) {\\n          (window as any).testFloorCalculation();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).checkAutoSummaryStatus) {\\n          (window as any).checkAutoSummaryStatus();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).smartResetChat) {\\n          (window as any).smartResetChat();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    window.toastr?.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr?.error('');\\n  }\\n};\\n\\n// \\nrefreshSummaryHistory();\\n</script>\\n\\n<style scoped>\\n.summary-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.section-header h3 {\\n  margin: 0;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.header-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.count-badge {\\n  background: #4a9eff;\\n  color: white;\\n  padding: 4px 8px;\\n  border-radius: 12px;\\n  font-size: 12px;\\n}\\n\\n.empty-state {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #888;\\n}\\n\\n.empty-state i {\\n  font-size: 48px;\\n  margin-bottom: 10px;\\n  opacity: 0.3;\\n}\\n\\n.empty-state p {\\n  margin: 10px 0;\\n  font-size: 14px;\\n}\\n\\n.empty-state small {\\n  color: #666;\\n  font-size: 12px;\\n}\\n\\n.history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 15px 20px;\\n}\\n\\n.history-item {\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  overflow: hidden;\\n  transition: border-color 0.2s;\\n}\\n\\n.history-item:hover {\\n  border-color: #4a4a4a;\\n}\\n\\n.history-header {\\n  padding: 12px 15px;\\n  background: #1a1a1a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: pointer;\\n  user-select: none;\\n  transition: background 0.2s;\\n}\\n\\n.history-header:hover {\\n  background: #2a2a2a;\\n}\\n\\n.history-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.history-number {\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.history-range {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.expand-icon {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.history-content {\\n  padding: 15px;\\n  background: #2a2a2a;\\n}\\n\\n.history-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.mini-button {\\n  flex: 1;\\n  padding: 6px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 4px;\\n  color: #e0e0e0;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: background 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #3a3a3a;\\n}\\n\\n.mini-button.delete-button:hover {\\n  background: #ff4444;\\n  border-color: #ff4444;\\n  color: white;\\n}\\n\\n.mini-button.worldbook-button {\\n  background: #28a745;\\n  color: white;\\n  border-color: #28a745;\\n}\\n\\n.mini-button.worldbook-button:hover {\\n  background: #218838;\\n  border-color: #218838;\\n  color: white;\\n}\\n\\n.mini-button.create-worldbook-button {\\n  background: #17a2b8;\\n  color: white;\\n  border-color: #17a2b8;\\n}\\n\\n.mini-button.create-worldbook-button:hover {\\n  background: #138496;\\n  border-color: #138496;\\n  color: white;\\n}\\n\\n.mini-button.refresh-button {\\n  background: #6c757d;\\n  color: white;\\n  border-color: #6c757d;\\n}\\n\\n.mini-button.refresh-button:hover {\\n  background: #5a6268;\\n  border-color: #5a6268;\\n  color: white;\\n}\\n\\n.mini-button.debug-button {\\n  background: #ffc107;\\n  color: #000;\\n  border-color: #ffb300;\\n}\\n\\n.mini-button.debug-button:hover {\\n  background: #e0a800;\\n  border-color: #d39e00;\\n  color: #000;\\n}\\n\\n.history-text {\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  line-height: 1.6;\\n  max-height: 400px;\\n  overflow-y: auto;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { ref, watch } from 'vue';\nimport { getChatIdSafe, getScriptIdSafe } from './utils';\n\n//  zod\nlet z: any;\ntry {\n  z = require('zod');\n} catch (e) {\n  console.warn('zod ');\n  // \n  z = {\n    object: (obj: any) => ({\n      parse: (data: any) => data,\n      default: (def: any) => ({ parse: (data: any) => data || def }),\n    }),\n    string: () => ({ default: (def: string) => ({ parse: (data: any) => data || def }) }),\n    number: () => ({ default: (def: number) => ({ parse: (data: any) => data || def }) }),\n    boolean: () => ({ default: (def: boolean) => ({ parse: (data: any) => data || def }) }),\n    array: (schema: any) => ({\n      default: (def: any[]) => ({ parse: (data: any) => (Array.isArray(data) ? data : def) }),\n    }),\n    prefault: (def: any) => ({ parse: (data: any) => data || def }),\n  };\n}\n\nconst Settings = z\n  .object({\n    api_endpoint: z.string().default('https://api.openai.com/v1/chat/completions'),\n    api_key: z.string().default(''),\n    model: z.string().default('gpt-4o-mini'),\n    max_tokens: z.number().default(4000),\n    temperature: z.number().default(0.7),\n    auto_summarize_enabled: z.boolean().default(false),\n    summarize_interval: z.number().default(50), // \n    start_message_id: z.number().default(0), // \n    end_message_id: z.number().default(0), // \n    table_start_message_id: z.number().default(0), // \n    table_end_message_id: z.number().default(0), // \n    summary_history: z\n      .array(\n        z.object({\n          start_id: z.number(),\n          end_id: z.number(),\n          content: z.string(),\n        }),\n      )\n      .default([]),\n  })\n  .prefault({});\n\nexport const useSettingsStore = defineStore('settings', () => {\n  // \n  const getScriptIdSafely = () => getScriptIdSafe();\n\n  // \n  const initSettings = () => {\n    const script_id = getScriptIdSafely();\n\n    if (!script_id) {\n      console.warn('script_id  null');\n      return ref(Settings.parse({}));\n    }\n\n    try {\n      return ref(Settings.parse(getVariables({ type: 'script', script_id })));\n    } catch (e) {\n      console.warn(':', e);\n      return ref(Settings.parse({}));\n    }\n  };\n\n  const settings = initSettings();\n\n  // \n  setTimeout(() => {\n    const script_id = getScriptIdSafely();\n    if (script_id) {\n      try {\n        const realVariables = getVariables({ type: 'script', script_id });\n        if (realVariables && Object.keys(realVariables).length > 0) {\n          settings.value = Settings.parse(realVariables);\n        }\n      } catch (e) {\n        console.warn(':', e);\n      }\n    }\n  }, 200);\n\n  // \n  let saveTimeout: number | null = null;\n  const debouncedSave = (new_settings: any) => {\n    if (saveTimeout) {\n      clearTimeout(saveTimeout);\n    }\n    saveTimeout = setTimeout(() => {\n      const script_id = getScriptIdSafely();\n      if (!script_id) {\n        console.warn('script_id  null');\n        return;\n      }\n      try {\n        console.log(' :', new_settings);\n        insertOrAssignVariables(klona(new_settings), { type: 'script', script_id });\n\n        // \n        setTimeout(() => {\n          try {\n            const saved = getVariables({ type: 'script', script_id });\n            console.log(' :', saved);\n          } catch (e) {\n            console.error(' :', e);\n          }\n        }, 100);\n      } catch (e) {\n        console.error(' :', e);\n        window.toastr?.error(': ' + (e as Error).message);\n      }\n    }, 500); // 500ms \n  };\n\n  watch(settings, debouncedSave, { immediate: false, deep: true });\n\n  // \n  const saveSettings = () => {\n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      window.toastr?.error('script_id ');\n      return false;\n    }\n    try {\n      console.log(' :', settings.value);\n      insertOrAssignVariables(klona(settings.value), { type: 'script', script_id });\n      window.toastr?.success('');\n      return true;\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n      return false;\n    }\n  };\n\n  // \n  const reloadSettings = () => {\n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      return false;\n    }\n    try {\n      const realVariables = getVariables({ type: 'script', script_id });\n      if (realVariables && Object.keys(realVariables).length > 0) {\n        settings.value = Settings.parse(realVariables);\n        console.log(' :', settings.value);\n        window.toastr?.success('');\n        return true;\n      }\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n    }\n    return false;\n  };\n\n  return {\n    settings,\n    saveSettings,\n    reloadSettings,\n  };\n});\n\n//  Store - \nexport const useSummaryHistoryStore = defineStore('summaryHistory', () => {\n  const addSummary = (start_id: number, end_id: number, content: string) => {\n    try {\n      //  ID\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        console.error(' ID');\n        window.toastr.error('');\n        return;\n      }\n\n      console.log(':', chat_id);\n\n      // \n      let chatHistory: Array<{ start_id: number; end_id: number; content: string }> = [];\n      try {\n        const chatData = getVariables({ type: 'chat' });\n        if (chatData && chatData.summary_history) {\n          chatHistory = Array.isArray(chatData.summary_history) ? chatData.summary_history : [];\n        }\n      } catch (e) {\n        console.warn(':', e);\n      }\n\n      // \n      chatHistory.unshift({\n        start_id,\n        end_id,\n        content,\n      });\n\n      //  50 \n      if (chatHistory.length > 50) {\n        chatHistory = chatHistory.slice(0, 50);\n      }\n\n      // \n      insertOrAssignVariables({ summary_history: chatHistory }, { type: 'chat' });\n\n      console.log(':', chat_id);\n    } catch (error) {\n      console.error(':', error);\n      window.toastr.error(': ' + (error as Error).message);\n    }\n  };\n\n  const getSummaryHistory = (): Array<{ start_id: number; end_id: number; content: string }> => {\n    try {\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        return [];\n      }\n\n      const chatData = getVariables({ type: 'chat' });\n      if (chatData && chatData.summary_history) {\n        return Array.isArray(chatData.summary_history) ? chatData.summary_history : [];\n      }\n      return [];\n    } catch (e) {\n      console.warn(':', e);\n      return [];\n    }\n  };\n\n  return {\n    addSummary,\n    getSummaryHistory,\n  };\n});\n","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=0416f1c6&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"60874a9f\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=0416f1c6&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=0416f1c6&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.memory-panel-container[data-v-4ef9901c]{display:flex;flex-direction:column;height:100%;background:#1a1a1a;color:#e0e0e0}.panel-header[data-v-4ef9901c]{padding:15px 20px;background:#2a2a2a;border-bottom:1px solid #3a3a3a;display:flex;justify-content:space-between;align-items:center;border-radius:8px 8px 0 0}.header-left[data-v-4ef9901c]{display:flex;align-items:center;gap:10px}.close-button[data-v-4ef9901c]{cursor:pointer;padding:5px 10px;border-radius:4px;transition:background 0.2s}.close-button[data-v-4ef9901c]:hover{background:rgba(255,255,255,0.1)}.panel-tabs[data-v-4ef9901c]{display:flex;background:#2a2a2a;border-bottom:1px solid #3a3a3a}.tab-item[data-v-4ef9901c]{flex:1;padding:12px 20px;cursor:pointer;text-align:center;transition:background 0.2s,color 0.2s;display:flex;align-items:center;justify-content:center;gap:8px;border-bottom:2px solid transparent}.tab-item[data-v-4ef9901c]:hover{background:rgba(255,255,255,0.05)}.tab-item.tab-active[data-v-4ef9901c]{background:#1a1a1a;color:#4a9eff;border-bottom-color:#4a9eff}.panel-content[data-v-4ef9901c]{flex:1;overflow-y:auto;overflow-x:hidden;padding:0;min-height:0;scrollbar-width:thin;scrollbar-color:#4a9eff #2a2a2a}.panel-content[data-v-4ef9901c]::-webkit-scrollbar{width:8px}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:4px}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-thumb:hover{background:#5ba8ff}.panel-content[data-v-4ef9901c]{scrollbar-width:thin !important;scrollbar-color:#4a9eff #2a2a2a !important}.panel-content[data-v-4ef9901c]::-webkit-scrollbar{width:8px !important;display:block !important}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-track{background:#2a2a2a !important;border-radius:4px !important}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-thumb{background:#4a9eff !important;border-radius:4px !important}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-thumb:hover{background:#5ba8ff !important}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/MainPanel.vue\"],\"names\":[],\"mappings\":\"AAgIA,yCACE,YAAa,CACb,qBAAsB,CACtB,WAAY,CACZ,kBAAmB,CACnB,aACF,CAEA,+BACE,iBAAkB,CAClB,kBAAmB,CACnB,+BAAgC,CAChC,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,yBACF,CAEA,8BACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,+BACE,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,0BACF,CAEA,qCACE,gCACF,CAEA,6BACE,YAAa,CACb,kBAAmB,CACnB,+BACF,CAEA,2BACE,MAAO,CACP,iBAAkB,CAClB,cAAe,CACf,iBAAkB,CAClB,qCAEY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,mCACF,CAEA,iCACE,iCACF,CAEA,sCACE,kBAAmB,CACnB,aAAc,CACd,2BACF,CAEA,gCACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,SAAU,CACV,YAAa,CACb,oBAAqB,CACrB,+BACF,CAEA,mDACE,SACF,CAEA,yDACE,kBAAmB,CACnB,iBACF,CAEA,yDACE,kBAAmB,CACnB,iBACF,CAEA,+DACE,kBACF,CAGA,gCACE,+BAAgC,CAChC,0CACF,CAEA,mDACE,oBAAqB,CACrB,wBACF,CAEA,yDACE,6BAA8B,CAC9B,4BACF,CAEA,yDACE,6BAA8B,CAC9B,4BACF,CAEA,+DACE,6BACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    class=\\\"memory-panel-container\\\"\\n    style=\\\"display: flex; flex-direction: column; height: 100%; background: #1a1a1a; color: #e0e0e0\\\"\\n  >\\n    <!--  -->\\n    <div\\n      class=\\\"panel-header\\\"\\n      style=\\\"\\n        padding: 15px 20px;\\n        background: #2a2a2a;\\n        border-bottom: 1px solid #3a3a3a;\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        border-radius: 8px 8px 0 0;\\n        flex-shrink: 0;\\n      \\\"\\n    >\\n      <div class=\\\"header-left\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span style=\\\"font-size: 24px\\\"></span>\\n        <b>mzrodyu</b>\\n      </div>\\n      <div\\n        class=\\\"close-button\\\"\\n        style=\\\"cursor: pointer; padding: 5px 10px; border-radius: 4px; transition: background 0.2s\\\"\\n        @click=\\\"closePanel\\\"\\n      >\\n        <i class=\\\"fa-solid fa-times\\\"></i>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"panel-tabs\\\"\\n      style=\\\"display: flex; background: #2a2a2a; border-bottom: 1px solid #3a3a3a; flex-shrink: 0\\\"\\n    >\\n      <div\\n        v-for=\\\"tab in tabs\\\"\\n        :key=\\\"tab.key\\\"\\n        :class=\\\"{ 'tab-active': activeTab === tab.key }\\\"\\n        class=\\\"tab-item\\\"\\n        :style=\\\"{\\n          flex: '1',\\n          padding: '12px 20px',\\n          cursor: 'pointer',\\n          textAlign: 'center',\\n          transition: 'background 0.2s, color 0.2s',\\n          display: 'flex',\\n          alignItems: 'center',\\n          justifyContent: 'center',\\n          gap: '8px',\\n          borderBottom: '2px solid transparent',\\n          backgroundColor: activeTab === tab.key ? '#1a1a1a' : 'transparent',\\n          color: activeTab === tab.key ? '#4a9eff' : '#e0e0e0',\\n          borderBottomColor: activeTab === tab.key ? '#4a9eff' : 'transparent',\\n        }\\\"\\n        @click=\\\"switchTab(tab.key)\\\"\\n      >\\n        <i :class=\\\"tab.icon\\\"></i>\\n        {{ tab.label }}\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"panel-content\\\"\\n      style=\\\"\\n        flex: 1;\\n        overflow-y: auto;\\n        overflow-x: hidden;\\n        padding: 0;\\n        min-height: 0;\\n        scrollbar-width: thin;\\n        scrollbar-color: #4a9eff #2a2a2a;\\n      \\\"\\n    >\\n      <component :is=\\\"currentComponent\\\" :key=\\\"activeTab\\\" v-bind=\\\"componentProps\\\" />\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { computed, ref } from 'vue';\\nimport SettingsTab from './SettingsTab.vue';\\nimport SummaryTab from './SummaryTab.vue';\\nimport TableTab from './TableTab.vue';\\nimport ToolsTab from './ToolsTab.vue';\\n\\n// \\nconst tabs = [\\n  { key: 'summary', label: '', icon: 'fa-solid fa-list' },\\n  { key: 'table', label: '', icon: 'fa-solid fa-table' },\\n  { key: 'settings', label: '', icon: 'fa-solid fa-cog' },\\n  { key: 'tools', label: '', icon: 'fa-solid fa-tools' },\\n];\\n\\nconst activeTab = ref<'summary' | 'table' | 'settings' | 'tools'>('settings');\\n\\n// \\nconst componentMap = {\\n  summary: SummaryTab,\\n  table: TableTab,\\n  settings: SettingsTab,\\n  tools: ToolsTab,\\n};\\n\\n// \\nconst currentComponent = computed(() => componentMap[activeTab.value]);\\n\\n// \\nconst componentProps = computed(() => ({\\n  activeTab: activeTab.value,\\n}));\\n\\n// \\nconst switchTab = (tabKey: string) => {\\n  console.log(':', tabKey);\\n  activeTab.value = tabKey as any;\\n};\\n\\n// \\nconst closePanel = () => {\\n  $('#memoryManagementPanel').fadeOut(200);\\n};\\n</script>\\n\\n<style scoped>\\n.memory-panel-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n}\\n\\n.panel-header {\\n  padding: 15px 20px;\\n  background: #2a2a2a;\\n  border-bottom: 1px solid #3a3a3a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  border-radius: 8px 8px 0 0;\\n}\\n\\n.header-left {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.close-button {\\n  cursor: pointer;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  transition: background 0.2s;\\n}\\n\\n.close-button:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.panel-tabs {\\n  display: flex;\\n  background: #2a2a2a;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.tab-item {\\n  flex: 1;\\n  padding: 12px 20px;\\n  cursor: pointer;\\n  text-align: center;\\n  transition:\\n    background 0.2s,\\n    color 0.2s;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 8px;\\n  border-bottom: 2px solid transparent;\\n}\\n\\n.tab-item:hover {\\n  background: rgba(255, 255, 255, 0.05);\\n}\\n\\n.tab-item.tab-active {\\n  background: #1a1a1a;\\n  color: #4a9eff;\\n  border-bottom-color: #4a9eff;\\n}\\n\\n.panel-content {\\n  flex: 1;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n  padding: 0;\\n  min-height: 0;\\n  scrollbar-width: thin;\\n  scrollbar-color: #4a9eff #2a2a2a;\\n}\\n\\n.panel-content::-webkit-scrollbar {\\n  width: 8px;\\n}\\n\\n.panel-content::-webkit-scrollbar-track {\\n  background: #2a2a2a;\\n  border-radius: 4px;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 4px;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb:hover {\\n  background: #5ba8ff;\\n}\\n\\n/*  */\\n.panel-content {\\n  scrollbar-width: thin !important;\\n  scrollbar-color: #4a9eff #2a2a2a !important;\\n}\\n\\n.panel-content::-webkit-scrollbar {\\n  width: 8px !important;\\n  display: block !important;\\n}\\n\\n.panel-content::-webkit-scrollbar-track {\\n  background: #2a2a2a !important;\\n  border-radius: 4px !important;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb {\\n  background: #4a9eff !important;\\n  border-radius: 4px !important;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb:hover {\\n  background: #5ba8ff !important;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tools-tab[data-v-0c833396]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-0c833396]{display:flex;align-items:center;justify-content:space-between;padding:15px 20px;background:linear-gradient(135deg,#2a2a2a 0%,#3a3a3a 100%);border-radius:8px;cursor:pointer;transition:all 0.3s ease;margin-bottom:15px;border:1px solid #3a3a3a}.section-header[data-v-0c833396]:hover{background:linear-gradient(135deg,#3a3a3a 0%,#4a4a4a 100%);transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}.tool-content[data-v-0c833396]{background:#1e1e1e;border:1px solid #3a3a3a;border-radius:8px;padding:20px;margin-bottom:20px}.tool-instructions[data-v-0c833396]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:12px;color:#ccc;font-size:12px;margin-bottom:15px}.form-group[data-v-0c833396]{margin-bottom:15px}.button-group[data-v-0c833396]{display:flex;gap:12px;margin-bottom:20px}.output-section[data-v-0c833396]{margin-top:20px}.output-content[data-v-0c833396]{background:#1e1e1e;border:1px solid #3a3a3a;border-radius:6px;padding:15px;color:#e0e0e0;font-size:13px;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;max-height:300px;overflow-y:auto}.output-actions[data-v-0c833396]{margin-top:12px;display:flex;gap:12px}.process-button[data-v-0c833396],.clear-button[data-v-0c833396],.generate-button[data-v-0c833396],.copy-button[data-v-0c833396]{position:relative;overflow:hidden;transition:all 0.3s ease}.process-button[data-v-0c833396]:hover:not(:disabled),.clear-button[data-v-0c833396]:hover:not(:disabled),.generate-button[data-v-0c833396]:hover:not(:disabled),.copy-button[data-v-0c833396]:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,0.3)}.copy-button[data-v-0c833396]:hover{background:#218838 !important}.tool-instructions[data-v-0c833396]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:12px;color:#ccc;font-size:12px;margin-bottom:15px}.process-button:hover:not(:disabled) .shimmer-effect[data-v-0c833396],.clear-button:hover:not(:disabled) .shimmer-effect[data-v-0c833396],.generate-button:hover:not(:disabled) .shimmer-effect[data-v-0c833396],.copy-button:hover .shimmer-effect[data-v-0c833396]{left:100%}.process-button[data-v-0c833396]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,0.4)}.clear-button[data-v-0c833396]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(255,107,107,0.4)}.generate-button[data-v-0c833396]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(23,162,184,0.4)}.copy-button[data-v-0c833396]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(40,167,69,0.4)}.process-button[data-v-0c833396]:disabled,.clear-button[data-v-0c833396]:disabled,.generate-button[data-v-0c833396]:disabled{opacity:0.6;cursor:not-allowed;transform:none}.process-button[data-v-0c833396]:disabled:hover,.clear-button[data-v-0c833396]:disabled:hover,.generate-button[data-v-0c833396]:disabled:hover{transform:none;box-shadow:none}.output-content[data-v-0c833396]::-webkit-scrollbar{width:6px}.output-content[data-v-0c833396]::-webkit-scrollbar-track{background:#1a1a1a;border-radius:3px}.output-content[data-v-0c833396]::-webkit-scrollbar-thumb{background:#3a3a3a;border-radius:3px}.output-content[data-v-0c833396]::-webkit-scrollbar-thumb:hover{background:#4a4a4a}@media (max-width:768px){.button-group[data-v-0c833396]{flex-direction:column}.output-actions[data-v-0c833396]{flex-direction:column}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/ToolsTab.vue\"],\"names\":[],\"mappings\":\"AA62CA,4BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,iBAAkB,CAClB,0DAA6D,CAC7D,iBAAkB,CAClB,cAAe,CACf,wBAAyB,CACzB,kBAAmB,CACnB,wBACF,CAEA,uCACE,0DAA6D,CAC7D,0BAA2B,CAC3B,qCACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,kBACF,CAEA,oCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UAAW,CACX,cAAe,CACf,kBACF,CAEA,6BACE,kBACF,CAEA,+BACE,YAAa,CACb,QAAS,CACT,kBACF,CAEA,iCACE,eACF,CAEA,iCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,oBAAqB,CACrB,gBAAiB,CACjB,eACF,CAEA,iCACE,eAAgB,CAChB,YAAa,CACb,QACF,CAGA,gIAIE,iBAAkB,CAClB,eAAgB,CAChB,wBACF,CAEA,qMAIE,0BAA2B,CAC3B,qCACF,CAEA,oCACE,6BACF,CAEA,oCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UAAW,CACX,cAAe,CACf,kBACF,CAGA,qQAIE,SACF,CAEA,sDACE,0BAA2B,CAC3B,2CACF,CAEA,oDACE,0BAA2B,CAC3B,2CACF,CAEA,uDACE,0BAA2B,CAC3B,0CACF,CAEA,oCACE,0BAA2B,CAC3B,yCACF,CAEA,6HAGE,WAAY,CACZ,kBAAmB,CACnB,cACF,CAEA,+IAGE,cAAe,CACf,eACF,CAGA,oDACE,SACF,CAEA,0DACE,kBAAmB,CACnB,iBACF,CAEA,0DACE,kBAAmB,CACnB,iBACF,CAEA,gEACE,kBACF,CAGA,yBACE,+BACE,qBACF,CAEA,iCACE,qBACF,CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"tools-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div class=\\\"section-header\\\" @click=\\\"toggleToolExpanded('antiCliche')\\\">\\n        <h4 style=\\\"margin: 0; color: #fff; font-size: 16px; font-weight: 600\\\">\\n          <i class=\\\"fa-solid fa-broom\\\" style=\\\"margin-right: 8px; color: #ff6b6b\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('antiCliche')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n            //9200+\\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n             /NSFW\\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"antiClicheInput\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"process-button\\\"\\n            :disabled=\\\"isProcessingAntiCliche || !antiClicheInput.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleAntiClicheProcess\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isProcessingAntiCliche ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearAntiClicheForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"antiClicheOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n          <div\\n            class=\\\"output-content\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              max-height: 300px;\\n              overflow-y: auto;\\n            \\\"\\n          >\\n            {{ antiClicheOutput }}\\n          </div>\\n\\n          <div class=\\\"output-actions\\\" style=\\\"margin-top: 12px; display: flex; gap: 12px\\\">\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 10px 20px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 600;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyAntiClicheResult\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i> \\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div class=\\\"section-header\\\" @click=\\\"toggleToolExpanded('characterCard')\\\">\\n        <h4 style=\\\"margin: 0; color: #fff; font-size: 16px; font-weight: 600\\\">\\n          <i class=\\\"fa-solid fa-user-plus\\\" style=\\\"margin-right: 8px; color: #17a2b8\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('characterCard')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n            AIYAML \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 6px 0;\\n              color: #4a9eff;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #17a2b8;\\n            \\\"\\n          >\\n             \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 6px 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n             \\\"\\\"AI\\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"characterDescription\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"generate-button\\\"\\n            :disabled=\\\"isGeneratingCharacter || !characterDescription.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(23, 162, 184, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleGenerateCharacterCard\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isGeneratingCharacter ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearCharacterForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"characterCardOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n          <div\\n            class=\\\"output-content\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              max-height: 300px;\\n              overflow-y: auto;\\n            \\\"\\n          >\\n            {{ characterCardOutput }}\\n          </div>\\n\\n          <div class=\\\"output-actions\\\" style=\\\"margin-top: 12px; display: flex; gap: 12px\\\">\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 10px 20px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 600;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyCharacterCard\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i> \\n            </button>\\n          </div>\\n\\n          <!--  -->\\n          <div class=\\\"modify-section\\\" style=\\\"margin-top: 25px; border-top: 2px dashed #3a3a3a; padding-top: 20px\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n              \\n            </h5>\\n            <div\\n              class=\\\"modify-instructions\\\"\\n              style=\\\"\\n                background: #1a1a1a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                padding: 10px;\\n                margin-bottom: 15px;\\n              \\\"\\n            >\\n              <p style=\\\"margin: 0 0 6px 0; color: #ccc; font-size: 12px\\\">\\n                <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n                AI\\\"\\\"\\\"\\\"\\\"\\\"\\n              </p>\\n              <p style=\\\"margin: 0; color: #ffa500; font-size: 11px\\\">  YAML </p>\\n            </div>\\n\\n            <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n                \\n              </label>\\n              <textarea\\n                v-model=\\\"modifyRequest\\\"\\n                placeholder=\\\"...\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 80px;\\n                  padding: 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  resize: vertical;\\n                  font-family: inherit;\\n                \\\"\\n              ></textarea>\\n            </div>\\n\\n            <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 15px\\\">\\n              <button\\n                class=\\\"modify-button\\\"\\n                :disabled=\\\"isModifyingCharacter || !modifyRequest.trim()\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(255, 165, 0, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"handleModifyCharacterCard\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                {{ isModifyingCharacter ? '...' : 'AI' }}\\n              </button>\\n\\n              <button\\n                class=\\\"clear-modify-button\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(108, 117, 125, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"clearModifyRequest\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-eraser\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { debounce } from 'lodash';\\nimport { storeToRefs } from 'pinia';\\nimport { onMounted, ref, watch } from 'vue';\\nimport { getScriptIdSafe } from '/utils';\\nimport { useSettingsStore } from '../settings';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// \\nconst toolExpandedState = ref(new Map<string, boolean>());\\nconst antiClicheInput = ref('');\\nconst antiClicheOutput = ref('');\\nconst isProcessingAntiCliche = ref(false);\\nconst characterDescription = ref('');\\nconst characterCardOutput = ref('');\\nconst isGeneratingCharacter = ref(false);\\nconst modifyRequest = ref('');\\nconst isModifyingCharacter = ref(false);\\n\\n// \\nconst isDataLoaded = ref(false);\\n\\n// \\nconst loadToolsData = () => {\\n  try {\\n    isDataLoaded.value = false; // \\n    const script_id = getScriptIdSafe();\\n    if (!script_id) {\\n      console.warn(' script_id ');\\n      isDataLoaded.value = true;\\n      return;\\n    }\\n    const savedData = getVariables({ type: 'script', script_id });\\n\\n    console.log(' :', savedData);\\n\\n    // \\n    if (savedData.tools_antiCliche) {\\n      antiClicheInput.value = savedData.tools_antiCliche.input || '';\\n      antiClicheOutput.value = savedData.tools_antiCliche.output || '';\\n      console.log(' :', {\\n        input: antiClicheInput.value.substring(0, 50),\\n        output: antiClicheOutput.value.substring(0, 50),\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_characterCard) {\\n      characterDescription.value = savedData.tools_characterCard.description || '';\\n      characterCardOutput.value = savedData.tools_characterCard.output || '';\\n      modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\\n      console.log(' :', {\\n        description: characterDescription.value.substring(0, 50),\\n        output: characterCardOutput.value.substring(0, 50),\\n        modifyRequest: modifyRequest.value.substring(0, 50),\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_expandedState) {\\n      toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\\n      console.log(' :', Object.fromEntries(toolExpandedState.value));\\n    }\\n\\n    // \\n    setTimeout(() => {\\n      isDataLoaded.value = true;\\n      console.log(' ');\\n    }, 100);\\n  } catch (error) {\\n    console.error(' :', error);\\n    isDataLoaded.value = true;\\n  }\\n};\\n\\n// \\nconst saveToolsDataImmediate = () => {\\n  // \\n  if (!isDataLoaded.value) {\\n    console.log(' ');\\n    return;\\n  }\\n\\n  try {\\n    const script_id = getScriptIdSafe();\\n    if (!script_id) {\\n      console.warn(' script_id ');\\n      return;\\n    }\\n\\n    const dataToSave = {\\n      tools_antiCliche: {\\n        input: antiClicheInput.value,\\n        output: antiClicheOutput.value,\\n      },\\n      tools_characterCard: {\\n        description: characterDescription.value,\\n        output: characterCardOutput.value,\\n        modifyRequest: modifyRequest.value,\\n      },\\n      tools_expandedState: Object.fromEntries(toolExpandedState.value),\\n    };\\n\\n    insertOrAssignVariables(dataToSave, { type: 'script', script_id });\\n    console.log(' :', {\\n      antiCliche_input_length: antiClicheInput.value.length,\\n      antiCliche_output_length: antiClicheOutput.value.length,\\n      character_desc_length: characterDescription.value.length,\\n      character_output_length: characterCardOutput.value.length,\\n    });\\n  } catch (error) {\\n    console.error(' :', error);\\n  }\\n};\\n\\n// 300ms\\nconst saveToolsData = debounce(saveToolsDataImmediate, 300);\\n\\n// \\nwatch(\\n  [antiClicheInput, antiClicheOutput, characterDescription, characterCardOutput, modifyRequest, toolExpandedState],\\n  () => {\\n    if (isDataLoaded.value) {\\n      console.log(' ...');\\n      saveToolsData();\\n    }\\n  },\\n  { deep: true },\\n);\\n\\n// \\nonMounted(() => {\\n  console.log(' ToolsTab ...');\\n  loadToolsData();\\n});\\n\\n// \\nonBeforeUnmount(() => {\\n  console.log(' ToolsTab ...');\\n  // \\n  saveToolsData.cancel();\\n  saveToolsDataImmediate();\\n});\\n\\n// \\nconst toggleToolExpanded = (toolName: string) => {\\n  console.log('toggleToolExpanded :', toolName);\\n  const current = toolExpandedState.value.get(toolName) || false;\\n  console.log(':', current);\\n  toolExpandedState.value.set(toolName, !current);\\n  console.log(':', !current);\\n};\\n\\n// \\nconst isToolExpanded = (toolName: string) => {\\n  return toolExpandedState.value.get(toolName) || false;\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string) => {\\n  console.log(' :', text.length);\\n  console.log(' iframe:', window.parent !== window);\\n\\n  // 1\\n  if (window.parent && window.parent !== window) {\\n    console.log(' ...');\\n    const parentSuccess = tryParentWindowCopy(text);\\n    if (parentSuccess) {\\n      console.log(' ');\\n      window.toastr.success(successMessage);\\n      return;\\n    } else {\\n      console.warn(' ');\\n    }\\n  }\\n\\n  // 2 execCommand \\n  try {\\n    console.log('  execCommand ...');\\n    const success = execCommandCopy(text);\\n    if (success) {\\n      console.log(' execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    } else {\\n      console.warn(' execCommand ');\\n    }\\n  } catch (error) {\\n    console.warn(' execCommand :', error);\\n  }\\n\\n  // 3 Clipboard API\\n  try {\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log('  Clipboard API ...');\\n      await navigator.clipboard.writeText(text);\\n\\n      // \\n      const clipboardContent = await navigator.clipboard.readText();\\n      if (clipboardContent === text) {\\n        console.log(' Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } else {\\n        console.warn(' Clipboard API ');\\n      }\\n    }\\n  } catch (error) {\\n    console.warn(' Clipboard API :', error);\\n  }\\n\\n  // \\n  console.log(' ');\\n  showManualCopyDialog(text);\\n};\\n\\n// \\nconst tryParentWindowCopy = (text: string): boolean => {\\n  try {\\n    if (window.parent && window.parent !== window) {\\n      console.log('   textarea...');\\n\\n      // \\n      const parentDoc = window.parent.document;\\n      const tempTextArea = parentDoc.createElement('textarea');\\n      tempTextArea.value = text;\\n\\n      // \\n      tempTextArea.style.cssText = `\\n        position: fixed !important;\\n        left: -9999px !important;\\n        top: -9999px !important;\\n        width: 1px !important;\\n        height: 1px !important;\\n        opacity: 0 !important;\\n        pointer-events: none !important;\\n      `;\\n      tempTextArea.setAttribute('readonly', '');\\n\\n      parentDoc.body.appendChild(tempTextArea);\\n      console.log('   Textarea');\\n\\n      // \\n      tempTextArea.focus();\\n      tempTextArea.select();\\n      tempTextArea.setSelectionRange(0, text.length);\\n      console.log('   ');\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n      console.log('   execCommand:', success);\\n\\n      // \\n      parentDoc.body.removeChild(tempTextArea);\\n      console.log('   Textarea');\\n\\n      return success;\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n  }\\n  return false;\\n};\\n\\n// execCommand \\nconst execCommandCopy = (text: string): boolean => {\\n  try {\\n    console.log('   textarea...');\\n\\n    // \\n    const textArea = document.createElement('textarea');\\n    textArea.value = text;\\n\\n    // \\n    textArea.style.cssText = `\\n      position: fixed !important;\\n      left: -9999px !important;\\n      top: -9999px !important;\\n      width: 1px !important;\\n      height: 1px !important;\\n      opacity: 0 !important;\\n      pointer-events: none !important;\\n    `;\\n    textArea.setAttribute('readonly', '');\\n\\n    document.body.appendChild(textArea);\\n    console.log('   Textarea');\\n\\n    // \\n    textArea.focus();\\n    textArea.select();\\n    textArea.setSelectionRange(0, text.length);\\n    console.log('   ');\\n\\n    // \\n    const success = document.execCommand('copy');\\n    console.log('   execCommand:', success);\\n\\n    // \\n    document.body.removeChild(textArea);\\n    console.log('   Textarea');\\n\\n    return success;\\n  } catch (error) {\\n    console.error(' execCommand :', error);\\n    return false;\\n  }\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  try {\\n    console.log(' ');\\n\\n    // \\n    const targetDoc = window.parent && window.parent !== window ? window.parent.document : document;\\n    const targetBody = targetDoc.body;\\n\\n    console.log(' :', targetDoc === window.parent.document ? '' : '');\\n\\n    // \\n    const existingModal = targetDoc.getElementById('manual-copy-modal-tools');\\n    if (existingModal) {\\n      targetBody.removeChild(existingModal);\\n    }\\n\\n    // \\n    const modal = targetDoc.createElement('div');\\n    modal.id = 'manual-copy-modal-tools';\\n    modal.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background: rgba(0, 0, 0, 0.9);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    const dialog = targetDoc.createElement('div');\\n    dialog.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #ffa500;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 700px;\\n      width: 90%;\\n      max-height: 80vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);\\n    `;\\n\\n    dialog.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #ffa500; font-size: 18px; font-weight: 600;\\\">\\n        <i class=\\\"fa-solid fa-copy\\\" style=\\\"margin-right: 8px;\\\"></i>\\n        \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #3a3a3a; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0; color: #e0e0e0; font-size: 14px; line-height: 1.6;\\\">\\n           \\n        </p>\\n        <ol style=\\\"margin: 8px 0 0 20px; padding: 0; color: #ccc; font-size: 13px;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px;\\\">Ctrl+C</kbd> </li>\\n        </ol>\\n      </div>\\n      <textarea\\n        readonly\\n        id=\\\"copyTextarea\\\"\\n        style=\\\"\\n          width: 100%;\\n          height: 300px;\\n          background: #1a1a1a;\\n          border: 2px solid #3a3a3a;\\n          border-radius: 6px;\\n          padding: 12px;\\n          color: #e0e0e0;\\n          font-size: 13px;\\n          font-family: 'Courier New', Consolas, monospace;\\n          resize: vertical;\\n          margin-bottom: 15px;\\n          box-sizing: border-box;\\n        \\\"\\n      >${text}</textarea>\\n      <div style=\\\"display: flex; gap: 12px; justify-content: flex-end;\\\">\\n        <button id=\\\"manualCopyBtn\\\" style=\\\"\\n          padding: 10px 20px;\\n          background: #28a745;\\n          border: none;\\n          border-radius: 6px;\\n          color: white;\\n          font-size: 14px;\\n          font-weight: 600;\\n          cursor: pointer;\\n          transition: background 0.2s;\\n        \\\"></button>\\n        <button id=\\\"closeBtn\\\" style=\\\"\\n          padding: 10px 20px;\\n          background: #6c757d;\\n          border: none;\\n          border-radius: 6px;\\n          color: white;\\n          font-size: 14px;\\n          font-weight: 600;\\n          cursor: pointer;\\n          transition: background 0.2s;\\n        \\\"></button>\\n      </div>\\n    `;\\n\\n    modal.appendChild(dialog);\\n    targetBody.appendChild(modal);\\n    console.log(' DOM');\\n\\n    // \\n    const textarea = dialog.querySelector('#copyTextarea') as HTMLTextAreaElement;\\n    setTimeout(() => {\\n      textarea.focus();\\n      textarea.select();\\n      console.log(' ');\\n    }, 100);\\n\\n    // \\n    const copyBtn = dialog.querySelector('#manualCopyBtn') as HTMLButtonElement;\\n    const closeBtn = dialog.querySelector('#closeBtn') as HTMLButtonElement;\\n\\n    copyBtn.onmouseover = () => (copyBtn.style.background = '#218838');\\n    copyBtn.onmouseout = () => (copyBtn.style.background = '#28a745');\\n    closeBtn.onmouseover = () => (closeBtn.style.background = '#5a6268');\\n    closeBtn.onmouseout = () => (closeBtn.style.background = '#6c757d');\\n\\n    copyBtn.onclick = () => {\\n      try {\\n        console.log(' ...');\\n        textarea.focus();\\n        textarea.select();\\n        const success = targetDoc.execCommand('copy');\\n        console.log(' :', success);\\n\\n        if (success) {\\n          window.toastr.success('');\\n          targetBody.removeChild(modal);\\n        } else {\\n          window.toastr.warning(' Ctrl+C ');\\n        }\\n      } catch (error) {\\n        console.error(' :', error);\\n        window.toastr.warning(' Ctrl+C ');\\n      }\\n    };\\n\\n    closeBtn.onclick = () => {\\n      console.log(' ');\\n      targetBody.removeChild(modal);\\n    };\\n\\n    // \\n    modal.onclick = e => {\\n      if (e.target === modal) {\\n        console.log(' ');\\n        targetBody.removeChild(modal);\\n      }\\n    };\\n\\n    // ESC\\n    const handleEsc = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log(' ESC');\\n        targetBody.removeChild(modal);\\n        targetDoc.removeEventListener('keydown', handleEsc);\\n      }\\n    };\\n    targetDoc.addEventListener('keydown', handleEsc);\\n\\n    window.toastr.info('', '', { timeOut: 3000 });\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst handleAntiClicheProcess = async () => {\\n  if (!antiClicheInput.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isProcessingAntiCliche.value = true;\\n    window.toastr.info('AI...', '', { timeOut: 15000 });\\n\\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: `\\n\\n## \\n\\n\\n## \\n- \\n- \\n- \\n\\n## \\nxxx/xxx\\n****\\n\\n## \\nxxx/xxx//\\n**\\\"\\\"\\\"\\\"**\\n\\n## \\\"\\\"\\n\\\"\\\"\\n\\n## \\n- \\n- \\\"/\\\"\\n- \\\"\\\"\\n- \\n\\n## \\n- \\n- \\n- \\n\\n## //\\n- \\n- \\n- \\n- user\\n\\n## NSFW\\n- /\\n- \\n- \\n\\n## \\n\\n\\n\\n\\n\\n\\n\\n\\n\\nxxx\\n\\n****\\n1. \\n2. \\n3. \\n4. \\n5. \\n\\n`,\\n          },\\n          {\\n            role: 'user',\\n            content: antiClicheInput.value,\\n          },\\n        ],\\n        max_tokens: settings.value.max_tokens || 8000,\\n        temperature: 0.7,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`HTTP error! status: ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    antiClicheOutput.value = data.choices[0].message.content.trim();\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isProcessingAntiCliche.value = false;\\n  }\\n};\\n\\nconst copyAntiClicheResult = () => {\\n  if (!antiClicheOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  // \\n  copyToClipboard(antiClicheOutput.value, '');\\n};\\n\\n// \\nconst handleGenerateCharacterCard = async () => {\\n  if (!characterDescription.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isGeneratingCharacter.value = true;\\n    window.toastr.info('AI...');\\n\\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model || 'gpt-3.5-turbo',\\n        max_tokens: settings.value.max_tokens || 16000,\\n        temperature: 0.8,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: `\\n\\n****\\n-  YAML \\n- \\n- AI\\n- AI\\n\\n****\\n\\\\`\\\\`\\\\`yaml\\n:\\n  : \\\"\\\"\\n  : \\n  : \\\"YYYYMM\\\"\\n  : \\\"//\\\"\\n  : \\\"Alpha/Beta/Omega/\\\"\\n  : \\\"////\\\"\\n  : \\\"\\\"\\n  : \\\"//\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n\\n:\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n\\n:\\n  :\\n    - 1: \\\"\\\"\\n    - 2: \\\"\\\"\\n    - 3: \\\"\\\"\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"\\\"\\n\\n:\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"/\\\"\\n  : [\\\"1\\\", \\\"2\\\"]\\n\\n:\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  : [\\\"1\\\", \\\"2\\\", \\\"3\\\"]\\n  : \\\"TA\\\"\\n  : \\\"\\\"\\n  : \\\"TA\\\"\\n\\n:\\n  : \\\"{{user}}\\\"\\n  : \\\"\\\"\\n  : \\\"//\\\"\\n  : \\\"\\\"\\n\\n:\\n  :\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n    : \\\"\\\"\\n  : \\\"TA\\\"\\n  :\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n\\\\`\\\\`\\\\`\\n\\n\\n1. \\n2. \\n3. TA\\n4. `,\\n          },\\n          {\\n            role: 'user',\\n            content: characterDescription.value,\\n          },\\n        ],\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`HTTP error! status: ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    characterCardOutput.value = data.choices[0].message.content.trim();\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isGeneratingCharacter.value = false;\\n  }\\n};\\n\\nconst clearCharacterForm = () => {\\n  characterDescription.value = '';\\n  characterCardOutput.value = '';\\n  modifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\nconst copyCharacterCard = () => {\\n  if (!characterCardOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  // \\n  copyToClipboard(characterCardOutput.value, '');\\n};\\n\\n// \\nconst clearAntiClicheForm = () => {\\n  antiClicheInput.value = '';\\n  antiClicheOutput.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// \\nconst handleModifyCharacterCard = async () => {\\n  if (!modifyRequest.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!characterCardOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isModifyingCharacter.value = true;\\n    window.toastr.info('AI...');\\n\\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model || 'gpt-3.5-turbo',\\n        max_tokens: settings.value.max_tokens || 16000,\\n        temperature: 0.8,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: ` YAML \\n\\n****\\n1.  YAML \\n2. \\n3. \\n4. \\n5. \\n6. \\n\\n****\\n- ////\\n- \\n- \\n- AI\\n\\n YAML `,\\n          },\\n          {\\n            role: 'user',\\n            content: `\\n\\n${characterCardOutput.value}\\n\\n---\\n\\n\\n${modifyRequest.value}`,\\n          },\\n        ],\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`HTTP error! status: ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    characterCardOutput.value = data.choices[0].message.content.trim();\\n    modifyRequest.value = ''; // \\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isModifyingCharacter.value = false;\\n  }\\n};\\n\\n// \\nconst clearModifyRequest = () => {\\n  modifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n</script>\\n\\n<style scoped>\\n.tools-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 15px 20px;\\n  background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);\\n  border-radius: 8px;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  margin-bottom: 15px;\\n  border: 1px solid #3a3a3a;\\n}\\n\\n.section-header:hover {\\n  background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);\\n  transform: translateY(-1px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n}\\n\\n.tool-content {\\n  background: #1e1e1e;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 8px;\\n  padding: 20px;\\n  margin-bottom: 20px;\\n}\\n\\n.tool-instructions {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 12px;\\n  color: #ccc;\\n  font-size: 12px;\\n  margin-bottom: 15px;\\n}\\n\\n.form-group {\\n  margin-bottom: 15px;\\n}\\n\\n.button-group {\\n  display: flex;\\n  gap: 12px;\\n  margin-bottom: 20px;\\n}\\n\\n.output-section {\\n  margin-top: 20px;\\n}\\n\\n.output-content {\\n  background: #1e1e1e;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 15px;\\n  color: #e0e0e0;\\n  font-size: 13px;\\n  line-height: 1.6;\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  max-height: 300px;\\n  overflow-y: auto;\\n}\\n\\n.output-actions {\\n  margin-top: 12px;\\n  display: flex;\\n  gap: 12px;\\n}\\n\\n/*  */\\n.process-button,\\n.clear-button,\\n.generate-button,\\n.copy-button {\\n  position: relative;\\n  overflow: hidden;\\n  transition: all 0.3s ease;\\n}\\n\\n.process-button:hover:not(:disabled),\\n.clear-button:hover:not(:disabled),\\n.generate-button:hover:not(:disabled),\\n.copy-button:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\\n}\\n\\n.copy-button:hover {\\n  background: #218838 !important;\\n}\\n\\n.tool-instructions {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 12px;\\n  color: #ccc;\\n  font-size: 12px;\\n  margin-bottom: 15px;\\n}\\n\\n/*  */\\n.process-button:hover:not(:disabled) .shimmer-effect,\\n.clear-button:hover:not(:disabled) .shimmer-effect,\\n.generate-button:hover:not(:disabled) .shimmer-effect,\\n.copy-button:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.process-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\\n}\\n\\n.clear-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);\\n}\\n\\n.generate-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(23, 162, 184, 0.4);\\n}\\n\\n.copy-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\\n}\\n\\n.process-button:disabled,\\n.clear-button:disabled,\\n.generate-button:disabled {\\n  opacity: 0.6;\\n  cursor: not-allowed;\\n  transform: none;\\n}\\n\\n.process-button:disabled:hover,\\n.clear-button:disabled:hover,\\n.generate-button:disabled:hover {\\n  transform: none;\\n  box-shadow: none;\\n}\\n\\n/*  */\\n.output-content::-webkit-scrollbar {\\n  width: 6px;\\n}\\n\\n.output-content::-webkit-scrollbar-track {\\n  background: #1a1a1a;\\n  border-radius: 3px;\\n}\\n\\n.output-content::-webkit-scrollbar-thumb {\\n  background: #3a3a3a;\\n  border-radius: 3px;\\n}\\n\\n.output-content::-webkit-scrollbar-thumb:hover {\\n  background: #4a4a4a;\\n}\\n\\n/*  */\\n@media (max-width: 768px) {\\n  .button-group {\\n    flex-direction: column;\\n  }\\n\\n  .output-actions {\\n    flex-direction: column;\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=97028022&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9d4cb2c4\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=97028022&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=97028022&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import { useSettingsStore } from './settings';\n\n/**\n * \n */\nexport async function fetchAvailableModels(): Promise<string[]> {\n  const settings = useSettingsStore().settings;\n\n  //  API endpoint\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  const apiUrl = settings.api_endpoint.trim();\n  console.log('URL:', apiUrl);\n\n  try {\n    new URL(apiUrl);\n  } catch (e) {\n    if (apiUrl.startsWith('/')) {\n      throw new Error(\n        `API  URL https://api.openai.com/v1/chat/completions${apiUrl}`,\n      );\n    }\n    throw new Error(`API : ${apiUrl}`);\n  }\n\n  //  models API \n  const possibleEndpoints = [\n    apiUrl.replace('/chat/completions', '/models'),\n    apiUrl.replace('/v1/chat/completions', '/v1/models'),\n    apiUrl + '/../models', // \n  ];\n\n  console.log(':', possibleEndpoints);\n\n  for (const modelsUrl of possibleEndpoints) {\n    try {\n      console.log(`: ${modelsUrl}`);\n\n      const response = await fetch(modelsUrl, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.api_key}`,\n        },\n      });\n\n      console.log('Response status:', response.status);\n\n      if (!response.ok) {\n        console.log(` ${modelsUrl}  ${response.status}...`);\n        continue;\n      }\n\n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        console.log(` ${modelsUrl}  JSON ...`);\n        continue;\n      }\n\n      const data = await response.json();\n      console.log('API :', data);\n\n      // OpenAI  API \n      if (data.data && Array.isArray(data.data)) {\n        const models = data.data.map((model: any) => model.id || model.name).filter(Boolean);\n        console.log(':', models);\n        return models;\n      }\n\n      //  API \n      if (Array.isArray(data)) {\n        const models = data.map((model: any) => model.id || model.name).filter(Boolean);\n        console.log(':', models);\n        return models;\n      }\n\n      console.log('...');\n    } catch (e) {\n      console.log(` ${modelsUrl} :`, e);\n      continue;\n    }\n  }\n\n  throw new Error(' API  API ');\n}\n\n/**\n * \n * @param start_id \n * @param end_id \n * @returns \n */\nexport async function summarizeMessages(start_id: number, end_id: number): Promise<string> {\n  const settings = useSettingsStore().settings;\n\n  //  API endpoint\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  //  URL\n  const apiUrl = settings.api_endpoint.trim();\n  console.log('API URL:', apiUrl);\n\n  try {\n    new URL(apiUrl);\n  } catch (e) {\n    //  URL\n    if (apiUrl.startsWith('/')) {\n      throw new Error(\n        `API  URL https://api.openai.com/v1/chat/completions${apiUrl}`,\n      );\n    }\n    throw new Error(`API : ${apiUrl}`);\n  }\n\n  // \n  // \n  const messages: Array<{ role: string; message: string }> = [];\n  for (let i = start_id; i <= end_id; i++) {\n    const msg = getChatMessages(i);\n    if (msg.length > 0) {\n      messages.push(...msg);\n    }\n  }\n\n  if (messages.length === 0) {\n    throw new Error('');\n  }\n\n  //  - \n  const summaryPrompt = `****\n\n\n- \n- \n- \n- \n- \n- XML\n- \n-  ${settings.max_tokens / 4} \n- ****\n\n\n\n\n: []\n: []\n\n 1: \n 2: \n 3: \n...\n\n\n${messages.map(msg => `[${msg.role}]: ${msg.message}`).join('\\n\\n')}\n\n`;\n\n  console.log(' APIURL:', apiUrl);\n  console.log(':', {\n    model: settings.model,\n    messages: [{ role: 'user', content: summaryPrompt }],\n    max_tokens: settings.max_tokens,\n    temperature: settings.temperature,\n  });\n\n  //  OpenAI  API\n  let response;\n  try {\n    response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.model,\n        messages: [\n          {\n            role: 'user',\n            content: summaryPrompt,\n          },\n        ],\n        max_tokens: settings.max_tokens,\n        temperature: settings.temperature,\n      }),\n    });\n  } catch (e) {\n    console.error('fetch :', e);\n    throw new Error(` API: ${(e as Error).message}`);\n  }\n\n  if (!response.ok) {\n    let errorMessage = `API : ${response.status}`;\n    try {\n      const error = await response.json();\n      errorMessage = error.error?.message || error.message || errorMessage;\n    } catch (e) {\n      //  JSON\n      errorMessage = `API : ${response.status}`;\n    }\n    throw new Error(errorMessage);\n  }\n\n  const data = await response.json();\n  if (!data.choices || !data.choices[0] || !data.choices[0].message?.content) {\n    throw new Error('API ');\n  }\n  return data.choices[0].message.content;\n}\n","if(typeof z === 'undefined') { var e = new Error(\"Cannot find module 'z'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }\n\nmodule.exports = z;","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.settings-tab{height:100%;overflow-y:auto;padding:25px !important;background:#1a1a1a !important;border:2px solid red !important}.config-section{padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.config-section:last-child{border-bottom:none;margin-bottom:0}.config-section h3{margin:0 0 20px 0 !important;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.form-group{margin-bottom:18px !important}.form-group label{display:block;margin-bottom:6px;color:#ccc;font-size:13px}.checkbox-label{display:flex;align-items:center;gap:8px}.flex-label{display:flex;justify-content:space-between;align-items:center}.form-group input[type='text'],.form-group input[type='password'],.form-group input[type='number'],.form-group select{width:100%;padding:10px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;color:#e0e0e0;font-size:13px;transition:border-color 0.2s}.form-group input:focus,.form-group select:focus{outline:none;border-color:#4a9eff}.model-controls{display:flex;flex-direction:column;gap:10px}.button-group{display:flex;gap:12px;flex-wrap:wrap;margin-top:5px}.action-button{flex:1;min-width:120px;padding:12px 16px;border:none;border-radius:6px;cursor:pointer;font-weight:500;font-size:13px;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:6px;background:#3a3a3a;color:#e0e0e0;border:1px solid #4a4a4a}.action-button:hover{background:#4a4a4a;border-color:#5a5a5a}.test-button{background:#3a3a3a;color:#e0e0e0;border:1px solid #4a4a4a}.test-button:hover{background:#4a4a4a;border-color:#5a5a5a}.fetch-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.fetch-button:hover{background:#5aaeff;border-color:#6abeff}.summarize-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.summarize-button:hover{background:#5aaeff;border-color:#6abeff}.create-button{background:#51cf66;color:white;border:1px solid #40c057}.create-button:hover{background:#40c057;border-color:#37b24d}.table-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.table-button:hover{background:#5aaeff;border-color:#6abeff}.hide-button{background:#ff6b6b;color:white;border:1px solid #ff5252}.hide-button:hover{background:#ff5252;border-color:#ff4444}.unhide-button{background:#51cf66;color:white;border:1px solid #40c057}.unhide-button:hover{background:#40c057;border-color:#37b24d}.refresh-button{background:#ffd43b;color:#333;border:1px solid #ffcc02}.refresh-button:hover{background:#ffcc02;border-color:#ffb700}.action-button:disabled{opacity:0.5;cursor:not-allowed}.model-select{margin-top:8px}.hidden-messages-section{margin-top:20px}.hidden-messages-list{max-height:300px;overflow-y:auto;border-radius:6px;border:1px solid #3a3a3a;background:#1a1a1a}.hidden-message-item{padding:10px 12px;display:flex;align-items:center;gap:12px;border-bottom:1px solid #2a2a2a;transition:background 0.2s}.hidden-message-item:last-child{border-bottom:none}.hidden-message-item:hover{background:#2a2a2a}.message-info{display:flex;align-items:center;gap:10px;flex:1}.message-id{font-weight:bold;color:#4a9eff;font-size:13px;min-width:50px}.message-role{font-size:12px;padding:2px 8px;border-radius:4px;white-space:nowrap}.message-role.role-user{background:#3a5a3a;color:#90ee90}.message-role.role-assistant{background:#3a3a5a;color:#90a0ee}.message-role.role-system{background:#5a5a3a;color:#eea090}.message-preview{flex:1;color:#888;font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.show-button{background:#4a9eff !important;color:white !important;padding:6px 12px;border:1px solid #5aaeff !important;border-radius:4px;cursor:pointer;font-size:12px;transition:all 0.2s;min-width:60px;text-align:center}.show-button:hover{background:#5aaeff !important;border-color:#6abeff !important}.mini-button{background:#666;color:white;border:1px solid #777;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;transition:all 0.2s}.mini-button:hover{background:#777;border-color:#888}.empty-state{margin-top:20px;padding:20px;background:#2a2a2a;border-radius:6px;text-align:center;color:#888;border:1px solid #3a3a3a}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/SettingsTab.vue\"],\"names\":[],\"mappings\":\"AA2xDA,cACE,WAAY,CACZ,eAAgB,CAChB,uBAAwB,CACxB,6BAA8B,CAC9B,+BACF,CAEA,gBACE,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,2BACE,kBAAmB,CACnB,eACF,CAEA,mBACE,4BAA6B,CAC7B,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,YACE,6BACF,CAEA,kBACE,aAAc,CACd,iBAAkB,CAClB,UAAW,CACX,cACF,CAEA,gBACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,YACE,YAAa,CACb,6BAA8B,CAC9B,kBACF,CAEA,sHAIE,UAAW,CACX,iBAAkB,CAClB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,4BACF,CAEA,iDAEE,YAAa,CACb,oBACF,CAEA,gBACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,cACE,YAAa,CACb,QAAS,CACT,cAAe,CACf,cACF,CAEA,eACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,cAAe,CACf,mBAAoB,CACpB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,kBAAmB,CACnB,aAAc,CACd,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,aACE,kBAAmB,CACnB,aAAc,CACd,wBACF,CAEA,mBACE,kBAAmB,CACnB,oBACF,CAEA,cACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,oBACE,kBAAmB,CACnB,oBACF,CAEA,kBACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,wBACE,kBAAmB,CACnB,oBACF,CAEA,eACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,cACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,oBACE,kBAAmB,CACnB,oBACF,CAEA,aACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,mBACE,kBAAmB,CACnB,oBACF,CAEA,eACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,gBACE,kBAAmB,CACnB,UAAW,CACX,wBACF,CAEA,sBACE,kBAAmB,CACnB,oBACF,CAEA,wBACE,WAAY,CACZ,kBACF,CAEA,cACE,cACF,CAEA,yBACE,eACF,CAEA,sBACE,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,wBAAyB,CACzB,kBACF,CAEA,qBACE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,+BAAgC,CAChC,0BACF,CAEA,gCACE,kBACF,CAEA,2BACE,kBACF,CAEA,cACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,YACE,gBAAiB,CACjB,aAAc,CACd,cAAe,CACf,cACF,CAEA,cACE,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,kBACF,CAEA,wBACE,kBAAmB,CACnB,aACF,CAEA,6BACE,kBAAmB,CACnB,aACF,CAEA,0BACE,kBAAmB,CACnB,aACF,CAEA,iBACE,MAAO,CACP,UAAW,CACX,cAAe,CACf,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAEA,aACE,6BAA8B,CAC9B,sBAAuB,CACvB,gBAAiB,CACjB,mCAAoC,CACpC,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,mBAAoB,CACpB,cAAe,CACf,iBACF,CAEA,mBACE,6BAA8B,CAC9B,+BACF,CAEA,aACE,eAAgB,CAChB,WAAY,CACZ,qBAAsB,CACtB,gBAAiB,CACjB,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,mBACF,CAEA,mBACE,eAAgB,CAChB,iBACF,CAEA,aACE,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,iBAAkB,CAClB,iBAAkB,CAClB,UAAW,CACX,wBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"settings-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!-- API  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         API \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">API </label>\\n        <input\\n          v-model=\\\"settings.api_endpoint\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"https://your-api.com/v1/chat/completions\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">API Key</label>\\n        <input\\n          v-model=\\\"settings.api_key\\\"\\n          type=\\\"password\\\"\\n          placeholder=\\\"sk-...\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <div class=\\\"model-controls\\\" style=\\\"display: flex; flex-direction: column; gap: 10px\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n            <button\\n              class=\\\"test-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                min-width: 120px;\\n                padding: 12px 16px;\\n                border: 1px solid #4a4a4a;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-weight: 500;\\n                font-size: 13px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n                background: #3a3a3a;\\n                color: #e0e0e0;\\n              \\\"\\n              @click=\\\"handleTestButton\\\"\\n            >\\n              ()\\n            </button>\\n            <button\\n              :disabled=\\\"loading_models\\\"\\n              class=\\\"fetch-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                min-width: 120px;\\n                padding: 12px 16px;\\n                border: 1px solid #5aaeff;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-weight: 500;\\n                font-size: 13px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n                background: #4a9eff;\\n                color: white;\\n              \\\"\\n              @click=\\\"handle_fetch_models\\\"\\n            >\\n              {{ loading_models ? '...' : '' }}\\n            </button>\\n          </div>\\n        </div>\\n        <input\\n          v-if=\\\"available_models.length === 0\\\"\\n          v-model=\\\"settings.model\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"gpt-4o-mini\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <select\\n          v-else\\n          v-model=\\\"settings.model\\\"\\n          class=\\\"model-select\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        >\\n          <option v-for=\\\"model in available_models\\\" :key=\\\"model\\\" :value=\\\"model\\\">{{ model }}</option>\\n        </select>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"\\n          > Token 4000</label\\n        >\\n        <input\\n          v-model.number=\\\"settings.max_tokens\\\"\\n          type=\\\"number\\\"\\n          min=\\\"100\\\"\\n          max=\\\"16000\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"> (0-2)</label>\\n        <input\\n          v-model.number=\\\"settings.temperature\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          max=\\\"2\\\"\\n          step=\\\"0.1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label\\n          class=\\\"checkbox-label\\\"\\n          style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px\\\"\\n        >\\n          <input v-model=\\\"settings.auto_summarize_enabled\\\" type=\\\"checkbox\\\" style=\\\"width: 16px; height: 16px\\\" />\\n          \\n        </label>\\n      </div>\\n      <div v-if=\\\"settings.auto_summarize_enabled\\\" class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.summarize_interval\\\"\\n          type=\\\"number\\\"\\n          min=\\\"1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <div style=\\\"margin-top: 10px; display: flex; gap: 10px\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleSaveSettings\\\"\\n          >\\n             \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleReloadSettings\\\"\\n          >\\n             \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleResetAutoSummaryStart\\\"\\n          >\\n             \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.start_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.end_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button test-button\\\"\\n          :disabled=\\\"is_summarizing\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #4a4a4a;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #3a3a3a;\\n            color: #e0e0e0;\\n          \\\"\\n          @click=\\\"handle_test_connection\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plug\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button summarize-button\\\"\\n          :disabled=\\\"is_summarizing || !settings.api_key\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #5aaeff;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #4a9eff;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_summarize\\\"\\n        >\\n          <i v-if=\\\"!is_summarizing\\\" class=\\\"fa-solid fa-magic\\\"></i>\\n          <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\"></i>\\n          {{ is_summarizing ? '...' : '' }}\\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.table_start_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.table_end_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <div style=\\\"display: flex; gap: 8px; margin-bottom: 8px\\\">\\n          <select\\n            v-model=\\\"selectedTemplate\\\"\\n            style=\\\"\\n              flex: 1;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n            @change=\\\"loadTemplate\\\"\\n          >\\n            <option value=\\\"\\\">...</option>\\n            <option v-for=\\\"(template, index) in headerTemplates\\\" :key=\\\"index\\\" :value=\\\"index\\\">\\n              {{ template.name }}\\n            </option>\\n          </select>\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #4a9eff;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"showAddTemplateDialog\\\"\\n          >\\n            <i class=\\\"fa-solid fa-plus\\\"></i> \\n          </button>\\n        </div>\\n        <div v-if=\\\"selectedTemplate !== ''\\\" style=\\\"display: flex; gap: 8px\\\">\\n          <input\\n            v-model=\\\"currentTemplate.name\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              flex: 1;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n          />\\n          <input\\n            v-model=\\\"currentTemplate.headers\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              flex: 2;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n          />\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #28a745;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"saveTemplate\\\"\\n          >\\n            <i class=\\\"fa-solid fa-save\\\"></i> \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #dc3545;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"deleteTemplate\\\"\\n          >\\n            <i class=\\\"fa-solid fa-trash\\\"></i> \\n          </button>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <div style=\\\"display: flex; gap: 12px; align-items: center\\\">\\n          <div style=\\\"display: flex; align-items: center; gap: 6px\\\">\\n            <div\\n              :style=\\\"{\\n                width: '8px',\\n                height: '8px',\\n                borderRadius: '50%',\\n                backgroundColor: is_summarizing ? '#ff6b6b' : '#4caf50',\\n                transition: 'background-color 0.3s',\\n              }\\\"\\n            ></div>\\n            <span style=\\\"color: #ccc; font-size: 12px\\\"></span>\\n          </div>\\n          <div style=\\\"display: flex; align-items: center; gap: 6px\\\">\\n            <div\\n              :style=\\\"{\\n                width: '8px',\\n                height: '8px',\\n                borderRadius: '50%',\\n                backgroundColor: is_generating_table ? '#ff6b6b' : '#4caf50',\\n                transition: 'background-color 0.3s',\\n              }\\\"\\n            ></div>\\n            <span style=\\\"color: #ccc; font-size: 12px\\\"></span>\\n          </div>\\n          <div v-if=\\\"is_summarizing || is_generating_table\\\" style=\\\"margin-left: auto\\\">\\n            <button\\n              style=\\\"\\n                padding: 4px 8px;\\n                background: #dc3545;\\n                border: none;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 11px;\\n              \\\"\\n              @click=\\\"stopGeneration\\\"\\n            >\\n              <i class=\\\"fa-solid fa-stop\\\"></i> \\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button summarize-button\\\"\\n          :disabled=\\\"is_generating_table || !settings.api_key\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #5aaeff;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #4a9eff;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_generate_table\\\"\\n        >\\n          <i v-if=\\\"!is_generating_table\\\" class=\\\"fa-solid fa-robot\\\"></i>\\n          <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\"></i>\\n          {{ is_generating_table ? 'AI...' : 'AI' }}\\n        </button>\\n        <button\\n          class=\\\"action-button create-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #40c057;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #51cf66;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_create_table\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"\\n          >1-10 5</label\\n        >\\n        <input\\n          v-model=\\\"hide_range\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"1-10\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #ff5252;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #ff6b6b;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_hide_messages\\\"\\n        >\\n          <i class=\\\"fa-solid fa-eye-slash\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #40c057;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #51cf66;\\n            color: white;\\n          \\\"\\n          :disabled=\\\"!hide_range.trim()\\\"\\n          @click=\\\"handle_show_messages\\\"\\n        >\\n          <i class=\\\"fa-solid fa-eye\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #ffcc02;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #ffd43b;\\n            color: #333;\\n          \\\"\\n          @click=\\\"() => handle_refresh_hidden(true)\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n      </div>\\n\\n      <!--  -->\\n      <div v-if=\\\"hidden_messages.length > 0\\\" class=\\\"hidden-messages-section\\\">\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"flex-label\\\">\\n            <span> ({{ hidden_messages.length }} )</span>\\n            <button class=\\\"mini-button\\\" @click=\\\"hidden_display_expanded = !hidden_display_expanded\\\">\\n              {{ hidden_display_expanded ? '' : '' }}\\n            </button>\\n          </label>\\n        </div>\\n        <div v-if=\\\"hidden_display_expanded\\\" class=\\\"hidden-messages-list\\\">\\n          <div v-for=\\\"msg in hidden_messages\\\" :key=\\\"msg.message_id\\\" class=\\\"hidden-message-item\\\">\\n            <div class=\\\"message-info\\\">\\n              <span class=\\\"message-id\\\">#{{ msg.message_id }}</span>\\n              <span class=\\\"message-role\\\" :class=\\\"'role-' + msg.role\\\">\\n                {{ msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '' }}\\n                {{ msg.name }}\\n              </span>\\n              <span class=\\\"message-preview\\\">\\n                {{ msg.message.substring(0, 50) }}{{ msg.message.length > 50 ? '...' : '' }}\\n              </span>\\n            </div>\\n            <button class=\\\"show-button\\\" @click=\\\"() => handle_unhide_single(msg.message_id)\\\"></button>\\n          </div>\\n        </div>\\n      </div>\\n      <div v-else class=\\\"empty-state\\\"></div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { onMounted, ref } from 'vue';\\nimport { useSettingsStore } from '../settings';\\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// API\\n// setChatMessages \\n\\n// \\nconst parseMessageRange = (range: string): number[] => {\\n  if (!range.trim()) return [];\\n\\n  const messageIds: number[] = [];\\n  const parts = range.split(',');\\n\\n  for (const part of parts) {\\n    const trimmed = part.trim();\\n    if (!trimmed) continue;\\n\\n    if (trimmed.includes('-')) {\\n      //  \\\"1-10\\\"\\n      const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\\n      if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\\n        for (let i = start; i <= end; i++) {\\n          messageIds.push(i);\\n        }\\n      }\\n    } else {\\n      //  \\\"5\\\"  \\\"0\\\"\\n      const id = parseInt(trimmed);\\n      if (!isNaN(id) && id >= 0) {\\n        messageIds.push(id);\\n      }\\n    }\\n  }\\n\\n  return messageIds;\\n};\\n\\n// \\nconst available_models = ref<string[]>([]);\\nconst loading_models = ref(false);\\nconst hide_range = ref<string>('');\\nconst hidden_messages = ref<Array<{ message_id: number; name: string; role: string; message: string }>>([]);\\nconst hidden_display_expanded = ref(false);\\n\\n// \\nconst is_summarizing = ref(false);\\nconst is_generating_table = ref(false);\\n\\n// \\nconst headerTemplates = ref<Array<{ name: string; headers: string }>>([]);\\nconst selectedTemplate = ref<string>('');\\nconst currentTemplate = ref<{ name: string; headers: string }>({ name: '', headers: '' });\\n\\n// \\nconst loadGenerationStatus = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    is_summarizing.value = scriptVars.is_summarizing || false;\\n    is_generating_table.value = scriptVars.is_generating_table || false;\\n    console.log(':', { summarizing: is_summarizing.value, generating_table: is_generating_table.value });\\n  } catch (error) {\\n    console.error(':', error);\\n    is_summarizing.value = false;\\n    is_generating_table.value = false;\\n  }\\n};\\n\\nconst saveGenerationStatus = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    insertOrAssignVariables(\\n      {\\n        is_summarizing: is_summarizing.value,\\n        is_generating_table: is_generating_table.value,\\n      },\\n      { type: 'script', script_id: scriptId },\\n    );\\n    console.log('');\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\nconst stopGeneration = () => {\\n  if (is_summarizing.value || is_generating_table.value) {\\n    is_summarizing.value = false;\\n    is_generating_table.value = false;\\n    saveGenerationStatus();\\n    window.toastr.info('');\\n  }\\n};\\n\\n// \\nconst loadHeaderTemplates = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    //  header_templates  nullundefined\\n    let templates = scriptVars.header_templates;\\n    //  nullundefined  []\\n    if (!Array.isArray(templates)) {\\n      templates = [];\\n    }\\n    headerTemplates.value = templates;\\n    console.log(':', headerTemplates.value.length, '');\\n  } catch (error) {\\n    console.error(':', error);\\n    headerTemplates.value = [];\\n  }\\n};\\n\\nconst saveHeaderTemplates = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    insertOrAssignVariables({ header_templates: headerTemplates.value }, { type: 'script', script_id: scriptId });\\n    console.log('');\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\nconst loadTemplate = () => {\\n  if (selectedTemplate.value !== '') {\\n    const index = parseInt(selectedTemplate.value);\\n    if (index >= 0 && index < headerTemplates.value.length) {\\n      currentTemplate.value = { ...headerTemplates.value[index] };\\n    }\\n  }\\n};\\n\\nconst showAddTemplateDialog = () => {\\n  const name = window.prompt('');\\n  if (name && name.trim()) {\\n    const headers = window.prompt('');\\n    if (headers && headers.trim()) {\\n      headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\\n      saveHeaderTemplates();\\n      selectedTemplate.value = (headerTemplates.value.length - 1).toString();\\n      loadTemplate();\\n      window.toastr.success('');\\n    }\\n  }\\n};\\n\\nconst saveTemplate = () => {\\n  if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\\n    const index = parseInt(selectedTemplate.value);\\n    if (index >= 0 && index < headerTemplates.value.length) {\\n      headerTemplates.value[index] = { ...currentTemplate.value };\\n      saveHeaderTemplates();\\n      window.toastr.success('');\\n    }\\n  } else {\\n    window.toastr.warning('');\\n  }\\n};\\n\\nconst deleteTemplate = () => {\\n  if (selectedTemplate.value !== '') {\\n    if (confirm('')) {\\n      const index = parseInt(selectedTemplate.value);\\n      if (index >= 0 && index < headerTemplates.value.length) {\\n        headerTemplates.value.splice(index, 1);\\n        saveHeaderTemplates();\\n        selectedTemplate.value = '';\\n        currentTemplate.value = { name: '', headers: '' };\\n        window.toastr.success('');\\n      }\\n    }\\n  }\\n};\\n\\n// \\nconst loadHiddenMessages = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    console.log('ID:', scriptId);\\n\\n    const saved = getVariables({ type: 'script', script_id: scriptId });\\n    console.log(':', saved);\\n    console.log(' hidden_messages :', saved?.hidden_messages);\\n\\n    if (saved && saved.hidden_messages) {\\n      hidden_messages.value = saved.hidden_messages;\\n      console.log(':', hidden_messages.value.length, '');\\n    } else {\\n      console.log('...');\\n      // \\n      const possibleFields = ['hiddenMessages', 'hidden_floors', 'hiddenFloors', 'floor_data'];\\n      for (const field of possibleFields) {\\n        if (saved && saved[field]) {\\n          console.log(` ${field}:`, saved[field]);\\n          hidden_messages.value = saved[field];\\n          break;\\n        }\\n      }\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\n// \\nconst saveHiddenMessages = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    console.log('ID:', scriptId);\\n    console.log(':', hidden_messages.value);\\n\\n    const dataToSave = {\\n      hidden_messages: hidden_messages.value,\\n    };\\n    console.log(':', dataToSave);\\n\\n    insertOrAssignVariables(dataToSave, { type: 'script', script_id: scriptId });\\n    console.log(':', hidden_messages.value.length, '');\\n\\n    // \\n    setTimeout(() => {\\n      const saved = getVariables({ type: 'script', script_id: scriptId });\\n      console.log(':', saved);\\n      console.log(' hidden_messages :', saved?.hidden_messages);\\n    }, 100);\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\n// \\nonMounted(() => {\\n  console.log('SettingsTab ');\\n  loadHiddenMessages();\\n  loadHeaderTemplates();\\n  loadGenerationStatus();\\n});\\n\\n// \\nconst handleTestButton = () => {\\n  console.log(' - Vue');\\n  window.toastr.success('Vue');\\n};\\n\\n// \\nconst handleSaveSettings = () => {\\n  console.log(' ...');\\n  const success = settingsStore.saveSettings();\\n  if (success) {\\n    console.log(' ');\\n  } else {\\n    console.error(' ');\\n  }\\n};\\n\\nconst handleReloadSettings = () => {\\n  console.log(' ...');\\n  const success = settingsStore.reloadSettings();\\n  if (success) {\\n    console.log(' ');\\n  } else {\\n    console.error(' ');\\n  }\\n};\\n\\nconst handleResetAutoSummaryStart = () => {\\n  console.log(' ...');\\n  try {\\n    // \\n    if (typeof (window as any).resetAutoSummaryStart === 'function') {\\n      (window as any).resetAutoSummaryStart();\\n    } else {\\n      window.toastr.error('');\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst handle_fetch_models = async () => {\\n  if (loading_models.value) return;\\n\\n  try {\\n    loading_models.value = true;\\n    console.log('...');\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    const { fetchAvailableModels } = await import('../');\\n    const models = await fetchAvailableModels();\\n\\n    console.log(':', models);\\n\\n    if (models.length > 0) {\\n      // \\n      available_models.value = models;\\n      window.toastr.success(` ${models.length} `);\\n\\n      // \\n      if (!settings.value.model && models[0]) {\\n        settings.value.model = models[0];\\n      }\\n    } else {\\n      window.toastr.warning('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    loading_models.value = false;\\n  }\\n};\\n\\nconst handle_test_connection = async () => {\\n  try {\\n    console.log('...');\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model || 'gpt-3.5-turbo',\\n        messages: [{ role: 'user', content: 'test' }],\\n        max_tokens: 1,\\n      }),\\n    });\\n\\n    if (response.ok) {\\n      window.toastr.success('');\\n    } else {\\n      window.toastr.error('' + response.status);\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_summarize = async () => {\\n  try {\\n    if (is_summarizing.value) return;\\n\\n    console.log('...');\\n    is_summarizing.value = true;\\n    saveGenerationStatus();\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const { summarizeMessages } = await import('../');\\n    const summary = await summarizeMessages(0, chatMessages.length);\\n\\n    console.log(':', summary);\\n\\n    // \\n    const scriptId = getScriptIdSafe();\\n    if (scriptId) {\\n      insertOrAssignVariables({ last_summary: summary }, { type: 'script', script_id: scriptId });\\n    }\\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    is_summarizing.value = false;\\n    saveGenerationStatus();\\n  }\\n};\\n\\nconst handle_generate_table = async () => {\\n  try {\\n    if (is_generating_table.value) return;\\n\\n    console.log('...');\\n    is_generating_table.value = true;\\n    saveGenerationStatus();\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let headersInput: string | null = null;\\n\\n    if (currentTemplate.value.headers.trim()) {\\n      // \\n      const useTemplate = confirm(\\n        `\\\"${currentTemplate.value.name}\\\"\\\\n${currentTemplate.value.headers}`,\\n      );\\n      if (useTemplate) {\\n        headersInput = currentTemplate.value.headers;\\n      }\\n    }\\n\\n    if (!headersInput) {\\n      // \\n      headersInput = window.prompt(',,,');\\n    }\\n\\n    if (!headersInput || !headersInput.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    const headers: string[] = headersInput\\n      .split(',')\\n      .map((h: string) => h.trim())\\n      .filter((h: string) => h);\\n\\n    if (headers.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\\n      console.log(':', messageRange);\\n      chatMessages = getChatMessages(messageRange, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // AI\\n    const messagesText = chatMessages\\n      .map(msg => {\\n        const role = msg.role === 'user' ? '' : 'AI';\\n        return `${role}: ${msg.message}`;\\n      })\\n      .join('\\\\n\\\\n');\\n\\n    const aiPrompt = `${headers.join(', ')}\\n\\n\\n${messagesText}\\n\\n****\\n1. \\n2. ${headers.join(', ')}\\n3. \\n4. \\\"\\\"\\\"-\\\"\\n5. JSONmarkdown\\n6. dataheaders\\n\\n**JSON**\\n{\\n  \\\"data\\\": [\\n    [\\\"1\\\", \\\"2\\\", \\\"3\\\"],\\n    [\\\"4\\\", \\\"5\\\", \\\"6\\\"]\\n  ]\\n}\\n\\ndata${headers.length}${headers.join(', ')}`;\\n\\n    console.log('AI...');\\n    window.toastr.info('AI...');\\n\\n    // AI\\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'user',\\n            content: aiPrompt,\\n          },\\n        ],\\n        max_tokens: settings.value.max_tokens,\\n        temperature: settings.value.temperature,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API: ${response.status} ${response.statusText}`);\\n    }\\n\\n    const result = await response.json();\\n    console.log('AI:', result);\\n\\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\\n      throw new Error('AI');\\n    }\\n\\n    const aiResponse = result.choices[0].message.content;\\n    console.log('AI:', aiResponse);\\n\\n    // AIJSON\\n    let aiTableData;\\n    try {\\n      // JSONmarkdown\\n      let jsonText = aiResponse.trim();\\n\\n      // markdown\\n      jsonText = jsonText\\n        .replace(/^```json\\\\s*/i, '')\\n        .replace(/^```\\\\s*/, '')\\n        .replace(/```\\\\s*$/, '');\\n\\n      // JSON\\n      const jsonMatch = jsonText.match(/\\\\{[\\\\s\\\\S]*\\\\}/);\\n      if (jsonMatch) {\\n        aiTableData = JSON.parse(jsonMatch[0]);\\n      } else {\\n        throw new Error('JSON');\\n      }\\n    } catch (parseError) {\\n      console.error('AI:', parseError);\\n      console.log('AI:', aiResponse);\\n      window.toastr.error('AI');\\n      return;\\n    }\\n\\n    // \\n    if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\\n      window.toastr.error('AIdata');\\n      return;\\n    }\\n\\n    // \\n    for (let i = 0; i < aiTableData.data.length; i++) {\\n      if (!Array.isArray(aiTableData.data[i])) {\\n        window.toastr.error(`${i + 1}`);\\n        return;\\n      }\\n      if (aiTableData.data[i].length !== headers.length) {\\n        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\\n        console.log(`:`, headers);\\n        console.log(`:`, aiTableData.data[i]);\\n        return;\\n      }\\n    }\\n\\n    // headers\\n    const tableData = {\\n      headers: headers,\\n      data: aiTableData.data,\\n    };\\n\\n    // \\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      const chat_vars = getVariables({ type: 'chat' });\\n      const table_history = chat_vars.table_history || [];\\n\\n      table_history.push({\\n        start_id: settings.value.table_start_message_id,\\n        end_id: settings.value.table_end_message_id,\\n        headers: tableData.headers,\\n        data: tableData.data,\\n      });\\n\\n      insertOrAssignVariables({ table_history }, { type: 'chat' });\\n\\n      window.toastr.success(`${tableData.data.length}`);\\n      console.log(':', table_history);\\n    } else {\\n      window.toastr.warning('ID');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    is_generating_table.value = false;\\n    saveGenerationStatus();\\n  }\\n};\\n\\nconst handle_create_table = () => {\\n  try {\\n    // \\n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const headersInput: string | null = window.prompt(',,,');\\n    if (!headersInput || !headersInput.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const headers: string[] = headersInput\\n      .split(',')\\n      .map((h: string) => h.trim())\\n      .filter((h: string) => h);\\n\\n    if (headers.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const emptyTableData = {\\n      start_id: settings.value.table_start_message_id,\\n      end_id: settings.value.table_end_message_id,\\n      headers: headers,\\n      data: [], // \\n    };\\n\\n    // \\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      const chat_vars = getVariables({ type: 'chat' });\\n      const table_history = chat_vars.table_history || [];\\n\\n      table_history.push(emptyTableData);\\n      insertOrAssignVariables({ table_history }, { type: 'chat' });\\n\\n      window.toastr.success(`${headers.join(', ')}`);\\n      console.log(':', emptyTableData);\\n    } else {\\n      window.toastr.warning('ID');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_hide_messages = async () => {\\n  try {\\n    console.log('...');\\n\\n    if (!hide_range.value.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const ranges = hide_range.value.split(',').map(range => range.trim());\\n    const messageIds: number[] = [];\\n\\n    for (const range of ranges) {\\n      if (range.includes('-')) {\\n        // 1-10\\n        const [start, end] = range.split('-').map(Number);\\n        if (start && end && start <= end) {\\n          for (let i = start; i <= end; i++) {\\n            messageIds.push(i);\\n          }\\n        }\\n      } else {\\n        // 5\\n        const id = Number(range);\\n        if (id) {\\n          messageIds.push(id);\\n        }\\n      }\\n    }\\n\\n    if (messageIds.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let hiddenCount = 0;\\n    const messagesToHide = [];\\n\\n    for (const messageId of messageIds) {\\n      const message = chatMessages.find(msg => msg.message_id === messageId);\\n      if (message) {\\n        // \\n        messagesToHide.push({\\n          message_id: messageId,\\n          is_hidden: true,\\n        });\\n\\n        // \\n        hidden_messages.value.push({\\n          message_id: messageId,\\n          name: message.name || 'Unknown',\\n          role: message.role || 'user',\\n          message: message.message || '',\\n        });\\n        hiddenCount++;\\n      }\\n    }\\n\\n    // API\\n    if (messagesToHide.length > 0) {\\n      try {\\n        console.log(' slash :', messageIds);\\n\\n        //  slash \\n        for (const messageId of messageIds) {\\n          try {\\n            await triggerSlash(`/hide ${messageId}`);\\n            console.log(` ${messageId}`);\\n          } catch (error) {\\n            console.error(` ${messageId} :`, error);\\n          }\\n        }\\n\\n        window.toastr.success('');\\n      } catch (error) {\\n        console.error('API:', error);\\n        window.toastr.error('API: ' + (error as Error).message);\\n      }\\n    }\\n\\n    if (hiddenCount > 0) {\\n      // \\n      saveHiddenMessages();\\n      window.toastr.success(` ${hiddenCount} `);\\n      hide_range.value = ''; // \\n    } else {\\n      window.toastr.warning('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_show_messages = async () => {\\n  try {\\n    console.log('...');\\n\\n    if (!hide_range.value.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const messageIds = parseMessageRange(hide_range.value.trim());\\n    if (messageIds.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const messagesToShow = [];\\n    let shownCount = 0;\\n\\n    for (const messageId of messageIds) {\\n      const message = chatMessages.find(msg => msg.message_id === messageId);\\n      if (message) {\\n        messagesToShow.push({\\n          message_id: messageId,\\n          is_hidden: false,\\n        });\\n        shownCount++;\\n      }\\n    }\\n\\n    if (messagesToShow.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // API\\n    try {\\n      //  slash \\n      for (const messageId of messageIds) {\\n        try {\\n          await triggerSlash(`/unhide ${messageId}`);\\n          console.log(` ${messageId}`);\\n        } catch (error) {\\n          console.error(` ${messageId} :`, error);\\n        }\\n      }\\n    } catch (error) {\\n      console.error('API:', error);\\n      window.toastr.error('API: ' + (error as Error).message);\\n      return;\\n    }\\n\\n    // \\n    hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\\n\\n    // \\n    saveHiddenMessages();\\n\\n    window.toastr.success(` ${shownCount} `);\\n    hide_range.value = ''; // \\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_refresh_hidden = async (showToast: boolean = false) => {\\n  try {\\n    console.log('', showToast);\\n\\n    // \\n    if (hidden_messages.value.length === 0) {\\n      console.log('...');\\n      loadHiddenMessages();\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      if (showToast) {\\n        window.toastr.error(': ' + (error as Error).message);\\n      }\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      if (showToast) {\\n        window.toastr.warning('');\\n      }\\n      return;\\n    }\\n\\n    // \\n    const validHiddenMessages = [];\\n    let removedCount = 0;\\n\\n    for (const hiddenMsg of hidden_messages.value) {\\n      const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\\n      if (message) {\\n        // \\n        validHiddenMessages.push({\\n          message_id: hiddenMsg.message_id,\\n          name: message.name || hiddenMsg.name,\\n          role: message.role || hiddenMsg.role,\\n          message: message.message || hiddenMsg.message,\\n        });\\n      } else {\\n        // \\n        removedCount++;\\n      }\\n    }\\n\\n    // \\n    hidden_messages.value = validHiddenMessages;\\n\\n    // \\n    saveHiddenMessages();\\n\\n    if (showToast) {\\n      if (removedCount > 0) {\\n        window.toastr.success(` ${removedCount} `);\\n      } else {\\n        window.toastr.success('');\\n      }\\n    }\\n\\n    console.log(`${validHiddenMessages.length} ${removedCount} `);\\n  } catch (error) {\\n    console.error(':', error);\\n    if (showToast) {\\n      window.toastr.error(': ' + (error as Error).message);\\n    }\\n  }\\n};\\n\\nconst handle_unhide_single = async (messageId: number) => {\\n  try {\\n    console.log('', messageId);\\n\\n    // \\n    const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\\n    if (index === -1) {\\n      window.toastr.warning(` #${messageId} `);\\n      return;\\n    }\\n\\n    // API\\n    try {\\n      //  slash \\n      await triggerSlash(`/unhide ${messageId}`);\\n      console.log(':', messageId);\\n    } catch (error) {\\n      console.error('API:', error);\\n      window.toastr.warning('API');\\n      return;\\n    }\\n\\n    // \\n    hidden_messages.value.splice(index, 1);\\n\\n    // \\n    saveHiddenMessages();\\n\\n    window.toastr.success(` #${messageId}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n</script>\\n\\n<style>\\n.settings-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n  background: #1a1a1a !important;\\n  border: 2px solid red !important;\\n}\\n\\n.config-section {\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.config-section:last-child {\\n  border-bottom: none;\\n  margin-bottom: 0;\\n}\\n\\n.config-section h3 {\\n  margin: 0 0 20px 0 !important;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.form-group {\\n  margin-bottom: 18px !important;\\n}\\n\\n.form-group label {\\n  display: block;\\n  margin-bottom: 6px;\\n  color: #ccc;\\n  font-size: 13px;\\n}\\n\\n.checkbox-label {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.flex-label {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.form-group input[type='text'],\\n.form-group input[type='password'],\\n.form-group input[type='number'],\\n.form-group select {\\n  width: 100%;\\n  padding: 10px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  color: #e0e0e0;\\n  font-size: 13px;\\n  transition: border-color 0.2s;\\n}\\n\\n.form-group input:focus,\\n.form-group select:focus {\\n  outline: none;\\n  border-color: #4a9eff;\\n}\\n\\n.model-controls {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.button-group {\\n  display: flex;\\n  gap: 12px;\\n  flex-wrap: wrap;\\n  margin-top: 5px;\\n}\\n\\n.action-button {\\n  flex: 1;\\n  min-width: 120px;\\n  padding: 12px 16px;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  font-weight: 500;\\n  font-size: 13px;\\n  transition: all 0.2s;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 6px;\\n  background: #3a3a3a;\\n  color: #e0e0e0;\\n  border: 1px solid #4a4a4a;\\n}\\n\\n.action-button:hover {\\n  background: #4a4a4a;\\n  border-color: #5a5a5a;\\n}\\n\\n.test-button {\\n  background: #3a3a3a;\\n  color: #e0e0e0;\\n  border: 1px solid #4a4a4a;\\n}\\n\\n.test-button:hover {\\n  background: #4a4a4a;\\n  border-color: #5a5a5a;\\n}\\n\\n.fetch-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.fetch-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.summarize-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.summarize-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.create-button {\\n  background: #51cf66;\\n  color: white;\\n  border: 1px solid #40c057;\\n}\\n\\n.create-button:hover {\\n  background: #40c057;\\n  border-color: #37b24d;\\n}\\n\\n.table-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.table-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.hide-button {\\n  background: #ff6b6b;\\n  color: white;\\n  border: 1px solid #ff5252;\\n}\\n\\n.hide-button:hover {\\n  background: #ff5252;\\n  border-color: #ff4444;\\n}\\n\\n.unhide-button {\\n  background: #51cf66;\\n  color: white;\\n  border: 1px solid #40c057;\\n}\\n\\n.unhide-button:hover {\\n  background: #40c057;\\n  border-color: #37b24d;\\n}\\n\\n.refresh-button {\\n  background: #ffd43b;\\n  color: #333;\\n  border: 1px solid #ffcc02;\\n}\\n\\n.refresh-button:hover {\\n  background: #ffcc02;\\n  border-color: #ffb700;\\n}\\n\\n.action-button:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.model-select {\\n  margin-top: 8px;\\n}\\n\\n.hidden-messages-section {\\n  margin-top: 20px;\\n}\\n\\n.hidden-messages-list {\\n  max-height: 300px;\\n  overflow-y: auto;\\n  border-radius: 6px;\\n  border: 1px solid #3a3a3a;\\n  background: #1a1a1a;\\n}\\n\\n.hidden-message-item {\\n  padding: 10px 12px;\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  border-bottom: 1px solid #2a2a2a;\\n  transition: background 0.2s;\\n}\\n\\n.hidden-message-item:last-child {\\n  border-bottom: none;\\n}\\n\\n.hidden-message-item:hover {\\n  background: #2a2a2a;\\n}\\n\\n.message-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.message-id {\\n  font-weight: bold;\\n  color: #4a9eff;\\n  font-size: 13px;\\n  min-width: 50px;\\n}\\n\\n.message-role {\\n  font-size: 12px;\\n  padding: 2px 8px;\\n  border-radius: 4px;\\n  white-space: nowrap;\\n}\\n\\n.message-role.role-user {\\n  background: #3a5a3a;\\n  color: #90ee90;\\n}\\n\\n.message-role.role-assistant {\\n  background: #3a3a5a;\\n  color: #90a0ee;\\n}\\n\\n.message-role.role-system {\\n  background: #5a5a3a;\\n  color: #eea090;\\n}\\n\\n.message-preview {\\n  flex: 1;\\n  color: #888;\\n  font-size: 12px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.show-button {\\n  background: #4a9eff !important;\\n  color: white !important;\\n  padding: 6px 12px;\\n  border: 1px solid #5aaeff !important;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n  min-width: 60px;\\n  text-align: center;\\n}\\n\\n.show-button:hover {\\n  background: #5aaeff !important;\\n  border-color: #6abeff !important;\\n}\\n\\n.mini-button {\\n  background: #666;\\n  color: white;\\n  border: 1px solid #777;\\n  padding: 6px 12px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #777;\\n  border-color: #888;\\n}\\n\\n.empty-state {\\n  margin-top: 20px;\\n  padding: 20px;\\n  background: #2a2a2a;\\n  border-radius: 6px;\\n  text-align: center;\\n  color: #888;\\n  border: 1px solid #3a3a3a;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * \n *  Vue  API\n */\n\n//  script_id\nlet globalScriptId: string | null = null;\n\n//  script_id \nexport function getScriptIdSafe(): string | null {\n  if (!globalScriptId) {\n    try {\n      // \n      if (typeof getScriptId === 'function') {\n        globalScriptId = getScriptId();\n      }\n    } catch (e) {\n      console.warn(' script_id :', e);\n    }\n  }\n  return globalScriptId;\n}\n\n//  script_id\nexport function setGlobalScriptId(id: string) {\n  globalScriptId = id;\n}\n\n//  ID\nexport function getChatIdSafe(): string | null {\n  try {\n    //  getChatId \n    if (typeof (window as any).getChatId === 'function') {\n      return (window as any).getChatId();\n    }\n    //  getChatId \n    if (typeof (window as any).SillyTavern !== 'undefined' && (window as any).SillyTavern.getCurrentChatId) {\n      return (window as any).SillyTavern.getCurrentChatId();\n    }\n  } catch (e) {\n    console.warn(' chat_id :', e);\n  }\n  return null;\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.table-tab[data-v-0416f1c6]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-0416f1c6]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.section-header h3[data-v-0416f1c6]{margin:0;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.count-badge[data-v-0416f1c6]{background:#4a9eff;color:white;padding:4px 8px;border-radius:12px;font-size:12px}.empty-state[data-v-0416f1c6]{text-align:center;padding:40px 20px;color:#888}.empty-state i[data-v-0416f1c6]{font-size:48px;margin-bottom:10px;opacity:0.3}.empty-state p[data-v-0416f1c6]{margin:10px 0;font-size:14px}.empty-state small[data-v-0416f1c6]{color:#666;font-size:12px}.history-list[data-v-0416f1c6]{display:flex;flex-direction:column;gap:10px;padding:15px 20px}.history-item[data-v-0416f1c6]{background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;overflow:hidden;transition:border-color 0.2s}.history-item[data-v-0416f1c6]:hover{border-color:#4a4a4a}.history-header[data-v-0416f1c6]{padding:12px 15px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background 0.2s}.history-header[data-v-0416f1c6]:hover{background:#2a2a2a}.history-info[data-v-0416f1c6]{display:flex;align-items:center;gap:10px;flex:1}.history-number[data-v-0416f1c6]{color:#4a9eff;font-weight:bold}.history-range[data-v-0416f1c6]{color:#888;font-size:12px}.expand-icon[data-v-0416f1c6]{color:#888;font-size:12px}.history-content[data-v-0416f1c6]{padding:15px;background:#2a2a2a}.history-actions[data-v-0416f1c6]{display:flex;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a}.mini-button[data-v-0416f1c6]{flex:1;padding:6px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:background 0.2s}.mini-button[data-v-0416f1c6]:hover{background:#3a3a3a}.mini-button.delete-button[data-v-0416f1c6]:hover{background:#ff4444;border-color:#ff4444;color:white}.table-display[data-v-0416f1c6]{margin-top:15px;overflow-x:auto;max-height:400px;overflow-y:auto;border-radius:6px;background:#1a1a1a}.table-display table[data-v-0416f1c6]{width:100%;font-size:12px;border-collapse:collapse}.table-display th[data-v-0416f1c6],.table-display td[data-v-0416f1c6]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px;padding:8px;border:1px solid #444}.table-display th[data-v-0416f1c6]{background:#2a2a2a;font-weight:bold;color:#fff}.table-display td[data-v-0416f1c6]{color:#e0e0e0}.copy-button:hover .shimmer-effect[data-v-0416f1c6],.delete-button:hover .shimmer-effect[data-v-0416f1c6]{left:100%}.copy-button[data-v-0416f1c6]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(40,167,69,0.4)}.delete-button[data-v-0416f1c6]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(255,107,107,0.4)}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/TableTab.vue\"],\"names\":[],\"mappings\":\"AAomBA,4BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,oCACE,QAAS,CACT,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,cACF,CAEA,8BACE,iBAAkB,CAClB,iBAAkB,CAClB,UACF,CAEA,gCACE,cAAe,CACf,kBAAmB,CACnB,WACF,CAEA,gCACE,aAAc,CACd,cACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,iBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,oBACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,0BACF,CAEA,uCACE,kBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,iCACE,aAAc,CACd,gBACF,CAEA,gCACE,UAAW,CACX,cACF,CAEA,8BACE,UAAW,CACX,cACF,CAEA,kCACE,YAAa,CACb,kBACF,CAEA,kCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,kBAAmB,CACnB,+BACF,CAEA,8BACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,cAAe,CACf,0BACF,CAEA,oCACE,kBACF,CAEA,kDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,gCACE,eAAgB,CAChB,eAAgB,CAChB,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,kBACF,CAEA,sCACE,UAAW,CACX,cAAe,CACf,wBACF,CAEA,sEAEE,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,eAAgB,CAChB,WAAY,CACZ,qBACF,CAEA,mCACE,kBAAmB,CACnB,gBAAiB,CACjB,UACF,CAEA,mCACE,aACF,CAGA,0GAEE,SACF,CAEA,oCACE,0BAA2B,CAC3B,yCACF,CAEA,sCACE,0BAA2B,CAC3B,2CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"table-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n        margin-bottom: 5px;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <span\\n        v-if=\\\"table_history.length > 0\\\"\\n        class=\\\"count-badge\\\"\\n        style=\\\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n        >{{ table_history.length }} </span\\n      >\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"table_history && table_history.length > 0\\\"\\n      class=\\\"history-list\\\"\\n      style=\\\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\\\"\\n    >\\n      <div\\n        v-for=\\\"(item, index) in table_history\\\"\\n        :key=\\\"index\\\"\\n        class=\\\"history-item\\\"\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #444;\\n          border-radius: 8px;\\n          padding: 15px;\\n          transition: all 0.3s ease;\\n        \\\"\\n      >\\n        <div\\n          class=\\\"history-header\\\"\\n          style=\\\"\\n            padding: 12px 15px;\\n            background: #1a1a1a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background 0.2s;\\n            border-radius: 6px;\\n          \\\"\\n          @click=\\\"toggleTableExpanded(index)\\\"\\n        >\\n          <div class=\\\"history-info\\\" style=\\\"display: flex; align-items: center; gap: 10px; flex: 1\\\">\\n            <span class=\\\"history-number\\\" style=\\\"color: #4a9eff; font-weight: bold\\\">#{{ index + 1 }}</span>\\n            <span class=\\\"history-range\\\" style=\\\"color: #888; font-size: 12px\\\"\\n              > {{ item.start_id }} - {{ item.end_id }}</span\\n            >\\n          </div>\\n          <span class=\\\"expand-icon\\\" style=\\\"color: #888; font-size: 12px\\\">{{\\n            isTableExpanded(index) ? '' : ''\\n          }}</span>\\n        </div>\\n        <div\\n          v-if=\\\"isTableExpanded(index)\\\"\\n          class=\\\"history-content\\\"\\n          style=\\\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\\\"\\n        >\\n          <div\\n            class=\\\"history-actions\\\"\\n            style=\\\"\\n              display: flex;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n              flex-wrap: wrap;\\n            \\\"\\n          >\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                font-weight: 600;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 6px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyTable(item)\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 12px\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"delete-button\\\"\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                font-weight: 600;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 6px;\\n                box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"deleteTable(index)\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 12px\\\"></i> \\n            </button>\\n          </div>\\n          <div class=\\\"table-display\\\" style=\\\"overflow-x: auto; border-radius: 6px; border: 1px solid #3a3a3a\\\">\\n            <table style=\\\"width: 100%; border-collapse: collapse; background: #1a1a1a\\\">\\n              <thead style=\\\"background: #2a2a2a\\\">\\n                <tr>\\n                  <th\\n                    v-for=\\\"(header, idx) in item.headers\\\"\\n                    :key=\\\"idx\\\"\\n                    style=\\\"\\n                      padding: 12px 16px;\\n                      text-align: left;\\n                      font-weight: bold;\\n                      color: #fff;\\n                      border-bottom: 2px solid #3a3a3a;\\n                      border-right: 1px solid #3a3a3a;\\n                    \\\"\\n                  >\\n                    {{ header }}\\n                  </th>\\n                </tr>\\n              </thead>\\n              <tbody>\\n                <tr v-for=\\\"(row, rowIdx) in item.data\\\" :key=\\\"rowIdx\\\" style=\\\"border-bottom: 1px solid #3a3a3a\\\">\\n                  <td\\n                    v-for=\\\"(cell, cellIdx) in row\\\"\\n                    :key=\\\"cellIdx\\\"\\n                    style=\\\"padding: 10px 16px; color: #e0e0e0; border-right: 1px solid #3a3a3a\\\"\\n                  >\\n                    {{ cell }}\\n                  </td>\\n                </tr>\\n              </tbody>\\n            </table>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"empty-state\\\" style=\\\"text-align: center; padding: 40px 20px; color: #888\\\">\\n      <i class=\\\"fa-solid fa-table\\\" style=\\\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\\\"></i>\\n      <p style=\\\"margin: 10px 0; font-size: 16px\\\"></p>\\n      <small style=\\\"font-size: 12px; color: #666\\\">\\\"\\\"</small>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { getChatIdSafe } from '../utils';\\n\\n// \\nconst table_history = ref<Array<{ start_id: number; end_id: number; headers: string[]; data: string[][] }>>([]);\\nconst tableExpandedState = ref<Map<number, boolean>>(new Map());\\n\\n// \\nconst refreshTableHistory = () => {\\n  try {\\n    const chat_id = getChatIdSafe();\\n    if (!chat_id) {\\n      console.warn('ID');\\n      table_history.value = [];\\n      return;\\n    }\\n\\n    const chat_vars = getVariables({ type: 'chat' });\\n    console.log(':', chat_vars);\\n    console.log(':', chat_vars.table_history);\\n\\n    table_history.value = chat_vars.table_history || [];\\n    console.log(':', table_history.value.length);\\n  } catch (e) {\\n    console.error(':', e);\\n    table_history.value = [];\\n  }\\n};\\n\\n// \\nconst toggleTableExpanded = (index: number) => {\\n  const current = tableExpandedState.value.get(index) || false;\\n  tableExpandedState.value.set(index, !current);\\n};\\n\\nconst isTableExpanded = (index: number) => {\\n  return tableExpandedState.value.get(index) || false;\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // iframe\\n    if (window.parent && window.parent !== window) {\\n      console.log('iframe');\\n      const parentSuccess = await tryParentWindowCopy(text);\\n      if (parentSuccess) {\\n        console.log('');\\n        window.toastr.success(successMessage);\\n        return;\\n      }\\n    }\\n\\n    // 1:  Clipboard API\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log(' Clipboard API');\\n      try {\\n        await navigator.clipboard.writeText(text);\\n        console.log('Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } catch (clipboardErr) {\\n        console.warn('Clipboard API :', clipboardErr);\\n        // \\n      }\\n    }\\n\\n    // 2:  execCommand \\n    console.log(' execCommand ');\\n    const success = await execCommandCopy(text);\\n    if (success) {\\n      console.log('execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    }\\n\\n    // 3: \\n    console.log('');\\n    showManualCopyDialog(text);\\n  } catch (err) {\\n    console.error(':', err);\\n    // \\n    showManualCopyDialog(text);\\n  }\\n};\\n\\n// \\nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      const parentDoc = window.parent.document;\\n      const parentBody = window.parent.document.body;\\n\\n      //  textarea \\n      const textarea = parentDoc.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.cssText = `\\n        position: fixed;\\n        left: -9999px;\\n        top: -9999px;\\n        opacity: 0;\\n        pointer-events: none;\\n        z-index: -1000;\\n      `;\\n      textarea.setAttribute('readonly', '');\\n\\n      parentBody.appendChild(textarea);\\n\\n      // \\n      textarea.focus();\\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n\\n      // \\n      parentBody.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error(':', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n// execCommand \\nconst execCommandCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      //  textarea \\n      const textarea = document.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.position = 'fixed';\\n      textarea.style.left = '-9999px';\\n      textarea.style.top = '-9999px';\\n      textarea.style.opacity = '0';\\n      textarea.style.pointerEvents = 'none';\\n      textarea.setAttribute('readonly', '');\\n\\n      document.body.appendChild(textarea);\\n\\n      // \\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = document.execCommand('copy');\\n\\n      // \\n      document.body.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error('execCommand :', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'manual-copy-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #4a9eff;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 900px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+C</kbd> </li>\\n          <li>\\\"\\\" <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Esc</kbd> </li>\\n        </ol>\\n      </div>\\n    `;\\n\\n    // \\n    const textarea = parentDoc.createElement('textarea');\\n    textarea.value = text;\\n    textarea.style.cssText = `\\n      width: 100%;\\n      height: 400px;\\n      background: #1a1a1a;\\n      border: 2px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      color: #e0e0e0;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 13px;\\n      line-height: 1.5;\\n      resize: vertical;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      outline: none;\\n      margin-bottom: 20px;\\n      box-sizing: border-box;\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: flex;\\n      gap: 12px;\\n      justify-content: center;\\n      align-items: center;\\n    `;\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #4a9eff;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    closeButton.onmouseover = () => {\\n      closeButton.style.background = '#5ba8ff';\\n    };\\n    closeButton.onmouseout = () => {\\n      closeButton.style.background = '#4a9eff';\\n    };\\n\\n    // \\n    const copyButton = parentDoc.createElement('button');\\n    copyButton.textContent = '';\\n    copyButton.style.cssText = `\\n      background: #28a745;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    copyButton.onmouseover = () => {\\n      copyButton.style.background = '#218838';\\n    };\\n    copyButton.onmouseout = () => {\\n      copyButton.style.background = '#28a745';\\n    };\\n\\n    // \\n    buttonContainer.appendChild(copyButton);\\n    buttonContainer.appendChild(closeButton);\\n\\n    container.appendChild(header);\\n    container.appendChild(textarea);\\n    container.appendChild(buttonContainer);\\n    overlay.appendChild(container);\\n\\n    // \\n    parentBody.appendChild(overlay);\\n\\n    // \\n    closeButton.onclick = () => {\\n      console.log('');\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    copyButton.onclick = async () => {\\n      console.log('');\\n      try {\\n        // \\n        textarea.focus();\\n        textarea.select();\\n\\n        // \\n        const success = document.execCommand('copy');\\n        if (success) {\\n          window.toastr.success('');\\n          parentBody.removeChild(overlay);\\n        } else {\\n          window.toastr.warning('');\\n        }\\n      } catch (err) {\\n        console.error(':', err);\\n        window.toastr.warning('');\\n      }\\n    };\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        console.log('');\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log('ESC');\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    // \\n    setTimeout(() => {\\n      console.log('');\\n      textarea.focus();\\n      textarea.select();\\n    }, 200);\\n\\n    // \\n    window.toastr.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr.error('');\\n  }\\n};\\n\\n//  - \\nconst copyTable = (tableItem: { headers: string[]; data: string[][] }) => {\\n  try {\\n    // TSV\\n    const tsv = [tableItem.headers.join('\\\\t'), ...tableItem.data.map(row => row.join('\\\\t'))].join('\\\\n');\\n    copyToClipboard(tsv, '');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('');\\n  }\\n};\\n\\n// \\nconst deleteTable = (index: number) => {\\n  if (confirm('')) {\\n    table_history.value.splice(index, 1);\\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      insertOrAssignVariables({ table_history: table_history.value }, { type: 'chat' });\\n      window.toastr.success('');\\n    }\\n  }\\n};\\n\\n// \\nrefreshTableHistory();\\n</script>\\n\\n<style scoped>\\n.table-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.section-header h3 {\\n  margin: 0;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.count-badge {\\n  background: #4a9eff;\\n  color: white;\\n  padding: 4px 8px;\\n  border-radius: 12px;\\n  font-size: 12px;\\n}\\n\\n.empty-state {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #888;\\n}\\n\\n.empty-state i {\\n  font-size: 48px;\\n  margin-bottom: 10px;\\n  opacity: 0.3;\\n}\\n\\n.empty-state p {\\n  margin: 10px 0;\\n  font-size: 14px;\\n}\\n\\n.empty-state small {\\n  color: #666;\\n  font-size: 12px;\\n}\\n\\n.history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 15px 20px;\\n}\\n\\n.history-item {\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  overflow: hidden;\\n  transition: border-color 0.2s;\\n}\\n\\n.history-item:hover {\\n  border-color: #4a4a4a;\\n}\\n\\n.history-header {\\n  padding: 12px 15px;\\n  background: #1a1a1a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: pointer;\\n  user-select: none;\\n  transition: background 0.2s;\\n}\\n\\n.history-header:hover {\\n  background: #2a2a2a;\\n}\\n\\n.history-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.history-number {\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.history-range {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.expand-icon {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.history-content {\\n  padding: 15px;\\n  background: #2a2a2a;\\n}\\n\\n.history-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.mini-button {\\n  flex: 1;\\n  padding: 6px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 4px;\\n  color: #e0e0e0;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: background 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #3a3a3a;\\n}\\n\\n.mini-button.delete-button:hover {\\n  background: #ff4444;\\n  border-color: #ff4444;\\n  color: white;\\n}\\n\\n.table-display {\\n  margin-top: 15px;\\n  overflow-x: auto;\\n  max-height: 400px;\\n  overflow-y: auto;\\n  border-radius: 6px;\\n  background: #1a1a1a;\\n}\\n\\n.table-display table {\\n  width: 100%;\\n  font-size: 12px;\\n  border-collapse: collapse;\\n}\\n\\n.table-display th,\\n.table-display td {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  max-width: 200px;\\n  padding: 8px;\\n  border: 1px solid #444;\\n}\\n\\n.table-display th {\\n  background: #2a2a2a;\\n  font-weight: bold;\\n  color: #fff;\\n}\\n\\n.table-display td {\\n  color: #e0e0e0;\\n}\\n\\n/*  */\\n.copy-button:hover .shimmer-effect,\\n.delete-button:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.copy-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\\n}\\n\\n.delete-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=4ef9901c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"425b526b\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=4ef9901c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=4ef9901c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n    class: \"settings-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_4 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_5 = { class: \"form-group\" };\nconst _hoisted_6 = {\n    class: \"model-controls\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"10px\" }\n};\nconst _hoisted_7 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = [\"value\"];\nconst _hoisted_10 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_11 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_12 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_13 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_14 = {\n    class: \"checkbox-label\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\" }\n};\nconst _hoisted_15 = {\n    key: 0,\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_16 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_17 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_18 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_19 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_20 = [\"disabled\"];\nconst _hoisted_21 = [\"disabled\"];\nconst _hoisted_22 = {\n    key: 0,\n    class: \"fa-solid fa-magic\"\n};\nconst _hoisted_23 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\"\n};\nconst _hoisted_24 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_25 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_26 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_27 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_28 = { style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"8px\" } };\nconst _hoisted_29 = [\"value\"];\nconst _hoisted_30 = {\n    key: 0,\n    style: { \"display\": \"flex\", \"gap\": \"8px\" }\n};\nconst _hoisted_31 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_32 = { style: { \"display\": \"flex\", \"gap\": \"12px\", \"align-items\": \"center\" } };\nconst _hoisted_33 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_34 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_35 = {\n    key: 0,\n    style: { \"margin-left\": \"auto\" }\n};\nconst _hoisted_36 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_37 = [\"disabled\"];\nconst _hoisted_38 = {\n    key: 0,\n    class: \"fa-solid fa-robot\"\n};\nconst _hoisted_39 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\"\n};\nconst _hoisted_40 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_41 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_42 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_43 = [\"disabled\"];\nconst _hoisted_44 = {\n    key: 0,\n    class: \"hidden-messages-section\"\n};\nconst _hoisted_45 = { class: \"form-group\" };\nconst _hoisted_46 = { class: \"flex-label\" };\nconst _hoisted_47 = {\n    key: 0,\n    class: \"hidden-messages-list\"\n};\nconst _hoisted_48 = { class: \"message-info\" };\nconst _hoisted_49 = { class: \"message-id\" };\nconst _hoisted_50 = { class: \"message-preview\" };\nconst _hoisted_51 = [\"onClick\"];\nconst _hoisted_52 = {\n    key: 1,\n    class: \"empty-state\"\n};\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref } from 'vue';\nimport { useSettingsStore } from '../settings';\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // API\n        // setChatMessages \n        // \n        const parseMessageRange = (range) => {\n            if (!range.trim())\n                return [];\n            const messageIds = [];\n            const parts = range.split(',');\n            for (const part of parts) {\n                const trimmed = part.trim();\n                if (!trimmed)\n                    continue;\n                if (trimmed.includes('-')) {\n                    //  \"1-10\"\n                    const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\n                    if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\n                        for (let i = start; i <= end; i++) {\n                            messageIds.push(i);\n                        }\n                    }\n                }\n                else {\n                    //  \"5\"  \"0\"\n                    const id = parseInt(trimmed);\n                    if (!isNaN(id) && id >= 0) {\n                        messageIds.push(id);\n                    }\n                }\n            }\n            return messageIds;\n        };\n        // \n        const available_models = ref([]);\n        const loading_models = ref(false);\n        const hide_range = ref('');\n        const hidden_messages = ref([]);\n        const hidden_display_expanded = ref(false);\n        // \n        const is_summarizing = ref(false);\n        const is_generating_table = ref(false);\n        // \n        const headerTemplates = ref([]);\n        const selectedTemplate = ref('');\n        const currentTemplate = ref({ name: '', headers: '' });\n        // \n        const loadGenerationStatus = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                is_summarizing.value = scriptVars.is_summarizing || false;\n                is_generating_table.value = scriptVars.is_generating_table || false;\n                console.log(':', { summarizing: is_summarizing.value, generating_table: is_generating_table.value });\n            }\n            catch (error) {\n                console.error(':', error);\n                is_summarizing.value = false;\n                is_generating_table.value = false;\n            }\n        };\n        const saveGenerationStatus = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables({\n                    is_summarizing: is_summarizing.value,\n                    is_generating_table: is_generating_table.value,\n                }, { type: 'script', script_id: scriptId });\n                console.log('');\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        const stopGeneration = () => {\n            if (is_summarizing.value || is_generating_table.value) {\n                is_summarizing.value = false;\n                is_generating_table.value = false;\n                saveGenerationStatus();\n                window.toastr.info('');\n            }\n        };\n        // \n        const loadHeaderTemplates = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                //  header_templates  nullundefined\n                let templates = scriptVars.header_templates;\n                //  nullundefined  []\n                if (!Array.isArray(templates)) {\n                    templates = [];\n                }\n                headerTemplates.value = templates;\n                console.log(':', headerTemplates.value.length, '');\n            }\n            catch (error) {\n                console.error(':', error);\n                headerTemplates.value = [];\n            }\n        };\n        const saveHeaderTemplates = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables({ header_templates: headerTemplates.value }, { type: 'script', script_id: scriptId });\n                console.log('');\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        const loadTemplate = () => {\n            if (selectedTemplate.value !== '') {\n                const index = parseInt(selectedTemplate.value);\n                if (index >= 0 && index < headerTemplates.value.length) {\n                    currentTemplate.value = { ...headerTemplates.value[index] };\n                }\n            }\n        };\n        const showAddTemplateDialog = () => {\n            const name = window.prompt('');\n            if (name && name.trim()) {\n                const headers = window.prompt('');\n                if (headers && headers.trim()) {\n                    headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\n                    saveHeaderTemplates();\n                    selectedTemplate.value = (headerTemplates.value.length - 1).toString();\n                    loadTemplate();\n                    window.toastr.success('');\n                }\n            }\n        };\n        const saveTemplate = () => {\n            if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\n                const index = parseInt(selectedTemplate.value);\n                if (index >= 0 && index < headerTemplates.value.length) {\n                    headerTemplates.value[index] = { ...currentTemplate.value };\n                    saveHeaderTemplates();\n                    window.toastr.success('');\n                }\n            }\n            else {\n                window.toastr.warning('');\n            }\n        };\n        const deleteTemplate = () => {\n            if (selectedTemplate.value !== '') {\n                if (confirm('')) {\n                    const index = parseInt(selectedTemplate.value);\n                    if (index >= 0 && index < headerTemplates.value.length) {\n                        headerTemplates.value.splice(index, 1);\n                        saveHeaderTemplates();\n                        selectedTemplate.value = '';\n                        currentTemplate.value = { name: '', headers: '' };\n                        window.toastr.success('');\n                    }\n                }\n            }\n        };\n        // \n        const loadHiddenMessages = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                console.log('ID:', scriptId);\n                const saved = getVariables({ type: 'script', script_id: scriptId });\n                console.log(':', saved);\n                console.log(' hidden_messages :', saved?.hidden_messages);\n                if (saved && saved.hidden_messages) {\n                    hidden_messages.value = saved.hidden_messages;\n                    console.log(':', hidden_messages.value.length, '');\n                }\n                else {\n                    console.log('...');\n                    // \n                    const possibleFields = ['hiddenMessages', 'hidden_floors', 'hiddenFloors', 'floor_data'];\n                    for (const field of possibleFields) {\n                        if (saved && saved[field]) {\n                            console.log(` ${field}:`, saved[field]);\n                            hidden_messages.value = saved[field];\n                            break;\n                        }\n                    }\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        // \n        const saveHiddenMessages = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                console.log('ID:', scriptId);\n                console.log(':', hidden_messages.value);\n                const dataToSave = {\n                    hidden_messages: hidden_messages.value,\n                };\n                console.log(':', dataToSave);\n                insertOrAssignVariables(dataToSave, { type: 'script', script_id: scriptId });\n                console.log(':', hidden_messages.value.length, '');\n                // \n                setTimeout(() => {\n                    const saved = getVariables({ type: 'script', script_id: scriptId });\n                    console.log(':', saved);\n                    console.log(' hidden_messages :', saved?.hidden_messages);\n                }, 100);\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        // \n        onMounted(() => {\n            console.log('SettingsTab ');\n            loadHiddenMessages();\n            loadHeaderTemplates();\n            loadGenerationStatus();\n        });\n        // \n        const handleTestButton = () => {\n            console.log(' - Vue');\n            window.toastr.success('Vue');\n        };\n        // \n        const handleSaveSettings = () => {\n            console.log(' ...');\n            const success = settingsStore.saveSettings();\n            if (success) {\n                console.log(' ');\n            }\n            else {\n                console.error(' ');\n            }\n        };\n        const handleReloadSettings = () => {\n            console.log(' ...');\n            const success = settingsStore.reloadSettings();\n            if (success) {\n                console.log(' ');\n            }\n            else {\n                console.error(' ');\n            }\n        };\n        const handleResetAutoSummaryStart = () => {\n            console.log(' ...');\n            try {\n                // \n                if (typeof window.resetAutoSummaryStart === 'function') {\n                    window.resetAutoSummaryStart();\n                }\n                else {\n                    window.toastr.error('');\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const handle_fetch_models = async () => {\n            if (loading_models.value)\n                return;\n            try {\n                loading_models.value = true;\n                console.log('...');\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                const { fetchAvailableModels } = await import('../');\n                const models = await fetchAvailableModels();\n                console.log(':', models);\n                if (models.length > 0) {\n                    // \n                    available_models.value = models;\n                    window.toastr.success(` ${models.length} `);\n                    // \n                    if (!settings.value.model && models[0]) {\n                        settings.value.model = models[0];\n                    }\n                }\n                else {\n                    window.toastr.warning('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                loading_models.value = false;\n            }\n        };\n        const handle_test_connection = async () => {\n            try {\n                console.log('...');\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model || 'gpt-3.5-turbo',\n                        messages: [{ role: 'user', content: 'test' }],\n                        max_tokens: 1,\n                    }),\n                });\n                if (response.ok) {\n                    window.toastr.success('');\n                }\n                else {\n                    window.toastr.error('' + response.status);\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_summarize = async () => {\n            try {\n                if (is_summarizing.value)\n                    return;\n                console.log('...');\n                is_summarizing.value = true;\n                saveGenerationStatus();\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const { summarizeMessages } = await import('../');\n                const summary = await summarizeMessages(0, chatMessages.length);\n                console.log(':', summary);\n                // \n                const scriptId = getScriptIdSafe();\n                if (scriptId) {\n                    insertOrAssignVariables({ last_summary: summary }, { type: 'script', script_id: scriptId });\n                }\n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                is_summarizing.value = false;\n                saveGenerationStatus();\n            }\n        };\n        const handle_generate_table = async () => {\n            try {\n                if (is_generating_table.value)\n                    return;\n                console.log('...');\n                is_generating_table.value = true;\n                saveGenerationStatus();\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let headersInput = null;\n                if (currentTemplate.value.headers.trim()) {\n                    // \n                    const useTemplate = confirm(`\"${currentTemplate.value.name}\"\\n${currentTemplate.value.headers}`);\n                    if (useTemplate) {\n                        headersInput = currentTemplate.value.headers;\n                    }\n                }\n                if (!headersInput) {\n                    // \n                    headersInput = window.prompt(',,,');\n                }\n                if (!headersInput || !headersInput.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                const headers = headersInput\n                    .split(',')\n                    .map((h) => h.trim())\n                    .filter((h) => h);\n                if (headers.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\n                    console.log(':', messageRange);\n                    chatMessages = getChatMessages(messageRange, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // AI\n                const messagesText = chatMessages\n                    .map(msg => {\n                    const role = msg.role === 'user' ? '' : 'AI';\n                    return `${role}: ${msg.message}`;\n                })\n                    .join('\\n\\n');\n                const aiPrompt = `${headers.join(', ')}\n\n\n${messagesText}\n\n****\n1. \n2. ${headers.join(', ')}\n3. \n4. \"\"\"-\"\n5. JSONmarkdown\n6. dataheaders\n\n**JSON**\n{\n  \"data\": [\n    [\"1\", \"2\", \"3\"],\n    [\"4\", \"5\", \"6\"]\n  ]\n}\n\ndata${headers.length}${headers.join(', ')}`;\n                console.log('AI...');\n                window.toastr.info('AI...');\n                // AI\n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'user',\n                                content: aiPrompt,\n                            },\n                        ],\n                        max_tokens: settings.value.max_tokens,\n                        temperature: settings.value.temperature,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API: ${response.status} ${response.statusText}`);\n                }\n                const result = await response.json();\n                console.log('AI:', result);\n                if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n                    throw new Error('AI');\n                }\n                const aiResponse = result.choices[0].message.content;\n                console.log('AI:', aiResponse);\n                // AIJSON\n                let aiTableData;\n                try {\n                    // JSONmarkdown\n                    let jsonText = aiResponse.trim();\n                    // markdown\n                    jsonText = jsonText\n                        .replace(/^```json\\s*/i, '')\n                        .replace(/^```\\s*/, '')\n                        .replace(/```\\s*$/, '');\n                    // JSON\n                    const jsonMatch = jsonText.match(/\\{[\\s\\S]*\\}/);\n                    if (jsonMatch) {\n                        aiTableData = JSON.parse(jsonMatch[0]);\n                    }\n                    else {\n                        throw new Error('JSON');\n                    }\n                }\n                catch (parseError) {\n                    console.error('AI:', parseError);\n                    console.log('AI:', aiResponse);\n                    window.toastr.error('AI');\n                    return;\n                }\n                // \n                if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\n                    window.toastr.error('AIdata');\n                    return;\n                }\n                // \n                for (let i = 0; i < aiTableData.data.length; i++) {\n                    if (!Array.isArray(aiTableData.data[i])) {\n                        window.toastr.error(`${i + 1}`);\n                        return;\n                    }\n                    if (aiTableData.data[i].length !== headers.length) {\n                        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\n                        console.log(`:`, headers);\n                        console.log(`:`, aiTableData.data[i]);\n                        return;\n                    }\n                }\n                // headers\n                const tableData = {\n                    headers: headers,\n                    data: aiTableData.data,\n                };\n                // \n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    const chat_vars = getVariables({ type: 'chat' });\n                    const table_history = chat_vars.table_history || [];\n                    table_history.push({\n                        start_id: settings.value.table_start_message_id,\n                        end_id: settings.value.table_end_message_id,\n                        headers: tableData.headers,\n                        data: tableData.data,\n                    });\n                    insertOrAssignVariables({ table_history }, { type: 'chat' });\n                    window.toastr.success(`${tableData.data.length}`);\n                    console.log(':', table_history);\n                }\n                else {\n                    window.toastr.warning('ID');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                is_generating_table.value = false;\n                saveGenerationStatus();\n            }\n        };\n        const handle_create_table = () => {\n            try {\n                // \n                if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const headersInput = window.prompt(',,,');\n                if (!headersInput || !headersInput.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const headers = headersInput\n                    .split(',')\n                    .map((h) => h.trim())\n                    .filter((h) => h);\n                if (headers.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const emptyTableData = {\n                    start_id: settings.value.table_start_message_id,\n                    end_id: settings.value.table_end_message_id,\n                    headers: headers,\n                    data: [], // \n                };\n                // \n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    const chat_vars = getVariables({ type: 'chat' });\n                    const table_history = chat_vars.table_history || [];\n                    table_history.push(emptyTableData);\n                    insertOrAssignVariables({ table_history }, { type: 'chat' });\n                    window.toastr.success(`${headers.join(', ')}`);\n                    console.log(':', emptyTableData);\n                }\n                else {\n                    window.toastr.warning('ID');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_hide_messages = async () => {\n            try {\n                console.log('...');\n                if (!hide_range.value.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const ranges = hide_range.value.split(',').map(range => range.trim());\n                const messageIds = [];\n                for (const range of ranges) {\n                    if (range.includes('-')) {\n                        // 1-10\n                        const [start, end] = range.split('-').map(Number);\n                        if (start && end && start <= end) {\n                            for (let i = start; i <= end; i++) {\n                                messageIds.push(i);\n                            }\n                        }\n                    }\n                    else {\n                        // 5\n                        const id = Number(range);\n                        if (id) {\n                            messageIds.push(id);\n                        }\n                    }\n                }\n                if (messageIds.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let hiddenCount = 0;\n                const messagesToHide = [];\n                for (const messageId of messageIds) {\n                    const message = chatMessages.find(msg => msg.message_id === messageId);\n                    if (message) {\n                        // \n                        messagesToHide.push({\n                            message_id: messageId,\n                            is_hidden: true,\n                        });\n                        // \n                        hidden_messages.value.push({\n                            message_id: messageId,\n                            name: message.name || 'Unknown',\n                            role: message.role || 'user',\n                            message: message.message || '',\n                        });\n                        hiddenCount++;\n                    }\n                }\n                // API\n                if (messagesToHide.length > 0) {\n                    try {\n                        console.log(' slash :', messageIds);\n                        //  slash \n                        for (const messageId of messageIds) {\n                            try {\n                                await triggerSlash(`/hide ${messageId}`);\n                                console.log(` ${messageId}`);\n                            }\n                            catch (error) {\n                                console.error(` ${messageId} :`, error);\n                            }\n                        }\n                        window.toastr.success('');\n                    }\n                    catch (error) {\n                        console.error('API:', error);\n                        window.toastr.error('API: ' + error.message);\n                    }\n                }\n                if (hiddenCount > 0) {\n                    // \n                    saveHiddenMessages();\n                    window.toastr.success(` ${hiddenCount} `);\n                    hide_range.value = ''; // \n                }\n                else {\n                    window.toastr.warning('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_show_messages = async () => {\n            try {\n                console.log('...');\n                if (!hide_range.value.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const messageIds = parseMessageRange(hide_range.value.trim());\n                if (messageIds.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const messagesToShow = [];\n                let shownCount = 0;\n                for (const messageId of messageIds) {\n                    const message = chatMessages.find(msg => msg.message_id === messageId);\n                    if (message) {\n                        messagesToShow.push({\n                            message_id: messageId,\n                            is_hidden: false,\n                        });\n                        shownCount++;\n                    }\n                }\n                if (messagesToShow.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // API\n                try {\n                    //  slash \n                    for (const messageId of messageIds) {\n                        try {\n                            await triggerSlash(`/unhide ${messageId}`);\n                            console.log(` ${messageId}`);\n                        }\n                        catch (error) {\n                            console.error(` ${messageId} :`, error);\n                        }\n                    }\n                }\n                catch (error) {\n                    console.error('API:', error);\n                    window.toastr.error('API: ' + error.message);\n                    return;\n                }\n                // \n                hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\n                // \n                saveHiddenMessages();\n                window.toastr.success(` ${shownCount} `);\n                hide_range.value = ''; // \n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_refresh_hidden = async (showToast = false) => {\n            try {\n                console.log('', showToast);\n                // \n                if (hidden_messages.value.length === 0) {\n                    console.log('...');\n                    loadHiddenMessages();\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    if (showToast) {\n                        window.toastr.error(': ' + error.message);\n                    }\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    if (showToast) {\n                        window.toastr.warning('');\n                    }\n                    return;\n                }\n                // \n                const validHiddenMessages = [];\n                let removedCount = 0;\n                for (const hiddenMsg of hidden_messages.value) {\n                    const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\n                    if (message) {\n                        // \n                        validHiddenMessages.push({\n                            message_id: hiddenMsg.message_id,\n                            name: message.name || hiddenMsg.name,\n                            role: message.role || hiddenMsg.role,\n                            message: message.message || hiddenMsg.message,\n                        });\n                    }\n                    else {\n                        // \n                        removedCount++;\n                    }\n                }\n                // \n                hidden_messages.value = validHiddenMessages;\n                // \n                saveHiddenMessages();\n                if (showToast) {\n                    if (removedCount > 0) {\n                        window.toastr.success(` ${removedCount} `);\n                    }\n                    else {\n                        window.toastr.success('');\n                    }\n                }\n                console.log(`${validHiddenMessages.length} ${removedCount} `);\n            }\n            catch (error) {\n                console.error(':', error);\n                if (showToast) {\n                    window.toastr.error(': ' + error.message);\n                }\n            }\n        };\n        const handle_unhide_single = async (messageId) => {\n            try {\n                console.log('', messageId);\n                // \n                const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\n                if (index === -1) {\n                    window.toastr.warning(` #${messageId} `);\n                    return;\n                }\n                // API\n                try {\n                    //  slash \n                    await triggerSlash(`/unhide ${messageId}`);\n                    console.log(':', messageId);\n                }\n                catch (error) {\n                    console.error('API:', error);\n                    window.toastr.warning('API');\n                    return;\n                }\n                // \n                hidden_messages.value.splice(index, 1);\n                // \n                saveHiddenMessages();\n                window.toastr.success(` #${messageId}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" API  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[23] || (_cache[23] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"  API  \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[18] || (_cache[18] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"API \", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(settings).api_endpoint) = $event)),\n                            type: \"text\",\n                            placeholder: \"https://your-api.com/v1/chat/completions\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, _unref(settings).api_endpoint]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _cache[19] || (_cache[19] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"API Key\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(settings).api_key) = $event)),\n                            type: \"password\",\n                            placeholder: \"sk-...\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, _unref(settings).api_key]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _cache[20] || (_cache[20] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _createElementVNode(\"button\", {\n                                    class: \"test-button\",\n                                    style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#3a3a3a\", \"color\": \"#e0e0e0\" },\n                                    onClick: handleTestButton\n                                }, \" () \"),\n                                _createElementVNode(\"button\", {\n                                    disabled: loading_models.value,\n                                    class: \"fetch-button\",\n                                    style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#4a9eff\", \"color\": \"white\" },\n                                    onClick: handle_fetch_models\n                                }, _toDisplayString(loading_models.value ? '...' : ''), 9 /* TEXT, PROPS */, _hoisted_8)\n                            ])\n                        ]),\n                        (available_models.value.length === 0)\n                            ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n                                key: 0,\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(settings).model) = $event)),\n                                type: \"text\",\n                                placeholder: \"gpt-4o-mini\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */)), [\n                                [_vModelText, _unref(settings).model]\n                            ])\n                            : _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n                                key: 1,\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(settings).model) = $event)),\n                                class: \"model-select\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(available_models.value, (model) => {\n                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                        key: model,\n                                        value: model\n                                    }, _toDisplayString(model), 9 /* TEXT, PROPS */, _hoisted_9));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 512 /* NEED_PATCH */)), [\n                                [_vModelSelect, _unref(settings).model]\n                            ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_10, [\n                        _cache[21] || (_cache[21] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \" Token 4000\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(settings).max_tokens) = $event)),\n                            type: \"number\",\n                            min: \"100\",\n                            max: \"16000\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).max_tokens,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _cache[22] || (_cache[22] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \" (0-2)\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(settings).temperature) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            max: \"2\",\n                            step: \"0.1\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).temperature,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_12, [\n                    _cache[26] || (_cache[26] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_13, [\n                        _createElementVNode(\"label\", _hoisted_14, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(settings).auto_summarize_enabled) = $event)),\n                                type: \"checkbox\",\n                                style: { \"width\": \"16px\", \"height\": \"16px\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelCheckbox, _unref(settings).auto_summarize_enabled]\n                            ]),\n                            _cache[24] || (_cache[24] = _createTextVNode(\"  \", -1 /* CACHED */))\n                        ])\n                    ]),\n                    (_unref(settings).auto_summarize_enabled)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                            _cache[25] || (_cache[25] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(settings).summarize_interval) = $event)),\n                                type: \"number\",\n                                min: \"1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).summarize_interval,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _createElementVNode(\"div\", { style: { \"margin-top\": \"10px\", \"display\": \"flex\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                    onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                    onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                    onClick: handleSaveSettings\n                                }, \"   \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                    onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                    onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                    onClick: handleReloadSettings\n                                }, \"   \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                    onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                    onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                    onClick: handleResetAutoSummaryStart\n                                }, \"   \")\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_16, [\n                    _cache[30] || (_cache[30] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_17, [\n                        _cache[27] || (_cache[27] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(settings).start_message_id) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).start_message_id,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_18, [\n                        _cache[28] || (_cache[28] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((_unref(settings).end_message_id) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).end_message_id,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_19, [\n                        _createElementVNode(\"button\", {\n                            class: \"action-button test-button\",\n                            disabled: is_summarizing.value,\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#3a3a3a\", \"color\": \"#e0e0e0\" },\n                            onClick: handle_test_connection\n                        }, [...(_cache[29] || (_cache[29] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plug\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_20),\n                        _createElementVNode(\"button\", {\n                            class: \"action-button summarize-button\",\n                            disabled: is_summarizing.value || !_unref(settings).api_key,\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#4a9eff\", \"color\": \"white\" },\n                            onClick: handle_summarize\n                        }, [\n                            (!is_summarizing.value)\n                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_22))\n                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_23)),\n                            _createTextVNode(\" \" + _toDisplayString(is_summarizing.value ? '...' : ''), 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_21)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_24, [\n                    _cache[43] || (_cache[43] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_25, [\n                        _cache[31] || (_cache[31] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((_unref(settings).table_start_message_id) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).table_start_message_id,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_26, [\n                        _cache[32] || (_cache[32] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((_unref(settings).table_end_message_id) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).table_end_message_id,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_27, [\n                        _cache[37] || (_cache[37] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_28, [\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((selectedTemplate).value = $event)),\n                                style: { \"flex\": \"1\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" },\n                                onChange: loadTemplate\n                            }, [\n                                _cache[33] || (_cache[33] = _createElementVNode(\"option\", { value: \"\" }, \"...\", -1 /* CACHED */)),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(headerTemplates.value, (template, index) => {\n                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                        key: index,\n                                        value: index\n                                    }, _toDisplayString(template.name), 9 /* TEXT, PROPS */, _hoisted_29));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                [_vModelSelect, selectedTemplate.value]\n                            ]),\n                            _createElementVNode(\"button\", {\n                                style: { \"padding\": \"8px 12px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                onClick: showAddTemplateDialog\n                            }, [...(_cache[34] || (_cache[34] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        (selectedTemplate.value !== '')\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event) => ((currentTemplate.value.name) = $event)),\n                                    type: \"text\",\n                                    placeholder: \"\",\n                                    style: { \"flex\": \"1\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, currentTemplate.value.name]\n                                ]),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((currentTemplate.value.headers) = $event)),\n                                    type: \"text\",\n                                    placeholder: \"\",\n                                    style: { \"flex\": \"2\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, currentTemplate.value.headers]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 12px\", \"background\": \"#28a745\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                    onClick: saveTemplate\n                                }, [...(_cache[35] || (_cache[35] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-save\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 12px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                    onClick: deleteTemplate\n                                }, [...(_cache[36] || (_cache[36] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_31, [\n                        _cache[41] || (_cache[41] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_32, [\n                            _createElementVNode(\"div\", _hoisted_33, [\n                                _createElementVNode(\"div\", {\n                                    style: _normalizeStyle({\n                                        width: '8px',\n                                        height: '8px',\n                                        borderRadius: '50%',\n                                        backgroundColor: is_summarizing.value ? '#ff6b6b' : '#4caf50',\n                                        transition: 'background-color 0.3s',\n                                    })\n                                }, null, 4 /* STYLE */),\n                                _cache[38] || (_cache[38] = _createElementVNode(\"span\", { style: { \"color\": \"#ccc\", \"font-size\": \"12px\" } }, \"\", -1 /* CACHED */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_34, [\n                                _createElementVNode(\"div\", {\n                                    style: _normalizeStyle({\n                                        width: '8px',\n                                        height: '8px',\n                                        borderRadius: '50%',\n                                        backgroundColor: is_generating_table.value ? '#ff6b6b' : '#4caf50',\n                                        transition: 'background-color 0.3s',\n                                    })\n                                }, null, 4 /* STYLE */),\n                                _cache[39] || (_cache[39] = _createElementVNode(\"span\", { style: { \"color\": \"#ccc\", \"font-size\": \"12px\" } }, \"\", -1 /* CACHED */))\n                            ]),\n                            (is_summarizing.value || is_generating_table.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"4px 8px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"11px\" },\n                                        onClick: stopGeneration\n                                    }, [...(_cache[40] || (_cache[40] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-stop\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_36, [\n                        _createElementVNode(\"button\", {\n                            class: \"action-button summarize-button\",\n                            disabled: is_generating_table.value || !_unref(settings).api_key,\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#4a9eff\", \"color\": \"white\" },\n                            onClick: handle_generate_table\n                        }, [\n                            (!is_generating_table.value)\n                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_38))\n                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_39)),\n                            _createTextVNode(\" \" + _toDisplayString(is_generating_table.value ? 'AI...' : 'AI'), 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_37),\n                        _createElementVNode(\"button\", {\n                            class: \"action-button create-button\",\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #40c057\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#51cf66\", \"color\": \"white\" },\n                            onClick: handle_create_table\n                        }, [...(_cache[42] || (_cache[42] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_40, [\n                    _cache[48] || (_cache[48] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_41, [\n                        _cache[44] || (_cache[44] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"1-10 5\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event) => ((hide_range).value = $event)),\n                            type: \"text\",\n                            placeholder: \"1-10\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, hide_range.value]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_42, [\n                        _createElementVNode(\"button\", {\n                            class: \"action-button\",\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #ff5252\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#ff6b6b\", \"color\": \"white\" },\n                            onClick: handle_hide_messages\n                        }, [...(_cache[45] || (_cache[45] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-eye-slash\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"action-button\",\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #40c057\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#51cf66\", \"color\": \"white\" },\n                            disabled: !hide_range.value.trim(),\n                            onClick: handle_show_messages\n                        }, [...(_cache[46] || (_cache[46] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_43),\n                        _createElementVNode(\"button\", {\n                            class: \"action-button\",\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #ffcc02\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#ffd43b\", \"color\": \"#333\" },\n                            onClick: _cache[16] || (_cache[16] = () => handle_refresh_hidden(true))\n                        }, [...(_cache[47] || (_cache[47] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    (hidden_messages.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_44, [\n                            _createElementVNode(\"div\", _hoisted_45, [\n                                _createElementVNode(\"label\", _hoisted_46, [\n                                    _createElementVNode(\"span\", null, \" (\" + _toDisplayString(hidden_messages.value.length) + \" )\", 1 /* TEXT */),\n                                    _createElementVNode(\"button\", {\n                                        class: \"mini-button\",\n                                        onClick: _cache[17] || (_cache[17] = ($event) => (hidden_display_expanded.value = !hidden_display_expanded.value))\n                                    }, _toDisplayString(hidden_display_expanded.value ? '' : ''), 1 /* TEXT */)\n                                ])\n                            ]),\n                            (hidden_display_expanded.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hidden_messages.value, (msg) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: msg.message_id,\n                                            class: \"hidden-message-item\"\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_48, [\n                                                _createElementVNode(\"span\", _hoisted_49, \"#\" + _toDisplayString(msg.message_id), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", {\n                                                    class: _normalizeClass([\"message-role\", 'role-' + msg.role])\n                                                }, _toDisplayString(msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '') + \" \" + _toDisplayString(msg.name), 3 /* TEXT, CLASS */),\n                                                _createElementVNode(\"span\", _hoisted_50, _toDisplayString(msg.message.substring(0, 50)) + _toDisplayString(msg.message.length > 50 ? '...' : ''), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"show-button\",\n                                                onClick: () => handle_unhide_single(msg.message_id)\n                                            }, \"\", 8 /* PROPS */, _hoisted_51)\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_52, \"\"))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsTab.vue?vue&type=style&index=0&id=2e1e6c9e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n    class: \"summary-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    class: \"header-actions\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#4a9eff\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_5 = {\n    key: 0,\n    class: \"history-list\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n    class: \"history-info\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"flex\": \"1\" }\n};\nconst _hoisted_8 = {\n    class: \"history-number\",\n    style: { \"color\": \"#4a9eff\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_9 = {\n    class: \"history-range\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_10 = {\n    class: \"expand-icon\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_11 = {\n    key: 0,\n    class: \"history-content\",\n    style: { \"padding\": \"15px\", \"background\": \"#2a2a2a\", \"border-radius\": \"0 0 6px 6px\" }\n};\nconst _hoisted_12 = {\n    class: \"history-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"8px\", \"border-bottom\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    class: \"history-text\",\n    style: { \"font-family\": \"'Courier New', monospace\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"color\": \"#e0e0e0\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"user-select\": \"text\", \"cursor\": \"text\" }\n};\nconst _hoisted_17 = {\n    key: 1,\n    class: \"empty-state\",\n    style: { \"text-align\": \"center\", \"padding\": \"40px 20px\", \"color\": \"#888\" }\n};\nimport { ref } from 'vue';\nimport { useSummaryHistoryStore } from '../settings';\nimport { getChatIdSafe } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SummaryTab',\n    setup(__props) {\n        const historyStore = useSummaryHistoryStore();\n        // \n        const summary_history = ref([]);\n        const expandedState = ref(new Map());\n        // \n        const refreshSummaryHistory = () => {\n            try {\n                summary_history.value = historyStore.getSummaryHistory();\n                console.log(':', summary_history.value.length);\n            }\n            catch (e) {\n                console.error(':', e);\n                summary_history.value = [];\n            }\n        };\n        // \n        const toggleExpanded = (index) => {\n            const current = expandedState.value.get(index) || false;\n            expandedState.value.set(index, !current);\n        };\n        const isExpanded = (index) => {\n            return expandedState.value.get(index) || false;\n        };\n        // \n        const handleRefreshData = async () => {\n            console.log('');\n            try {\n                await refreshSummaryHistory();\n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage = '') => {\n            console.log(':', text.length);\n            try {\n                // iframe\n                if (window.parent && window.parent !== window) {\n                    console.log('iframe');\n                    const parentSuccess = await tryParentWindowCopy(text);\n                    if (parentSuccess) {\n                        console.log('');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                }\n                // 1:  Clipboard API\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log(' Clipboard API');\n                    try {\n                        await navigator.clipboard.writeText(text);\n                        console.log('Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    catch (clipboardErr) {\n                        console.warn('Clipboard API :', clipboardErr);\n                        // \n                    }\n                }\n                // 2:  execCommand \n                console.log(' execCommand ');\n                const success = await execCommandCopy(text);\n                if (success) {\n                    console.log('execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                // 3: \n                console.log('');\n                showManualCopyDialog(text);\n            }\n            catch (err) {\n                console.error(':', err);\n                // \n                showManualCopyDialog(text);\n            }\n        };\n        // \n        const tryParentWindowCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    const parentDoc = window.parent.document;\n                    const parentBody = window.parent.document.body;\n                    //  textarea \n                    const textarea = parentDoc.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n                    textarea.setAttribute('readonly', '');\n                    parentBody.appendChild(textarea);\n                    // \n                    textarea.focus();\n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    // \n                    parentBody.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error(':', err);\n                    resolve(false);\n                }\n            });\n        };\n        // execCommand \n        const execCommandCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    //  textarea \n                    const textarea = document.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.position = 'fixed';\n                    textarea.style.left = '-9999px';\n                    textarea.style.top = '-9999px';\n                    textarea.style.opacity = '0';\n                    textarea.style.pointerEvents = 'none';\n                    textarea.setAttribute('readonly', '');\n                    document.body.appendChild(textarea);\n                    // \n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = document.execCommand('copy');\n                    // \n                    document.body.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error('execCommand :', err);\n                    resolve(false);\n                }\n            });\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            console.log(':', text.length);\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'manual-copy-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n                // \n                const textarea = parentDoc.createElement('textarea');\n                textarea.value = text;\n                textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                closeButton.onmouseover = () => {\n                    closeButton.style.background = '#5ba8ff';\n                };\n                closeButton.onmouseout = () => {\n                    closeButton.style.background = '#4a9eff';\n                };\n                // \n                const copyButton = parentDoc.createElement('button');\n                copyButton.textContent = '';\n                copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                copyButton.onmouseover = () => {\n                    copyButton.style.background = '#218838';\n                };\n                copyButton.onmouseout = () => {\n                    copyButton.style.background = '#28a745';\n                };\n                // \n                buttonContainer.appendChild(copyButton);\n                buttonContainer.appendChild(closeButton);\n                container.appendChild(header);\n                container.appendChild(textarea);\n                container.appendChild(buttonContainer);\n                overlay.appendChild(container);\n                // \n                parentBody.appendChild(overlay);\n                // \n                closeButton.onclick = () => {\n                    console.log('');\n                    parentBody.removeChild(overlay);\n                };\n                copyButton.onclick = async () => {\n                    console.log('');\n                    try {\n                        // \n                        textarea.focus();\n                        textarea.select();\n                        // \n                        const success = document.execCommand('copy');\n                        if (success) {\n                            window.toastr.success('');\n                            parentBody.removeChild(overlay);\n                        }\n                        else {\n                            window.toastr.warning('');\n                        }\n                    }\n                    catch (err) {\n                        console.error(':', err);\n                        window.toastr.warning('');\n                    }\n                };\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        console.log('');\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log('ESC');\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                // \n                setTimeout(() => {\n                    console.log('');\n                    textarea.focus();\n                    textarea.select();\n                }, 200);\n                // \n                window.toastr.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr.error('');\n            }\n        };\n        //  - \n        const copySummary = (content) => {\n            copyToClipboard(content, '');\n        };\n        // \n        const deleteSummary = (index) => {\n            if (confirm('')) {\n                try {\n                    const chat_id = getChatIdSafe();\n                    if (!chat_id) {\n                        window.toastr.error('');\n                        return;\n                    }\n                    summary_history.value.splice(index, 1);\n                    insertOrAssignVariables({ summary_history: summary_history.value }, { type: 'chat' });\n                    window.toastr.success('');\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error('');\n                }\n            }\n        };\n        // \n        const createSummaryWorldbook = async () => {\n            try {\n                // \n                let characterName = '';\n                try {\n                    const currentCharacter = getCharData('current');\n                    if (currentCharacter && currentCharacter.name) {\n                        characterName = currentCharacter.name;\n                        // \n                        characterName = characterName.replace(/[<>:\"/\\\\|?*]/g, '_').trim();\n                    }\n                }\n                catch (charError) {\n                    console.warn(':', charError);\n                }\n                // \n                const dateStr = new Date().toISOString().slice(0, 10);\n                const worldbookName = `_${characterName}_${dateStr}`;\n                console.log(':', worldbookName);\n                const existingWorldbooks = getWorldbookNames();\n                if (existingWorldbooks.includes(worldbookName)) {\n                    window.toastr.warning(` \"${worldbookName}\" `);\n                    return;\n                }\n                await createWorldbook(worldbookName, []);\n                try {\n                    await rebindChatWorldbook('current', worldbookName);\n                    window.toastr.success(` \"${worldbookName}\" `);\n                }\n                catch (bindError) {\n                    console.warn(':', bindError);\n                    window.toastr.success(` \"${worldbookName}\"`);\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const bindToWorldbook = async (content, summaryIndex) => {\n            try {\n                const worldbookNames = getWorldbookNames();\n                if (worldbookNames.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                const selectedWorldbook = worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\n                if (!selectedWorldbook) {\n                    return;\n                }\n                const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\n                const newEntry = {\n                    name: entryName,\n                    enabled: true,\n                    strategy: {\n                        type: 'constant',\n                        keys: [],\n                        keys_secondary: { logic: 'and_any', keys: [] },\n                        scan_depth: 'same_as_global',\n                    },\n                    position: {\n                        type: 'before_character_definition',\n                        role: 'system',\n                        depth: 1,\n                    },\n                    content: content,\n                    comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\n                    insertion_order: 0,\n                    case_sensitive: false,\n                    name_is_regex: false,\n                    keys_are_regex: false,\n                    selective_logic: 'and',\n                    secondary_keys_logic: 'and',\n                    activation_threshold: 0,\n                    disabled: false,\n                    order: 0,\n                    group: '',\n                    local_id: 0,\n                    depth_entries: [],\n                    depth_entries_all: false,\n                    search_range: 0,\n                    force_activation: false,\n                    disable: false,\n                    exclude_recursion: false,\n                    hidden: false,\n                    priority: 0,\n                    comment_is_regex: false,\n                    content_is_regex: false,\n                    secondary_keys_are_regex: false,\n                    keys_secondary_are_regex: false,\n                    uid: Date.now(),\n                };\n                await createWorldbookEntries(selectedWorldbook, [newEntry]);\n                window.toastr.success(`: ${selectedWorldbook}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const promptForWorldbook = async (worldbookNames) => {\n            return new Promise(resolve => {\n                const dialog = $(`\n      <div style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: #2a2a2a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        padding: 20px;\n        z-index: 1000000;\n        min-width: 300px;\n      \">\n        <h3 style=\"margin: 0 0 15px 0; color: #e0e0e0;\"></h3>\n        <div style=\"margin-bottom: 15px;\">\n          ${worldbookNames\n                    .map(name => `\n            <label style=\"display: block; margin: 5px 0; color: #e0e0e0;\">\n              <input type=\"radio\" name=\"worldbook\" value=\"${name}\" style=\"margin-right: 8px;\">\n              ${name}\n            </label>\n          `)\n                    .join('')}\n        </div>\n        <div style=\"text-align: right;\">\n          <button id=\"cancelWorldbook\" style=\"\n            background: #666;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            margin-right: 10px;\n            cursor: pointer;\n          \"></button>\n          <button id=\"confirmWorldbook\" style=\"\n            background: #4a9eff;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n          \"></button>\n        </div>\n      </div>\n    `);\n                const overlay = $(`\n      <div style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n      \"></div>\n    `);\n                $('body').append(overlay).append(dialog);\n                $('#cancelWorldbook').on('click', () => {\n                    overlay.remove();\n                    dialog.remove();\n                    resolve(null);\n                });\n                $('#confirmWorldbook').on('click', () => {\n                    const selected = $('input[name=\"worldbook\"]:checked').val();\n                    overlay.remove();\n                    dialog.remove();\n                    resolve(selected || null);\n                });\n                $('input[name=\"worldbook\"]:first').prop('checked', true);\n            });\n        };\n        // \n        const showDebugPanel = () => {\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'debug-panel-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #ffc107;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 800px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ul style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li>localStorage</li>\n          <li></li>\n          <li></li>\n        </ul>\n      </div>\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 12px;\n      margin-bottom: 20px;\n    `;\n                // \n                const buttons = [\n                    { id: 'testComplete', text: ' ', color: '#4a9eff' },\n                    { id: 'syncData', text: ' ', color: '#28a745' },\n                    { id: 'checkFloor', text: ' ', color: '#17a2b8' },\n                    { id: 'testCalculation', text: ' ', color: '#6f42c1' },\n                    { id: 'showStatus', text: ' ', color: '#fd7e14' },\n                    { id: 'resetStartId', text: ' ', color: '#dc3545' },\n                ];\n                buttons.forEach(button => {\n                    const btn = parentDoc.createElement('button');\n                    btn.id = button.id;\n                    btn.textContent = button.text;\n                    btn.style.cssText = `\n        background: ${button.color};\n        color: white;\n        border: none;\n        padding: 12px 16px;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 13px;\n        font-weight: 500;\n        transition: background 0.2s;\n      `;\n                    btn.onmouseover = () => {\n                        btn.style.opacity = '0.8';\n                    };\n                    btn.onmouseout = () => {\n                        btn.style.opacity = '1';\n                    };\n                    buttonContainer.appendChild(btn);\n                });\n                // \n                const outputArea = parentDoc.createElement('div');\n                outputArea.id = 'debug-output';\n                outputArea.style.cssText = `\n      background: #1a1a1a;\n      border: 1px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      height: 200px;\n      overflow-y: auto;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 12px;\n      color: #e0e0e0;\n      white-space: pre-wrap;\n      margin-bottom: 20px;\n    `;\n                outputArea.textContent = '...\\n';\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #6c757d;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n      align-self: center;\n    `;\n                // \n                container.appendChild(header);\n                container.appendChild(buttonContainer);\n                container.appendChild(outputArea);\n                container.appendChild(closeButton);\n                overlay.appendChild(container);\n                parentBody.appendChild(overlay);\n                // \n                const log = (message) => {\n                    const output = parentDoc.getElementById('debug-output');\n                    if (output) {\n                        output.textContent += message + '\\n';\n                        output.scrollTop = output.scrollHeight;\n                    }\n                };\n                // \n                closeButton.onclick = () => {\n                    parentBody.removeChild(overlay);\n                };\n                // \n                parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.testCompleteAutoSummary) {\n                            window.testCompleteAutoSummary();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('syncData')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.syncAutoSummaryData) {\n                            window.syncAutoSummaryData();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.checkCurrentFloor) {\n                            window.checkCurrentFloor();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.testFloorCalculation) {\n                            window.testFloorCalculation();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.checkAutoSummaryStatus) {\n                            window.checkAutoSummaryStatus();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.smartResetChat) {\n                            window.smartResetChat();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                window.toastr?.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr?.error('');\n            }\n        };\n        // \n        refreshSummaryHistory();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (summary_history.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(summary_history.value.length) + \" \", 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button refresh-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: handleRefreshData\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button create-worldbook-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#51cf66\", \"border\": \"1px solid #40c057\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: createSummaryWorldbook\n                        }, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button debug-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#ffc107\", \"border\": \"1px solid #ffb300\", \"border-radius\": \"4px\", \"color\": \"#000\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: showDebugPanel\n                        }, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-bug\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                (summary_history.value && summary_history.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(summary_history.value, (item, index) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: index,\n                                class: \"history-item\",\n                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #444\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"history-header\",\n                                    style: { \"padding\": \"12px 15px\", \"background\": \"#1a1a1a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"user-select\": \"none\", \"transition\": \"background 0.2s\", \"border-radius\": \"6px\" },\n                                    onClick: ($event) => (toggleExpanded(index))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _createElementVNode(\"span\", _hoisted_8, \"#\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_9, \" \" + _toDisplayString(item.start_id) + \" - \" + _toDisplayString(item.end_id), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(isExpanded(index) ? '' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_6),\n                                (isExpanded(index))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"background 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (copySummary(item.content))\n                                            }, [...(_cache[4] || (_cache[4] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_13),\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button worldbook-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#4a9eff\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (bindToWorldbook(item.content, index))\n                                            }, [...(_cache[5] || (_cache[5] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-book\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_14),\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button delete-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#ff6b6b\", \"border\": \"1px solid #ff5252\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (deleteSummary(index))\n                                            }, [...(_cache[6] || (_cache[6] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_15)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_16, _toDisplayString(item.content), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-inbox\",\n                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"10px\", \"opacity\": \"0.3\" }\n                            }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", { style: { \"margin\": \"10px 0\", \"font-size\": \"16px\" } }, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"small\", { style: { \"font-size\": \"12px\", \"color\": \"#666\" } }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SummaryTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SummaryTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SummaryTab.vue?vue&type=style&index=0&id=97028022&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-97028022\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"table-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#4a9eff\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"history-list\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n    class: \"history-info\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"flex\": \"1\" }\n};\nconst _hoisted_7 = {\n    class: \"history-number\",\n    style: { \"color\": \"#4a9eff\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_8 = {\n    class: \"history-range\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_9 = {\n    class: \"expand-icon\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_10 = {\n    key: 0,\n    class: \"history-content\",\n    style: { \"padding\": \"15px\", \"background\": \"#2a2a2a\", \"border-radius\": \"0 0 6px 6px\" }\n};\nconst _hoisted_11 = {\n    class: \"history-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"8px\", \"border-bottom\": \"1px solid #3a3a3a\", \"flex-wrap\": \"wrap\" }\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n    class: \"table-display\",\n    style: { \"overflow-x\": \"auto\", \"border-radius\": \"6px\", \"border\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_15 = { style: { \"width\": \"100%\", \"border-collapse\": \"collapse\", \"background\": \"#1a1a1a\" } };\nconst _hoisted_16 = { style: { \"background\": \"#2a2a2a\" } };\nconst _hoisted_17 = {\n    key: 1,\n    class: \"empty-state\",\n    style: { \"text-align\": \"center\", \"padding\": \"40px 20px\", \"color\": \"#888\" }\n};\nimport { ref } from 'vue';\nimport { getChatIdSafe } from '../utils';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TableTab',\n    setup(__props) {\n        const table_history = ref([]);\n        const tableExpandedState = ref(new Map());\n        // \n        const refreshTableHistory = () => {\n            try {\n                const chat_id = getChatIdSafe();\n                if (!chat_id) {\n                    console.warn('ID');\n                    table_history.value = [];\n                    return;\n                }\n                const chat_vars = getVariables({ type: 'chat' });\n                console.log(':', chat_vars);\n                console.log(':', chat_vars.table_history);\n                table_history.value = chat_vars.table_history || [];\n                console.log(':', table_history.value.length);\n            }\n            catch (e) {\n                console.error(':', e);\n                table_history.value = [];\n            }\n        };\n        // \n        const toggleTableExpanded = (index) => {\n            const current = tableExpandedState.value.get(index) || false;\n            tableExpandedState.value.set(index, !current);\n        };\n        const isTableExpanded = (index) => {\n            return tableExpandedState.value.get(index) || false;\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage = '') => {\n            console.log(':', text.length);\n            try {\n                // iframe\n                if (window.parent && window.parent !== window) {\n                    console.log('iframe');\n                    const parentSuccess = await tryParentWindowCopy(text);\n                    if (parentSuccess) {\n                        console.log('');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                }\n                // 1:  Clipboard API\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log(' Clipboard API');\n                    try {\n                        await navigator.clipboard.writeText(text);\n                        console.log('Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    catch (clipboardErr) {\n                        console.warn('Clipboard API :', clipboardErr);\n                        // \n                    }\n                }\n                // 2:  execCommand \n                console.log(' execCommand ');\n                const success = await execCommandCopy(text);\n                if (success) {\n                    console.log('execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                // 3: \n                console.log('');\n                showManualCopyDialog(text);\n            }\n            catch (err) {\n                console.error(':', err);\n                // \n                showManualCopyDialog(text);\n            }\n        };\n        // \n        const tryParentWindowCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    const parentDoc = window.parent.document;\n                    const parentBody = window.parent.document.body;\n                    //  textarea \n                    const textarea = parentDoc.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n                    textarea.setAttribute('readonly', '');\n                    parentBody.appendChild(textarea);\n                    // \n                    textarea.focus();\n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    // \n                    parentBody.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error(':', err);\n                    resolve(false);\n                }\n            });\n        };\n        // execCommand \n        const execCommandCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    //  textarea \n                    const textarea = document.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.position = 'fixed';\n                    textarea.style.left = '-9999px';\n                    textarea.style.top = '-9999px';\n                    textarea.style.opacity = '0';\n                    textarea.style.pointerEvents = 'none';\n                    textarea.setAttribute('readonly', '');\n                    document.body.appendChild(textarea);\n                    // \n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = document.execCommand('copy');\n                    // \n                    document.body.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error('execCommand :', err);\n                    resolve(false);\n                }\n            });\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            console.log(':', text.length);\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'manual-copy-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n                // \n                const textarea = parentDoc.createElement('textarea');\n                textarea.value = text;\n                textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                closeButton.onmouseover = () => {\n                    closeButton.style.background = '#5ba8ff';\n                };\n                closeButton.onmouseout = () => {\n                    closeButton.style.background = '#4a9eff';\n                };\n                // \n                const copyButton = parentDoc.createElement('button');\n                copyButton.textContent = '';\n                copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                copyButton.onmouseover = () => {\n                    copyButton.style.background = '#218838';\n                };\n                copyButton.onmouseout = () => {\n                    copyButton.style.background = '#28a745';\n                };\n                // \n                buttonContainer.appendChild(copyButton);\n                buttonContainer.appendChild(closeButton);\n                container.appendChild(header);\n                container.appendChild(textarea);\n                container.appendChild(buttonContainer);\n                overlay.appendChild(container);\n                // \n                parentBody.appendChild(overlay);\n                // \n                closeButton.onclick = () => {\n                    console.log('');\n                    parentBody.removeChild(overlay);\n                };\n                copyButton.onclick = async () => {\n                    console.log('');\n                    try {\n                        // \n                        textarea.focus();\n                        textarea.select();\n                        // \n                        const success = document.execCommand('copy');\n                        if (success) {\n                            window.toastr.success('');\n                            parentBody.removeChild(overlay);\n                        }\n                        else {\n                            window.toastr.warning('');\n                        }\n                    }\n                    catch (err) {\n                        console.error(':', err);\n                        window.toastr.warning('');\n                    }\n                };\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        console.log('');\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log('ESC');\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                // \n                setTimeout(() => {\n                    console.log('');\n                    textarea.focus();\n                    textarea.select();\n                }, 200);\n                // \n                window.toastr.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr.error('');\n            }\n        };\n        //  - \n        const copyTable = (tableItem) => {\n            try {\n                // TSV\n                const tsv = [tableItem.headers.join('\\t'), ...tableItem.data.map(row => row.join('\\t'))].join('\\n');\n                copyToClipboard(tsv, '');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('');\n            }\n        };\n        // \n        const deleteTable = (index) => {\n            if (confirm('')) {\n                table_history.value.splice(index, 1);\n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    insertOrAssignVariables({ table_history: table_history.value }, { type: 'chat' });\n                    window.toastr.success('');\n                }\n            }\n        };\n        // \n        refreshTableHistory();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    (table_history.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(table_history.value.length) + \" \", 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                (table_history.value && table_history.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(table_history.value, (item, index) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: index,\n                                class: \"history-item\",\n                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #444\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"history-header\",\n                                    style: { \"padding\": \"12px 15px\", \"background\": \"#1a1a1a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"user-select\": \"none\", \"transition\": \"background 0.2s\", \"border-radius\": \"6px\" },\n                                    onClick: ($event) => (toggleTableExpanded(index))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _createElementVNode(\"span\", _hoisted_7, \"#\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_8, \" \" + _toDisplayString(item.start_id) + \" - \" + _toDisplayString(item.end_id), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(isTableExpanded(index) ? '' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_5),\n                                (isTableExpanded(index))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-button\",\n                                                style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: ($event) => (copyTable(item))\n                                            }, [...(_cache[1] || (_cache[1] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-copy\",\n                                                        style: { \"font-size\": \"12px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_12),\n                                            _createElementVNode(\"button\", {\n                                                class: \"delete-button\",\n                                                style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: ($event) => (deleteTable(index))\n                                            }, [...(_cache[2] || (_cache[2] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-trash\",\n                                                        style: { \"font-size\": \"12px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_13)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_14, [\n                                            _createElementVNode(\"table\", _hoisted_15, [\n                                                _createElementVNode(\"thead\", _hoisted_16, [\n                                                    _createElementVNode(\"tr\", null, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.headers, (header, idx) => {\n                                                            return (_openBlock(), _createElementBlock(\"th\", {\n                                                                key: idx,\n                                                                style: { \"padding\": \"12px 16px\", \"text-align\": \"left\", \"font-weight\": \"bold\", \"color\": \"#fff\", \"border-bottom\": \"2px solid #3a3a3a\", \"border-right\": \"1px solid #3a3a3a\" }\n                                                            }, _toDisplayString(header), 1 /* TEXT */));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"tbody\", null, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.data, (row, rowIdx) => {\n                                                        return (_openBlock(), _createElementBlock(\"tr\", {\n                                                            key: rowIdx,\n                                                            style: { \"border-bottom\": \"1px solid #3a3a3a\" }\n                                                        }, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(row, (cell, cellIdx) => {\n                                                                return (_openBlock(), _createElementBlock(\"td\", {\n                                                                    key: cellIdx,\n                                                                    style: { \"padding\": \"10px 16px\", \"color\": \"#e0e0e0\", \"border-right\": \"1px solid #3a3a3a\" }\n                                                                }, _toDisplayString(cell), 1 /* TEXT */));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ])\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-table\",\n                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"10px\", \"opacity\": \"0.3\" }\n                            }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", { style: { \"margin\": \"10px 0\", \"font-size\": \"16px\" } }, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"small\", { style: { \"font-size\": \"12px\", \"color\": \"#666\" } }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TableTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TableTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TableTab.vue?vue&type=style&index=0&id=0416f1c6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0416f1c6\"]])\n\nexport default __exports__","const __WEBPACK_NAMESPACE_OBJECT__ = _;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"tools-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { class: \"tool-section\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_4 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_5 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = {\n    key: 0,\n    class: \"output-section\"\n};\nconst _hoisted_8 = {\n    class: \"output-content\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_9 = { class: \"tool-section\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_11 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_12 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_13 = [\"disabled\"];\nconst _hoisted_14 = {\n    key: 0,\n    class: \"output-section\"\n};\nconst _hoisted_15 = {\n    class: \"output-content\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_16 = {\n    class: \"modify-section\",\n    style: { \"margin-top\": \"25px\", \"border-top\": \"2px dashed #3a3a3a\", \"padding-top\": \"20px\" }\n};\nconst _hoisted_17 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_18 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_19 = [\"disabled\"];\nimport { debounce } from 'lodash';\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref, watch } from 'vue';\nimport { getScriptIdSafe } from '/utils';\nimport { useSettingsStore } from '../settings';\n\nimport { onBeforeUnmount } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ToolsTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // \n        const toolExpandedState = ref(new Map());\n        const antiClicheInput = ref('');\n        const antiClicheOutput = ref('');\n        const isProcessingAntiCliche = ref(false);\n        const characterDescription = ref('');\n        const characterCardOutput = ref('');\n        const isGeneratingCharacter = ref(false);\n        const modifyRequest = ref('');\n        const isModifyingCharacter = ref(false);\n        // \n        const isDataLoaded = ref(false);\n        // \n        const loadToolsData = () => {\n            try {\n                isDataLoaded.value = false; // \n                const script_id = getScriptIdSafe();\n                if (!script_id) {\n                    console.warn(' script_id ');\n                    isDataLoaded.value = true;\n                    return;\n                }\n                const savedData = getVariables({ type: 'script', script_id });\n                console.log(' :', savedData);\n                // \n                if (savedData.tools_antiCliche) {\n                    antiClicheInput.value = savedData.tools_antiCliche.input || '';\n                    antiClicheOutput.value = savedData.tools_antiCliche.output || '';\n                    console.log(' :', {\n                        input: antiClicheInput.value.substring(0, 50),\n                        output: antiClicheOutput.value.substring(0, 50),\n                    });\n                }\n                // \n                if (savedData.tools_characterCard) {\n                    characterDescription.value = savedData.tools_characterCard.description || '';\n                    characterCardOutput.value = savedData.tools_characterCard.output || '';\n                    modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\n                    console.log(' :', {\n                        description: characterDescription.value.substring(0, 50),\n                        output: characterCardOutput.value.substring(0, 50),\n                        modifyRequest: modifyRequest.value.substring(0, 50),\n                    });\n                }\n                // \n                if (savedData.tools_expandedState) {\n                    toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\n                    console.log(' :', Object.fromEntries(toolExpandedState.value));\n                }\n                // \n                setTimeout(() => {\n                    isDataLoaded.value = true;\n                    console.log(' ');\n                }, 100);\n            }\n            catch (error) {\n                console.error(' :', error);\n                isDataLoaded.value = true;\n            }\n        };\n        // \n        const saveToolsDataImmediate = () => {\n            // \n            if (!isDataLoaded.value) {\n                console.log(' ');\n                return;\n            }\n            try {\n                const script_id = getScriptIdSafe();\n                if (!script_id) {\n                    console.warn(' script_id ');\n                    return;\n                }\n                const dataToSave = {\n                    tools_antiCliche: {\n                        input: antiClicheInput.value,\n                        output: antiClicheOutput.value,\n                    },\n                    tools_characterCard: {\n                        description: characterDescription.value,\n                        output: characterCardOutput.value,\n                        modifyRequest: modifyRequest.value,\n                    },\n                    tools_expandedState: Object.fromEntries(toolExpandedState.value),\n                };\n                insertOrAssignVariables(dataToSave, { type: 'script', script_id });\n                console.log(' :', {\n                    antiCliche_input_length: antiClicheInput.value.length,\n                    antiCliche_output_length: antiClicheOutput.value.length,\n                    character_desc_length: characterDescription.value.length,\n                    character_output_length: characterCardOutput.value.length,\n                });\n            }\n            catch (error) {\n                console.error(' :', error);\n            }\n        };\n        // 300ms\n        const saveToolsData = debounce(saveToolsDataImmediate, 300);\n        // \n        watch([antiClicheInput, antiClicheOutput, characterDescription, characterCardOutput, modifyRequest, toolExpandedState], () => {\n            if (isDataLoaded.value) {\n                console.log(' ...');\n                saveToolsData();\n            }\n        }, { deep: true });\n        // \n        onMounted(() => {\n            console.log(' ToolsTab ...');\n            loadToolsData();\n        });\n        // \n        onBeforeUnmount(() => {\n            console.log(' ToolsTab ...');\n            // \n            saveToolsData.cancel();\n            saveToolsDataImmediate();\n        });\n        // \n        const toggleToolExpanded = (toolName) => {\n            console.log('toggleToolExpanded :', toolName);\n            const current = toolExpandedState.value.get(toolName) || false;\n            console.log(':', current);\n            toolExpandedState.value.set(toolName, !current);\n            console.log(':', !current);\n        };\n        // \n        const isToolExpanded = (toolName) => {\n            return toolExpandedState.value.get(toolName) || false;\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage) => {\n            console.log(' :', text.length);\n            console.log(' iframe:', window.parent !== window);\n            // 1\n            if (window.parent && window.parent !== window) {\n                console.log(' ...');\n                const parentSuccess = tryParentWindowCopy(text);\n                if (parentSuccess) {\n                    console.log(' ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                else {\n                    console.warn(' ');\n                }\n            }\n            // 2 execCommand \n            try {\n                console.log('  execCommand ...');\n                const success = execCommandCopy(text);\n                if (success) {\n                    console.log(' execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                else {\n                    console.warn(' execCommand ');\n                }\n            }\n            catch (error) {\n                console.warn(' execCommand :', error);\n            }\n            // 3 Clipboard API\n            try {\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log('  Clipboard API ...');\n                    await navigator.clipboard.writeText(text);\n                    // \n                    const clipboardContent = await navigator.clipboard.readText();\n                    if (clipboardContent === text) {\n                        console.log(' Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    else {\n                        console.warn(' Clipboard API ');\n                    }\n                }\n            }\n            catch (error) {\n                console.warn(' Clipboard API :', error);\n            }\n            // \n            console.log(' ');\n            showManualCopyDialog(text);\n        };\n        // \n        const tryParentWindowCopy = (text) => {\n            try {\n                if (window.parent && window.parent !== window) {\n                    console.log('   textarea...');\n                    // \n                    const parentDoc = window.parent.document;\n                    const tempTextArea = parentDoc.createElement('textarea');\n                    tempTextArea.value = text;\n                    // \n                    tempTextArea.style.cssText = `\n        position: fixed !important;\n        left: -9999px !important;\n        top: -9999px !important;\n        width: 1px !important;\n        height: 1px !important;\n        opacity: 0 !important;\n        pointer-events: none !important;\n      `;\n                    tempTextArea.setAttribute('readonly', '');\n                    parentDoc.body.appendChild(tempTextArea);\n                    console.log('   Textarea');\n                    // \n                    tempTextArea.focus();\n                    tempTextArea.select();\n                    tempTextArea.setSelectionRange(0, text.length);\n                    console.log('   ');\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    console.log('   execCommand:', success);\n                    // \n                    parentDoc.body.removeChild(tempTextArea);\n                    console.log('   Textarea');\n                    return success;\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n            }\n            return false;\n        };\n        // execCommand \n        const execCommandCopy = (text) => {\n            try {\n                console.log('   textarea...');\n                // \n                const textArea = document.createElement('textarea');\n                textArea.value = text;\n                // \n                textArea.style.cssText = `\n      position: fixed !important;\n      left: -9999px !important;\n      top: -9999px !important;\n      width: 1px !important;\n      height: 1px !important;\n      opacity: 0 !important;\n      pointer-events: none !important;\n    `;\n                textArea.setAttribute('readonly', '');\n                document.body.appendChild(textArea);\n                console.log('   Textarea');\n                // \n                textArea.focus();\n                textArea.select();\n                textArea.setSelectionRange(0, text.length);\n                console.log('   ');\n                // \n                const success = document.execCommand('copy');\n                console.log('   execCommand:', success);\n                // \n                document.body.removeChild(textArea);\n                console.log('   Textarea');\n                return success;\n            }\n            catch (error) {\n                console.error(' execCommand :', error);\n                return false;\n            }\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            try {\n                console.log(' ');\n                // \n                const targetDoc = window.parent && window.parent !== window ? window.parent.document : document;\n                const targetBody = targetDoc.body;\n                console.log(' :', targetDoc === window.parent.document ? '' : '');\n                // \n                const existingModal = targetDoc.getElementById('manual-copy-modal-tools');\n                if (existingModal) {\n                    targetBody.removeChild(existingModal);\n                }\n                // \n                const modal = targetDoc.createElement('div');\n                modal.id = 'manual-copy-modal-tools';\n                modal.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.9);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                const dialog = targetDoc.createElement('div');\n                dialog.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #ffa500;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 700px;\n      width: 90%;\n      max-height: 80vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);\n    `;\n                dialog.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #ffa500; font-size: 18px; font-weight: 600;\">\n        <i class=\"fa-solid fa-copy\" style=\"margin-right: 8px;\"></i>\n        \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #3a3a3a; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0; color: #e0e0e0; font-size: 14px; line-height: 1.6;\">\n           \n        </p>\n        <ol style=\"margin: 8px 0 0 20px; padding: 0; color: #ccc; font-size: 13px;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px;\">Ctrl+C</kbd> </li>\n        </ol>\n      </div>\n      <textarea\n        readonly\n        id=\"copyTextarea\"\n        style=\"\n          width: 100%;\n          height: 300px;\n          background: #1a1a1a;\n          border: 2px solid #3a3a3a;\n          border-radius: 6px;\n          padding: 12px;\n          color: #e0e0e0;\n          font-size: 13px;\n          font-family: 'Courier New', Consolas, monospace;\n          resize: vertical;\n          margin-bottom: 15px;\n          box-sizing: border-box;\n        \"\n      >${text}</textarea>\n      <div style=\"display: flex; gap: 12px; justify-content: flex-end;\">\n        <button id=\"manualCopyBtn\" style=\"\n          padding: 10px 20px;\n          background: #28a745;\n          border: none;\n          border-radius: 6px;\n          color: white;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: background 0.2s;\n        \"></button>\n        <button id=\"closeBtn\" style=\"\n          padding: 10px 20px;\n          background: #6c757d;\n          border: none;\n          border-radius: 6px;\n          color: white;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: background 0.2s;\n        \"></button>\n      </div>\n    `;\n                modal.appendChild(dialog);\n                targetBody.appendChild(modal);\n                console.log(' DOM');\n                // \n                const textarea = dialog.querySelector('#copyTextarea');\n                setTimeout(() => {\n                    textarea.focus();\n                    textarea.select();\n                    console.log(' ');\n                }, 100);\n                // \n                const copyBtn = dialog.querySelector('#manualCopyBtn');\n                const closeBtn = dialog.querySelector('#closeBtn');\n                copyBtn.onmouseover = () => (copyBtn.style.background = '#218838');\n                copyBtn.onmouseout = () => (copyBtn.style.background = '#28a745');\n                closeBtn.onmouseover = () => (closeBtn.style.background = '#5a6268');\n                closeBtn.onmouseout = () => (closeBtn.style.background = '#6c757d');\n                copyBtn.onclick = () => {\n                    try {\n                        console.log(' ...');\n                        textarea.focus();\n                        textarea.select();\n                        const success = targetDoc.execCommand('copy');\n                        console.log(' :', success);\n                        if (success) {\n                            window.toastr.success('');\n                            targetBody.removeChild(modal);\n                        }\n                        else {\n                            window.toastr.warning(' Ctrl+C ');\n                        }\n                    }\n                    catch (error) {\n                        console.error(' :', error);\n                        window.toastr.warning(' Ctrl+C ');\n                    }\n                };\n                closeBtn.onclick = () => {\n                    console.log(' ');\n                    targetBody.removeChild(modal);\n                };\n                // \n                modal.onclick = e => {\n                    if (e.target === modal) {\n                        console.log(' ');\n                        targetBody.removeChild(modal);\n                    }\n                };\n                // ESC\n                const handleEsc = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log(' ESC');\n                        targetBody.removeChild(modal);\n                        targetDoc.removeEventListener('keydown', handleEsc);\n                    }\n                };\n                targetDoc.addEventListener('keydown', handleEsc);\n                window.toastr.info('', '', { timeOut: 3000 });\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const handleAntiClicheProcess = async () => {\n            if (!antiClicheInput.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isProcessingAntiCliche.value = true;\n                window.toastr.info('AI...', '', { timeOut: 15000 });\n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: `\n\n## \n\n\n## \n- \n- \n- \n\n## \nxxx/xxx\n****\n\n## \nxxx/xxx//\n**\"\"\"\"**\n\n## \"\"\n\"\"\n\n## \n- \n- \"/\"\n- \"\"\n- \n\n## \n- \n- \n- \n\n## //\n- \n- \n- \n- user\n\n## NSFW\n- /\n- \n- \n\n## \n\n\n\n\n\n\n\n\n\nxxx\n\n****\n1. \n2. \n3. \n4. \n5. \n\n`,\n                            },\n                            {\n                                role: 'user',\n                                content: antiClicheInput.value,\n                            },\n                        ],\n                        max_tokens: settings.value.max_tokens || 8000,\n                        temperature: 0.7,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                antiClicheOutput.value = data.choices[0].message.content.trim();\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isProcessingAntiCliche.value = false;\n            }\n        };\n        const copyAntiClicheResult = () => {\n            if (!antiClicheOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            // \n            copyToClipboard(antiClicheOutput.value, '');\n        };\n        // \n        const handleGenerateCharacterCard = async () => {\n            if (!characterDescription.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isGeneratingCharacter.value = true;\n                window.toastr.info('AI...');\n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model || 'gpt-3.5-turbo',\n                        max_tokens: settings.value.max_tokens || 16000,\n                        temperature: 0.8,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: `\n\n****\n-  YAML \n- \n- AI\n- AI\n\n****\n\\`\\`\\`yaml\n:\n  : \"\"\n  : \n  : \"YYYYMM\"\n  : \"//\"\n  : \"Alpha/Beta/Omega/\"\n  : \"////\"\n  : \"\"\n  : \"//\"\n  : \"\"\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n\n:\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"\"\n  : \"\"\n  : \"\"\n\n:\n  :\n    - 1: \"\"\n    - 2: \"\"\n    - 3: \"\"\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"\"\n\n:\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"/\"\n  : [\"1\", \"2\"]\n\n:\n  : \"\"\n  : \"\"\n  : [\"1\", \"2\", \"3\"]\n  : \"TA\"\n  : \"\"\n  : \"TA\"\n\n:\n  : \"{{user}}\"\n  : \"\"\n  : \"//\"\n  : \"\"\n\n:\n  :\n    : \"TA\"\n    : \"TA\"\n    : \"\"\n  : \"TA\"\n  :\n    : \"TA\"\n    : \"TA\"\n    : \"TA\"\n  :\n    : \"\"\n    : \"\"\n\\`\\`\\`\n\n\n1. \n2. \n3. TA\n4. `,\n                            },\n                            {\n                                role: 'user',\n                                content: characterDescription.value,\n                            },\n                        ],\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                characterCardOutput.value = data.choices[0].message.content.trim();\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isGeneratingCharacter.value = false;\n            }\n        };\n        const clearCharacterForm = () => {\n            characterDescription.value = '';\n            characterCardOutput.value = '';\n            modifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        const copyCharacterCard = () => {\n            if (!characterCardOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            // \n            copyToClipboard(characterCardOutput.value, '');\n        };\n        // \n        const clearAntiClicheForm = () => {\n            antiClicheInput.value = '';\n            antiClicheOutput.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // \n        const handleModifyCharacterCard = async () => {\n            if (!modifyRequest.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!characterCardOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isModifyingCharacter.value = true;\n                window.toastr.info('AI...');\n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model || 'gpt-3.5-turbo',\n                        max_tokens: settings.value.max_tokens || 16000,\n                        temperature: 0.8,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: ` YAML \n\n****\n1.  YAML \n2. \n3. \n4. \n5. \n6. \n\n****\n- ////\n- \n- \n- AI\n\n YAML `,\n                            },\n                            {\n                                role: 'user',\n                                content: `\n\n${characterCardOutput.value}\n\n---\n\n\n${modifyRequest.value}`,\n                            },\n                        ],\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                characterCardOutput.value = data.choices[0].message.content.trim();\n                modifyRequest.value = ''; // \n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isModifyingCharacter.value = false;\n            }\n        };\n        // \n        const clearModifyRequest = () => {\n            modifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (toggleToolExpanded('antiCliche')))\n                    }, [\n                        _cache[5] || (_cache[5] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-broom\",\n                                style: { \"margin-right\": \"8px\", \"color\": \"#ff6b6b\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\" }\n                        }, null, 2 /* CLASS */)\n                    ]),\n                    (isToolExpanded('antiCliche'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"tool-instructions\" }, [\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#ccc\", \"font-size\": \"12px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-info-circle\",\n                                        style: { \"margin-right\": \"6px\", \"color\": \"#17a2b8\" }\n                                    }),\n                                    _createTextVNode(\" //9200+ \")\n                                ]),\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#ffa500\", \"font-size\": \"11px\", \"background\": \"#1a1a1a\", \"padding\": \"6px\", \"border-radius\": \"4px\", \"border-left\": \"3px solid #ffa500\" } }, \"  /NSFW \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[6] || (_cache[6] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((antiClicheInput).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, antiClicheInput.value]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"button\", {\n                                    class: \"process-button\",\n                                    disabled: isProcessingAntiCliche.value || !antiClicheInput.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleAntiClicheProcess\n                                }, [\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isProcessingAntiCliche.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_6),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearAntiClicheForm\n                                }, [...(_cache[9] || (_cache[9] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (antiClicheOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                    _cache[11] || (_cache[11] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_8, _toDisplayString(antiClicheOutput.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"output-actions\",\n                                        style: { \"margin-top\": \"12px\", \"display\": \"flex\", \"gap\": \"12px\" }\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"copy-button\",\n                                            style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                            onClick: copyAntiClicheResult\n                                        }, [...(_cache[10] || (_cache[10] = [\n                                                _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-copy\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_9, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (toggleToolExpanded('characterCard')))\n                    }, [\n                        _cache[13] || (_cache[13] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-user-plus\",\n                                style: { \"margin-right\": \"8px\", \"color\": \"#17a2b8\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\" }\n                        }, null, 2 /* CLASS */)\n                    ]),\n                    (isToolExpanded('characterCard'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                            _cache[25] || (_cache[25] = _createStaticVNode(\"<div class=\\\"tool-instructions\\\" data-v-0c833396><p style=\\\"margin:0 0 8px 0;color:#ccc;font-size:12px;\\\" data-v-0c833396><i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right:6px;color:#17a2b8;\\\" data-v-0c833396></i> AIYAML  </p><p style=\\\"margin:0 0 6px 0;color:#4a9eff;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #17a2b8;\\\" data-v-0c833396>   </p><p style=\\\"margin:0 0 6px 0;color:#ffa500;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #ffa500;\\\" data-v-0c833396>  &quot;&quot;AI </p></div>\", 1)),\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                _cache[14] || (_cache[14] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((characterDescription).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, characterDescription.value]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-button\",\n                                    disabled: isGeneratingCharacter.value || !characterDescription.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #17a2b8 0%, #138496 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(23, 162, 184, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleGenerateCharacterCard\n                                }, [\n                                    _cache[15] || (_cache[15] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[16] || (_cache[16] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGeneratingCharacter.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_13),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearCharacterForm\n                                }, [...(_cache[17] || (_cache[17] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (characterCardOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                    _cache[24] || (_cache[24] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_15, _toDisplayString(characterCardOutput.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"output-actions\",\n                                        style: { \"margin-top\": \"12px\", \"display\": \"flex\", \"gap\": \"12px\" }\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"copy-button\",\n                                            style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                            onClick: copyCharacterCard\n                                        }, [...(_cache[18] || (_cache[18] = [\n                                                _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-copy\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_16, [\n                                        _cache[23] || (_cache[23] = _createStaticVNode(\"<h5 style=\\\"margin:0 0 12px 0;color:#fff;font-size:14px;font-weight:600;\\\" data-v-0c833396><i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-0c833396></i>  </h5><div class=\\\"modify-instructions\\\" style=\\\"background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:10px;margin-bottom:15px;\\\" data-v-0c833396><p style=\\\"margin:0 0 6px 0;color:#ccc;font-size:12px;\\\" data-v-0c833396><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-0c833396></i> AI&quot;&quot;&quot;&quot;&quot;&quot; </p><p style=\\\"margin:0;color:#ffa500;font-size:11px;\\\" data-v-0c833396>  YAML </p></div>\", 2)),\n                                        _createElementVNode(\"div\", _hoisted_17, [\n                                            _cache[19] || (_cache[19] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((modifyRequest).value = $event)),\n                                                placeholder: \"...\",\n                                                style: { \"width\": \"100%\", \"height\": \"80px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, modifyRequest.value]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_18, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"modify-button\",\n                                                disabled: isModifyingCharacter.value || !modifyRequest.value.trim(),\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ffa500 0%, #ff8c00 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 165, 0, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: handleModifyCharacterCard\n                                            }, [\n                                                _cache[20] || (_cache[20] = _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */)),\n                                                _cache[21] || (_cache[21] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                                    style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isModifyingCharacter.value ? '...' : 'AI'), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_19),\n                                            _createElementVNode(\"button\", {\n                                                class: \"clear-modify-button\",\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #6c757d 0%, #5a6268 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(108, 117, 125, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: clearModifyRequest\n                                            }, [...(_cache[22] || (_cache[22] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-eraser\",\n                                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ToolsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ToolsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ToolsTab.vue?vue&type=style&index=0&id=0c833396&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0c833396\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    class: \"memory-panel-container\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"height\": \"100%\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\" }\n};\nconst _hoisted_2 = {\n    class: \"panel-tabs\",\n    style: { \"display\": \"flex\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"flex-shrink\": \"0\" }\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n    class: \"panel-content\",\n    style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"overflow-x\": \"hidden\", \"padding\": \"0\", \"min-height\": \"0\", \"scrollbar-width\": \"thin\", \"scrollbar-color\": \"#4a9eff #2a2a2a\" }\n};\nimport { computed, ref } from 'vue';\nimport SettingsTab from './SettingsTab.vue';\nimport SummaryTab from './SummaryTab.vue';\nimport TableTab from './TableTab.vue';\nimport ToolsTab from './ToolsTab.vue';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MainPanel',\n    setup(__props) {\n        const tabs = [\n            { key: 'summary', label: '', icon: 'fa-solid fa-list' },\n            { key: 'table', label: '', icon: 'fa-solid fa-table' },\n            { key: 'settings', label: '', icon: 'fa-solid fa-cog' },\n            { key: 'tools', label: '', icon: 'fa-solid fa-tools' },\n        ];\n        const activeTab = ref('settings');\n        // \n        const componentMap = {\n            summary: SummaryTab,\n            table: TableTab,\n            settings: SettingsTab,\n            tools: ToolsTab,\n        };\n        // \n        const currentComponent = computed(() => componentMap[activeTab.value]);\n        // \n        const componentProps = computed(() => ({\n            activeTab: activeTab.value,\n        }));\n        // \n        const switchTab = (tabKey) => {\n            console.log(':', tabKey);\n            activeTab.value = tabKey;\n        };\n        // \n        const closePanel = () => {\n            $('#memoryManagementPanel').fadeOut(200);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: \"panel-header\",\n                    style: { \"padding\": \"15px 20px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"border-radius\": \"8px 8px 0 0\", \"flex-shrink\": \"0\" }\n                }, [\n                    _cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n                        class: \"header-left\",\n                        style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n                    }, [\n                        _createElementVNode(\"span\", { style: { \"font-size\": \"24px\" } }, \"\"),\n                        _createElementVNode(\"b\", null, \"mzrodyu\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", {\n                        class: \"close-button\",\n                        style: { \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"border-radius\": \"4px\", \"transition\": \"background 0.2s\" },\n                        onClick: closePanel\n                    }, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(tabs, (tab) => {\n                        return _createElementVNode(\"div\", {\n                            key: tab.key,\n                            class: _normalizeClass([{ 'tab-active': activeTab.value === tab.key }, \"tab-item\"]),\n                            style: _normalizeStyle({\n                                flex: '1',\n                                padding: '12px 20px',\n                                cursor: 'pointer',\n                                textAlign: 'center',\n                                transition: 'background 0.2s, color 0.2s',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                gap: '8px',\n                                borderBottom: '2px solid transparent',\n                                backgroundColor: activeTab.value === tab.key ? '#1a1a1a' : 'transparent',\n                                color: activeTab.value === tab.key ? '#4a9eff' : '#e0e0e0',\n                                borderBottomColor: activeTab.value === tab.key ? '#4a9eff' : 'transparent',\n                            }),\n                            onClick: ($event) => (switchTab(tab.key))\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(tab.icon)\n                            }, null, 2 /* CLASS */),\n                            _createTextVNode(\" \" + _toDisplayString(tab.label), 1 /* TEXT */)\n                        ], 14 /* CLASS, STYLE, PROPS */, _hoisted_3);\n                    }), 64 /* STABLE_FRAGMENT */))\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    (_openBlock(), _createBlock(_resolveDynamicComponent(currentComponent.value), _mergeProps({ key: activeTab.value }, componentProps.value), null, 16 /* FULL_PROPS */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MainPanel.vue?vue&type=style&index=0&id=4ef9901c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4ef9901c\"]])\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport MainPanel from './components/MainPanel.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: '',\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(MainPanel));\n        };\n    }\n});\n","import { createPinia } from 'pinia';\nimport { createApp } from 'vue';\nimport  from './.vue';\n\n$(() => {\n  console.log('.ts ');\n\n  setTimeout(() => {\n    console.log('.ts setTimeout ');\n\n    // \n    const existingPanel = $('#memoryManagementPanel');\n\n    if (existingPanel.length > 0) {\n      console.log('mzrodyu...');\n      // \n      existingPanel.remove();\n      // DOM\n      setTimeout(() => {\n        console.log('...');\n      }, 100);\n    }\n\n    console.log('  - :', new Date().toISOString());\n\n    //  - \n    const panelContainer = $(`\n      <div id=\"memoryManagementPanel\" style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 90vw;\n        max-width: 1200px;\n        height: 80vh;\n        max-height: 80vh;\n        background: #1a1a1a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n      \">\n      </div>\n    `);\n\n    //  body\n    $('body').append(panelContainer);\n    console.log(' body, :', panelContainer[0]);\n\n    //  Vue \n    console.log(' Vue :', panelContainer[0]);\n\n    const app = createApp().use(createPinia());\n\n    try {\n      app.mount(panelContainer[0]);\n      console.log('Vue ');\n      console.log('Vue :', (panelContainer[0] as any).__vue_app__);\n    } catch (error) {\n      console.error('Vue :', error);\n      console.error(':', JSON.stringify(error, null, 2));\n      console.error(':', (error as Error).stack);\n    }\n\n    console.log('mzrodyu:', panelContainer[0]);\n  }, 200);\n});\n\n// /\nexport function toggleMemoryPanel() {\n  const panel = $('#memoryManagementPanel');\n  if (panel.length === 0) return;\n\n  if (panel.is(':visible')) {\n    panel.fadeOut(200);\n  } else {\n    panel.fadeIn(200);\n  }\n}\n","import { watch } from 'vue';\nimport { useSettingsStore, useSummaryHistoryStore } from './settings';\nimport { getScriptIdSafe, setGlobalScriptId } from './utils';\nimport { summarizeMessages } from './';\nimport './';\nimport './';\n\n$(() => {\n  // \n  setTimeout(() => {\n    let script_id: string | null = null;\n    try {\n      script_id = getScriptId?.();\n    } catch (e) {\n      console.error(' script_id:', e);\n    }\n\n    if (!script_id) {\n      console.error(' script_idmzrodyu');\n      window.toastr.error('mzrodyu');\n      return;\n    }\n\n    //  script_id\n    setGlobalScriptId(script_id);\n\n    console.log('mzrodyuscript_id:', script_id);\n\n    // \n    setTimeout(() => {\n      // \n      const checkAutoSummarize = () => {\n        try {\n          console.log(' ...');\n\n          const store = useSettingsStore();\n          if (!store || !store.settings) {\n            console.warn(' ');\n            return;\n          }\n\n          const settings = store.settings;\n\n          // \n          if (typeof settings.auto_summarize_enabled !== 'boolean') {\n            console.warn(' ');\n            return;\n          }\n\n          if (typeof settings.summarize_interval !== 'number' || settings.summarize_interval < 1) {\n            console.warn(' ');\n            return;\n          }\n          console.log(' :', {\n            auto_summarize_enabled: settings.auto_summarize_enabled,\n            summarize_interval: settings.summarize_interval,\n            has_api_key: !!settings.api_key,\n          });\n\n          if (!settings.auto_summarize_enabled) {\n            console.log(' ');\n            return;\n          }\n\n          if (!settings.api_key) {\n            console.log(' API Key ');\n            return;\n          }\n\n          const last_message_id = getLastMessageId();\n\n          // ID\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          if (!current_chat_id) {\n            console.log(' ID');\n            return;\n          }\n\n          // ID\n          let auto_summary_start_id = 0;\n          try {\n            // \n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id_key = 'auto_summary_start_id';\n\n            console.log(` :`, {\n              current_chat_id,\n              chat_vars: chatVars,\n              has_start_id: chatVars[auto_summary_start_id_key] !== undefined,\n              existing_start_id: chatVars[auto_summary_start_id_key],\n            });\n\n            if (chatVars[auto_summary_start_id_key] !== undefined && chatVars[auto_summary_start_id_key] !== null) {\n              auto_summary_start_id = chatVars[auto_summary_start_id_key];\n              console.log(` : ${auto_summary_start_id} (: ${current_chat_id})`);\n            } else {\n              // \n              // \n              const scriptId = getScriptIdSafe();\n              if (!scriptId) {\n                console.warn('script_id ');\n                return;\n              }\n              const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n              const existingSummaries = Array.isArray(scriptVars?.summary_history) ? scriptVars.summary_history : [];\n\n              if (existingSummaries.length > 0) {\n                // \n                const lastSummary = existingSummaries[0]; // \n                const lastSummaryEnd = lastSummary.end_id || 0;\n\n                // +1\n                if (last_message_id > lastSummaryEnd) {\n                  auto_summary_start_id = lastSummaryEnd + 1;\n                  console.log(\n                    ` : ${auto_summary_start_id} ( ${lastSummaryEnd} )`,\n                  );\n                  window.toastr?.info(` ${auto_summary_start_id} `);\n                } else {\n                  // \n                  auto_summary_start_id = last_message_id;\n                  console.log(` : ${last_message_id}`);\n                  window.toastr?.info(`: ${last_message_id}`);\n                }\n              } else {\n                // 0AI\n                auto_summary_start_id = 0;\n                console.log(` : 0 (: ${current_chat_id}) - AI`);\n                window.toastr?.info(` 0 AI`);\n              }\n\n              // 0AI\n              if (auto_summary_start_id < 0) {\n                auto_summary_start_id = 0;\n                console.log(` 0AI`);\n              }\n\n              // \n              insertOrAssignVariables({ [auto_summary_start_id_key]: auto_summary_start_id }, { type: 'chat' });\n            }\n          } catch (error) {\n            console.warn(':', error);\n            auto_summary_start_id = last_message_id;\n          }\n\n          console.log(\n            `: =${last_message_id}, =${auto_summary_start_id}, =${settings.summarize_interval}`,\n          );\n\n          // \n          // \n          // 0=AI, 1=, 2=AI, 3=...\n          const relative_position = last_message_id - auto_summary_start_id;\n\n          // 550-4, 5-9...\n          // 045relative_position=4 >= interval - 1\n          const should_trigger = relative_position >= settings.summarize_interval - 1;\n\n          console.log(' :', {\n            last_message_id,\n            auto_summary_start_id,\n            relative_position,\n            summarize_interval: settings.summarize_interval,\n            should_trigger,\n            calculation: `${relative_position} >= ${settings.summarize_interval - 1} (${relative_position + 1})`,\n            expected_trigger_at_floor: auto_summary_start_id + settings.summarize_interval - 1,\n            will_summarize_range: `${auto_summary_start_id}-${auto_summary_start_id + settings.summarize_interval - 1}`,\n            floor_explanation: '0=AI, 1=, 2=AI, 3=...',\n          });\n\n          if (last_message_id >= auto_summary_start_id && should_trigger) {\n            // interval55\n            const start_id = auto_summary_start_id;\n            const end_id = auto_summary_start_id + settings.summarize_interval - 1;\n\n            // \n            console.log(` :  ${start_id}-${end_id}`);\n            window.toastr.info(`  ${start_id}-${end_id}...`);\n\n            summarizeMessages(start_id, end_id)\n              .then(summary => {\n                console.log(` :  ${start_id}-${end_id}`, summary);\n\n                // \n                try {\n                  const historyStore = useSummaryHistoryStore();\n                  historyStore.addSummary(start_id, end_id, summary);\n                } catch (e) {\n                  console.error(':', e);\n                }\n\n                // \n                const new_start_id = end_id + 1;\n                insertOrAssignVariables({ auto_summary_start_id: new_start_id }, { type: 'chat' });\n                console.log(` : ${new_start_id}`);\n\n                window.toastr.success(`  ${start_id}-${end_id}  ${new_start_id} `);\n              })\n              .catch(error => {\n                console.error(' ', error);\n                window.toastr.error(' ' + error.message);\n              });\n          }\n        } catch (error) {\n          console.error('checkAutoSummarize ', error);\n          // \n        }\n      };\n\n      // \n      try {\n        eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, () => {\n          console.log(' ...');\n          checkAutoSummarize();\n        });\n\n        // \n        eventOn(tavern_events.CHAT_CHANGED, (chat_file_name: string) => {\n          console.log(' :', chat_file_name);\n\n          // \n          try {\n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id = chatVars.auto_summary_start_id;\n\n            if (auto_summary_start_id !== undefined && auto_summary_start_id !== null) {\n              console.log(` : ${chat_file_name}, : ${auto_summary_start_id}`);\n            } else {\n              console.log(` : ${chat_file_name}, `);\n            }\n          } catch (error) {\n            console.warn(':', error);\n          }\n        });\n\n        console.log(' ');\n\n        //  - \n        (window as any).testCompleteAutoSummary = () => {\n          try {\n            console.log(' ...');\n\n            // 1. \n            const last_message_id = getLastMessageId();\n            const current_floor = last_message_id;\n\n            console.log(':', current_floor);\n\n            // 2. \n            const chatVars = getVariables({ type: 'chat' });\n            const saved_start_id = chatVars.auto_summary_start_id;\n            console.log(':', saved_start_id);\n\n            // 3. \n            const scriptId = getScriptIdSafe();\n            if (!scriptId) {\n              console.warn('script_id ');\n              return;\n            }\n            const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n            const saved_summary = scriptVars?.summary_history?.[0];\n            if (saved_summary) {\n              console.log(':', saved_summary);\n            }\n\n            // 4. \n            const start_id = parseInt(saved_start_id) || 0;\n            const summarize_interval = 5;\n            const relative_position = current_floor - start_id;\n            const should_trigger =\n              relative_position >= summarize_interval - 1 &&\n              relative_position % summarize_interval === summarize_interval - 1;\n\n            console.log(':', {\n              current_floor,\n              start_id,\n              relative_position,\n              summarize_interval,\n              should_trigger,\n              next_trigger_floor: start_id + summarize_interval - 1,\n              floor_explanation: '0=AI, 1=, 2=AI, 3=...',\n            });\n\n            // 5. \n            console.log(':', scriptVars?.summary_history);\n\n            console.log(' ');\n          } catch (error) {\n            console.error(' :', error);\n          }\n        };\n\n        (window as any).checkCurrentFloor = () => {\n          try {\n            const last_message_id = getLastMessageId();\n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id = chatVars.auto_summary_start_id || 0;\n            const summarize_interval = 5;\n\n            const relative_position = last_message_id - auto_summary_start_id;\n            const should_trigger =\n              relative_position >= summarize_interval - 1 &&\n              relative_position % summarize_interval === summarize_interval - 1;\n\n            console.log(' :', {\n              last_message_id,\n              auto_summary_start_id,\n              relative_position,\n              summarize_interval,\n              should_trigger,\n              calculation: `${relative_position} >= ${summarize_interval - 1} && (${relative_position} + 1) % ${summarize_interval} = ${(relative_position + 1) % summarize_interval}`,\n            });\n\n            window.toastr?.info(`${last_message_id}: =${relative_position}, =${should_trigger}`);\n          } catch (error) {\n            console.error(' :', error);\n            window.toastr?.error(': ' + (error as Error).message);\n          }\n        };\n\n        (window as any).testFloorCalculation = () => {\n          try {\n            const last_message_id = getLastMessageId();\n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id = chatVars.auto_summary_start_id || 0;\n            const summarize_interval = 5;\n\n            console.log(' :', {\n              last_message_id,\n              auto_summary_start_id,\n              summarize_interval,\n            });\n\n            // \n            console.log('0=AI, 1=, 2=AI, 3=...');\n            for (let floor = 0; floor <= 15; floor++) {\n              const relative_position = floor - auto_summary_start_id;\n              const should_trigger =\n                relative_position >= summarize_interval - 1 && (relative_position + 1) % summarize_interval === 0;\n              const start_id = auto_summary_start_id;\n              const end_id = floor;\n\n              const floorType = floor === 0 ? 'AI' : floor % 2 === 1 ? '' : 'AI';\n\n              console.log(\n                ` ${floor}(${floorType}): =${relative_position}, =${should_trigger}, =${start_id}-${end_id}, =${relative_position} % ${summarize_interval} = ${relative_position % summarize_interval} (: ${summarize_interval - 1})`,\n              );\n            }\n\n            window.toastr?.info('');\n          } catch (error) {\n            console.error(' :', error);\n            window.toastr?.error(': ' + (error as Error).message);\n          }\n        };\n\n        console.log(' ');\n\n        // \n        setTimeout(() => {\n          (window as any).autoDetectOldWindow();\n        }, 1000); // 1\n      } catch (error) {\n        console.error(' :', error);\n      }\n\n      // \n      (window as any).testAutoSummarize = checkAutoSummarize;\n\n      // localStorage\n      (window as any).syncAutoSummaryData = () => {\n        try {\n          console.log(' ...');\n\n          // localStorage\n          const saved_start_id = localStorage.getItem('auto_summary_start_id');\n          const saved_summary = localStorage.getItem('last_summary');\n\n          console.log('localStorage:', {\n            saved_start_id,\n            saved_summary: saved_summary ? JSON.parse(saved_summary) : null,\n          });\n\n          if (saved_start_id) {\n            // \n            insertOrAssignVariables({ auto_summary_start_id: parseInt(saved_start_id) }, { type: 'chat' });\n            console.log(` : ${saved_start_id}`);\n          }\n\n          if (saved_summary) {\n            try {\n              const summaryData = JSON.parse(saved_summary);\n              const scriptId = getScriptIdSafe();\n              if (!scriptId) {\n                console.warn('script_id ');\n                return;\n              }\n              const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n              const existingSummaries = scriptVars?.summary_history || [];\n\n              // \n              const exists = existingSummaries.some(\n                (s: any) => s.start_id === summaryData.start_id && s.end_id === summaryData.end_id,\n              );\n\n              if (!exists) {\n                // \n                const newSummary = {\n                  start_id: summaryData.start_id,\n                  end_id: summaryData.end_id,\n                  content: summaryData.summary,\n                  timestamp: summaryData.timestamp,\n                };\n\n                const updatedSummaries = [newSummary, ...existingSummaries];\n                insertOrAssignVariables({ summary_history: updatedSummaries }, { type: 'script', script_id: scriptId });\n                console.log(` :  ${summaryData.start_id}-${summaryData.end_id}`);\n              } else {\n                console.log(` `);\n              }\n            } catch (e) {\n              console.error(':', e);\n            }\n          }\n\n          window.toastr?.success('');\n          console.log(' ');\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).autoDetectOldWindow = () => {\n        try {\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const last_message_id = getLastMessageId();\n          const chatVars = getVariables({ type: 'chat' });\n\n          // \n          if (\n            (chatVars.auto_summary_start_id === undefined || chatVars.auto_summary_start_id === null) &&\n            last_message_id > 0\n          ) {\n            console.log(` : ID=${current_chat_id}, =${last_message_id}`);\n            return (window as any).handleOldWindow();\n          } else {\n            console.log(` : ID=${current_chat_id}, =${last_message_id}`);\n            return null;\n          }\n        } catch (error) {\n          console.error(' :', error);\n          return null;\n        }\n      };\n\n      // \n      (window as any).smartResetChat = () => {\n        try {\n          // \n          insertOrAssignVariables({ auto_summary_start_id: null }, { type: 'chat' });\n\n          console.log(' ');\n          window.toastr?.success('');\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).fixStartId = () => {\n        try {\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const last_message_id = getLastMessageId();\n          const chatVars = getVariables({ type: 'chat' });\n          const current_start_id = chatVars.auto_summary_start_id;\n\n          console.log(' :', {\n            current_chat_id,\n            last_message_id,\n            current_start_id,\n          });\n\n          // 0\n          if (current_start_id === 0 || current_start_id === undefined || current_start_id === null) {\n            const new_start_id = last_message_id;\n            insertOrAssignVariables({ auto_summary_start_id: new_start_id }, { type: 'chat' });\n            console.log(` : ${new_start_id}`);\n            window.toastr?.success(`: ${new_start_id}`);\n          } else {\n            console.log(` : ${current_start_id}`);\n            window.toastr?.info(`: ${current_start_id}`);\n          }\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // MemoryUI\n      (window as any).checkMemoryUIConflict = () => {\n        try {\n          const memoryUI = (window as any).MemoryUI;\n          const ourSettings = useSettingsStore();\n\n          console.log(' MemoryUI:', {\n            memoryUI_exists: !!memoryUI,\n            memoryUI_autoSummarizeEnabled: memoryUI?.autoSummarizeEnabled,\n            our_auto_summarize_enabled: ourSettings.settings.auto_summarize_enabled,\n            our_summarize_interval: ourSettings.settings.summarize_interval,\n          });\n\n          if (memoryUI && memoryUI.autoSummarizeEnabled !== undefined) {\n            console.log(' MemoryUI');\n            window.toastr?.warning('MemoryUI');\n          } else {\n            console.log(' MemoryUI');\n            window.toastr?.info('MemoryUI');\n          }\n        } catch (error) {\n          console.error(' MemoryUI:', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).testFloorCalculation = () => {\n        try {\n          const last_message_id = getLastMessageId();\n          const chatVars = getVariables({ type: 'chat' });\n          const auto_summary_start_id = chatVars.auto_summary_start_id || 0;\n          const summarize_interval = 5;\n\n          console.log(' :', {\n            last_message_id,\n            auto_summary_start_id,\n            summarize_interval,\n          });\n\n          // \n          for (let floor = 0; floor <= 15; floor++) {\n            const relative_position = floor - auto_summary_start_id;\n            const should_trigger =\n              relative_position >= summarize_interval - 1 &&\n              relative_position % summarize_interval === summarize_interval - 1;\n            const start_id = auto_summary_start_id;\n            const end_id = floor;\n\n            console.log(\n              ` ${floor}: =${relative_position}, =${should_trigger}, =${start_id}-${end_id}`,\n            );\n          }\n\n          window.toastr?.info('');\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).resetAutoSummaryStart = () => {\n        try {\n          const scriptId = getScriptId();\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const last_message_id = getLastMessageId();\n\n          if (!current_chat_id) {\n            window.toastr?.error('ID');\n            return;\n          }\n\n          const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n          const auto_summary_data = scriptVars.auto_summary_data || {};\n          auto_summary_data[current_chat_id] = last_message_id;\n\n          insertOrAssignVariables({ auto_summary_data: auto_summary_data }, { type: 'script', script_id: scriptId });\n          console.log(` : ${last_message_id} (: ${current_chat_id})`);\n          window.toastr?.success(` ${last_message_id} `);\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).clearCurrentChatData = () => {\n        try {\n          // \n          insertOrAssignVariables({ auto_summary_start_id: null }, { type: 'chat' });\n          console.log(' ');\n          window.toastr?.success('');\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // ID\n      (window as any).watchChatId = () => {\n        let lastChatId = SillyTavern.getCurrentChatId();\n        console.log(' IDID:', lastChatId);\n\n        const checkChatId = () => {\n          const currentChatId = SillyTavern.getCurrentChatId();\n          if (currentChatId !== lastChatId) {\n            console.log(' ID:', lastChatId, '->', currentChatId);\n            lastChatId = currentChatId;\n          }\n        };\n\n        // \n        const interval = setInterval(checkChatId, 1000);\n\n        // \n        return () => {\n          clearInterval(interval);\n          console.log(' ID');\n        };\n      };\n\n      // \n      (window as any).showCurrentChatData = () => {\n        try {\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const chatVars = getVariables({ type: 'chat' });\n\n          console.log(' :', {\n            current_chat_id,\n            chat_vars: chatVars,\n            auto_summary_start_id: chatVars.auto_summary_start_id,\n          });\n\n          window.toastr?.info(`ID: ${current_chat_id}`);\n          return chatVars;\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n          return null;\n        }\n      };\n\n      // \n      (window as any).handleOldWindow = () => {\n        try {\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const last_message_id = getLastMessageId();\n          const chatVars = getVariables({ type: 'chat' });\n          const scriptId = getScriptId();\n          const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n          const existingSummaries = scriptVars?.summary_history || [];\n\n          console.log(' :', {\n            current_chat_id,\n            last_message_id,\n            chat_has_start_id: chatVars.auto_summary_start_id !== undefined,\n            existing_summaries_count: existingSummaries.length,\n            last_summary_end: existingSummaries.length > 0 ? existingSummaries[0].end_id : 'none',\n          });\n\n          // \n          if (chatVars.auto_summary_start_id === undefined || chatVars.auto_summary_start_id === null) {\n            let auto_summary_start_id = last_message_id;\n\n            if (existingSummaries.length > 0) {\n              const lastSummary = existingSummaries[0];\n              const lastSummaryEnd = lastSummary.end_id || 0;\n\n              if (last_message_id > lastSummaryEnd) {\n                auto_summary_start_id = lastSummaryEnd + 1;\n                console.log(\n                  ` :  ${auto_summary_start_id}  ( ${lastSummaryEnd} )`,\n                );\n              } else {\n                console.log(` :  ${last_message_id} ()`);\n              }\n            } else {\n              console.log(` :  ${last_message_id} ()`);\n            }\n\n            // \n            insertOrAssignVariables({ auto_summary_start_id: auto_summary_start_id }, { type: 'chat' });\n\n            window.toastr?.info(`: ${auto_summary_start_id}`);\n          } else {\n            console.log(` : ${chatVars.auto_summary_start_id}`);\n            window.toastr?.info(`: ${chatVars.auto_summary_start_id}`);\n          }\n\n          return {\n            chat_id: current_chat_id,\n            last_message_id,\n            auto_summary_start_id: chatVars.auto_summary_start_id,\n            existing_summaries: existingSummaries.length,\n          };\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n          return null;\n        }\n      };\n\n      // \n      (window as any).checkAutoSummaryStatus = () => {\n        try {\n          const store = useSettingsStore();\n          if (!store || !store.settings) {\n            console.warn(' ');\n            return null;\n          }\n\n          const settings = store.settings;\n          const scriptId = getScriptId();\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n          const last_message_id = getLastMessageId();\n          const auto_summary_data = scriptVars.auto_summary_data || {};\n          const auto_summary_start_id = auto_summary_data[current_chat_id] || 0;\n          const relative_position = last_message_id - auto_summary_start_id + 1;\n          const should_trigger = relative_position % settings.summarize_interval === 0;\n\n          const status = {\n            current_chat_id,\n            last_message_id,\n            auto_summary_start_id,\n            relative_position,\n            summarize_interval: settings.summarize_interval,\n            should_trigger,\n            calculation: `${relative_position} % ${settings.summarize_interval} = ${relative_position % settings.summarize_interval}`,\n            auto_summarize_enabled: settings.auto_summarize_enabled,\n            api_key_set: !!settings.api_key,\n            all_chat_data: auto_summary_data,\n          };\n\n          console.log(' :', status);\n          window.toastr?.info(``);\n          return status;\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n          return null;\n        }\n      };\n\n      // \n      const settingsStore = useSettingsStore();\n      if (settingsStore && settingsStore.settings) {\n        // \n        const unwatch = watch(\n          () => settingsStore.settings.auto_summarize_enabled,\n          (newValue, oldValue) => {\n            console.log(` : ${oldValue} -> ${newValue}`);\n            if (newValue && !oldValue) {\n              // \n              try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                  console.warn('script_id ');\n                  return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                const auto_summary_start_id = scriptVars.auto_summary_start_id;\n\n                // \n                if (auto_summary_start_id === undefined || auto_summary_start_id === null) {\n                  const last_message_id = getLastMessageId();\n                  insertOrAssignVariables(\n                    { auto_summary_start_id: last_message_id },\n                    { type: 'script', script_id: scriptId },\n                  );\n                  console.log(` : ${last_message_id}`);\n                  window.toastr?.info(` ${last_message_id} `);\n                } else {\n                  console.log(` : ${auto_summary_start_id}`);\n                  window.toastr?.info(`: ${auto_summary_start_id}`);\n                }\n              } catch (error) {\n                console.error(' :', error);\n              }\n            }\n          },\n          { immediate: false },\n        );\n\n        // \n        $(window).on('pagehide', () => {\n          unwatch();\n        });\n      }\n\n      window.toastr.success('mzrodyu');\n    }, 200);\n  }, 100);\n});\n"],"names":["module","exports","y","x","__webpack_require__","d","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__","content","__esModule","default","id","locals","add","cssWithMappingToString","list","toString","this","map","item","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","push","$","setTimeout","isAdding","addNavButton","possibleSelectors","topBar","foundSelector","selector","found","console","log","existingButton","remove","targetContainer","settingsHolder","navButton","outerHTML","substring","firstChild","children","first","insertBefore","prepend","on","e","preventDefault","stopPropagation","panel","is","fadeOut","fadeIn","toastr","error","css","parentElement","className","setInterval","eventOn","tavern_events","CHAT_CHANGED","Vue","___CSS_LOADER_EXPORT___","z","warn","object","obj","parse","data","def","string","number","boolean","array","schema","Array","isArray","prefault","Settings","api_endpoint","api_key","model","max_tokens","temperature","auto_summarize_enabled","summarize_interval","start_message_id","end_message_id","table_start_message_id","table_end_message_id","summary_history","start_id","end_id","useSettingsStore","defineStore","getScriptIdSafely","settings","script_id","ref","getVariables","type","initSettings","realVariables","Object","keys","value","saveTimeout","watch","new_settings","clearTimeout","insertOrAssignVariables","saved","window","message","immediate","deep","saveSettings","success","reloadSettings","useSummaryHistoryStore","addSummary","chat_id","chatHistory","chatData","unshift","slice","getSummaryHistory","listToStyles","parentId","styles","newStyles","part","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","appendChild","update","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","sfc","props","target","__vccOpts","key","val","async","fetchAvailableModels","trim","apiUrl","URL","startsWith","possibleEndpoints","replace","modelsUrl","response","fetch","method","headers","Authorization","status","ok","contentType","get","includes","json","models","name","summarizeMessages","messages","msg","getChatMessages","summaryPrompt","role","body","errorMessage","choices","code","cssMapping","base64","sourceMapping","globalScriptId","getScriptIdSafe","getScriptId","setGlobalScriptId","getChatIdSafe","getChatId","SillyTavern","getCurrentChatId","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","n","getter","a","definition","o","defineProperty","enumerable","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","_hoisted_1","class","style","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","__name","setup","__props","settingsStore","storeToRefs","available_models","loading_models","hide_range","hidden_messages","hidden_display_expanded","is_summarizing","is_generating_table","headerTemplates","selectedTemplate","currentTemplate","saveGenerationStatus","scriptId","stopGeneration","info","saveHeaderTemplates","header_templates","loadTemplate","parseInt","showAddTemplateDialog","prompt","saveTemplate","warning","deleteTemplate","confirm","splice","loadHiddenMessages","possibleFields","field","saveHiddenMessages","dataToSave","onMounted","templates","loadHeaderTemplates","scriptVars","summarizing","generating_table","loadGenerationStatus","handleTestButton","handleSaveSettings","handleReloadSettings","handleResetAutoSummaryStart","resetAutoSummaryStart","handle_fetch_models","handle_test_connection","handle_summarize","chatMessages","lastMessageId","getLastMessageId","hide_state","summary","last_summary","handle_generate_table","headersInput","split","h","messageRange","messagesText","aiPrompt","statusText","result","aiResponse","aiTableData","jsonText","jsonMatch","match","parseError","tableData","table_history","handle_create_table","emptyTableData","handle_hide_messages","ranges","range","messageIds","start","end","Number","hiddenCount","messagesToHide","messageId","find","message_id","is_hidden","triggerSlash","handle_show_messages","trimmed","s","isNaN","parseMessageRange","messagesToShow","shownCount","hiddenMsg","_ctx","_cache","$event","placeholder","onClick","disabled","min","max","step","onmouseover","onmouseout","onChange","template","width","height","borderRadius","backgroundColor","transition","showToast","validHiddenMessages","removedCount","handle_refresh_hidden","findIndex","handle_unhide_single","historyStore","expandedState","Map","refreshSummaryHistory","isExpanded","handleRefreshData","tryParentWindowCopy","text","Promise","resolve","parentDoc","parent","parentBody","textarea","focus","select","setSelectionRange","execCommand","err","execCommandCopy","position","left","top","opacity","pointerEvents","showManualCopyDialog","existingOverlay","getElementById","overlay","container","header","innerHTML","buttonContainer","closeButton","textContent","background","copyButton","onclick","handleKeyDown","removeEventListener","addEventListener","copySummary","successMessage","clipboard","isSecureContext","writeText","clipboardErr","copyToClipboard","createSummaryWorldbook","characterName","currentCharacter","getCharData","charError","worldbookName","Date","toISOString","getWorldbookNames","createWorldbook","rebindChatWorldbook","bindError","promptForWorldbook","worldbookNames","dialog","append","selected","showDebugPanel","color","forEach","button","btn","outputArea","output","scrollTop","scrollHeight","testCompleteAutoSummary","syncAutoSummaryData","checkCurrentFloor","testFloorCalculation","checkAutoSummaryStatus","smartResetChat","current","set","summaryIndex","selectedWorldbook","newEntry","toLocaleDateString","enabled","strategy","keys_secondary","logic","scan_depth","depth","comment","insertion_order","case_sensitive","name_is_regex","keys_are_regex","selective_logic","secondary_keys_logic","activation_threshold","order","group","local_id","depth_entries","depth_entries_all","search_range","force_activation","disable","exclude_recursion","hidden","priority","comment_is_regex","content_is_regex","secondary_keys_are_regex","keys_secondary_are_regex","uid","now","createWorldbookEntries","tableExpandedState","isTableExpanded","copyTable","tableItem","row","chat_vars","refreshTableHistory","idx","rowIdx","cell","cellIdx","_","toolExpandedState","antiClicheInput","antiClicheOutput","isProcessingAntiCliche","characterDescription","characterCardOutput","isGeneratingCharacter","modifyRequest","isModifyingCharacter","isDataLoaded","saveToolsDataImmediate","tools_antiCliche","input","tools_characterCard","description","tools_expandedState","fromEntries","antiCliche_input_length","antiCliche_output_length","character_desc_length","character_output_length","saveToolsData","debounce","savedData","entries","loadToolsData","onBeforeUnmount","cancel","toggleToolExpanded","toolName","isToolExpanded","readText","tempTextArea","textArea","targetDoc","targetBody","existingModal","modal","copyBtn","closeBtn","handleEsc","timeOut","handleAntiClicheProcess","copyAntiClicheResult","handleGenerateCharacterCard","clearCharacterForm","copyCharacterCard","clearAntiClicheForm","handleModifyCharacterCard","clearModifyRequest","tabs","label","icon","activeTab","componentMap","SummaryTab","table","TableTab","SettingsTab","tools","ToolsTab","currentComponent","computed","componentProps","closePanel","tab","flex","padding","cursor","textAlign","display","alignItems","justifyContent","gap","borderBottom","borderBottomColor","tabKey","MainPanel","existingPanel","panelContainer","app","createApp","use","createPinia","mount","__vue_app__","stack","checkAutoSummarize","store","has_api_key","last_message_id","current_chat_id","auto_summary_start_id","chatVars","auto_summary_start_id_key","has_start_id","existing_start_id","existingSummaries","lastSummaryEnd","relative_position","should_trigger","calculation","expected_trigger_at_floor","will_summarize_range","floor_explanation","then","new_start_id","catch","CHARACTER_MESSAGE_RENDERED","chat_file_name","current_floor","saved_start_id","saved_summary","next_trigger_floor","floor","floorType","autoDetectOldWindow","testAutoSummarize","localStorage","getItem","summaryData","some","updatedSummaries","timestamp","handleOldWindow","fixStartId","current_start_id","checkMemoryUIConflict","memoryUI","MemoryUI","ourSettings","memoryUI_exists","memoryUI_autoSummarizeEnabled","autoSummarizeEnabled","our_auto_summarize_enabled","our_summarize_interval","auto_summary_data","clearCurrentChatData","watchChatId","lastChatId","interval","currentChatId","clearInterval","showCurrentChatData","chat_has_start_id","existing_summaries_count","last_summary_end","existing_summaries","api_key_set","all_chat_data","unwatch","newValue","oldValue"],"sourceRoot":""}