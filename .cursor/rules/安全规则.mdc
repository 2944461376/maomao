---
alwaysApply: true
description: 禁用危险文件操作命令的安全规则
---

# 安全操作规则

## 禁止使用的命令

以下命令严格禁止使用：
- `rm` - 删除文件或目录
- `mv` - 移动或重命名文件
- `del` - Windows删除命令
- `rmdir` - 删除目录
- `rm -rf` - 强制递归删除
- `find ... -delete` - 通过查找删除
- `git rm` - Git删除命令

## 替代方案

### 1. 重命名文件
```typescript
// ❌ 错误：使用 mv
mv old_file.ts new_file.ts

// ✅ 正确：使用 Edit 工具
// 读取原文件内容，然后写入新文件
```

### 2. 删除文件
```typescript
// ❌ 错误：使用 rm
rm file.ts

// ✅ 正确：
// 1. 先警告用户
// 2. 使用 git rm（如果需要）
// 3. 或明确告知用户手动删除
```

### 3. 移动文件
```typescript
// ❌ 错误：使用 mv
mv src/file.ts utils/file.ts

// ✅ 正确：
// 1. 读取原文件内容
// 2. 在新位置创建文件
// 3. 明确告知用户需要删除原文件
```

## 安全检查清单

在进行任何文件操作前：
1. [ ] 确认不是 rm、mv 等危险命令
2. [ ] 如果需要重命名，使用 Edit 工具
3. [ ] 如果需要删除，先明确警告用户
4. [ ] 优先使用 git 等版本控制工具
5. [ ] 考虑使用更安全的方式达到目的

## 示例

```typescript
// ❌ 错误做法
// mv old.ts new.ts

// ✅ 正确做法
// 1. 使用 Read 工具读取 old.ts
// 2. 使用 Write 工具写入 new.ts
// 3. 告知用户操作完成，可手动删除原文件
```